{"version":3,"sources":["G:/Projects/ТхПр/thpr2/src/$_gendir lazy","G:/Projects/ТхПр/thpr2/src/api/node_modules/uuid/index.js","G:/Projects/ТхПр/thpr2/src/api/node_modules/uuid/lib/bytesToUuid.js","G:/Projects/ТхПр/thpr2/src/api/node_modules/uuid/lib/rng-browser.js","G:/Projects/ТхПр/thpr2/src/api/node_modules/uuid/v1.js","G:/Projects/ТхПр/thpr2/src/api/node_modules/uuid/v4.js","G:/Projects/ТхПр/thpr2/src/api/src/ts/classes/Application.ts","G:/Projects/ТхПр/thpr2/src/api/src/ts/classes/CommandFactory.ts","G:/Projects/ТхПр/thpr2/src/api/src/ts/classes/CommandOutput.ts","G:/Projects/ТхПр/thpr2/src/api/src/ts/classes/CommandStack.ts","G:/Projects/ТхПр/thpr2/src/api/src/ts/classes/Condition.ts","G:/Projects/ТхПр/thpr2/src/api/src/ts/classes/Connection.ts","G:/Projects/ТхПр/thpr2/src/api/src/ts/classes/DataProvider.ts","G:/Projects/ТхПр/thpr2/src/api/src/ts/classes/Database.ts","G:/Projects/ТхПр/thpr2/src/api/src/ts/classes/DatabaseContext.ts","G:/Projects/ТхПр/thpr2/src/api/src/ts/classes/DbCommandStack.ts","G:/Projects/ТхПр/thpr2/src/api/src/ts/classes/DbRole.ts","G:/Projects/ТхПр/thpr2/src/api/src/ts/classes/DbTransaction.ts","G:/Projects/ТхПр/thpr2/src/api/src/ts/classes/DbUser.ts","G:/Projects/ТхПр/thpr2/src/api/src/ts/classes/Department.ts","G:/Projects/ТхПр/thpr2/src/api/src/ts/classes/Document.ts","G:/Projects/ТхПр/thpr2/src/api/src/ts/classes/DocumentContext.ts","G:/Projects/ТхПр/thpr2/src/api/src/ts/classes/DocumentInfo.ts","G:/Projects/ТхПр/thpr2/src/api/src/ts/classes/DocumentManager.ts","G:/Projects/ТхПр/thpr2/src/api/src/ts/classes/EventArgs.ts","G:/Projects/ТхПр/thpr2/src/api/src/ts/classes/EventEmitter.ts","G:/Projects/ТхПр/thpr2/src/api/src/ts/classes/Factory.ts","G:/Projects/ТхПр/thpr2/src/api/src/ts/classes/Level.ts","G:/Projects/ТхПр/thpr2/src/api/src/ts/classes/LevelNode.ts","G:/Projects/ТхПр/thpr2/src/api/src/ts/classes/Reference.ts","G:/Projects/ТхПр/thpr2/src/api/src/ts/classes/ResourceManager.ts","G:/Projects/ТхПр/thpr2/src/api/src/ts/classes/Result.ts","G:/Projects/ТхПр/thpr2/src/api/src/ts/classes/Transaction.ts","G:/Projects/ТхПр/thpr2/src/api/src/ts/classes/TreeNode.ts","G:/Projects/ТхПр/thpr2/src/api/src/ts/classes/Variant.ts","G:/Projects/ТхПр/thpr2/src/api/src/ts/entryPoint.ts","G:/Projects/ТхПр/thpr2/src/api/src/ts/enums/TransactionStatus.ts","G:/Projects/ТхПр/thpr2/src/api/src/ts/enums/TypeNames.ts","G:/Projects/ТхПр/thpr2/src/api/src/ts/enums/event_names/ApplicationEventNames.ts","G:/Projects/ТхПр/thpr2/src/api/src/ts/enums/event_names/DocumentEventNames.ts","G:/Projects/ТхПр/thpr2/src/api/src/ts/enums/event_names/DocumentManagerEventNames.ts","G:/Projects/ТхПр/thpr2/src/api/test/fakes/FakeApplication.ts","G:/Projects/ТхПр/thpr2/src/api/test/fakes/FakeDataProvider.ts","G:/Projects/ТхПр/thpr2/src/app/app.module.ts","G:/Projects/ТхПр/thpr2/src/app/components/app/app.component.html","G:/Projects/ТхПр/thpr2/src/app/components/app/app.component.scss","G:/Projects/ТхПр/thpr2/src/app/components/app/app.component.ts","G:/Projects/ТхПр/thpr2/src/app/components/color-picker/color-picker.component.ts","G:/Projects/ТхПр/thpr2/src/app/components/color-picker/color-picker.css","G:/Projects/ТхПр/thpr2/src/app/components/color-picker/color-picker.html","G:/Projects/ТхПр/thpr2/src/app/components/document-editor/document-editor.component.html","G:/Projects/ТхПр/thpr2/src/app/components/document-editor/document-editor.component.scss","G:/Projects/ТхПр/thpr2/src/app/components/document-editor/document-editor.component.ts","G:/Projects/ТхПр/thpr2/src/app/components/document-list/document-list.component.html","G:/Projects/ТхПр/thpr2/src/app/components/document-list/document-list.component.scss","G:/Projects/ТхПр/thpr2/src/app/components/document-list/document-list.component.ts","G:/Projects/ТхПр/thpr2/src/app/components/editor/editor.component.html","G:/Projects/ТхПр/thpr2/src/app/components/editor/editor.component.scss","G:/Projects/ТхПр/thpr2/src/app/components/editor/editor.component.ts","G:/Projects/ТхПр/thpr2/src/app/components/editor/events/position-changed-args.ts","G:/Projects/ТхПр/thpr2/src/app/components/editor/extract-image.ts","G:/Projects/ТхПр/thpr2/src/app/components/editor/get-loader.ts","G:/Projects/ТхПр/thpr2/src/app/components/editor/glow.ts","G:/Projects/ТхПр/thpr2/src/app/components/editor/input.ts","G:/Projects/ТхПр/thpr2/src/app/components/editor/my-extract.ts","G:/Projects/ТхПр/thpr2/src/app/components/editor/objects/Layouts/alignment.enum.ts","G:/Projects/ТхПр/thpr2/src/app/components/editor/objects/Layouts/cell.ts","G:/Projects/ТхПр/thpr2/src/app/components/editor/objects/Layouts/table.ts","G:/Projects/ТхПр/thpr2/src/app/components/editor/objects/aligner.ts","G:/Projects/ТхПр/thpr2/src/app/components/editor/objects/button.ts","G:/Projects/ТхПр/thpr2/src/app/components/editor/objects/case.ts","G:/Projects/ТхПр/thpr2/src/app/components/editor/objects/condition.ts","G:/Projects/ТхПр/thpr2/src/app/components/editor/objects/connection.ts","G:/Projects/ТхПр/thpr2/src/app/components/editor/objects/delete-button.ts","G:/Projects/ТхПр/thpr2/src/app/components/editor/objects/editor-object.ts","G:/Projects/ТхПр/thpr2/src/app/components/editor/objects/phantom-connection.ts","G:/Projects/ТхПр/thpr2/src/app/components/editor/objects/port.ts","G:/Projects/ТхПр/thpr2/src/app/components/editor/objects/selection-frame.ts","G:/Projects/ТхПр/thpr2/src/app/components/editor/objects/simple-block.ts","G:/Projects/ТхПр/thpr2/src/app/components/editor/selector-fn.ts","G:/Projects/ТхПр/thpr2/src/app/components/editor/zoom.ts","G:/Projects/ТхПр/thpr2/src/app/components/level-editor/level-editor.component.html","G:/Projects/ТхПр/thpr2/src/app/components/level-editor/level-editor.component.scss","G:/Projects/ТхПр/thpr2/src/app/components/level-editor/level-editor.component.ts","G:/Projects/ТхПр/thpr2/src/app/components/listener-subscription.ts","G:/Projects/ТхПр/thpr2/src/app/components/main-menu/main-menu.component.html","G:/Projects/ТхПр/thpr2/src/app/components/main-menu/main-menu.component.scss","G:/Projects/ТхПр/thpr2/src/app/components/main-menu/main-menu.component.ts","G:/Projects/ТхПр/thpr2/src/app/components/navigation/collapsible-tree.ts","G:/Projects/ТхПр/thpr2/src/app/components/navigation/navigation.component.html","G:/Projects/ТхПр/thpr2/src/app/components/navigation/navigation.component.scss","G:/Projects/ТхПр/thpr2/src/app/components/navigation/navigation.component.ts","G:/Projects/ТхПр/thpr2/src/app/components/sidebar/sidebar.component.html","G:/Projects/ТхПр/thpr2/src/app/components/sidebar/sidebar.component.scss","G:/Projects/ТхПр/thpr2/src/app/components/sidebar/sidebar.component.ts","G:/Projects/ТхПр/thpr2/src/app/ext/bump.ts","G:/Projects/ТхПр/thpr2/src/app/models/navigation-record.ts","G:/Projects/ТхПр/thpr2/src/app/modules/app-routing.module.ts","G:/Projects/ТхПр/thpr2/src/app/modules/material.module.ts","G:/Projects/ТхПр/thpr2/src/app/observable-listener.ts","G:/Projects/ТхПр/thpr2/src/app/services/app-api.service.ts","G:/Projects/ТхПр/thpr2/src/app/services/data.service.ts","G:/Projects/ТхПр/thpr2/src/app/services/signal-r.service.ts","G:/Projects/ТхПр/thpr2/src/app/services/toast.service.ts","G:/Projects/ТхПр/thpr2/src/app/toast-custom-options.ts","G:/Projects/ТхПр/thpr2/src/environments/environment.ts","G:/Projects/ТхПр/thpr2/src/main.ts","util (ignored)","util (ignored)?74ee"],"names":[],"mappings":";;;;;AAAA;AACA,+CAA+C,wDAAwD,EAAE;AACzG;AACA,4CAA4C,WAAW;AACvD;AACA;AACA,4E;;;;;;;ACNA;AACA;;AAEA;AACA;AACA;;AAEA;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA,eAAe,SAAS;AACxB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;ACtBA;AACA;AACA;AACA;AACA;;AAEA,8CAA8C;AAC9C;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,QAAQ;AAC9B;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;;;;;;;;AChCA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,mCAAmC;AACnC;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,iBAAiB,OAAO;AACxB;AACA;;AAEA;AACA;;AAEA;;;;;;;;ACnGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,oBAAoB,SAAS;AAC7B;AACA;AACA;;AAEA;AACA;;AAEA;;;;;;;;;;;AC1BA,oGAA4C;AAE5C,0FAAkC;AAGlC,gIAAiF;AAUjF;;;;;GAKG;AACH,iBAAyB,SAAQ,2BAAmC;IAEhE,gDAAgD;IAEzC,mBAAmB,CAAC,KAAyB;QAChD,MAAM,GAAG,GAAG,IAAI,CAAC,gBAAgB,CAAC;QAClC,IAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;QAC9B,IAAI,CAAC,IAAI,CAAC,6CAAqB,CAAC,uBAAuB,EAAE,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAClF,EAAC,MAAM,EAAG,IAAI,EAAE,IAAI,EAAG,EAAC,QAAQ,EAAG,KAAK,EAAE,QAAQ,EAAG,GAAG,EAAC,EAAC,CAAC,CAAC,CAAC;IACrE,CAAC;IAEM,gBAAgB,CAAC,KAAsB;QAC1C,MAAM,GAAG,GAAG,IAAI,CAAC,aAAa,CAAC;QAC/B,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;QAC3B,IAAI,CAAC,IAAI,CAAC,6CAAqB,CAAC,oBAAoB,EAAE,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAC/E,EAAC,MAAM,EAAG,IAAI,EAAE,IAAI,EAAG,EAAC,QAAQ,EAAG,KAAK,EAAE,QAAQ,EAAG,GAAG,EAAC,EAAC,CAAC,CAAC,CAAC;IACrE,CAAC;IAEM,mBAAmB,CAAC,KAAyB;QAChD,MAAM,GAAG,GAAG,IAAI,CAAC,gBAAgB,CAAC;QAClC,IAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;QAC9B,IAAI,CAAC,IAAI,CAAC,6CAAqB,CAAC,uBAAuB,EAAE,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAClF,EAAC,MAAM,EAAG,IAAI,EAAE,IAAI,EAAG,EAAC,QAAQ,EAAG,KAAK,EAAE,QAAQ,EAAG,GAAG,EAAC,EAAC,CAAC,CAAC,CAAC;IACrE,CAAC;IAEM,WAAW,CAAC,KAAiB;QAChC,MAAM,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAC;QAC1B,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;QACtB,IAAI,CAAC,IAAI,CAAC,6CAAqB,CAAC,eAAe,EAAE,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAC1E,EAAC,MAAM,EAAG,IAAI,EAAE,IAAI,EAAG,EAAC,QAAQ,EAAG,KAAK,EAAE,QAAQ,EAAG,GAAG,EAAC,EAAC,CAAC,CAAC,CAAC;IACrE,CAAC;IAEM,YAAY,CAAC,EAAe;QAC/B,IAAI,CAAC,eAAe,GAAG,EAAE,CAAC;IAC9B,CAAC;IAEM,mBAAmB;QACtB,MAAM,CAAC,IAAI,CAAC,gBAAgB,CAAC;IACjC,CAAC;IAEM,gBAAgB;QACnB,MAAM,CAAC,IAAI,CAAC,aAAa,CAAC;IAC9B,CAAC;IAEM,mBAAmB;QACtB,MAAM,CAAC,IAAI,CAAC,gBAAgB,CAAC;IACjC,CAAC;IAEM,WAAW;QACd,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC;IACzB,CAAC;IAEM,YAAY;QACf,MAAM,CAAC,IAAI,CAAC,eAAe,CAAC;IAChC,CAAC;IAKD;;OAEG;IACH,IAAW,cAAc;QACrB,MAAM,CAAC,IAAI,CAAC,eAAe,CAAC;IAChC,CAAC;IAGD;;OAEG;IACH,IAAW,YAAY;QACnB,MAAM,CAAC,IAAI,CAAC,aAAa,CAAC;IAC9B,CAAC;IAED;;;OAGG;IACH,gBAAgB;QACZ,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,gBAAgB,EAAE,CAAC;IAChD,CAAC;IAID;;;OAGG;IACH,IAAW,eAAe;QACtB,MAAM,CAAC,IAAI,CAAC,gBAAgB,CAAC;IACjC,CAAC;IAED;;OAEG;IACH;QACI,KAAK,EAAE,CAAC;QAER,IAAI,CAAC,QAAQ,GAAG,IAAI,iBAAO,CAAC,IAAI,CAAC,CAAC;QAClC,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,OAAO,CAAC,sBAAsB,CAAC,IAAI,CAAC,CAAC;QAClE,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,OAAO,CAAC,sBAAsB,EAAE,CAAC;QAE9D,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,QAAQ,CAAC,mBAAmB,EAAE,CAAC;QACzD,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,QAAQ,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;QAC3D,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,QAAQ,CAAC,mBAAmB,EAAE,CAAC;IAC7D,CAAC;IAID;;;OAGG;IACH,IAAW,eAAe;QACtB,MAAM,CAAC,IAAI,CAAC,gBAAgB,CAAC;IACjC,CAAC;IAID;;OAEG;IACH,IAAW,OAAO;QACd,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC;IACzB,CAAC;CACJ;AA7HD,kCA6HC;;;;;;;;;;;AC9ID;;GAEG;AACH;IAII;;;OAGG;IACH,YAAY,GAAkB;QAC1B,IAAI,CAAC,YAAY,GAAG,GAAG,CAAC;IAC5B,CAAC;IAED;;OAEG;IACH,IAAW,WAAW;QAClB,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC;IAC7B,CAAC;IAEM,UAAU,CAAC,OAAgB;QAC9B,MAAM,IAAI,KAAK,CAAC,qBAAqB,CAAC,CAAC;IAC3C,CAAC;IAEM,cAAc,CAAC,OAA0B,EAAE,OAAgB,EAAE,OAAa;QAC7E,MAAM,IAAI,KAAK,CAAC,qBAAqB,CAAC,CAAC;IAC3C,CAAC;CACJ;AA1BD,wCA0BC;;;;;;;;;;ACnCD;;GAEG;;AAKH;;GAEG;AACH;IAII;;;;;OAKG;IACH,YAAY,EAAC,IAAI,EAAE,MAAM,EAAkC;QACvD,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;QAClB,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC;IAC1B,CAAC;IAED;;;OAGG;IACH,IAAW,IAAI;QACX,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC;IACtB,CAAC;IAED;;;OAGG;IACH,IAAW,MAAM;QACb,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC;IACxB,CAAC;CACJ;AA9BD,sCA8BC;;;;;;;;;;;ACnCD;;;GAGG;AACH;IAOI;;;;OAIG;IACH,YAAY,OAA0B;QAClC,IAAI,CAAC,UAAU,GAAG,IAAI,KAAK,EAAY,CAAC;QACxC,IAAI,CAAC,aAAa,GAAG,IAAI,KAAK,EAAY,CAAC;QAC3C,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC;IAC5B,CAAC;IAID;;;OAGG;IACH,IAAW,OAAO;QACd,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC;IACzB,CAAC;IAED,IAAW,OAAO,CAAC,KAAwB;QACvC,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;IAC1B,CAAC;IAED;;OAEG;IACH,IAAW,MAAM;QACb,MAAM,CAAC,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC;IACrC,CAAC;IAED;;;;;;;;;;;;OAYG;IACH,IAAI,CAAC,OAAiB;QAClB,MAAM,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,WAAW,CAAC,OAAO,CAAC;QAE1D,EAAE,EAAC,OAAO,CAAC,EAAC;YACR,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;YACjC,gEAAgE;YAChE,+DAA+D;YAC/D,oBAAoB;YACpB,IAAI,CAAC,UAAU,GAAG,IAAI,KAAK,EAAY,CAAC;YACxC,MAAM,CAAC,OAAO,CAAC,aAAa,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC;QAC3C,CAAC;QACD,IAAI,EAAC;YACD,MAAM,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,EAC9B,+CAA+C,CAAC,CAAC;QACzD,CAAC;IACL,CAAC;IAED;;;;;OAKG;IACH,IAAI;QAEA,MAAM,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,WAAW,CAAC,OAAO,CAAC;QAE1D,EAAE,EAAC,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,EAAC;YAC1B,MAAM,GAAG,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,EAAE,CAAC;YACrC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;YAE1B,MAAM,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC;QACtB,CAAC;QACD,IAAI,EAAC;YACD,MAAM,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,EAC9B,iDAAiD,CAAC,CAAC;QAC3D,CAAC;IACL,CAAC;IAED;;;;;OAKG;IACH,IAAI;QAEA,MAAM,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,WAAW,CAAC,OAAO,CAAC;QAE1D,EAAE,EAAC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,EAAC;YACvB,MAAM,GAAG,GAAG,IAAI,CAAC,UAAU,CAAC,GAAG,EAAE,CAAC;YAClC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;YAE7B,MAAM,CAAC,GAAG,CAAC,OAAO,EAAE,CAAC,MAAM,CAAC;QAChC,CAAC;QACD,IAAI,EAAC;YACD,MAAM,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,EAC9B,oDAAoD,CAAC,CAAC;QAC9D,CAAC;IACL,CAAC;CACJ;AAhHD,oCAgHC;;;;;;;;;;;ACxHD,oGAA4C;AAY5C,4FAA6C;AAC7C,4GAA6D;AAK7D;;GAEG;AACH,eAAuB,SAAQ,2BAAmC;IAE9D,MAAM,CAAC,KAAU;QACb,IAAI,CAAC,GAAG,GAAG,KAAK,CAAC;IACrB,CAAC;IAEO,qBAAqB;QACzB,IAAI,WAAW,GAAG,IAAI,CAAC,SAAS,CAAC,qBAAqB,EAAE,CAAC;QACzD,EAAE,EAAC,CAAC,WAAW,IAAI,WAAW,CAAC,MAAM,IAAI,qCAAiB,CAAC,OAAO,CAAC;YAAC,MAAM,CAAC,KAAK,CAAC;QACjF,IAAI;YAAC,MAAM,CAAC,IAAI,CAAC;IACrB,CAAC;IAID,IAAW,QAAQ;QACf,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC;IAC1B,CAAC;IAED,YAAY,GAAe,EAAE,IAAa,EAAE,IAAa;QACrD,KAAK,EAAE,CAAC;QACR,IAAI,CAAC,SAAS,GAAG,GAAG,CAAC;QACrB,IAAI,CAAC,SAAS,GAAG,qBAAS,CAAC,SAAS,CAAC;QACrC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;QAClB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;QAClB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;QAClB,IAAI,CAAC,iBAAiB,GAAG,EAAE,CAAC;QAC5B,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;IACxB,CAAC;IAED;;;;OAIG;IACH,qBAAqB;QACjB,IAAI,MAAM,GAAG,IAAI,CAAC,SAAS,EAAiB,CAAC;QAC7C,IAAI,OAAO,GAAG,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAuB,CAAC;QAC9D,IAAI,QAAQ,GAAG,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;QACpD,MAAM,CAAC,QAAQ,CAAC,SAAS,EAAE,CAAC;IAChC,CAAC;IAED;;;;;OAKG;IACH,SAAS;QACL,IAAI,OAAO,GAAG,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAuB,CAAC;QAC9D,IAAI,QAAQ,GAAG,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QAClD,MAAM,CAAC,QAAQ,CAAC,SAAS,EAAE,CAAC;IAChC,CAAC;IAED;;;OAGG;IACH,MAAM;QAEF,EAAE,EAAC,CAAC,IAAI,CAAC,qBAAqB,EAAE,CAAC,EAAC;YAC9B,MAAM,IAAI,KAAK,CAAC,yEAAyE,CAAC,CAAC;QAC/F,CAAC;QAED,IAAI,OAAO,GAAG,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAuB,CAAC;QAC9D,IAAI,QAAQ,GAAG,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QAElD,IAAI,MAAM,GAAG,QAAQ,CAAC,MAAM,EAAE,CAAC;QAC/B,EAAE,EAAC,MAAM,CAAC,OAAO,CAAC;YAAE,IAAI,CAAC,QAAQ,CAAC,qBAAqB,EAAoB,CAAC,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,EAAC,IAAI,CAAC,CAAC;QAE1G,MAAM,CAAC,MAAM,CAAC;IAClB,CAAC;IAED;;;OAGG;IACH,IAAI;QACA,EAAE,EAAC,CAAC,IAAI,CAAC,qBAAqB,EAAE,CAAC,EAAC;YAC9B,MAAM,IAAI,KAAK,CAAC,yEAAyE,CAAC,CAAC;QAC/F,CAAC;QACD,IAAI,OAAO,GAAG,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAuB,CAAC;QAC9D,IAAI,QAAQ,GAAG,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QAElD,MAAM,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC;IAC3B,CAAC;IAED;;;OAGG;IACH,MAAM;QACF,EAAE,EAAC,CAAC,IAAI,CAAC,qBAAqB,EAAE,CAAC,EAAC;YAC9B,MAAM,IAAI,KAAK,CAAC,yEAAyE,CAAC,CAAC;QAC/F,CAAC;QACD,IAAI,OAAO,GAAG,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAuB,CAAC;QAC9D,IAAI,QAAQ,GAAG,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QAElD,MAAM,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC;IAC7B,CAAC;IAED;;;;OAIG;IACH,WAAW;QACP,IAAI,OAAO,GAAG,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAuB,CAAC;QAC9D,IAAI,QAAQ,GAAG,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QAClD,MAAM,CAAC,QAAQ,CAAC,WAAW,EAAE,CAAC;IAClC,CAAC;IASD,IAAW,QAAQ;QACf,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC;IAC1B,CAAC;IAED,IAAW,QAAQ,CAAC,KAAa;QAC7B,EAAE,EAAC,CAAC,IAAI,CAAC,qBAAqB,EAAE,CAAC,EAAC;YAC9B,MAAM,IAAI,KAAK,CAAC,yEAAyE,CAAC,CAAC;QAC/F,CAAC;QACD,EAAE,EAAC,IAAI,CAAC,WAAW,EAAE,IAAI,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,gBAAgB,EAAE,CAAC,EAAC;YACnE,MAAM,IAAI,KAAK,CAAC,yEAAyE,CAAC,CAAC;QAC/F,CAAC;QACD,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;QACtB,IAAI,CAAC,QAAQ,CAAC,qBAAqB,EAAoB,CAAC,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,EAAC,IAAI,CAAC,CAAC;IAC3F,CAAC;IAED,IAAW,SAAS;QAChB,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC;IAC3B,CAAC;IAED,IAAW,SAAS,CAAC,KAAe;QAChC,EAAE,EAAC,CAAC,IAAI,CAAC,qBAAqB,EAAE,CAAC,EAAC;YAC9B,MAAM,IAAI,KAAK,CAAC,yEAAyE,CAAC,CAAC;QAC/F,CAAC;QACD,EAAE,EAAC,IAAI,CAAC,WAAW,EAAE,IAAI,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,gBAAgB,EAAE,CAAC,EAAC;YACnE,MAAM,IAAI,KAAK,CAAC,yEAAyE,CAAC,CAAC;QAC/F,CAAC;QACD,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;QACvB,IAAI,CAAC,QAAQ,CAAC,qBAAqB,EAAoB,CAAC,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,EAAC,IAAI,CAAC,CAAC;IAC3F,CAAC;IAED,IAAW,MAAM;QACb,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC;IACtB,CAAC;IAED,IAAW,MAAM,CAAC,KAAc;QAC5B,EAAE,EAAC,CAAC,IAAI,CAAC,qBAAqB,EAAE,CAAC,EAAC;YAC9B,MAAM,IAAI,KAAK,CAAC,yEAAyE,CAAC,CAAC;QAC/F,CAAC;QACD,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QAClB,IAAI,CAAC,QAAQ,CAAC,qBAAqB,EAAoB,CAAC,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,EAAC,IAAI,CAAC,CAAC;IAC3F,CAAC;IAED,IAAW,IAAI;QACX,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC;IACtB,CAAC;IAED,IAAW,IAAI,CAAC,KAAc;QAC1B,EAAE,EAAC,CAAC,IAAI,CAAC,qBAAqB,EAAE,CAAC,EAAC;YAC9B,MAAM,IAAI,KAAK,CAAC,yEAAyE,CAAC,CAAC;QAC/F,CAAC;QACD,EAAE,EAAC,IAAI,CAAC,WAAW,EAAE,IAAI,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,gBAAgB,EAAE,CAAC,EAAC;YACnE,MAAM,IAAI,KAAK,CAAC,yEAAyE,CAAC,CAAC;QAC/F,CAAC;QACD,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QAClB,IAAI,CAAC,QAAQ,CAAC,qBAAqB,EAAoB,CAAC,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,EAAC,IAAI,CAAC,CAAC;IAC3F,CAAC;IAED,IAAW,IAAI;QACX,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC;IACtB,CAAC;IAED,IAAW,IAAI,CAAC,KAAc;QAC1B,EAAE,EAAC,CAAC,IAAI,CAAC,qBAAqB,EAAE,CAAC,EAAC;YAC9B,MAAM,IAAI,KAAK,CAAC,yEAAyE,CAAC,CAAC;QAC/F,CAAC;QACD,EAAE,EAAC,IAAI,CAAC,WAAW,EAAE,IAAI,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,gBAAgB,EAAE,CAAC,EAAC;YACnE,MAAM,IAAI,KAAK,CAAC,yEAAyE,CAAC,CAAC;QAC/F,CAAC;QACD,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QAClB,IAAI,CAAC,QAAQ,CAAC,qBAAqB,EAAoB,CAAC,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,EAAC,IAAI,CAAC,CAAC;IAC3F,CAAC;IAED,QAAQ;QAEJ,IAAI,KAAK,GAAG,CAAC,CAAC,CAAC,gBAAgB;QAC/B,IAAI,IAAI,GAAI,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAwB,CAAC,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QAExF,OAAM,IAAI,CAAC,SAAS,EAAE,EAAC,CAAC;YACpB,EAAE,KAAK,CAAC;YACR,IAAI,GAAI,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAwB,CAAC,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC,CAAC;QAC7F,CAAC;QAED,6CAA6C;QAC7C,IAAI,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAE,CAAC,WAAW,EAAE,CAAC;QAErD,EAAE,EAAC,CAAC,KAAK,CAAC,CAAC,CAAC;YACR,OAAO,CAAC,GAAG,CAAC,4BAA4B,CAAC,CAAC;YAC1C,MAAM,CAAC,IAAI,CAAC;QAChB,CAAC;QAED,OAAM,KAAK,GAAG,CAAC,EAAC,CAAC;YACb,EAAE,EAAC,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC;gBACf,MAAM,CAAC,IAAI,CAAC;YAChB,CAAC;YACD,IAAI,EAAC;gBACD,KAAK,GAAI,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAwB,CAAC,MAAM,CAAC,GAAG,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;gBACnF,EAAE,KAAK,CAAC;YACZ,CAAC;QACL,CAAC;QACD,MAAM,CAAC,KAAK,CAAC;IACjB,CAAC;IAMD,IAAW,gBAAgB;QACvB,MAAM,CAAC,IAAI,CAAC,iBAAiB,CAAC;IAClC,CAAC;IAED,IAAW,QAAQ;QACf,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC;IAC1B,CAAC;IAED,IAAW,QAAQ;QACf,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC;IAC1B,CAAC;IAED;;;OAGG;IACH,mBAAmB;QACf,IAAI,GAAG,GAAG,EAAE,CAAC;QACb,GAAG,EAAC,IAAI,CAAC,IAAI,IAAI,CAAC,gBAAgB,CAAC,EAAC;YAChC,IAAI,UAAU,GAAI,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAwB,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YACtF,EAAE,EAAC,CAAC,UAAU,CAAC,iBAAiB,CAAC;gBAAC,GAAG,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QAC3D,CAAC;QACD,MAAM,CAAC,GAAG,CAAC;IACf,CAAC;IAED;;;OAGG;IACH,SAAS;QACL,IAAI,IAAI,GAAI,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAwB,CAAC,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QACxF,IAAI,QAAQ,GAAG,IAAI,CAAC,SAAS,EAAE,CAAC;QAEhC,EAAE,EAAC,QAAQ,CAAC,EAAC;YACT,IAAI,KAAK,GAAI,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAwB,CAAC,SAAS,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;YACtF,MAAM,CAAE,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAwB,CAAC,aAAa,CAAC,GAAG,CAAC,KAAK,CAAC,OAAO,CAAe,CAAC;QAC5G,CAAC;QACD,IAAI,EAAC;YACD,MAAM,CAAC,IAAI,CAAC;QAChB,CAAC;IACL,CAAC;IAED;;;OAGG;IACH,WAAW;QACP,IAAI,GAAG,GAAG,EAAE,CAAC;QACb,GAAG,EAAC,IAAI,CAAC,IAAI,IAAI,CAAC,QAAQ,CAAC,EAAC;YACxB,IAAI,OAAO,GAAI,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAwB,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YAChF,EAAE,EAAC,CAAC,OAAO,CAAC,iBAAiB,CAAC;gBAAC,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QACrD,CAAC;QACD,MAAM,CAAC,GAAG,CAAC;IACf,CAAC;IAED,KAAK;QAED,IAAI,IAAI,GAAG,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,OAAO,CAAC,gBAAgB,CAAC,IAAI,CAAC,QAAQ,EAAC,IAAI,CAAC,IAAI,EACjF,IAAI,CAAC,IAAI,CAAgB,CAAC;QAE9B,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;QAErB,GAAG,EAAC,IAAI,CAAC,IAAI,IAAI,CAAC,gBAAgB,CAAC,EAAC;YAChC,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;QAClC,CAAC;QAED,GAAG,EAAC,IAAI,CAAC,IAAI,IAAI,CAAC,QAAQ,CAAC,EAAC;YACxB,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;QAC1B,CAAC;QAED,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC;QAEzB,MAAM,CAAC,IAAI,CAAC;IAChB,CAAC;CACJ;AA1SD,8BA0SC;;;;;;;;;;;AC/TD,oGAA4C;AAQ5C,4FAA6C;AAC7C,4GAA6D;AAI7D;;GAEG;AACH,gBAAwB,SAAQ,2BAAkC;IAE9D,MAAM,CAAC,KAAU;QACb,IAAI,CAAC,GAAG,GAAG,KAAK,CAAC;IACrB,CAAC;IAEO,qBAAqB;QACzB,IAAI,WAAW,GAAG,IAAI,CAAC,SAAS,CAAC,qBAAqB,EAAE,CAAC;QACzD,EAAE,EAAC,CAAC,WAAW,IAAI,WAAW,CAAC,MAAM,IAAI,qCAAiB,CAAC,OAAO,CAAC;YAAC,MAAM,CAAC,KAAK;QAChF,IAAI;YAAC,MAAM,CAAC,IAAI,CAAC;IACrB,CAAC;IAED;;;;OAIG;IACH,qBAAqB;QACjB,MAAM,CAAC,KAAK,CAAC;IACjB,CAAC;IAED;;;;;OAKG;IACH,SAAS;QACL,MAAM,CAAC,IAAI,CAAC,iBAAiB,CAAC;IAClC,CAAC;IAED;;;OAGG;IACH,MAAM;QACF,EAAE,EAAC,CAAC,IAAI,CAAC,qBAAqB,EAAE,CAAC,EAAC;YAC9B,MAAM,IAAI,KAAK,CAAC,yEAAyE,CAAC,CAAC;QAC/F,CAAC;QACD,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;QAC9B,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,OAAO,CAAC,aAAa,CAAC,IAAI,EAAC,EAAE,CAAC,CAAC;IACpE,CAAC;IAID;;;;;;OAMG;IACH,YAAY,QAAoB,EAAE,QAAa,EAAE,QAAa,EAAE,IAAa;QACzE,KAAK,EAAE,CAAC;QACR,IAAI,CAAC,SAAS,GAAG,QAAQ,CAAC;QAC1B,IAAI,CAAC,SAAS,GAAG,qBAAS,CAAC,UAAU,CAAC;QACtC,IAAI,CAAC,SAAS,GAAG,QAAQ,CAAC;QAC1B,IAAI,CAAC,SAAS,GAAG,QAAQ,CAAC;QAC1B,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;QAClB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;QACtB,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;IAC5B,CAAC;IAID,IAAW,QAAQ;QACf,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC;IAC1B,CAAC;IAYD,IAAW,IAAI;QACX,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC;IACtB,CAAC;IAED,IAAW,QAAQ;QACf,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC;IAC1B,CAAC;IAED,IAAW,QAAQ;QACf,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC;IAC1B,CAAC;IAED,IAAW,QAAQ,CAAC,KAAa;QAC7B,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;IAC3B,CAAC;IAED,IAAW,SAAS;QAChB,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC;IAC3B,CAAC;IAED,IAAW,iBAAiB;QACxB,MAAM,CAAC,IAAI,CAAC,kBAAkB,CAAC;IACnC,CAAC;IAED,IAAW,iBAAiB,CAAC,KAAc;QACvC,EAAE,EAAC,CAAC,IAAI,CAAC,qBAAqB,EAAE,CAAC,EAAC;YAC9B,MAAM,IAAI,KAAK,CAAC,yEAAyE,CAAC,CAAC;QAC/F,CAAC;QACD,IAAI,CAAC,kBAAkB,GAAG,KAAK,CAAC;IACpC,CAAC;IAED,IAAW,QAAQ;QACf,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC;IAC1B,CAAC;IAED,KAAK;QACD,IAAI,IAAI,GAAG,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,OAAO,CAAC,iBAAiB,CAC1D,IAAI,CAAC,QAAQ,EAAC,IAAI,CAAC,QAAQ,EAAC,IAAI,CAAC,QAAQ,EACzC,IAAI,CAAC,IAAI,CAAiB,CAAC;QAE/B,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;QACrB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,QAAQ,CAAC;QAC/B,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,SAAS,CAAC;QACjC,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,iBAAiB,CAAC;QACjD,MAAM,CAAC,IAAI,CAAC;IAChB,CAAC;CACJ;AA7HD,gCA6HC;;;;;;;;;;;AC7ID,oGAA4C;AAc5C;;GAEG;AACH,kBAA0B,SAAQ,2BAAoC;IAElE;;;OAGG;IACH,YAAY,GAAkB;QAC1B,KAAK,EAAE,CAAC;QAER,EAAE,EAAC,CAAC,GAAG,CAAC;YAAC,MAAM,IAAI,KAAK,CAAC,gDAAgD,CAAC,CAAC;QAE3E,IAAI,CAAC,YAAY,GAAG,GAAG,CAAC;IAC5B,CAAC;IAID;;OAEG;IACH,IAAW,WAAW;QAClB,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC;IAC7B,CAAC;IAED;;;;;OAKG;IACH,MAAM,CAAC,UAAc;QACjB,MAAM,IAAI,KAAK,CAAC,4BAA4B,CAAC,CAAC;IAClD,CAAC;IAES,aAAa,CAAC,UAAc,EAAE,QAAY;QAChD,6EAA6E;QAC7E,kFAAkF;QAElF,MAAM,IAAI,KAAK,CAAC,4BAA4B,CAAC,CAAC;IAClD,CAAC;IAES,eAAe,CAAC,UAAc,EAAE,QAAY;QAElD,gFAAgF;QAChF,kFAAkF;QAElF,MAAM,IAAI,KAAK,CAAC,4BAA4B,CAAC,CAAC;IAClD,CAAC;IAED;;;;;OAKG;IACH,YAAY,CAAC,UAAc,EAAE,QAAY;QAErC,MAAM,MAAM,GAAI,IAAI,CAAC,aAAa,CAAC,UAAU,EAAC,QAAQ,CAAC,CAAC;QAExD,EAAE,EAAC,MAAM,CAAC,OAAO,CAAC,EAAC;YACf,IAAI,GAAG,GAAG,IAAI,CAAC,WAAW,CAAC,cAAc,CAAC,UAAU,EAAE,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;YAC3E,EAAE,EAAC,GAAG,CAAC,CAAC,CAAC;gBACL,IAAI,CAAC,GAAS,GAAG,CAAC;gBAClB,CAAC,GAAG,CAAY,CAAC;gBACjB,CAAC,CAAC,QAAQ,GAAG,IAAI,CAAC,WAAW,CAAC,gBAAgB,EAAE,CAAC;gBACjD,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,aAAa,CAAC,IAAI,EAAC,EAAE,CAAC,CAAC;YAC3D,CAAC;YACD,IAAI,EAAC;gBACD,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,EAC/C,kBAAkB,QAAQ,oCAAoC,CAAC,CAAC;YACxE,CAAC;QACL,CAAC;QACD,IAAI,EAAC;YACD,MAAM,CAAC,MAAM,CAAC;QAClB,CAAC;IACL,CAAC;IAED;;;;;OAKG;IACH,cAAc,CAAC,UAAc,EAAE,QAAY;QAEvC,MAAM,MAAM,GAAI,IAAI,CAAC,eAAe,CAAC,UAAU,EAAC,QAAQ,CAAC,CAAC;QAE1D,EAAE,EAAC,MAAM,CAAC,OAAO,CAAC,EAAC;YACf,IAAI,GAAG,GAAG,IAAI,CAAC,WAAW,CAAC,cAAc,CAAC,UAAU,EAAE,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;YAC3E,EAAE,EAAC,GAAG,CAAC,CAAC,CAAC;gBACL,IAAI,CAAC,GAAS,GAAG,CAAC;gBAClB,CAAC,GAAG,CAAY,CAAC;gBACjB,CAAC,CAAC,QAAQ,GAAG,IAAI,CAAC;gBAClB,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,aAAa,CAAC,IAAI,EAAC,EAAE,CAAC,CAAC;YAC3D,CAAC;YACD,IAAI,EAAC;gBACD,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,EAC/C,kBAAkB,QAAQ,uCAAuC,CAAC,CAAC;YAC3E,CAAC;QACL,CAAC;QACD,IAAI,EAAC;YACD,MAAM,CAAC,MAAM,CAAC;QAClB,CAAC;IACL,CAAC;IAED;;;;OAIG;IACH,MAAM,CAAC,QAAmB;QACtB,MAAM,IAAI,KAAK,CAAC,4BAA4B,CAAC,CAAC;IAClD,CAAC;IAED;;;;;OAKG;IACH,YAAY,CAAC,KAAS;QAClB,MAAM,IAAI,KAAK,CAAC,4BAA4B,CAAC,CAAC;IAClD,CAAC;IAES,mBAAmB,CAAC,KAAS,EAAE,QAAY;QAEjD,6EAA6E;QAC7E,kFAAkF;QAElF,MAAM,IAAI,KAAK,CAAC,4BAA4B,CAAC,CAAC;IAClD,CAAC;IAES,qBAAqB,CAAC,KAAS,EAAE,QAAY;QAEnD,gFAAgF;QAChF,kFAAkF;QAElF,MAAM,IAAI,KAAK,CAAC,4BAA4B,CAAC,CAAC;IAClD,CAAC;IAED;;;;;OAKG;IACH,kBAAkB,CAAC,KAAS,EAAE,QAAY;QAEtC,MAAM,MAAM,GAAI,IAAI,CAAC,mBAAmB,CAAC,KAAK,EAAC,QAAQ,CAAC,CAAC;QAEzD,EAAE,EAAC,MAAM,CAAC,OAAO,CAAC,EAAC;YAEf,IAAI,GAAG,GAAa,IAAI,CAAC;YACzB,MAAM,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC,eAAe,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,UAAU,EAAuB,CAAC;YAC9F,EAAE,EAAC,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,EAAC;gBAC7B,GAAG,GAAG,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;YACvC,CAAC;YACD,EAAE,EAAC,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,EAAC;gBAChC,GAAG,GAAG,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;YAC1C,CAAC;YACD,IAAI,CAAC,EAAE,EAAC,OAAO,CAAC,WAAW,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,EAAC;gBACvC,GAAG,GAAG,OAAO,CAAC,WAAW,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;YAC5C,CAAC;YACD,IAAI,CAAC,EAAE,EAAC,OAAO,CAAC,QAAQ,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,EAAC;gBACpC,GAAG,GAAG,OAAO,CAAC,QAAQ,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;YACzC,CAAC;YACD,IAAI,CAAC,EAAE,EAAC,OAAO,CAAC,UAAU,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,EAAC;gBACtC,GAAG,GAAG,OAAO,CAAC,UAAU,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;YAC3C,CAAC;YAED,EAAE,EAAC,GAAG,CAAC,CAAC,CAAC;gBACL,GAAG,CAAC,QAAQ,GAAG,IAAI,CAAC,WAAW,CAAC,gBAAgB,EAAE,CAAC;gBACnD,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,aAAa,CAAC,IAAI,EAAC,EAAE,CAAC,CAAC;YAC3D,CAAC;YACD,IAAI,EAAC;gBACD,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,EAC/C,kBAAkB,QAAQ,oCAAoC,CAAC,CAAC;YACxE,CAAC;QACL,CAAC;QACD,IAAI,EAAC;YACD,MAAM,CAAC,MAAM,CAAC;QAClB,CAAC;IACL,CAAC;IAED;;;;;OAKG;IACH,oBAAoB,CAAC,KAAS,EAAE,QAAY;QAExC,MAAM,MAAM,GAAI,IAAI,CAAC,qBAAqB,CAAC,KAAK,EAAC,QAAQ,CAAC,CAAC;QAE3D,EAAE,EAAC,MAAM,CAAC,OAAO,CAAC,EAAC;YACf,MAAM,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC,eAAe,CAAC,GAAG,CAAC,KAAK,CAAC;iBACtD,UAAU,EAAuB,CAAC;YAEvC,IAAI,GAAG,GAAa,IAAI,CAAC;YAEzB,EAAE,EAAC,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,EAAC;gBAC7B,GAAG,GAAG,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;YACvC,CAAC;YACD,EAAE,EAAC,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,EAAC;gBAChC,GAAG,GAAG,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;YAC1C,CAAC;YACD,IAAI,CAAC,EAAE,EAAC,OAAO,CAAC,WAAW,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,EAAC;gBACvC,GAAG,GAAG,OAAO,CAAC,WAAW,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;YAC5C,CAAC;YACD,IAAI,CAAC,EAAE,EAAC,OAAO,CAAC,QAAQ,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,EAAC;gBACpC,GAAG,GAAG,OAAO,CAAC,QAAQ,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;YACzC,CAAC;YACD,IAAI,CAAC,EAAE,EAAC,OAAO,CAAC,UAAU,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,EAAC;gBACtC,GAAG,GAAG,OAAO,CAAC,UAAU,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;YAC3C,CAAC;YAED,EAAE,EAAC,GAAG,CAAC,CAAC,CAAC;gBACL,GAAG,CAAC,QAAQ,GAAG,IAAI,CAAC;gBACpB,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,aAAa,CAAC,IAAI,EAAC,EAAE,CAAC,CAAC;YAC3D,CAAC;YACD,IAAI,EAAC;gBACD,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,EAC/C,kBAAkB,QAAQ,uCAAuC,CAAC,CAAC;YAC3E,CAAC;QACL,CAAC;QACD,IAAI,EAAC;YACD,MAAM,CAAC,MAAM,CAAC;QAClB,CAAC;IACL,CAAC;IAED;;;;OAIG;IACH,YAAY,CAAC,GAAc;QACvB,MAAM,IAAI,KAAK,CAAC,4BAA4B,CAAC,CAAC;IAClD,CAAC;IAED;;;OAGG;IACH,eAAe;QACX,MAAM,IAAI,KAAK,CAAC,4BAA4B,CAAC,CAAC;IAClD,CAAC;IAED;;;OAGG;IACH,gBAAgB;QACZ,MAAM,IAAI,KAAK,CAAC,4BAA4B,CAAC,CAAC;IAClD,CAAC;CACJ;AA7PD,oCA6PC;;;;;;;;;;;AC7QD,oGAA4C;AAK5C,4GAA6D;AAW7D,cAAsB,SAAQ,2BAAgC;IAE1D;;;;OAIG;IACH,IAAI,CAAC,KAAS;QACV,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,YAAY,CAAC,YAAY,CAAC,IAAI,CAAC,EAAE,EAAE,KAAK,CAAC,CAAC;IACtE,CAAC;IAED;;;;OAIG;IACH,MAAM,CAAC,KAAS;QACZ,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,YAAY,CAAC,cAAc,CAAC,IAAI,CAAC,EAAE,EAAE,KAAK,CAAC,CAAC;IACxE,CAAC;IAED,YAAY,GAAkB;QAC1B,KAAK,EAAE,CAAC;QACR,IAAI,CAAC,YAAY,GAAG,GAAG,CAAC;QAExB,IAAI,CAAC,SAAS,GAAG,IAAI,KAAK,EAAoB,CAAC;QAC/C,IAAI,CAAC,iBAAiB,GAAG,IAAI,KAAK,EAAkB,CAAC;QAErD,MAAM,WAAW,GAAG,IAAI,GAAG,EAA6B,CAAC;QAEzD,MAAM,YAAY,GAAG,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,qBAAqB,CAAC,IAAI,CAAC,CAAC;QAC1E,MAAM,KAAK,GAAG,IAAI,GAAG,EAAmB,CAAC;QACzC,MAAM,KAAK,GAAG,IAAI,GAAG,EAAmB,CAAC;QAEzC,MAAM,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,sBAAsB,CAAC,IAAI,EAAE,WAAW,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC;QAEjG,YAAY,CAAC,OAAO,GAAG,OAAO,CAAC;QAE/B,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;IACjC,CAAC;IASD,IAAW,WAAW;QAClB,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC;IAC7B,CAAC;IAED,IAAW,WAAW,CAAC,KAAoB;QACvC,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;IAC9B,CAAC;IAED,IAAW,IAAI;QACX,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC;IACtB,CAAC;IAED,IAAW,IAAI,CAAC,KAAc;QAC1B,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;IACvB,CAAC;IAED,IAAW,IAAI;QACX,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC;IACtB,CAAC;IAED,IAAW,IAAI,CAAC,KAAc;QAC1B,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;IACvB,CAAC;IAED,IAAI;QACA,MAAM,CAAC,SAAS,CAAC;IACrB,CAAC;IAED,KAAK;IACL,CAAC;IAED,gBAAgB,CAAC,EAAkB;QAC/B,EAAE,EAAC,CAAC,EAAE,CAAC;YAAC,MAAM,IAAI,KAAK,CAAC,8EAA8E,CAAC,CAAC;QACxG,IAAI,CAAC,EAAE,EAAC,EAAE,CAAC,QAAQ,KAAK,IAAI,CAAC,CAAC,CAAC;YAC3B,MAAM,IAAI,KAAK,CAAC,yEAAyE,CAAC,CAAC;QAC/F,CAAC;QACD,IAAI,CAAC,EAAE,EAAC,EAAE,CAAC,MAAM,KAAK,qCAAiB,CAAC,OAAO,CAAC,EAAC;YAC7C,MAAM,IAAI,KAAK,CAAC,gFAAgF,CAAC,CAAC;QACtG,CAAC;QACD,IAAI,CAAC,EAAE,EAAC,IAAI,CAAC,iBAAiB,CAAC,OAAO,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,EAAC;YAC7C,MAAM,IAAI,KAAK,CAAC,uEAAuE,CAAC,CAAC;QAC7F,CAAC;QACD,IAAI,EAAC;YACD,+DAA+D;YAC/D,gCAAgC;YAChC,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;YAChC,MAAM,OAAO,GAAG,IAAI,CAAC,UAAU,EAAE,CAAC,KAAK,EAAE,CAAC;YAC1C,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QACjC,CAAC;IACL,CAAC;IAED,eAAe,CAAC,EAAkB;QAC9B,EAAE,EAAC,CAAC,EAAE,CAAC;YAAC,MAAM,IAAI,KAAK,CAAC,6EAA6E,CAAC,CAAC;QACvG,IAAI,CAAC,EAAE,EAAC,EAAE,CAAC,QAAQ,KAAK,IAAI,CAAC,CAAC,CAAC;YAC3B,MAAM,IAAI,KAAK,CAAC,yEAAyE,CAAC,CAAC;QAC/F,CAAC;QACD,IAAI,CAAC,EAAE,EAAC,EAAE,CAAC,MAAM,KAAK,qCAAiB,CAAC,QAAQ,IAAI,EAAE,CAAC,MAAM,KAAK,qCAAiB,CAAC,UAAU,CAAC,EAAC;YAC5F,MAAM,IAAI,KAAK,CAAC,kEAAkE,CAAC,CAAC;QACxF,CAAC;QACD,IAAI,CAAC,EAAE,EAAC,IAAI,CAAC,iBAAiB,CAAC,OAAO,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,EAAC;YAC5C,MAAM,IAAI,KAAK,CAAC,iEAAiE,CAAC,CAAC;QACvF,CAAC;QACD,IAAI,CAAC,EAAE,EAAC,IAAI,CAAC,iBAAiB,CAAC,MAAM,IAAI,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,iBAAiB,CAAC,MAAM,GAAG,CAAC,CAAC,IAAI,EAAE,CAAC,EAAC;YACtG,MAAM,IAAI,KAAK,CAAC,iFAAiF,CAAC,CAAC;QACvG,CAAC;QACD,IAAI,EAAC;YAED,4FAA4F;YAC5F,EAAE,EAAC,EAAE,CAAC,MAAM,KAAK,qCAAiB,CAAC,UAAU,CAAC,EAAC;gBAE3C,IAAI,CAAC,SAAS,CAAC,GAAG,EAAE,CAAC;gBACrB,IAAI,CAAC,iBAAiB,CAAC,GAAG,EAAE,CAAC;YACjC,CAAC;YACD,IAAI,CAAC,EAAE,EAAC,EAAE,CAAC,MAAM,KAAK,qCAAiB,CAAC,QAAQ,CAAC,EAAC;gBAC9C,IAAI,CAAC,iBAAiB,CAAC,GAAG,EAAE,CAAC;YACjC,CAAC;YACD,IAAI,EAAC;gBACD,MAAM,IAAI,KAAK,CAAC,oFAAoF,CAAC,CAAC;YAC1G,CAAC;QACL,CAAC;QAED,mEAAmE;QACnE,2EAA2E;QAC3E,4BAA4B;QAC5B,EAAE,EAAC,CAAC,KAAK,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC,EAAC;YAEpC,MAAM,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,EAAE,CAAC;YAElC,IAAI,CAAC,SAAS,GAAG,IAAI,KAAK,EAAoB,CAAC;YAC/C,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC9B,CAAC;IACL,CAAC;IAED,iBAAiB;QACb,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,oBAAoB,CAAC,IAAI,CAAC,CAAC;IAC/D,CAAC;IAED,UAAU;QACN,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;IACrD,CAAC;CAEJ;AApJD,4BAoJC;;;;;;;;;;;ACrKD,oGAA4C;AAc5C,qBAA6B,SAAS,2BAAuC;IAEzE,YAAY,QAAmB,EAAE,WAA2C,EAChE,KAA2B,EAAE,KAA2B;QAChE,KAAK,EAAE,CAAC;QAER,IAAI,CAAC,SAAS,GAAG,QAAQ,CAAC;QAC1B,IAAI,CAAC,YAAY,GAAG,WAAW,CAAC;QAChC,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;QACpB,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;IACxB,CAAC;IAQD,IAAW,QAAQ;QACf,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC;IAC1B,CAAC;IAED,IAAW,YAAY;QACnB,MAAM,CAAC,IAAI,CAAC,aAAa,CAAC;IAC9B,CAAC;IAED,IAAW,WAAW;QAClB,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC;IAC7B,CAAC;IAED,IAAW,KAAK;QACZ,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC;IACvB,CAAC;IAED,IAAW,KAAK;QACZ,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC;IACvB,CAAC;IAED,SAAS,CAAC,EAAU;QAChB,EAAE,EAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;YAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;QACnD,IAAI,CAAC,EAAE,EAAC,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;YAAC,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;QACpE,IAAI,CAAC,EAAE,EAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;YAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;QACxD,IAAI,CAAC,EAAE,EAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;YAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;IAC5D,CAAC;IAED,KAAK;QACD,MAAM,CAAC,SAAS,CAAC;IACrB,CAAC;CACJ;AAhDD,0CAgDC;;;;;;;;;;AC/DD;;;GAGG;;AAOH;IAOI;;;;OAIG;IACH,YAAY,OAA0B;QAClC,IAAI,CAAC,UAAU,GAAG,IAAI,KAAK,EAAc,CAAC;QAC1C,IAAI,CAAC,aAAa,GAAG,IAAI,KAAK,EAAc,CAAC;QAC7C,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC;IAC5B,CAAC;IAID;;;OAGG;IACH,IAAW,OAAO;QACd,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC;IACzB,CAAC;IAED,IAAW,OAAO,CAAC,KAAwB;QACvC,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;IAC1B,CAAC;IAED;;OAEG;IACH,IAAW,MAAM;QACb,MAAM,CAAC,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC;IACrC,CAAC;IAED;;;;;;;;;;;;OAYG;IACH,IAAI,CAAC,OAAmB;QACpB,MAAM,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,WAAW,CAAC,OAAO,CAAC;QAE1D,EAAE,EAAC,OAAO,CAAC,EAAC;YACR,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;YACjC,gEAAgE;YAChE,+DAA+D;YAC/D,oBAAoB;YACpB,IAAI,CAAC,UAAU,GAAG,IAAI,KAAK,EAAc,CAAC;YAC1C,MAAM,CAAC,OAAO,CAAC,aAAa,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC;QAC3C,CAAC;QACD,IAAI,EAAC;YACD,MAAM,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,EAC9B,+CAA+C,CAAC,CAAC;QACzD,CAAC;IACL,CAAC;IAED;;;;;OAKG;IACH,IAAI;QAEA,MAAM,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,WAAW,CAAC,OAAO,CAAC;QAE1D,EAAE,EAAC,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,EAAC;YAC1B,MAAM,GAAG,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,EAAE,CAAC;YACrC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;YAE1B,MAAM,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC;QACtB,CAAC;QACD,IAAI,EAAC;YACD,MAAM,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,EAC9B,iDAAiD,CAAC,CAAC;QAC3D,CAAC;IACL,CAAC;IAED;;;;;OAKG;IACH,IAAI;QAEA,MAAM,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,WAAW,CAAC,OAAO,CAAC;QAE1D,EAAE,EAAC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,EAAC;YACvB,MAAM,GAAG,GAAG,IAAI,CAAC,UAAU,CAAC,GAAG,EAAE,CAAC;YAClC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;YAE7B,MAAM,CAAC,GAAG,CAAC,OAAO,EAAE,CAAC,MAAM,CAAC;QAChC,CAAC;QACD,IAAI,EAAC;YACD,MAAM,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,EAC9B,oDAAoD,CAAC,CAAC;QAC9D,CAAC;IACL,CAAC;CACJ;AAhHD,wCAgHC;;;;;;;;;;;ACzHD,oGAA4C;AAI5C,4FAA6C;AAI7C;;GAEG;AACH,YAAoB,SAAQ,2BAA8B;IAEtD,YAAY,QAAoB,EAAE,IAAY,EAAE,IAAa,EAAE,IAAa,EAAE,MAAe;QACzF,KAAK,EAAE,CAAC;QACR,IAAI,CAAC,SAAS,GAAG,QAAQ,CAAC;QAC1B,IAAI,CAAC,SAAS,GAAG,qBAAS,CAAC,MAAM,CAAC;QAClC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;QAClB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;QAClB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;QAClB,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC;IAC1B,CAAC;IAUD,IAAW,QAAQ;QACf,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC;IAC1B,CAAC;IAED,IAAW,IAAI;QACX,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC;IACtB,CAAC;IAED,IAAW,IAAI,CAAC,KAAc;QAC1B,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;IACvB,CAAC;IAED,IAAW,IAAI;QACX,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC;IACtB,CAAC;IAED,IAAW,IAAI,CAAC,KAAc;QAC1B,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;IACvB,CAAC;IAED,IAAW,IAAI;QACX,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC;IACtB,CAAC;IAED,IAAW,IAAI,CAAC,KAAc;QAC1B,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;IACvB,CAAC;IAED,IAAW,MAAM;QACb,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC;IACxB,CAAC;IAED,IAAW,MAAM,CAAC,KAAc;QAC5B,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;IACzB,CAAC;IAED,IAAW,QAAQ;QACf,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC;IAC1B,CAAC;IAED,IAAW,QAAQ;QACf,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC;IAC1B,CAAC;CACJ;AA/DD,wBA+DC;;;;;;;;;;;AC1ED,oGAA4C;AAG5C,4GAA6D;AAG7D;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;GA6CG;AACH,mBAA2B,SAAQ,2BAAqC;IAEpE;;;OAGG;IACH,YAAY,EAAc;QAEtB,KAAK,EAAE,CAAC;QACR,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;QACpB,IAAI,CAAC,OAAO,GAAG,qCAAiB,CAAC,OAAO,CAAC;IAC7C,CAAC;IAID;;OAEG;IACH,IAAW,QAAQ;QACf,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC;IAC1B,CAAC;IAED;;;;;;;;;;;;;;OAcG;IACH,KAAK;QAED,EAAE,EAAC,IAAI,CAAC,OAAO,KAAK,qCAAiB,CAAC,OAAO,CAAC,EAAC;YAC3C,MAAM,IAAI,KAAK,CAAC,8CAA8C,CAAC;QACnE,CAAC;QAED,IAAI,CAAC,OAAO,GAAG,qCAAiB,CAAC,OAAO,CAAC;QACzC,IAAI,CAAC,QAAQ,CAAC,gBAAgB,CAAC,IAAI,CAAC,CAAC;IACzC,CAAC;IAED;;;OAGG;IACH,MAAM;QACF,EAAE,EAAC,IAAI,CAAC,OAAO,KAAK,qCAAiB,CAAC,OAAO,CAAC,EAAC;YAC3C,MAAM,IAAI,KAAK,CAAC,kEAAkE,CAAC;QACvF,CAAC;QAED,IAAI,CAAC,OAAO,GAAG,qCAAiB,CAAC,QAAQ,CAAC;QAC1C,IAAI,CAAC,QAAQ,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;IACxC,CAAC;IAED;;;OAGG;IACH,QAAQ;QACJ,EAAE,EAAC,IAAI,CAAC,OAAO,KAAK,qCAAiB,CAAC,OAAO,CAAC,EAAC;YAC3C,MAAM,IAAI,KAAK,CAAC,sEAAsE,CAAC;QAC3F,CAAC;QAED,IAAI,CAAC,OAAO,GAAG,qCAAiB,CAAC,UAAU,CAAC;QAC5C,IAAI,CAAC,QAAQ,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;IACxC,CAAC;IAID;;OAEG;IACH,IAAW,MAAM;QACb,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC;IACxB,CAAC;CACJ;AAjFD,sCAiFC;;;;;;;;;;;ACrID,oGAA4C;AAI5C,4FAA6C;AAK7C;;GAEG;AACH,YAAoB,SAAQ,2BAA8B;IAEtD,qBAAqB;QACjB,MAAM,CAAC,KAAK,CAAC;IACjB,CAAC;IAED,SAAS;QACL,MAAM,CAAC,IAAI,CAAC,iBAAiB,IAAI,IAAI,CAAC,qBAAqB,EAAE,CAAC;IAClE,CAAC;IAED,YAAY,QAAoB,EAAE,SAAkB,EAAE,UAAkB,EAC5D,QAAiB,EAAE,IAAa;QACxC,KAAK,EAAE,CAAC;QACR,IAAI,CAAC,SAAS,GAAG,QAAQ,CAAC;QAC1B,IAAI,CAAC,SAAS,GAAG,qBAAS,CAAC,MAAM,CAAC;QAClC,IAAI,CAAC,UAAU,GAAG,SAAS,CAAC;QAC5B,IAAI,CAAC,WAAW,GAAG,UAAU,CAAC;QAC9B,IAAI,CAAC,SAAS,GAAG,QAAQ,CAAC;QAC1B,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;QAClB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;QACtB,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;QACxB,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;IAC5B,CAAC;IAID;;OAEG;IACH,IAAW,QAAQ;QACf,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC;IAC1B,CAAC;IAYD;;;OAGG;IACH,IAAW,OAAO;QACd,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC;IACzB,CAAC;IAED;;;OAGG;IACH,IAAW,SAAS;QAChB,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC;IAC3B,CAAC;IAED,IAAW,SAAS,CAAC,KAAa;QAC9B,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;IAC5B,CAAC;IAED;;;OAGG;IACH,IAAW,UAAU;QACjB,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC;IAC5B,CAAC;IAED,IAAW,UAAU,CAAC,KAAc;QAChC,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;IAC7B,CAAC;IAED;;;OAGG;IACH,IAAW,QAAQ;QACf,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC;IAC1B,CAAC;IAED,IAAW,QAAQ,CAAC,KAAc;QAC9B,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;IAC3B,CAAC;IAED;;;OAGG;IACH,IAAW,IAAI;QACX,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC;IACtB,CAAC;IAED,IAAW,IAAI,CAAC,KAAc;QAC1B,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;IACvB,CAAC;IAED;;;OAGG;IACH,IAAW,QAAQ;QACf,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC;IAC1B,CAAC;IAED,IAAW,QAAQ,CAAC,KAAa;QAC7B,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;IAC3B,CAAC;IAED,IAAW,SAAS;QAChB,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC;IAC3B,CAAC;IAED,IAAW,SAAS,CAAC,KAAc;QAC/B,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;IAC5B,CAAC;IAED,IAAW,iBAAiB;QACxB,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC;IAC3B,CAAC;IAED,IAAW,iBAAiB,CAAC,KAAe;QACxC,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;IAC5B,CAAC;IAED,IAAW,QAAQ;QACf,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC;IAC1B,CAAC;CACJ;AAlID,wBAkIC;;;;;;;;;;;AC9ID,oGAA4C;AAI5C,4FAA6C;AAK7C;;GAEG;AACH,gBAAwB,SAAQ,2BAAkC;IAE9D,YAAY,QAAmB,EAAE,IAAY,EAAE,IAAY,EAAE,IAAY,EAAE,MAAoB,EAAE,IAAY;QACzG,KAAK,EAAE,CAAC;QACR,IAAI,CAAC,SAAS,GAAG,qBAAS,CAAC,UAAU,CAAC;QACtC,IAAI,CAAC,SAAS,GAAG,QAAQ,CAAC;QAC1B,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;QAClB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;QAClB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;QAClB,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC;QACtB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;IACtB,CAAC;IAWD,IAAW,QAAQ;QACf,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC;IAC1B,CAAC;IAED,IAAW,IAAI;QACX,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC;IACtB,CAAC;IAED,IAAW,IAAI,CAAC,KAAc;QAC1B,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;IACvB,CAAC;IAED,IAAW,IAAI;QACX,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC;IACtB,CAAC;IAED,IAAW,IAAI,CAAC,KAAc;QAC1B,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;IACvB,CAAC;IAED,IAAW,IAAI;QACX,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC;IACtB,CAAC;IAED,IAAW,IAAI,CAAC,KAAa;QACzB,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;IACvB,CAAC;IAED,IAAW,MAAM;QACb,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC;IACxB,CAAC;IAED,IAAW,MAAM,CAAC,KAAmB;QACjC,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;IACzB,CAAC;IAED,IAAW,QAAQ;QACf,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC;IAC1B,CAAC;IAED,IAAW,QAAQ,CAAC,KAA2B;QAC3C,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;IAC3B,CAAC;IAED,IAAW,IAAI;QACX,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC;IACtB,CAAC;IAED,IAAW,IAAI,CAAC,KAAa;QACzB,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;IACvB,CAAC;IAED,IAAW,QAAQ;QACf,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC;IAC1B,CAAC;CACJ;AA7ED,gCA6EC;;;;;;;;;;;ACxFD,oGAA4C;AAG5C,4GAA6D;AAQ7D,0HAA2E;AAG3E,4FAA6C;AAW7C;;GAEG;AACH,cAAsB,SAAQ,2BAAgC;IAE1D,MAAM,CAAC,EAAO;QAEV,IAAI,CAAC,GAAG,GAAG,EAAE,CAAC;IAClB,CAAC;IAID;;;;OAIG;IACH,IAAI,CAAC,KAAS;QACV,IAAI,MAAM,GAAG,IAAI,CAAC,WAAW,CAAC,YAAY,CAAC,kBAAkB,CAAC,IAAI,CAAC,EAAE,EAAE,KAAK,CAAC,CAAC;QAE9E,EAAE,EAAC,MAAM,CAAC,OAAO,CAAC,EAAC;YACf,IAAI,WAAW,GAAG,IAAI,CAAC,iBAAiB,EAAE,CAAC;YAC3C,WAAW,CAAC,KAAK,EAAE,CAAC;YAEpB,IAAI,GAAG,GAAG,IAAI,CAAC,UAAU,EAAE,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;YAC7C,MAAM,GAAG,IAAI,CAAC;YAEd,MAAM,EAAC,GAAG,CAAC,QAAQ,CAAC,EAAC;gBACjB,KAAK,qBAAS,CAAC,SAAS,EAAG,CAAC;oBACxB,IAAI,IAAI,GAAG,GAAkB,CAAC;oBAC9B,IAAI,QAAQ,GAAI,IAAI,CAAC,UAAU,EAAwB,CAAC,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;oBACnF,QAAQ,CAAC,QAAQ,GAAG,IAAI,CAAC,WAAW,CAAC,gBAAgB,EAAE,CAAC;oBACxD,MAAM,GAAG,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,aAAa,CAAC,IAAI,EAAC,EAAE,CAAC,CAAC;oBACzD,WAAW,CAAC,MAAM,EAAE,CAAC;oBACrB,KAAK,CAAC;gBACV,CAAC;gBACD,KAAK,qBAAS,CAAC,SAAS,EAAG,CAAC;oBACxB,IAAI,IAAI,GAAG,GAAkB,CAAC;oBAC9B,IAAI,QAAQ,GAAI,IAAI,CAAC,UAAU,EAAwB,CAAC,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;oBACnF,QAAQ,CAAC,QAAQ,GAAG,IAAI,CAAC,WAAW,CAAC,gBAAgB,EAAE,CAAC;oBACxD,MAAM,GAAG,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,aAAa,CAAC,IAAI,EAAC,EAAE,CAAC,CAAC;oBACzD,WAAW,CAAC,MAAM,EAAE,CAAC;oBACrB,KAAK,CAAC;gBACV,CAAC;gBACD,KAAK,qBAAS,CAAC,KAAK,EAAG,CAAC;oBACpB,IAAI,IAAI,GAAG,GAAc,CAAC;oBAC1B,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,WAAW,CAAC,gBAAgB,EAAE,CAAC;oBACpD,MAAM,GAAG,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,aAAa,CAAC,IAAI,EAAC,EAAE,CAAC,CAAC;oBACzD,WAAW,CAAC,MAAM,EAAE,CAAC;oBACrB,KAAK,CAAC;gBACV,CAAC;gBACD,SAAU,CAAC;oBACP,MAAM,GAAG,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,EACjD,kDAAkD,CAAC,CAAC;oBACxD,WAAW,CAAC,QAAQ,EAAE,CAAC;oBACvB,KAAK,CAAC;gBACV,CAAC;YACL,CAAC;YACD,MAAM,CAAC,MAAM,CAAC;QAClB,CAAC;QACD,IAAI,EAAC;YACD,MAAM,CAAC,MAAM,CAAC;QAClB,CAAC;IACL,CAAC;IAED;;;;OAIG;IACH,MAAM,CAAC,KAAS;QACZ,IAAI,MAAM,GAAG,IAAI,CAAC,WAAW,CAAC,YAAY,CAAC,oBAAoB,CAAC,IAAI,CAAC,EAAE,EAAE,KAAK,CAAC,CAAC;QAEhF,EAAE,EAAC,MAAM,CAAC,OAAO,CAAC,EAAC;YACf,IAAI,WAAW,GAAG,IAAI,CAAC,iBAAiB,EAAE,CAAC;YAC3C,WAAW,CAAC,KAAK,EAAE,CAAC;YAEpB,IAAI,GAAG,GAAG,IAAI,CAAC,UAAU,EAAE,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;YAC7C,MAAM,GAAG,IAAI,CAAC;YAEd,MAAM,EAAC,GAAG,CAAC,QAAQ,CAAC,EAAC;gBACjB,KAAK,qBAAS,CAAC,SAAS,EAAG,CAAC;oBACxB,IAAI,IAAI,GAAG,GAAkB,CAAC;oBAC9B,IAAI,QAAQ,GAAI,IAAI,CAAC,UAAU,EAAwB,CAAC,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;oBACnF,QAAQ,CAAC,QAAQ,GAAG,IAAI,CAAC;oBACzB,MAAM,GAAG,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,aAAa,CAAC,IAAI,EAAC,EAAE,CAAC,CAAC;oBACzD,WAAW,CAAC,MAAM,EAAE,CAAC;oBACrB,KAAK,CAAC;gBACV,CAAC;gBACD,KAAK,qBAAS,CAAC,SAAS,EAAG,CAAC;oBACxB,IAAI,IAAI,GAAG,GAAkB,CAAC;oBAC9B,IAAI,QAAQ,GAAI,IAAI,CAAC,UAAU,EAAwB,CAAC,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;oBACnF,QAAQ,CAAC,QAAQ,GAAG,IAAI,CAAC;oBACzB,MAAM,GAAG,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,aAAa,CAAC,IAAI,EAAC,EAAE,CAAC,CAAC;oBACzD,WAAW,CAAC,MAAM,EAAE,CAAC;oBACrB,KAAK,CAAC;gBACV,CAAC;gBACD,KAAK,qBAAS,CAAC,KAAK,EAAG,CAAC;oBACpB,IAAI,IAAI,GAAG,GAAc,CAAC;oBAC1B,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;oBACrB,MAAM,GAAG,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,aAAa,CAAC,IAAI,EAAC,EAAE,CAAC,CAAC;oBACzD,WAAW,CAAC,MAAM,EAAE,CAAC;oBACrB,KAAK,CAAC;gBACV,CAAC;gBACD,SAAU,CAAC;oBACP,MAAM,GAAG,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,EACjD,qDAAqD,CAAC,CAAC;oBAC3D,WAAW,CAAC,QAAQ,EAAE,CAAC;oBACvB,KAAK,CAAC;gBACV,CAAC;YACL,CAAC;YACD,MAAM,CAAC,MAAM,CAAC;QAClB,CAAC;QACD,IAAI,EAAC;YACD,MAAM,CAAC,MAAM,CAAC;QAClB,CAAC;IACL,CAAC;IAED;;;;;OAKG;IACH,YAAY,GAAkB,EAAE,IAAa,EAAE,IAAa;QACxD,KAAK,EAAE,CAAC;QAER,EAAE,EAAC,CAAC,GAAG,CAAC;YAAC,MAAM,IAAI,KAAK,CAAC,iEAAiE,CAAC,CAAC;QAC5F,EAAE,EAAC,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC;YAAC,MAAM,IAAI,KAAK,CAAC,sCAAsC,CAAC,CAAC;QAClF,EAAE,EAAC,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC;YAAC,MAAM,IAAI,KAAK,CAAC,sCAAsC,CAAC,CAAC;QAElF,IAAI,CAAC,YAAY,GAAG,GAAG,CAAC;QACxB,IAAI,CAAC,WAAW,GAAG,IAAI,KAAK,EAAoB,CAAC;QACjD,IAAI,CAAC,iBAAiB,GAAG,IAAI,KAAK,EAAgB,CAAC;QAEnD,MAAM,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,sBAAsB,CAC3D,IAAI,EAAE,IAAI,GAAG,EAAc,EAAE,IAAI,GAAG,EAAkC,EACrE,IAAI,GAAG,EAAoB,EAAE,IAAI,GAAG,EAAkB,EACvD,IAAI,GAAG,EAAe,EAAE,IAAI,GAAG,EAAiB,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;QAElE,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QAC/B,IAAI,CAAC,mBAAmB,GAAG,CAAC,CAAC;IACjC,CAAC;IAKD;;;;OAIG;IACH,qBAAqB;QACjB,EAAE,EAAC,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC;YAAC,MAAM,CAAC,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,iBAAiB,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;QACnG,IAAI;YAAC,MAAM,CAAC,IAAI,CAAC;IACrB,CAAC;IAED;;;;;;;;;OASG;IACI,gBAAgB,CAAC,EAAiB;QAErC,2BAA2B;QAE3B,EAAE,EAAC,CAAC,EAAE,CAAC;YAAC,MAAM,IAAI,KAAK,CAAC,8EAA8E,CAAC,CAAC;QACxG,IAAI,CAAC,EAAE,EAAC,EAAE,CAAC,QAAQ,KAAK,IAAI,CAAC,CAAC,CAAC;YAC3B,MAAM,IAAI,KAAK,CAAC,yEAAyE,CAAC,CAAC;QAC/F,CAAC;QACD,IAAI,CAAC,EAAE,EAAC,EAAE,CAAC,MAAM,KAAK,qCAAiB,CAAC,OAAO,CAAC,EAAC;YAC7C,MAAM,IAAI,KAAK,CAAC,gFAAgF,CAAC,CAAC;QACtG,CAAC;QACD,IAAI,CAAC,EAAE,EAAC,IAAI,CAAC,iBAAiB,CAAC,OAAO,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,EAAC;YAC7C,MAAM,IAAI,KAAK,CAAC,uEAAuE,CAAC,CAAC;QAC7F,CAAC;QACD,IAAI,EAAC;YACD,+DAA+D;YAC/D,gCAAgC;YAChC,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;YAGhC,IAAI,OAAO,GAAG,IAAI,CAAC,UAAU,EAAE,CAAC;YAEhC,2BAA2B;YAC3B,IAAI,GAAG,GAAG,IAAI,CAAC,UAAU,EAAE,CAAC;YAC5B,EAAE,EAAC,CAAC,GAAG,CAAC;gBAAC,MAAM,IAAI,KAAK,CAAC,+BAA+B,CAAC,CAAC;YAC1D,OAAO,GAAG,OAAO,CAAC,KAAK,EAAE,CAAC;YAE1B,8BAA8B;YAE9B,iFAAiF;YACjF,oCAAoC;YACpC,EAAE,EAAC,IAAI,CAAC,mBAAmB,IAAI,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,CAAC,CAAC,EAAC;gBACxD,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,mBAAmB,GAAG,CAAC,CAAC,EAClD,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,CAAC,IAAI,CAAC,mBAAmB,GAAG,CAAC,CAAC,CAAC,CAAC;YAClE,CAAC;YAED,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;YAC/B,EAAE,IAAI,CAAC,mBAAmB,CAAC;QAC/B,CAAC;QACD,2BAA2B;IAC/B,CAAC;IAED;;;;;;;;;OASG;IACI,eAAe,CAAC,EAAiB;QAEpC,EAAE,EAAC,CAAC,EAAE,CAAC;YAAC,MAAM,IAAI,KAAK,CAAC,6EAA6E,CAAC,CAAC;QACvG,IAAI,CAAC,EAAE,EAAC,EAAE,CAAC,QAAQ,KAAK,IAAI,CAAC,CAAC,CAAC;YAC3B,MAAM,IAAI,KAAK,CAAC,yEAAyE,CAAC,CAAC;QAC/F,CAAC;QACD,IAAI,CAAC,EAAE,EAAC,EAAE,CAAC,MAAM,KAAK,qCAAiB,CAAC,QAAQ,IAAI,EAAE,CAAC,MAAM,KAAK,qCAAiB,CAAC,UAAU,CAAC,EAAC;YAC5F,MAAM,IAAI,KAAK,CAAC,kEAAkE,CAAC,CAAC;QACxF,CAAC;QACD,IAAI,CAAC,EAAE,EAAC,IAAI,CAAC,iBAAiB,CAAC,OAAO,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,EAAC;YAC5C,MAAM,IAAI,KAAK,CAAC,iEAAiE,CAAC,CAAC;QACvF,CAAC;QACD,IAAI,CAAC,EAAE,EAAC,IAAI,CAAC,iBAAiB,CAAC,MAAM,IAAI,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,iBAAiB,CAAC,MAAM,GAAG,CAAC,CAAC,IAAI,EAAE,CAAC,EAAC;YACtG,MAAM,IAAI,KAAK,CAAC,iFAAiF,CAAC,CAAC;QACvG,CAAC;QACD,IAAI,EAAC;YAED,EAAE,EAAC,EAAE,KAAK,IAAI,CAAC,qBAAqB,EAAE,CAAC;gBAAC,MAAM,IAAI,KAAK,CACnD,wDAAwD,CAAC,CAAC;YAE9D,4FAA4F;YAC5F,EAAE,EAAC,EAAE,CAAC,MAAM,KAAK,qCAAiB,CAAC,UAAU,CAAC,EAAC;gBAE3C,oDAAoD;gBACpD,IAAI,GAAG,GAAG,EAAmB,CAAC;gBAC9B,GAAG,CAAC,UAAU,CAAC,KAAK,EAAE,CAAC;gBACvB,GAAG,CAAC,WAAW,CAAC,KAAK,EAAE,CAAC;gBACxB,GAAG,CAAC,YAAY,CAAC,KAAK,EAAE,CAAC;gBAEzB,IAAI,CAAC,WAAW,CAAC,GAAG,EAAE,CAAC;gBACvB,IAAI,CAAC,iBAAiB,CAAC,GAAG,EAAE,CAAC;gBAC7B,EAAE,IAAI,CAAC,mBAAmB,CAAC;YAC/B,CAAC;YACD,IAAI,CAAC,EAAE,EAAC,EAAE,CAAC,MAAM,KAAK,qCAAiB,CAAC,QAAQ,CAAC,EAAC;gBAE9C,oDAAoD;gBACpD,IAAI,GAAG,GAAG,EAAmB,CAAC;gBAE9B,IAAI,KAAK,GAAG,EAAE,CAAC;gBACf,IAAI,MAAM,GAAG,EAAE,CAAC;gBAChB,IAAI,OAAO,GAAG,EAAE,CAAC;gBAEjB,0BAA0B;gBAC1B,GAAG,EAAC,IAAI,CAAC,IAAI,GAAG,CAAC,YAAY,CAAC,IAAI,EAAE,CAAC,EAAC;oBAClC,EAAE,EAAC,GAAG,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;wBAAC,GAAG,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;oBACnD,EAAE,EAAC,GAAG,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;wBAAC,GAAG,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;gBACzD,CAAC;gBAED,GAAG,EAAC,IAAI,CAAC,IAAI,GAAG,CAAC,UAAU,CAAC,IAAI,EAAE,CAAC,EAAC;oBAChC,EAAE,EAAC,GAAG,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;wBAAC,GAAG,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;gBACzD,CAAC;gBAED,+BAA+B;gBAE/B,GAAG,EAAC,IAAI,CAAC,IAAI,GAAG,CAAC,UAAU,CAAC,IAAI,EAAE,CAAC,EAAC;oBAChC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;gBAClB,CAAC;gBAED,GAAG,EAAC,IAAI,CAAC,IAAI,GAAG,CAAC,WAAW,CAAC,IAAI,EAAE,CAAC,EAAC;oBACjC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;gBACnB,CAAC;gBAED,GAAG,EAAC,IAAI,CAAC,IAAI,GAAG,CAAC,YAAY,CAAC,IAAI,EAAE,CAAC,EAAC;oBAClC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;gBACpB,CAAC;gBAED,IAAI,GAAG,GAAG,EAAC,KAAK,EAAG,KAAK,EAAE,MAAM,EAAG,MAAM,EAAE,OAAO,EAAG,OAAO,EAAC,CAAC;gBAE9D,IAAI,CAAC,iBAAiB,CAAC,GAAG,EAAE,CAAC;gBAE7B,GAAG,CAAC,UAAU,CAAC,KAAK,EAAE,CAAC;gBACvB,GAAG,CAAC,WAAW,CAAC,KAAK,EAAE,CAAC;gBACxB,GAAG,CAAC,YAAY,CAAC,KAAK,EAAE,CAAC;gBAEzB,kCAAkC;gBAClC,IAAI,CAAC,IAAI,CAAC,uCAAkB,CAAC,eAAe,EACxC,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,gBAAgB,CAAC,EAAC,MAAM,EAAE,IAAI,EAAE,IAAI,EAAE,GAAG,EAAC,CAAC,CAAC,CAAC;YAC9E,CAAC;YACD,IAAI,EAAC;gBACD,MAAM,IAAI,KAAK,CAAC,oFAAoF,CAAC,CAAC;YAC1G,CAAC;QACL,CAAC;QAED,mEAAmE;QACnE,2EAA2E;QAC3E,4BAA4B;QAC5B;;;;;;WAMG;IACP,CAAC;IAaD;;;OAGG;IACH,iBAAiB;QACb,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC;IAC7D,CAAC;IAID;;OAEG;IACH,IAAW,WAAW;QAClB,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC;IAC7B,CAAC;IAED,eAAe,CAAE,KAAqB;QAClC,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;IAC9B,CAAC;IAED;;;;;OAKG;IACH,IAAI;QACA,MAAM,IAAI,KAAK,CAAC,kBAAkB,CAAC,CAAC;IACxC,CAAC;IAED;;OAEG;IACH,KAAK;QACD,IAAI,CAAC,WAAW,CAAC,eAAe,CAAC,aAAa,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;IAC5D,CAAC;IAED;;;OAGG;IACI,UAAU;QACb,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC;IACtD,CAAC;IAED;;;;OAIG;IACH,IAAI;QACA,EAAE,EAAC,IAAI,CAAC,mBAAmB,GAAG,CAAC,CAAC,EAAC;YAC7B,EAAE,IAAI,CAAC,mBAAmB,CAAC;YAC3B,IAAI,CAAC,IAAI,CAAC,uCAAkB,CAAC,eAAe,EAAE,IAAI,CAAC,WAAW,CAAC,OAAO;iBACjE,gBAAgB,CAAC,EAAC,MAAM,EAAG,IAAI,EAAE,IAAI,EAAG,IAAI,EAAC,CAAC,CAAC,CAAC;YACrD,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,aAAa,CAAC,IAAI,EAAC,EAAE,CAAC,CAAC;QAC3D,CAAC;QACD,IAAI,EAAC;YACD,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,EAAC,6BAA6B,CAAC,CAAC;QACvF,CAAC;IACL,CAAC;IAED;;;;;OAKG;IACH,IAAI;QACA,EAAE,EAAC,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,CAAC,CAAC,EAAC;YACvD,EAAE,IAAI,CAAC,mBAAmB,CAAC;YAC3B,IAAI,CAAC,IAAI,CAAC,uCAAkB,CAAC,eAAe,EAAE,IAAI,CAAC,WAAW,CAAC,OAAO;iBACjE,gBAAgB,CAAC,EAAC,MAAM,EAAG,IAAI,EAAE,IAAI,EAAG,IAAI,EAAC,CAAC,CAAC,CAAC;YACrD,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,aAAa,CAAC,IAAI,EAAC,EAAE,CAAC,CAAC;QAC3D,CAAC;QACD,IAAI,EAAC;YACD,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,EAC/C,qCAAqC,CAAC,CAAC;QAC/C,CAAC;IACL,CAAC;CACJ;AAnZD,4BAmZC;;;;;;;;;;;AC9aD,oGAA4C;AAiB5C,4FAA6C;AAS7C;;;;;;;;GAQG;AACH,qBAA6B,SAAQ,2BAAuC;IAQxE,IAAW,YAAY;QACnB,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC;IACtB,CAAC;IAED,IAAW,YAAY,CAAC,KAAc;QAClC,EAAE,EAAC,CAAC,KAAK,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC;YAAC,MAAM,IAAI,KAAK,CAAC,sCAAsC,CAAC,CAAC;QACpF,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;IACvB,CAAC;IAID;;OAEG;IACH,IAAW,YAAY;QACnB,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC;IACtB,CAAC;IAED,IAAW,YAAY,CAAC,KAAc;QAClC,EAAE,EAAC,CAAC,KAAK,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC;YAAC,MAAM,IAAI,KAAK,CAAC,sCAAsC,CAAC,CAAC;QACpF,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;IACvB,CAAC;IAED;;OAEG;IACH,IAAW,MAAM;QACb,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC;IACxB,CAAC;IAED;;OAEG;IACH,IAAW,SAAS;QAChB,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC;IACvB,CAAC;IAED;;;OAGG;IACH,IAAW,aAAa;QACpB,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC;IAC5B,CAAC;IAED;;;;;;;;;;;;;OAaG;IACH,YAAY,GAAe,EAAE,MAAuB,EAAE,SAAiC,EAC3E,aAAoC,EAAE,WAAiC,EACvE,QAA2B,EAAE,UAA+B,EAC5D,IAAa,EAAE,IAAY;QAEnC,KAAK,EAAE,CAAC;QAER,EAAE,EAAC,CAAC,GAAG,IAAI,CAAC,MAAM,IAAI,CAAC,SAAS,IAAI,CAAC,aAAa,IAAI,CAAC,WAAW,IAAI,CAAC,QAAQ,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;YAC7F,MAAM,IAAI,KAAK,CAAC,iFAAiF,CAAC;QACtG,CAAC;QAAA,CAAC;QAEF,IAAI,CAAC,SAAS,GAAG,GAAG,CAAC;QACrB,IAAI,CAAC,MAAM,GAAG,SAAS,CAAC;QACxB,IAAI,CAAC,WAAW,GAAG,aAAa,CAAC;QACjC,IAAI,CAAC,YAAY,GAAG,WAAW,CAAC;QAChC,IAAI,CAAC,SAAS,GAAG,QAAQ,CAAC;QAC1B,IAAI,CAAC,WAAW,GAAG,UAAU,CAAC;QAC9B,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC;QACtB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;QAClB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;QAClB,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,CAAC,wCAAwC;QAEhE,IAAI,GAAG,GAAG,IAAI,CAAC;QACf,IAAI,KAAK,GAAG,CAAC,CAAC;QACd,GAAG,EAAC,IAAI,CAAC,IAAI,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC,EAAC;YAC/B,EAAE,EAAC,CAAC,CAAC,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;gBAChB,EAAE,KAAK,CAAC;gBACR,GAAG,GAAG,CAAC,CAAC;YACZ,CAAC;QACL,CAAC;QAED,EAAE,EAAC,KAAK,GAAG,CAAC,CAAC,EAAC;YACV,MAAM,IAAI,KAAK,CAAC,2DAA2D,CAAC,CAAC;QACjF,CAAC;QACD,IAAI,CAAC,EAAE,EAAC,KAAK,IAAI,CAAC,CAAC,EAAC;YAChB,IAAI,CAAC,UAAU,GAAG,GAAG,CAAC,OAAO,CAAC;QAClC,CAAC;IACL,CAAC;IAID;;OAEG;IACH,WAAW;QAEP,EAAE,EAAC,CAAC,IAAI,CAAC,UAAU,CAAC;YAAC,MAAM,CAAC,IAAI,CAAC;QAEjC,IAAI,SAAS,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QAExD,MAAM,CAAC,SAAS,CAAC,SAAS,EAAE,GAAG,IAAI,GAAG,SAAuB,CAAC;IAClE,CAAC;IAED;;;;OAIG;IACH,QAAQ,CAAC,EAAO;QACZ,EAAE,EAAC,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;YAAC,MAAM,CAAC,IAAI,CAAC;QAC5C,IAAI,CAAC,CAAC;YACF,IAAI,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;YAEhC,MAAM,CAAC,KAAK,CAAC,SAAS,EAAE,GAAG,IAAI,GAAG,KAAK,CAAC;QAC5C,CAAC;IACL,CAAC;IAID;;OAEG;IACH,IAAW,QAAQ;QACf,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC;IAC1B,CAAC;IAED;;;OAGG;IACH,KAAK;QACD,IAAI,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAC;QACxB,IAAI,MAAM,GAAG,IAAI,GAAG,EAAa,CAAC;QAClC,IAAI,SAAS,GAAG,IAAI,GAAG,EAA+B,CAAC;QACvD,IAAI,aAAa,GAAG,IAAI,GAAG,EAAoB,CAAC;QAChD,IAAI,WAAW,GAAG,IAAI,GAAG,EAAkB,CAAC;QAC5C,IAAI,QAAQ,GAAG,IAAI,GAAG,EAAe,CAAC;QACtC,IAAI,UAAU,GAAG,IAAI,GAAG,EAAiB,CAAC;QAE1C,gCAAgC;QAChC,GAAG,EAAC,IAAI,CAAC,IAAI,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC,EAAC;YAC/B,IAAI,IAAI,GAAG,CAAC,CAAC,KAAK,EAAE,CAAC;YACrB,MAAM,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,EAAC,IAAI,CAAC,CAAC;QAC7B,CAAC;QAED,mCAAmC;QACnC,GAAG,EAAC,IAAI,CAAC,IAAI,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,CAAC,EAAC;YAClC,IAAI,IAAI,GAAG,CAAC,CAAC,KAAK,EAAE,CAAC;YACrB,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,EAAC,IAAI,CAAC,CAAC;QAChC,CAAC;QAED,uCAAuC;QACvC,GAAG,EAAC,IAAI,CAAC,IAAI,IAAI,CAAC,aAAa,CAAC,MAAM,EAAE,CAAC,EAAC;YACtC,EAAE,EAAC,CAAC,CAAC,QAAQ,IAAI,qBAAS,CAAC,SAAS,CAAC,EAAC;gBAClC,IAAI,IAAI,GAAI,CAAgB,CAAC,KAAK,EAAE,CAAC;gBACrC,aAAa,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,EAAE,IAAI,CAAC,CAAC;YACrC,CAAC;YACD,IAAI,CAAC,EAAE,EAAC,CAAC,CAAC,QAAQ,IAAI,qBAAS,CAAC,SAAS,CAAC,EAAC;gBACvC,IAAI,IAAI,GAAI,CAAgB,CAAC,KAAK,EAAE,CAAC;gBACrC,aAAa,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,EAAE,IAAI,CAAC,CAAC;YACrC,CAAC;YACD,IAAI,EAAC;gBACD,MAAM,IAAI,KAAK,CAAC,2BAA2B,GAAG,CAAC,CAAC,QAAQ,CAAC,CAAC;YAC9D,CAAC;QACL,CAAC;QAED,qCAAqC;QACrC,GAAG,EAAC,IAAI,CAAC,IAAI,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE,CAAC,EAAC;YACpC,IAAI,IAAI,GAAG,CAAC,CAAC,KAAK,EAAE,CAAC;YACrB,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,EAAE,IAAI,CAAC,CAAC;QACnC,CAAC;QAED,kCAAkC;QAClC,GAAG,EAAC,IAAI,CAAC,IAAI,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAC;YACjC,IAAI,CAAC,GAAG,CAAc,CAAC;YACvB,IAAI,IAAI,GAAG,CAAC,CAAC,KAAK,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC,CAAC,WAAW,CAAe,CAAC,CAAC;YACnE,QAAQ,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,EAAE,IAAI,CAAC,CAAC;QAChC,CAAC;QAED,oCAAoC;QACpC,GAAG,EAAC,IAAI,CAAC,IAAI,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE,CAAC,EAAC;YACnC,IAAI,CAAC,GAAG,CAAgB,CAAC;YACzB,IAAI,KAAK,GAAG,aAAa,CAAC,GAAG,CAAC,CAAC,CAAC,YAAY,CAAe,CAAC;YAC5D,IAAI,IAAI,GAAG,CAAC,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;YAC1B,UAAU,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,EAAE,IAAI,CAAC,CAAC;QAClC,CAAC;QAED,IAAI,OAAO,GAAG,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,OAAO,CAAC,sBAAsB,CAClE,GAAG,EAAE,MAAM,EAAE,SAAS,EAAE,aAAa,EAAE,WAAW,EAAE,QAAQ,EAAE,UAAU,EACxE,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;QAE5B,MAAM,CAAC,OAAO,CAAC;IACnB,CAAC;IAED;;;OAGG;IACH,WAAW;QACP,iEAAiE;QACjE,uEAAuE;QACvE,GAAG,EAAC,IAAI,CAAC,IAAI,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC,EAAC;YAC7B,IAAI,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YAC/B,EAAE,EAAC,CAAC,KAAK,CAAC,SAAS,EAAE,IAAI,KAAK,CAAC,MAAM,IAAI,IAAI,CAAC;gBAAC,MAAM,CAAC,KAAK,CAAC;QAChE,CAAC;QACD,MAAM,CAAC,IAAI,CAAC;IAChB,CAAC;IAED,cAAc;QAEV,+DAA+D;QAC/D,uEAAuE;QACvE,GAAG,EAAC,IAAI,CAAC,IAAI,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC,EAAC;YAC7B,IAAI,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YAC/B,EAAE,EAAC,CAAC,KAAK,CAAC,SAAS,EAAE,IAAI,KAAK,CAAC,MAAM,IAAI,IAAI,CAAC;gBAAC,MAAM,CAAC,KAAK,CAAC;QAChE,CAAC;QACD,MAAM,CAAC,IAAI,CAAC;IAChB,CAAC;IAED;;;;;;;;OAQG;IACH,SAAS,CAAC,IAAa,EAAE,IAAY,EAAE,KAAc,EAAE,OAAiB;QAEpE,IAAI,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,OAAO,CAAC,YAAY,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,EAC1E,IAAI,EAAE,KAAK,EAAE,OAAO,CAAY,CAAC;QAErC,EAAE,EAAC,IAAI,CAAC,WAAW,EAAE,CAAC,EAAC;YAEnB,kDAAkD;YAClD,IAAI,IAAI,GAAG,IAAI,CAAC,cAAc,EAAE,CAAC;YAEjC,kEAAkE;YAClE,EAAE,EAAC,CAAC,IAAI,CAAC,CAAC,CAAC;gBACP,MAAM,IAAI,KAAK,CAAC,wDAAwD,CAAC,CAAC;YAC9E,CAAC;YAED,2FAA2F;YAC3F,EAAE,EAAC,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,gBAAgB,EAAE,CAAC,EAAC;gBAC9D,MAAM,CAAC,IAAI,CAAC;YAChB,CAAC;YACA,IAAI,EAAC;gBACF,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,KAAK,CAAC,EAAE,EAAE,KAAK,CAAC,CAAC;gBACjC,KAAK,CAAC,YAAY,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;gBAClC,KAAK,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,gBAAgB,EAAE,CAAC;gBAC9D,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC,EAAE,CAAC;gBACvB,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC,EAAE,CAAC;gBACvB,MAAM,CAAC,KAAK,CAAC;YACjB,CAAC;QACL,CAAC;QACD,IAAI,EAAC;YACD,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,KAAK,CAAC,EAAE,EAAE,KAAK,CAAC,CAAC;YACjC,KAAK,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,gBAAgB,EAAE,CAAC;YAC9D,MAAM,CAAC,KAAK,CAAC;QACjB,CAAC;IACL,CAAC;IAED;;;OAGG;IACH,QAAQ;QAEJ,EAAE,EAAC,IAAI,CAAC,WAAW,EAAE,CAAC,EAAC;YACnB,kDAAkD;YAClD,IAAI,IAAI,GAAG,IAAI,CAAC,cAAc,EAAE,CAAC;YAEjC,EAAE,EAAC,CAAC,IAAI,CAAC;gBAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,EAClE,oBAAoB,CAAC,CAAC;YAE1B,2FAA2F;YAC3F,EAAE,EAAC,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,gBAAgB,EAAE,CAAC,EAAC;gBAC9D,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,EACxD,iEAAiE,CAAC,CAAC;YAC3E,CAAC;YACD,IAAI,EAAC;gBACD,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;gBAC9B,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,OAAO,CAAC,aAAa,CAAC,IAAI,EAAC,EAAE,CAAC,CAAC;YACpE,CAAC;QACL,CAAC;QACD,IAAI,EAAC;YACD,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,EACxD,oBAAoB,CAAC,CAAC;QAC9B,CAAC;IACL,CAAC;IAED;;;;;;OAMG;IACH,cAAc,CAAC,QAAa,EAAE,WAA0B;QAEpD,EAAE,EAAC,CAAC,WAAW,CAAC;YAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,EACzE,sDAAsD,CAAC,CAAC;QAE5D,WAAW,GAAG,WAA4B,CAAC;QAE3C,EAAE,EAAC,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC;YAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,EACnG,kBAAkB,WAAW,CAAC,EAAE,sCAAsC,CAAC,CAAC;QAE5E,EAAE,EAAC,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC;YAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,EAChF,qEAAqE,CAAC,CAAC;QAE3E,yDAAyD;QACzD,EAAE,EAAC,QAAQ,CAAC,EAAC;YAET,mCAAmC;YACnC,EAAE,EAAC,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,EAAC;gBAEjC,IAAI,MAAM,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,QAAQ,CAAkB,CAAC;gBAC/D,IAAI,UAAU,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;gBAEnD,EAAE,EAAC,UAAU,CAAC,EAAC;oBAEX,EAAE,EAAC,UAAU,CAAC,WAAW,EAAE,KAAK,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,gBAAgB,EAAE,CAAC,EAAC;wBAC1E,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,EACxD,8CAA8C;4BAC9C,0CAA0C,CAAC,CAAC;oBACpD,CAAC;oBAED,EAAE,EAAC,UAAU,CAAC,SAAS,EAAE,CAAC;wBAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,EACnF,sDAAsD,CAAC,CAAC;oBAE5D,EAAE,EAAC,CAAC,UAAU,CAAC,QAAQ,EAAE,CAAC,MAAM,CAAC;wBAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,EAC1F,6DAA6D,CAAC,CAAC;oBAEnE,IAAI,OAAO,GAAG,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,OAAO,CAAC,eAAe,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;oBAC/E,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,OAAO,CAAC,EAAE,EAAE,OAAO,CAAC,CAAC;oBACxC,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,WAAW,CAAC,EAAE,EAAE,WAAW,CAAC,CAAC;oBACpD,OAAO,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,gBAAgB,EAAE,CAAC;oBAChE,UAAU,CAAC,WAAW,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;oBACxC,OAAO,CAAC,SAAS,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC;oBACjC,OAAO,CAAC,OAAO,GAAG,WAAW,CAAC,EAAE,CAAC;oBAChC,WAA6B,CAAC,MAAM,GAAG,OAAO,CAAC,EAAE,CAAC;oBAElD,IAAI,CAAC,QAAQ,CAAC,qBAAqB,EAAoB,CAAC,UAAU,CAAC,GAAG,CACnE,WAAW,CAAC,EAAE,EAAE,WAAW,CAAC,CAAC;oBAEjC,IAAI,IAAI,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;oBAErD,IAAI,CAAC,QAAQ,CAAC,qBAAqB,EAAoB,CAAC,WAAW,CAAC,GAAG,CACpE,UAAU,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;oBAE9B,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,OAAO,CAAC,aAAa,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC;gBACrE,CAAC;gBACD,IAAI,EAAC;oBACD,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,EACxD,qBAAqB,MAAM,CAAC,MAAM,cAAc,CAAC,CAAC;gBAC1D,CAAC;YACL,CAAC;YAED,IAAI,EAAC;gBACD,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,EACxD,iBAAiB,QAAQ,aAAa,CAAC,CAAC;YAChD,CAAC;QACL,CAAC;QACD,IAAI,EAAC;YAED,GAAG,EAAC,IAAI,CAAC,IAAI,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,CAAC,EAAC;gBAClC,EAAE,EAAC,CAAC,CAAC,CAAC,SAAS,EAAE,CAAC;oBAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,EAC3E,wDAAwD,CAAC,CAAC;YAClE,CAAC;YAED,IAAI,IAAI,GAAG,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,OAAO,CAAC,eAAe,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YAC5E,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,EAAE,IAAI,CAAC,CAAC;YAClC,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,WAAW,CAAC,EAAE,EAAE,WAAW,CAAC,CAAC;YACpD,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,gBAAgB,EAAE,CAAC;YAC7D,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;YACrB,IAAI,CAAC,OAAO,GAAG,WAAW,CAAC,EAAE,CAAC;YAC7B,WAA6B,CAAC,MAAM,GAAG,IAAI,CAAC,EAAE,CAAC;YAChD,IAAI,CAAC,UAAU,GAAG,WAAW,CAAC,EAAE,CAAC;YAEhC,IAAI,CAAC,QAAQ,CAAC,qBAAqB,EAAoB,CAAC,UAAU,CAAC,GAAG,CACnE,WAAW,CAAC,EAAE,EAAC,WAAW,CAAC,CAAC;YAEhC,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,OAAO,CAAC,aAAa,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC;QACrE,CAAC;IACL,CAAC;IAED;;;;OAIG;IACH,iBAAiB,CAAC,EAAO;QAErB,EAAE,EAAC,CAAC,EAAE,CAAC;YAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,EAChE,wDAAwD,CAAC,CAAC;QAC9D,IAAI,CAAC,EAAE,EAAC,CAAC,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;YAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,EAC7F,kBAAkB,EAAE,cAAc,CAAC,CAAC;QACxC,IAAI,EAAC;YACD,IAAI,SAAS,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,EAAE,CAAkB,CAAC;YAC5D,IAAI,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;YAChD,EAAE,EAAC,IAAI,CAAC,SAAS,EAAE,CAAC;gBAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,EAC7E,eAAe,EAAE,0BAA0B,CAAC,CAAC;YACjD,IAAI,CAAC,EAAE,EAAC,IAAI,CAAC,WAAW,EAAE,KAAK,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,gBAAgB,EAAE,CAAC;gBACxE,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,EAC5D,iDAAiD,EAAE,4CAA4C,CAAC,CAAC;YACrG,IAAI,CAAC,CAAC;gBACF,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;gBAC7B,IAAI,CAAC,QAAQ,CAAC,qBAAqB,EAAoB,CAAC,YAAY,CAAC,GAAG,CACrE,SAAS,CAAC,EAAE,EAAC,SAAS,CAAC,EAAE,CAAC,CAAC;gBAC/B,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,OAAO,CAAC,aAAa,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC;YACrE,CAAC;QACL,CAAC;IACL,CAAC;IAED;;;;OAIG;IACH,YAAY,CAAC,EAAO;QAEhB,EAAE,EAAC,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;YAAC,MAAM,CAAC,IAAI,CAAC;QAEnD,IAAI,SAAS,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;QAE3C,EAAE,EAAC,SAAS,CAAC,SAAS,EAAE,CAAC;YAAC,MAAM,CAAC,IAAI,CAAC;QACtC,IAAI;YAAC,MAAM,CAAC,SAAuB,CAAC;IACxC,CAAC;IAED;;;;OAIG;IACH,YAAY,CAAC,EAAO;QAChB,EAAE,EAAC,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;YAAC,MAAM,CAAC,IAAI,CAAC;QAEnD,IAAI,IAAI,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;QAEtC,EAAE,EAAC,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC,EAAC;YAClB,MAAM,CAAC,IAAkB,CAAC;QAC9B,CAAC;QACD,IAAI,EAAC;YACD,MAAM,CAAC,IAAI,CAAC;QAChB,CAAC;IACL,CAAC;IAID;;OAEG;IACH,IAAW,WAAW;QAClB,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC;IAC7B,CAAC;IAID;;OAEG;IACH,IAAW,QAAQ;QACf,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC;IAC1B,CAAC;IAID;;OAEG;IACH,IAAW,UAAU;QACjB,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC;IAC5B,CAAC;IAED;;;;;;;;OAQG;IACH,aAAa,CAAC,QAAa,EAAE,QAAa,EAAE,IAAa;QAErD,EAAE,EAAC,CAAC,QAAQ,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;YACxB,0BAA0B;YAC1B,MAAM,CAAC,IAAI,CAAC;QAChB,CAAC;QAED,gEAAgE;QAChE,GAAG,EAAC,IAAI,CAAC,IAAI,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE,CAAC,EAAC;YACpC,EAAE,EAAC,CAAC,CAAC,QAAQ,KAAK,QAAQ,IAAI,CAAC,CAAC,QAAQ,KAAK,QAAQ,IAAI,CAAC,CAAC,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;gBACtE,0BAA0B;gBAC1B,MAAM,CAAC,IAAI,CAAC;YAChB,CAAC;QACL,CAAC;QAED,IAAI,MAAM,GAAG,IAAI,CAAC;QAElB,4CAA4C;QAE5C,iCAAiC;QACjC,EAAE,EAAC,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAI,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,QAAQ,CAAC;aAC9D,QAAQ,KAAK,qBAAS,CAAC,SAAS,CAAC,EAAC;YAEvC,MAAM,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;YAE1C,0DAA0D;YAC1D,EAAE,EAAC,MAAM,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;gBACpB,0BAA0B;gBAC1B,MAAM,CAAC,IAAI,CAAC;YAChB,CAAC;YAED,mDAAmD;YACnD,EAAE,EAAC,MAAM,CAAC,WAAW,EAAE,KAAK,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,gBAAgB,EAAE,CAAC,EAAC;gBACtE,0BAA0B;gBAC1B,MAAM,CAAC,IAAI,CAAC;YAChB,CAAC;QACL,CAAC;QAED,IAAI,CAAC,EAAE,EAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,EAAC;YAEjC,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,QAAQ,CAAc,CAAC;YAElD,0DAA0D;YAC1D,EAAE,EAAC,MAAM,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;gBACpB,0BAA0B;gBAC1B,MAAM,CAAC,IAAI,CAAC;YAChB,CAAC;YAED,uEAAuE;YACvE,+BAA+B;YAC/B,IAAI,SAAS,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC;YAEtD,EAAE,EAAC,SAAS,CAAC,SAAS,EAAE,IAAI,SAAS,CAAC,WAAW,EAAE,KAAK,IAAI,CAAC,QAAQ;iBAC5D,WAAW,CAAC,gBAAgB,EAAE,CAAC,EAAC;gBACrC,0BAA0B;gBAC1B,MAAM,CAAC,IAAI,CAAC;YAChB,CAAC;QACL,CAAC;QACD,IAAI,EAAC;YACD,0BAA0B;YAC1B,MAAM,CAAC,IAAI,CAAC;QAChB,CAAC;QAED,2CAA2C;QAE3C,IAAI,MAAM,GAAkB,IAAI,CAAC;QAEjC,gDAAgD;QAChD,EAAE,EAAC,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,EAAC;YACjC,MAAM,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;YAC1C,qEAAqE;YACrE,EAAE,EAAC,MAAM,CAAC,SAAS,EAAE,IAAI,MAAM,CAAC,WAAW,EAAE,KAAK,IAAI,CAAC,QAAQ;iBACtD,WAAW,CAAC,gBAAgB,EAAE,CAAC,CAAC,CAAC;gBACtC,0BAA0B;gBAC1B,MAAM,CAAC,IAAI,CAAC;YAChB,CAAC;QACL,CAAC;QACD,IAAI,EAAC;YACD,0BAA0B;YAC1B,MAAM,CAAC,IAAI,CAAC;QAChB,CAAC;QAED,kEAAkE;QAClE,2CAA2C;QAE3C,IAAI,UAAU,GAAG,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,OAAO,CAAC,iBAAiB,CAChE,IAAI,CAAC,QAAQ,EAAE,QAAQ,EAAE,QAAQ,EAAE,IAAI,CAAC,CAAC;QAE7C,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,EAAE,EAAE,UAAU,CAAC,CAAC;QAEhD,mCAAmC;QACnC,EAAE,EAAC,MAAM,CAAC,QAAQ,KAAK,qBAAS,CAAC,SAAS,CAAC,EAAC;YACvC,MAAsB,CAAC,mBAAmB,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC;QACpE,CAAC;QACD,IAAI,CAAC,EAAE,EAAC,MAAM,CAAC,QAAQ,KAAK,qBAAS,CAAC,OAAO,CAAC,EAAC;YAC1C,MAAoB,CAAC,iBAAiB,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC;QAChE,CAAC;QACD,IAAI,EAAC;YACD,2BAA2B;YAC3B,MAAM,CAAC,IAAI,CAAC;QAChB,CAAC;QAED,mCAAmC;QACnC,EAAE,EAAC,MAAM,CAAC,QAAQ,KAAK,qBAAS,CAAC,SAAS,CAAC,EAAC;YACvC,MAAsB,CAAC,kBAAkB,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC;QACnE,CAAC;QACD,IAAI,CAAC,EAAE,EAAC,MAAM,CAAC,QAAQ,KAAK,qBAAS,CAAC,SAAS,CAAC,EAAC;YAC5C,MAAsB,CAAC,gBAAgB,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC;QACjE,CAAC;QACD,IAAI,EAAC;YACD,2BAA2B;YAC3B,MAAM,CAAC,IAAI,CAAC;QAChB,CAAC;QACD,2BAA2B;QAE1B,IAAI,CAAC,QAAQ,CAAC,qBAAqB,EAAoB,CAAC,UAAU,CAAC,GAAG,CACnE,UAAU,CAAC,EAAE,EAAC,UAAU,CAAC,CAAC;QAC7B,IAAI,CAAC,QAAQ,CAAC,qBAAqB,EAAoB,CAAC,WAAW,CAAC,GAAG,CACpE,UAAU,CAAC,QAAQ,EAAC,MAAM,CAAC,CAAC;QAC/B,IAAI,CAAC,QAAQ,CAAC,qBAAqB,EAAoB,CAAC,WAAW,CAAC,GAAG,CACpE,UAAU,CAAC,QAAQ,EAAC,MAAM,CAAC,CAAC;QAEhC,MAAM,CAAC,UAAU,CAAC;IACtB,CAAC;IAED;;;;OAIG;IACH,gBAAgB,CAAC,EAAO;QAEpB,EAAE,EAAC,CAAC,EAAE,CAAC;YAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,EAChE,oEAAoE,CAAC,CAAC;QAE1E,EAAE,EAAC,CAAC,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;YAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,EACtF,iBAAiB,EAAE,eAAe,CAAC,CAAC;QAExC,IAAI,UAAU,GAAE,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;QAEzC,EAAE,EAAC,UAAU,CAAC,SAAS,EAAE,CAAC;YAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,EACnF,iBAAiB,EAAE,gCAAgC,CAAC,CAAC;QAEzD,UAAU,CAAC,iBAAiB,GAAG,IAAI,CAAC;QAEnC,IAAI,CAAC,QAAQ,CAAC,qBAAqB,EAAoB,CAAC,YAAY,CAAC,GAAG,CACrE,UAAU,CAAC,EAAE,EAAC,UAAU,CAAC,CAAC;IAClC,CAAC;IAED;;;;OAIG;IACH,aAAa,CAAC,EAAO;QACjB,EAAE,EAAC,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,iBAAiB,CAAC;YAAC,MAAM,CAAC,IAAI,CAAC;QAC/F,IAAI;YAAC,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;IACzC,CAAC;IAED;;;;;OAKG;IACH,UAAU,CAAC,WAAgB,EAAE,IAAa;QAEtC,EAAE,EAAC,CAAC,WAAW,CAAC;YAAC,MAAM,CAAC,IAAI,CAAC;QAE7B,EAAE,EAAC,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC,EAAC;YAEpC,IAAI,SAAS,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,WAAW,CAAgB,CAAC;YAEnE,EAAE,EAAC,SAAS,CAAC,SAAS,EAAE,CAAC;gBAAC,MAAM,CAAC,IAAI,CAAC;YACtC,IAAI,CAAC,EAAE,EAAC,SAAS,CAAC,WAAW,EAAE,KAAK,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,gBAAgB,EAAE,CAAC,EAAC;gBAC9E,MAAM,CAAC,IAAI,CAAC;YAChB,CAAC;YACD,IAAI,EAAC;gBACD,IAAI,SAAS,GAAG,IAAI,CAAC,YAAY,CAAC,WAAW,CAAgB,CAAC;gBAC9D,IAAI,OAAO,GAAG,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,OAAO,CAAC,cAAc,CAAC,SAAS,EAAE,IAAI,CAAc,CAAC;gBAC7F,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,OAAO,CAAC,EAAE,EAAC,OAAO,CAAC,CAAC;gBACtC,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;gBACpC,OAAO,CAAC,WAAW,GAAG,SAAS,CAAC,EAAE,CAAC;gBAElC,IAAI,CAAC,QAAQ,CAAC,qBAAqB,EAAoB,CAAC,UAAU,CAAC,GAAG,CACnE,OAAO,CAAC,EAAE,EAAC,OAAO,CAAC,CAAC;gBACvB,IAAI,CAAC,QAAQ,CAAC,qBAAqB,EAAoB,CAAC,WAAW,CAAC,GAAG,CACpE,SAAS,CAAC,EAAE,EAAC,SAAS,CAAC,CAAC;gBAE5B,MAAM,CAAC,OAAO,CAAC;YACnB,CAAC;QACL,CAAC;QACD,IAAI,EAAC;YACD,MAAM,CAAC,IAAI,CAAC;QAChB,CAAC;IACL,CAAC;IAED;;;;OAIG;IACH,UAAU,CAAC,EAAO;QACd,EAAE,EAAC,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;YAAC,MAAM,CAAC,IAAI,CAAC;QAC9C,IAAI,OAAO,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;QAEpC,EAAE,EAAC,OAAO,CAAC,SAAS,EAAE,CAAC;YAAC,MAAM,CAAC,IAAI,CAAC;QACpC,IAAI;YAAC,MAAM,CAAC,OAAO,CAAC;IACxB,CAAC;IAED;;;;OAIG;IACH,aAAa,CAAC,EAAO;QAEjB,EAAE,EAAC,CAAC,EAAE,CAAC;YAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,EAChE,oEAAoE,CAAC,CAAC;QAE1E,EAAE,EAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;YAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,EACnF,mBAAmB,EAAE,eAAe,CAAC,CAAC;QAE1C,IAAI,OAAO,GAAE,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;QAEnC,EAAE,EAAC,OAAO,CAAC,SAAS,EAAE,CAAC;YAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,EAChF,mBAAmB,EAAE,8BAA8B,CAAC,CAAC;QAEzD,MAAM,SAAS,GAAG,OAAO,CAAC,YAAY,EAAE,CAAC;QACxC,IAAI,CAAC,QAAQ,CAAC,qBAAqB,EAAoB,CAAC,WAAW,CAAC,GAAG,CACpE,SAAS,CAAC,EAAE,EAAC,SAAS,CAAC,CAAC;QAE5B,OAAO,CAAC,iBAAiB,GAAG,IAAI,CAAC;QAEhC,IAAI,CAAC,QAAQ,CAAC,qBAAqB,EAAoB,CAAC,YAAY,CAAC,GAAG,CACrE,OAAO,CAAC,EAAE,EAAC,OAAO,CAAC,CAAC;IAC5B,CAAC;IAED;;;;OAIG;IACH,SAAS,CAAC,EAAO;QACb,EAAE,EAAC,CAAC,EAAE,CAAC;YAAC,MAAM,CAAC,IAAI,CAAC;QAEpB,EAAE,EAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,EAAC;YACpB,IAAI,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;YAChC,MAAM,CAAC,KAAK,CAAC,SAAS,EAAE,GAAG,IAAI,GAAG,KAAK,CAAC;QAC5C,CAAC;QACD,IAAI,CAAC,EAAE,EAAC,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,EAAC;YAChC,IAAI,IAAI,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,EAAE,CAAkB,CAAC;YACvD,IAAI,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YAC/C,MAAM,CAAC,QAAQ,CAAC,SAAS,EAAE,GAAG,IAAI,GAAG,IAAI,CAAC;QAC9C,CAAC;QACD,IAAI,CAAC,EAAE,EAAC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,EAAC;YAC5B,IAAI,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;YACtC,MAAM,CAAC,QAAQ,CAAC,SAAS,EAAE,GAAG,IAAI,GAAG,QAAQ,CAAC;QAClD,CAAC;QACD,IAAI,CAAC,EAAE,EAAC,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,EAAC;YAC9B,IAAI,IAAI,GAAG,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;YACpC,MAAM,CAAC,IAAI,CAAC,SAAS,EAAE,GAAG,IAAI,GAAG,IAAI,CAAC;QAC1C,CAAC;QACD,IAAI,CAAC,EAAE,EAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,EAAC;YAC3B,IAAI,IAAI,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;YACjC,MAAM,CAAC,IAAI,CAAC,SAAS,EAAE,GAAG,IAAI,GAAG,IAAI,CAAC;QAC1C,CAAC;QACD,IAAI,CAAC,EAAE,EAAC,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,EAAC;YAC7B,IAAI,IAAI,GAAG,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;YACnC,MAAM,CAAC,IAAI,CAAC,SAAS,EAAE,GAAG,IAAI,GAAG,IAAI,CAAC;QAC1C,CAAC;IACL,CAAC;IAED;;;;;;;;OAQG;IACH,YAAY,CAAC,QAAa,EAAE,IAAa,EAAE,IAAa,EAAE,OAAgB,EAC7D,QAAiB;QAE1B,EAAE,EAAC,CAAC,QAAQ,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;YAAC,MAAM,CAAC,IAAI,CAAC;QAE/D,IAAI,SAAS,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,QAAQ,CAAgB,CAAC;QAEhE,EAAE,EAAC,CAAC,SAAS,CAAC;YAAC,MAAM,IAAI,KAAK,CAAC,uBAAuB,GAAG,QAAQ,CAAC,CAAC;QAEnE,EAAE,EAAC,SAAS,CAAC,SAAS,EAAE,IAAI,SAAS,CAAC,WAAW,EAAE,IAAI,IAAI,CAAC,QAAQ;aAC3D,WAAW,CAAC,gBAAgB,EAAE,CAAC,EAAC;YACrC,MAAM,CAAC,IAAI,CAAC;QAChB,CAAC;QAED,IAAI,SAAS,GAAG,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,OAAO,CAAC,gBAAgB,CAC9D,SAAS,EAAE,IAAI,EAAE,IAAI,EAAE,OAAO,EAAE,QAAQ,CAAgB,CAAC;QAE7D,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,SAAS,CAAC,EAAE,EAAE,SAAS,CAAC,CAAC;QAC7C,SAAS,CAAC,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC;QACxC,SAAS,CAAC,YAAY,GAAG,SAAS,CAAC,EAAE,CAAC;QAErC,IAAI,CAAC,QAAQ,CAAC,qBAAqB,EAAoB,CAAC,UAAU,CAAC,GAAG,CACnE,SAAS,CAAC,EAAE,EAAC,SAAS,CAAC,CAAC;QAC3B,IAAI,CAAC,QAAQ,CAAC,qBAAqB,EAAoB,CAAC,UAAU,CAAC,GAAG,CACnE,SAAS,CAAC,YAAY,EAAC,SAAS,CAAC,CAAC;QAEtC,MAAM,CAAC,SAAS,CAAC;IACrB,CAAC;IAED;;;;OAIG;IACH,YAAY,CAAC,EAAO;QAEhB,EAAE,EAAE,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAwB,CAAC,UAAU,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,EAAC;YAErE,IAAI,IAAI,GAAI,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAwB,CAAC,UAAU,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;YAEhF,EAAE,EAAC,IAAI,CAAC,SAAS,EAAE,CAAC;gBAAC,MAAM,CAAC,IAAI,CAAC;YACjC,IAAI;gBAAC,MAAM,CAAC,IAAI,CAAC;QACrB,CAAC;QACD,IAAI;YAAC,MAAM,CAAC,IAAI,CAAC;IACrB,CAAC;IAED;;;;OAIG;IACH,eAAe,CAAC,EAAO;QAEnB,EAAE,EAAC,CAAC,EAAE,IAAI,CAAE,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAwB,CAAC,UAAU,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,EAAC;YAC7E,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,OAAO,CAAC,aAAa,CAClD,KAAK,EAAC,mCAAmC,CAAC,CAAC;QACnD,CAAC;QAED,IAAI,SAAS,GAAI,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAwB,CAAC,UAAU;aACvE,GAAG,CAAC,EAAE,CAAC,CAAC;QAEb,EAAE,EAAC,SAAS,CAAC,YAAY,EAAE,CAAC,WAAW,EAAE,IAAI,IAAI,CAAC,QAAQ,CAAC,WAAW;aAC7D,gBAAgB,EAAE,CAAC,EAAC;YACzB,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,OAAO,CAAC,aAAa,CAClD,KAAK,EAAC,6DAA6D,CAAC,CAAC;QAC7E,CAAC;QACA,SAAyB,CAAC,UAAU,GAAG,IAAI,CAAC;QAC5C,IAAI,CAAC,QAAQ,CAAC,qBAAqB,EAAoB,CAAC,YAAY,CAAC,GAAG,CACrE,SAAS,CAAC,EAAE,EAAC,SAAS,CAAC,CAAC;IAChC,CAAC;CACJ;AAt1BD,0CAs1BC;;;;;;;;;;;ACx3BD;;;GAGG;AACH;IAEI;;;;;OAKG;IACH,YAAY,EAAO,EAAE,IAAa,EAAE,IAAa;QAC7C,IAAI,CAAC,GAAG,GAAG,EAAE,CAAC;QACd,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;QAClB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;IACtB,CAAC;IAMD;;;OAGG;IACH,IAAW,EAAE;QACT,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC;IACpB,CAAC;IAED;;;OAGG;IACH,IAAW,IAAI;QACX,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC;IACtB,CAAC;IAED;;;OAGG;IACH,IAAW,IAAI;QACX,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC;IACtB,CAAC;CACJ;AAzCD,oCAyCC;;;;;;;;;;;AChDD,oGAA4C;AAI5C,wIAAyF;AAKzF;;GAEG;AACH,qBAA6B,SAAQ,2BAAuC;IAExE;;;OAGG;IACH,YAAY,GAAkB;QAC1B,KAAK,EAAE,CAAC;QACR,IAAI,CAAC,UAAU,GAAG,IAAI,GAAG,EAAiB,CAAC;QAC3C,IAAI,CAAC,YAAY,GAAG,GAAG,CAAC;QACxB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;IACxB,CAAC;IAKD;;OAEG;IACH,IAAW,SAAS;QAChB,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE,CAAC;IACpC,CAAC;IAED;;OAEG;IACH,IAAW,WAAW;QAClB,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC;IAC7B,CAAC;IAED;;;;;OAKG;IACH,MAAM,CAAC,IAAY,EAAE,IAAY;QAC7B,MAAM,GAAG,GAAG,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,eAAe,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;QACjE,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,EAAE,GAAG,CAAC,CAAC;QAEjC,IAAI,CAAC,IAAI,CAAC,qDAAyB,CAAC,eAAe,EAC/C,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,gBAAgB,CAAC,EAAC,MAAM,EAAC,IAAI,EAAE,IAAI,EAAE,EAAC,QAAQ,EAAE,GAAG,EAAC,EAAC,CAAC,CAAC,CAAC;QACrF,IAAI,CAAC,OAAO,GAAG,GAAG,CAAC;QACnB,MAAM,CAAC,GAAG,CAAC;IACf,CAAC;IAED;;;;OAIG;IACH,IAAI,CAAC,EAAM;QAEP,EAAE,EAAC,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,EAAC;YACxB,IAAI,GAAG,GAAG,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;YAClC,MAAM,CAAC,GAAG,CAAC;QACf,CAAC;QACD,IAAI,EAAC;YACD,IAAI,GAAG,GAAG,IAAI,CAAC,WAAW,CAAC,YAAY,CAAC,YAAY,CAAC,EAAE,CAAC,CAAC;YAEzD,EAAE,EAAC,CAAC,GAAG,CAAC;gBAAC,MAAM,CAAC,IAAI,CAAC;YAErB,IAAI,IAAI,GAAG,GAAiB,CAAC;YAE7B,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,EAAC;gBACzB,IAAI,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;gBAC5D,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;gBACtB,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;gBAC/B,IAAI,CAAC,mBAAmB,GAAG,CAAC,CAAC;YACjC,CAAC;YAED,IAAI,CAAC,iBAAiB,GAAG,EAAE,CAAC;YAE5B,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,EAAE,GAAG,CAAC,CAAC;YAEjC,IAAI,CAAC,IAAI,CAAC,qDAAyB,CAAC,cAAc,EAC9C,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,gBAAgB,CAAC,EAAC,MAAM,EAAG,IAAI,EAAE,IAAI,EAAG,EAAC,QAAQ,EAAE,GAAG,EAAC,EAAC,CAAC,CAAC,CAAC;YACxF,IAAI,CAAC,OAAO,GAAG,GAAG,CAAC;YACnB,MAAM,CAAC,GAAG,CAAC;QACf,CAAC;IACL,CAAC;IAED;;;;;OAKG;IACH,GAAG,CAAC,EAAM;QACN,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC;IACpE,CAAC;IAID;;OAEG;IACH,IAAW,OAAO;QACd,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC;IACzB,CAAC;IAED,IAAW,OAAO,CAAC,KAAiB;QAEhC,EAAE,EAAC,IAAI,IAAI,KAAK,IAAI,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC,EAAC;YAC/C,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;YACtB,IAAI,CAAC,IAAI,CAAC,qDAAyB,CAAC,uBAAuB,EACvD,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,gBAAgB,CAAC,EAAC,MAAM,EAAC,IAAI,EAAE,IAAI,EAAE,EAAC,QAAQ,EAAE,KAAK,EAAC,EAAC,CAAC,CAAC,CAAC;QAC3F,CAAC;QACD,IAAI,EAAC;YACD,MAAM,IAAI,KAAK,CAAC,uEAAuE,CAAC;QAC5F,CAAC;IACL,CAAC;IAED;;;;;;;;;OASG;IACH,aAAa,CAAC,EAAO;QAEjB,EAAE,EAAC,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,EAAC;YAExB,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;YAE3B,2FAA2F;YAC3F,mFAAmF;YACnF,EAAE,EAAC,IAAI,CAAC,OAAO,CAAC,EAAE,KAAK,EAAE,CAAC,EAAC;gBAEvB,EAAE,EAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,EAAC;oBACrB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,EAAE,CAAC,IAAI,EAAE,CAAC,KAAK,CAAC,CAAC;gBAC5E,CAAC;gBACD,IAAI,EAAC;oBACD,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;gBACxB,CAAC;YACL,CAAC;QACL,CAAC;QACD,IAAI,CAAC,IAAI,CAAC,qDAAyB,CAAC,cAAc,EAC9C,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,gBAAgB,CAAC,EAAC,MAAM,EAAC,IAAI,EAAE,IAAI,EAAE,EAAC,UAAU,EAAE,EAAE,EAAC,EAAC,CAAC,CAAC,CAAC;IAC1F,CAAC;IAED;;;OAGG;IACH,sBAAsB;QAClB,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,YAAY,CAAC,eAAe,EAAE,CAAC;IAC3D,CAAC;CACJ;AAxJD,0CAwJC;;;;;;;;;;;ACnKD;;GAEG;AACH;IAKI;;;;OAIG;IACH,YAAY,EAAC,MAAM,EAAE,IAAI,EAA8B;QACnD,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC;QACtB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;IACtB,CAAC;IAED;;;OAGG;IACH,IAAW,MAAM;QACb,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC;IACxB,CAAC;IAED;;OAEG;IACH,IAAW,IAAI;QACX,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC;IACtB,CAAC;CACJ;AA7BD,8BA6BC;;;;;;;;;;AClCD;;GAEG;;AAIH,iFAA+B;AAE/B;;;;GAIG;AACH;IAiBI;;OAEG;IACN;QALW,mBAAc,GAAG,IAAI,GAAG,EAAmC,CAAC;QAMtE,IAAI,CAAC,GAAG,GAAG,EAAE,EAAE,CAAC;IACjB,CAAC;IAlBE;;OAEG;IACH,IAAI,EAAE;QACF,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC;IACpB,CAAC;IAES,SAAS,CAAC,KAAW;QAC3B,IAAI,CAAC,GAAG,GAAG,KAAK,CAAC;IACrB,CAAC;IAWD;;;;;;;OAOG;IACC,WAAW,CAAC,SAAa,EAAE,QAAmC;QAEpE,EAAE,EAAC,CAAC,QAAQ,CAAC;YAAC,MAAM,CAAC,KAAK,CAAC;QAC3B,IAAI,EAAC;YACK,IAAI,GAAG,GAAkC,IAAI,CAAC;YAEvD,EAAE,EAAC,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,EAAC;gBACtC,GAAG,GAAG,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;gBACzC,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YACpB,CAAC;YACD,IAAI,EAAC;gBACJ,GAAG,GAAG,CAAC,QAAQ,CAAC,CAAC;gBACjB,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;YACzC,CAAC;YACD,MAAM,CAAC,IAAI,CAAC;QACb,CAAC;IACF,CAAC;IAEE;;;;;;;;OAQG;IACC,cAAc,CAAC,SAAa,EAAE,QAA4B;QAChE,EAAE,EAAC,CAAC,QAAQ,CAAC;YAAC,MAAM,CAAC,KAAK,CAAC;QAC3B,IAAI,EAAC;YACJ,EAAE,EAAC,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,EAAC;gBACtC,MAAM,GAAG,GAAG,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;gBAC/C,IAAI,KAAK,GAAG,GAAG,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;gBAElC,EAAE,EAAC,KAAK,IAAI,CAAC,CAAC,EAAC;oBACd,GAAG,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;oBACrB,MAAM,CAAC,IAAI,CAAC;gBACb,CAAC;gBACD,IAAI,EAAC;oBACJ,MAAM,CAAC,KAAK,CAAC;gBACd,CAAC;YACF,CAAC;YACD,IAAI,EAAC;gBACJ,MAAM,CAAC,KAAK,CAAC;YACd,CAAC;QACF,CAAC;IACF,CAAC;IAEE;;;;OAIG;IACI,IAAI,CAAC,SAAa,EAAE,IAAiB;QACxC,EAAE,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,EAAC;YACpC,GAAG,EAAC,IAAI,EAAE,IAAI,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,EAAC;gBAC9C,EAAE,EAAC,EAAE,CAAC;oBAAC,EAAE,CAAC,IAAI,CAAC,CAAC;YACpB,CAAC;QACL,CAAC;IACR,CAAC;CACD;AA5FD,oCA4FC;;;;;;;;;;ACzGD;;;;;;;;;;;;;GAaG;;AAOH,sGAA8C;AAC9C,wFAAgC;AAChC,0GAAkD;AAElD,wFAA0B;AAC1B,oGAA4C;AAE5C,8FAAsC;AAGtC,0GAAkD;AAElD,wGAAgD;AAGhD,oGAA4C;AAE5C,kGAA0C;AAE1C,0GAAkD;AAClD,4FAAoC;AAYpC,wGAAgD;AAIhD,0GAAkD;AAClD,wFAAgC;AAChC,wFAAgC;AAChC,gGAAwC;AACxC,4FAAoC;AACpC,sGAA8C;AAC9C,8FAAsC;AACtC,0FAAkC;AAElC,oGAA4C;AAC5C,sFAA8B;AAE9B,8FAAsC;AACtC,gGAAwC;AACxC,8FAAsC;AAGtC,oGAA4C;AAC5C,4FAAoC;AAQnC;;;;;;;;;;GAUG;AACJ,aAAqB,SAAQ,2BAA+B;IAEvD;;;OAGG;IACJ,YAAY,GAAkB;QAC1B,KAAK,EAAE,CAAC;QACP,IAAI,CAAC,YAAY,GAAG,GAAG,CAAC;IAC7B,CAAC;IAIA;;OAEG;IACH,IAAW,WAAW;QAClB,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC;IAC7B,CAAC;IAED;;;;OAIG;IACH,aAAa,CAAC,OAAgB,EAAE,YAAoB;QAChD,IAAI,IAAI,GAAG,IAAI,eAAM,CAAC,OAAO,EAAE,YAAY,CAAC,CAAC;QAC7C,MAAM,CAAC,IAAI,CAAC;IAChB,CAAC;IAED;;;;;;OAMG;IACH,oBAAoB,CAAC,EAAC,IAAI,EAAE,MAAM,EAAkC;QAEhE,MAAM,IAAI,GAAG,IAAI,6BAAa,CAAC,EAAC,IAAI,EAAE,MAAM,EAAC,CAAC,CAAC;QAC/C,MAAM,CAAC,IAAI,CAAC;IAChB,CAAC;IAEF,wBAAwB;IACjB,QAAQ;QACX,MAAM,EAAE,GAAQ,SAAE,EAAE,CAAC;QACrB,MAAM,CAAC,EAAE,CAAC;IACd,CAAC;IAEA;;;;OAIG;IACH,sBAAsB,CAAC,gBAAyB;QAC5C,MAAM,IAAI,GAAG,IAAI,iCAAe,CAAC,IAAI,CAAC,WAAW,EAAE,gBAAgB,CAAC,CAAC;QACrE,MAAM,CAAC,IAAI,CAAC;IAChB,CAAC;IAED;;;;;OAKG;IACH,gBAAgB,CAAC,EAAC,MAAM,EAAE,IAAI,EAA8B;QACxD,MAAM,IAAI,GAAG,IAAI,qBAAS,CAAC,EAAC,MAAM,EAAE,IAAI,EAAC,CAAC,CAAC;QAC3C,MAAM,CAAC,IAAI,CAAC;IAChB,CAAC;IAED;;;OAGG;IACH,sBAAsB;QAClB,MAAM,IAAI,GAAG,IAAI,iCAAe,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;QACnD,MAAM,CAAC,IAAI,CAAC;IAChB,CAAC;IAED;;;OAGG;IACH,qBAAqB;QACjB,MAAM,IAAI,GAAG,IAAI,+BAAc,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;QAClD,MAAM,CAAC,IAAI,CAAC;IAChB,CAAC;IAED;;;;;OAKG;IACH,mBAAmB,CAAC,OAA0B;QAC1C,MAAM,IAAI,GAAG,IAAI,2BAAY,CAAC,OAAO,CAAC,CAAC;QACvC,MAAM,CAAC,IAAI,CAAC;IAChB,CAAC;IAED;;;;OAIG;IACH,kBAAkB,CAAC,GAAe;QAC9B,MAAM,IAAI,GAAG,IAAI,yBAAW,CAAC,GAAG,CAAC,CAAC;QAClC,MAAM,CAAC,IAAI,CAAC;IAChB,CAAC;IAED;;;;;;;;;;;;;OAaG;IACH,sBAAsB,CAAC,GAAe,EAAE,MAAuB,EAAE,SAClB,EAAE,aAAoC,EAC9D,WAAiC,EAAE,QAA2B,EAC9D,UAA+B,EAAE,IAAa,EAAE,IAAY;QAE/E,MAAM,IAAI,GAAG,IAAI,iCAAe,CAAC,GAAG,EAAE,MAAM,EAAE,SAAS,EAAE,aAAa,EAAE,WAAW,EAC/E,QAAQ,EAAE,UAAU,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;QACtC,MAAM,CAAC,IAAI,CAAC;IAChB,CAAC;IAED;;;;;OAKG;IACH,eAAe,CAAC,IAAa,EAAE,IAAa;QACxC,MAAM,IAAI,GAAG,IAAI,mBAAQ,CAAC,IAAI,CAAC,WAAW,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;QACxD,MAAM,CAAC,IAAI,CAAC;IAChB,CAAC;IAED,oBAAoB,CAAC,EAAa;QAC9B,MAAM,CAAC,IAAI,6BAAa,CAAC,EAAE,CAAC,CAAC;IACjC,CAAC;IAED,qBAAqB,CAAC,OAAyB;QAC3C,MAAM,CAAC,IAAI,+BAAc,CAAC,OAAO,CAAC,CAAC;IACvC,CAAC;IAED,sBAAsB,CAAC,QAAmB,EAAE,WAAqC,EAC1D,KAA2B,EAAE,KAA2B;QAC3E,MAAM,CAAC,IAAI,iCAAe,CAAC,QAAQ,EAAC,WAAW,EAAC,KAAK,EAAC,KAAK,CAAC,CAAC;IACjE,CAAC;IAED,aAAa,CAAC,QAAoB,EAAE,SAAiB,EAAE,UAAkB,EAAE,QAAgB,EAAE,IAAY;QACrG,MAAM,CAAC,IAAI,eAAM,CAAC,QAAQ,EAAE,SAAS,EAAE,UAAU,EAAE,QAAQ,EAAE,IAAI,CAAC,CAAC;IACvE,CAAC;IAED,aAAa,CAAC,QAAmB,EAAE,IAAY,EAAE,IAAY,EAAE,IAAY,EAAE,MAAc;QACvF,MAAM,CAAC,IAAI,eAAM,CAAC,QAAQ,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,MAAM,CAAC,CAAC;IAC1D,CAAC;IAED,gBAAgB,CAAC,QAAmB,EAAE,IAAY,EAAE,IAAY,EAAE,IAAY,EAC7D,MAAc,EAAE,IAAY;QACzC,MAAM,CAAC,IAAI,uBAAU,CAAC,QAAQ,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,CAAC,CAAC;IACpE,CAAC;IAED,eAAe,CAAC,GAAiB;QAC7B,MAAM,CAAC,IAAI,mBAAQ,CAAC,GAAG,CAAC,CAAC;IAC7B,CAAC;IAED,eAAe,CAAC,GAAe;QAC3B,MAAM,CAAC,IAAI,mBAAQ,CAAC,GAAG,CAAC,CAAC;IAC7B,CAAC;IAED,gBAAgB,CAAC,SAAsB,EAAE,IAAY,EAAE,IAAa,EAAE,OAAgB,EAAE,QAAiB;QACrG,MAAM,CAAC,IAAI,qBAAS,CAAC,SAAS,EAAE,IAAI,EAAE,IAAI,EAAE,OAAO,EAAE,QAAQ,CAAC,CAAC;IACnE,CAAC;IAED,cAAc,CAAC,SAAsB,EAAE,IAAY;QAC/C,MAAM,CAAC,IAAI,iBAAO,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;IACxC,CAAC;IAED,mBAAmB;QACf,MAAM,CAAC,IAAI,2BAAY,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;IAC9C,CAAC;IAED,YAAY,CAAC,GAAe,EAAE,IAAa,EAAE,IAAY,EAAE,KAAc,EAAE,OAAiB;QACxF,MAAM,CAAC,IAAI,aAAK,CAAC,GAAG,EAAC,IAAI,EAAC,IAAI,EAAC,KAAK,EAAC,OAAO,CAAC,CAAC;IAClD,CAAC;IAED,gBAAgB,CAAC,GAAe,EAAE,IAAY,EAAE,IAAY;QACxD,MAAM,CAAC,IAAI,qBAAS,CAAC,GAAG,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;IAC1C,CAAC;IAED,iBAAiB,CAAC,QAAoB,EAAE,MAAW,EAAE,MAAW,EAAE,IAAa;QAC3E,MAAM,CAAC,IAAI,uBAAU,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,EAAE,IAAI,CAAC,CAAC;IAC1D,CAAC;IAED,gBAAgB,CAAC,GAAe,EAAE,IAAa,EAAE,IAAa;QAC1D,MAAM,CAAC,IAAI,qBAAS,CAAC,GAAG,EAAC,IAAI,EAAC,IAAI,CAAC,CAAC;IACxC,CAAC;IAED,mBAAmB,CAAC,EAAO,EAAE,IAAa,EAAE,IAAa;QACrD,MAAM,CAAC,IAAI,2BAAY,CAAC,EAAE,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;IAC5C,CAAC;CACL;AAjND,0BAiNC;;;;;;;;;;;AC7SD,oGAA4C;AAK5C,4FAA6C;AAC7C,4GAA6D;AAO7D;;GAEG;AACH,WAAmB,SAAQ,2BAA6B;IAEpD,qBAAqB;QAEjB,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC;YAAC,MAAM,CAAC,KAAK,CAAC;QAE/B,IAAI,IAAI,GAAI,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAwB,CAAC,MAAM,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QACrF,MAAM,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC;IAC5B,CAAC;IAED,SAAS;QACL,MAAM,CAAC,IAAI,CAAC,iBAAiB,IAAI,IAAI,CAAC,qBAAqB,EAAE,CAAC;IAClE,CAAC;IAED,YAAY,CAAC,GAAe;QACxB,IAAI,CAAC,SAAS,GAAG,GAAG,CAAC;IACzB,CAAC;IAED,IAAW,MAAM;QACb,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC;IACxB,CAAC;IAEO,qBAAqB;QACzB,IAAI,WAAW,GAAG,IAAI,CAAC,SAAS,CAAC,qBAAqB,EAAE,CAAC;QACzD,EAAE,EAAC,CAAC,WAAW,IAAI,WAAW,CAAC,MAAM,IAAI,qCAAiB,CAAC,OAAO,CAAC;YAAC,MAAM,CAAC,KAAK;QAChF,IAAI;YAAC,MAAM,CAAC,IAAI,CAAC;IACrB,CAAC;IAED,IAAW,MAAM,CAAC,KAAc;QAE5B,EAAE,EAAC,CAAC,IAAI,CAAC,qBAAqB,EAAE,CAAC,EAAC;YAC9B,MAAM,IAAI,KAAK,CAAC,yEAAyE,CAAC,CAAC;QAC/F,CAAC;QAED,EAAE,EAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,gBAAgB,EAAE,KAAK,IAAI,CAAC,QAAQ,CAAC,EAAC;YAC/D,MAAM,IAAI,KAAK,CAAC,mEAAmE,CAAC,CAAC;QACzF,CAAC;QACD,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;QACrB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;QACrB,IAAI,CAAC,QAAQ,CAAC,qBAAqB,EAAoB,CAAC,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,EAAC,IAAI,CAAC,CAAC;IAC3F,CAAC;IAED,IAAW,MAAM;QACb,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC;IACxB,CAAC;IAED,IAAW,MAAM,CAAC,KAAc;QAE5B,EAAE,EAAC,CAAC,IAAI,CAAC,qBAAqB,EAAE,CAAC,EAAC;YAC9B,MAAM,IAAI,KAAK,CAAC,yEAAyE,CAAC,CAAC;QAC/F,CAAC;QAED,EAAE,EAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,gBAAgB,EAAE,KAAK,IAAI,CAAC,QAAQ,CAAC,EAAC;YAC/D,MAAM,IAAI,KAAK,CAAC,mEAAmE,CAAC,CAAC;QACzF,CAAC;QACD,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;QACrB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;QACrB,IAAI,CAAC,QAAQ,CAAC,qBAAqB,EAAoB,CAAC,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,EAAC,IAAI,CAAC,CAAC;IAC3F,CAAC;IAED,IAAW,QAAQ;QACf,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC;IAC1B,CAAC;IAED,YAAY,GAAe,EAAE,IAAa,EAAE,IAAY,EAAE,KAAc,EAAE,OAAiB;QACvF,KAAK,EAAE,CAAC;QACR,IAAI,CAAC,SAAS,GAAG,GAAG,CAAC;QACrB,IAAI,CAAC,SAAS,GAAG,qBAAS,CAAC,KAAK,CAAC;QACjC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;QAClB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;QAClB,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;QACpB,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC;QACxB,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;QACxB,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;QACxB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;QACtB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;QACpB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;IACxB,CAAC;IAcD,IAAW,QAAQ;QACf,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC;IAC1B,CAAC;IAED,IAAW,IAAI;QACX,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC;IACtB,CAAC;IAED,IAAW,IAAI,CAAC,KAAc;QAE1B,EAAE,EAAC,CAAC,IAAI,CAAC,qBAAqB,EAAE,CAAC,EAAC;YAC9B,MAAM,IAAI,KAAK,CAAC,yEAAyE,CAAC,CAAC;QAC/F,CAAC;QAED,EAAE,EAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,gBAAgB,EAAE,KAAK,IAAI,CAAC,QAAQ,CAAC,EAAC;YAC/D,MAAM,IAAI,KAAK,CAAC,mEAAmE,CAAC,CAAC;QACzF,CAAC;QACD,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QAClB,IAAI,CAAC,QAAQ,CAAC,qBAAqB,EAAoB,CAAC,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,EAAC,IAAI,CAAC,CAAC;IAC3F,CAAC;IAED,IAAW,IAAI;QACX,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC;IACtB,CAAC;IAED,IAAW,IAAI,CAAC,KAAc;QAE1B,EAAE,EAAC,CAAC,IAAI,CAAC,qBAAqB,EAAE,CAAC,EAAC;YAC9B,MAAM,IAAI,KAAK,CAAC,yEAAyE,CAAC,CAAC;QAC/F,CAAC;QAED,EAAE,EAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,gBAAgB,EAAE,KAAK,IAAI,CAAC,QAAQ,CAAC,EAAC;YAC/D,MAAM,IAAI,KAAK,CAAC,mEAAmE,CAAC,CAAC;QACzF,CAAC;QACD,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QACnB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;QACrB,IAAI,CAAC,QAAQ,CAAC,qBAAqB,EAAoB,CAAC,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,EAAC,IAAI,CAAC,CAAC;IAC3F,CAAC;IAED,IAAW,OAAO;QACd,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC;IACzB,CAAC;IAED,IAAW,OAAO,CAAC,KAAe;QAE9B,EAAE,EAAC,CAAC,IAAI,CAAC,qBAAqB,EAAE,CAAC,EAAC;YAC9B,MAAM,IAAI,KAAK,CAAC,yEAAyE,CAAC,CAAC;QAC/F,CAAC;QAED,EAAE,EAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,gBAAgB,EAAE,KAAK,IAAI,CAAC,QAAQ,CAAC,EAAC;YAC/D,MAAM,IAAI,KAAK,CAAC,mEAAmE,CAAC,CAAC;QACzF,CAAC;QACD,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;QACtB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;QACrB,IAAI,CAAC,QAAQ,CAAC,qBAAqB,EAAoB,CAAC,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,EAAC,IAAI,CAAC,CAAC;IAC3F,CAAC;IAED,IAAW,KAAK;QACZ,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC;IACvB,CAAC;IAED,IAAW,KAAK,CAAC,KAAc;QAE3B,EAAE,EAAC,CAAC,IAAI,CAAC,qBAAqB,EAAE,CAAC,EAAC;YAC9B,MAAM,IAAI,KAAK,CAAC,yEAAyE,CAAC,CAAC;QAC/F,CAAC;QAED,EAAE,EAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,gBAAgB,EAAE,KAAK,IAAI,CAAC,QAAQ,CAAC,EAAC;YAC/D,MAAM,IAAI,KAAK,CAAC,mEAAmE,CAAC,CAAC;QACzF,CAAC;QACD,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;QACpB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;QACrB,IAAI,CAAC,QAAQ,CAAC,qBAAqB,EAAoB,CAAC,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,EAAC,IAAI,CAAC,CAAC;IAC3F,CAAC;IAED,IAAW,iBAAiB;QACxB,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC;IAC3B,CAAC;IAED,IAAW,iBAAiB,CAAC,KAAc;QAEvC,EAAE,EAAC,CAAC,IAAI,CAAC,qBAAqB,EAAE,CAAC,EAAC;YAC9B,MAAM,IAAI,KAAK,CAAC,yEAAyE,CAAC,CAAC;QAC/F,CAAC;QAED,EAAE,EAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,gBAAgB,EAAE,KAAK,IAAI,CAAC,QAAQ,CAAC,EAAC;YAC/D,MAAM,IAAI,KAAK,CAAC,mEAAmE,CAAC,CAAC;QACzF,CAAC;QACD,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;QACxB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;QACrB,IAAI,CAAC,QAAQ,CAAC,qBAAqB,EAAoB,CAAC,YAAY,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,EAAC,IAAI,CAAC,CAAC;IAC5F,CAAC;IAED,IAAW,QAAQ;QACf,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC;IAC1B,CAAC;IAED,IAAW,QAAQ,CAAC,KAAa;QAE7B,EAAE,EAAC,CAAC,IAAI,CAAC,qBAAqB,EAAE,CAAC,EAAC;YAC9B,MAAM,IAAI,KAAK,CAAC,yEAAyE,CAAC,CAAC;QAC/F,CAAC;QAED,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;QACvB,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;QACtB,IAAI,CAAC,QAAQ,CAAC,qBAAqB,EAAoB,CAAC,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,EAAC,IAAI,CAAC,CAAC;IAC3F,CAAC;IAED,IAAW,SAAS;QAChB,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC;IAC3B,CAAC;IAED,IAAW,SAAS,CAAC,KAAc;QAE/B,EAAE,EAAC,CAAC,IAAI,CAAC,qBAAqB,EAAE,CAAC,EAAC;YAC9B,MAAM,IAAI,KAAK,CAAC,yEAAyE,CAAC,CAAC;QAC/F,CAAC;QAED,EAAE,EAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,gBAAgB,EAAE,KAAK,IAAI,CAAC,QAAQ,CAAC,EAAC;YAC/D,MAAM,IAAI,KAAK,CAAC,mEAAmE,CAAC,CAAC;QACzF,CAAC;QACD,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;QACvB,IAAI,CAAC,QAAQ,CAAC,qBAAqB,EAAoB,CAAC,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,EAAC,IAAI,CAAC,CAAC;IAC3F,CAAC;IAED,MAAM,CAAC,KAAU;QACb,IAAI,CAAC,GAAG,GAAG,KAAK,CAAC;IACrB,CAAC;IAED;;;OAGG;IACH,KAAK;QACD,IAAI,IAAI,GAAG,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,OAAO,CAAC,YAAY,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,IAAI,EAC9E,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,OAAO,CAAY,CAAC;QAEpD,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;QACrB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,QAAQ,CAAC;QAE/B,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,SAAS,CAAC;QACjC,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,iBAAiB,CAAC;QACzC,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC;QAC3B,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC;QAE3B,MAAM,CAAC,IAAI,CAAC;IAChB,CAAC;CACJ;AA9OD,sBA8OC;;;;;;;;;;;AC9PD,oGAA4C;AAY5C,4FAA6C;AAC7C,4GAA6D;AAQ7D,eAAuB,SAAQ,2BAAmC;IAE9D,YAAY,GAAe,EAAE,IAAY,EAAE,IAAY;QACnD,KAAK,EAAE,CAAC;QACR,IAAI,CAAC,SAAS,GAAG,GAAG,CAAC;QACrB,IAAI,CAAC,SAAS,GAAG,qBAAS,CAAC,SAAS,CAAC;QACrC,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;QACxB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;QAClB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;QAClB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;QACpB,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;QACtB,IAAI,CAAC,iBAAiB,GAAG,EAAE,CAAC;QAC5B,IAAI,CAAC,kBAAkB,GAAG,EAAE,CAAC;QAC7B,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC;IACzB,CAAC;IAED;;;OAGG;IACH,aAAa;QACT,IAAI,GAAG,GAAG,EAAE,CAAC;QACb,GAAG,EAAC,IAAI,CAAC,IAAI,IAAI,CAAC,UAAU,CAAC,EAAC;YAC1B,IAAI,SAAS,GAAI,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAwB;iBAC5D,UAAU,CAAC,GAAG,CAAC,CAAC,CAAgB,CAAC;YACtC,EAAE,EAAC,CAAC,SAAS,CAAC,SAAS,EAAE,CAAC;gBAAC,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QACnD,CAAC;QACD,MAAM,CAAC,GAAG,CAAC;IACf,CAAC;IAEO,qBAAqB;QACzB,IAAI,WAAW,GAAG,IAAI,CAAC,SAAS,CAAC,qBAAqB,EAAE,CAAC;QACzD,EAAE,EAAC,CAAC,WAAW,IAAI,WAAW,CAAC,MAAM,IAAI,qCAAiB,CAAC,OAAO,CAAC;YAAC,MAAM,CAAC,KAAK;QAChF,IAAI;YAAC,MAAM,CAAC,IAAI,CAAC;IACrB,CAAC;IAED;;;;OAIG;IACH,qBAAqB;QACjB,IAAI,MAAM,GAAG,IAAI,CAAC,SAAS,EAAiB,CAAC;QAC7C,IAAI,OAAO,GAAG,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAuB,CAAC;QAC9D,IAAI,QAAQ,GAAG,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;QACpD,MAAM,CAAC,QAAQ,CAAC,SAAS,EAAE,CAAC;IAChC,CAAC;IAED;;;;;OAKG;IACH,SAAS;QACL,IAAI,OAAO,GAAG,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAuB,CAAC;QAC9D,IAAI,QAAQ,GAAG,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QAClD,MAAM,CAAC,QAAQ,CAAC,SAAS,EAAE,CAAC;IAChC,CAAC;IAED;;;OAGG;IACH,MAAM;QAEF,EAAE,EAAC,CAAC,IAAI,CAAC,qBAAqB,EAAE,CAAC,EAAC;YAC9B,MAAM,IAAI,KAAK,CAAC,yEAAyE,CAAC,CAAC;QAC/F,CAAC;QAED,IAAI,OAAO,GAAG,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAuB,CAAC;QAC9D,IAAI,QAAQ,GAAG,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QAElD,IAAI,MAAM,GAAG,QAAQ,CAAC,MAAM,EAAE,CAAC;QAC/B,EAAE,EAAC,MAAM,CAAC,OAAO,CAAC;YAAE,IAAI,CAAC,QAAQ,CAAC,qBAAqB,EAAoB,CAAC,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,EAAC,IAAI,CAAC,CAAC;QAE1G,MAAM,CAAC,MAAM,CAAC;IAClB,CAAC;IAED;;;OAGG;IACH,IAAI;QAEA,EAAE,EAAC,CAAC,IAAI,CAAC,qBAAqB,EAAE,CAAC,EAAC;YAC9B,MAAM,IAAI,KAAK,CAAC,yEAAyE,CAAC,CAAC;QAC/F,CAAC;QAED,IAAI,OAAO,GAAG,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAuB,CAAC;QAC9D,IAAI,QAAQ,GAAG,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QAElD,MAAM,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC;IAC3B,CAAC;IAED;;;OAGG;IACH,MAAM;QAEF,EAAE,EAAC,CAAC,IAAI,CAAC,qBAAqB,EAAE,CAAC,EAAC;YAC9B,MAAM,IAAI,KAAK,CAAC,yEAAyE,CAAC,CAAC;QAC/F,CAAC;QAED,IAAI,OAAO,GAAG,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAuB,CAAC;QAC9D,IAAI,QAAQ,GAAG,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QAElD,MAAM,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC;IAC7B,CAAC;IAED;;;;OAIG;IACH,WAAW;QACP,IAAI,OAAO,GAAG,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAuB,CAAC;QAC9D,IAAI,QAAQ,GAAG,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QAClD,MAAM,CAAC,QAAQ,CAAC,WAAW,EAAE,CAAC;IAClC,CAAC;IAUD,IAAW,QAAQ;QACf,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC;IAC1B,CAAC;IAED,IAAW,QAAQ;QACf,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC;IACxB,CAAC;IAED,IAAW,QAAQ,CAAC,KAAU;QAC1B,EAAE,EAAC,CAAC,IAAI,CAAC,qBAAqB,EAAE,CAAC,EAAC;YAC9B,MAAM,IAAI,KAAK,CAAC,yEAAyE,CAAC,CAAC;QAC/F,CAAC;QACD,EAAE,EAAC,IAAI,CAAC,WAAW,EAAE,IAAI,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,gBAAgB,EAAE,CAAC,EAAC;YACnE,MAAM,IAAI,KAAK,CAAC,yEAAyE,CAAC,CAAC;QAC/F,CAAC;QACD,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;QACpB,IAAI,CAAC,QAAQ,CAAC,qBAAqB,EAAoB,CAAC,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,EAAC,IAAI,CAAC,CAAC;IAC3F,CAAC;IAID,IAAW,UAAU;QACjB,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC;IAC5B,CAAC;IAED,IAAW,UAAU,CAAC,KAAiB;QACnC,EAAE,EAAC,CAAC,IAAI,CAAC,qBAAqB,EAAE,CAAC,EAAC;YAC9B,MAAM,IAAI,KAAK,CAAC,yEAAyE,CAAC,CAAC;QAC/F,CAAC;QACD,EAAE,EAAC,IAAI,CAAC,WAAW,EAAE,IAAI,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,gBAAgB,EAAE,CAAC,EAAC;YACnE,MAAM,IAAI,KAAK,CAAC,yEAAyE,CAAC,CAAC;QAC/F,CAAC;QACD,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;QACxB,IAAI,CAAC,QAAQ,CAAC,qBAAqB,EAAoB,CAAC,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,EAAC,IAAI,CAAC,CAAC;IAC3F,CAAC;IAED,IAAW,OAAO;QACd,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC;IACzB,CAAC;IAED,IAAW,OAAO,CAAC,KAAe;QAE9B,EAAE,EAAC,CAAC,IAAI,CAAC,qBAAqB,EAAE,CAAC,EAAC;YAC9B,MAAM,IAAI,KAAK,CAAC,yEAAyE,CAAC,CAAC;QAC/F,CAAC;QACD,EAAE,EAAC,IAAI,CAAC,WAAW,EAAE,IAAI,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,gBAAgB,EAAE,CAAC,EAAC;YACnE,MAAM,IAAI,KAAK,CAAC,yEAAyE,CAAC,CAAC;QAC/F,CAAC;QAED,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;QACrB,IAAI,CAAC,QAAQ,CAAC,qBAAqB,EAAoB,CAAC,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,EAAC,IAAI,CAAC,CAAC;IAC3F,CAAC;IAED,IAAW,UAAU;QACjB,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC;IAC5B,CAAC;IAED,IAAW,UAAU,CAAC,KAAc;QAChC,EAAE,EAAC,CAAC,IAAI,CAAC,qBAAqB,EAAE,CAAC,EAAC;YAC9B,MAAM,IAAI,KAAK,CAAC,yEAAyE,CAAC,CAAC;QAC/F,CAAC;QACD,EAAE,EAAC,IAAI,CAAC,WAAW,EAAE,IAAI,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,gBAAgB,EAAE,CAAC,EAAC;YACnE,MAAM,IAAI,KAAK,CAAC,yEAAyE,CAAC,CAAC;QAC/F,CAAC;QACD,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;QACxB,IAAI,CAAC,QAAQ,CAAC,qBAAqB,EAAoB,CAAC,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,EAAC,IAAI,CAAC,CAAC;IAC3F,CAAC;IAED,IAAW,WAAW;QAClB,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC;IAC7B,CAAC;IAED,IAAW,WAAW,CAAC,KAAc;QACjC,EAAE,EAAC,CAAC,IAAI,CAAC,qBAAqB,EAAE,CAAC,EAAC;YAC9B,MAAM,IAAI,KAAK,CAAC,yEAAyE,CAAC,CAAC;QAC/F,CAAC;QACD,EAAE,EAAC,IAAI,CAAC,WAAW,EAAE,IAAI,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,gBAAgB,EAAE,CAAC,EAAC;YACnE,MAAM,IAAI,KAAK,CAAC,yEAAyE,CAAC,CAAC;QAC/F,CAAC;QACD,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;QACzB,IAAI,CAAC,QAAQ,CAAC,qBAAqB,EAAoB,CAAC,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,EAAC,IAAI,CAAC,CAAC;IAC3F,CAAC;IAED,IAAW,kBAAkB;QACzB,MAAM,CAAC,IAAI,CAAC,iBAAiB,CAAC;IAClC,CAAC;IAED,IAAW,mBAAmB;QAC1B,MAAM,CAAC,IAAI,CAAC,kBAAkB,CAAC;IACnC,CAAC;IAED;;;OAGG;IACH,QAAQ;QAEJ,IAAI,KAAK,GAAG,CAAC,CAAC,CAAC,gBAAgB;QAC/B,IAAI,IAAI,GAAI,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAwB,CAAC,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QAExF,OAAM,IAAI,CAAC,SAAS,EAAE,EAAC,CAAC;YACpB,EAAE,KAAK,CAAC;YACR,IAAI,GAAI,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAwB,CAAC,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC,CAAC;QAC7F,CAAC;QAED,6CAA6C;QAC7C,IAAI,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAE,CAAC,WAAW,EAAE,CAAC;QAErD,EAAE,EAAC,CAAC,KAAK,CAAC,CAAC,CAAC;YACR,OAAO,CAAC,GAAG,CAAC,4BAA4B,CAAC,CAAC;YAC1C,MAAM,CAAC,IAAI,CAAC;QAChB,CAAC;QAED,OAAM,KAAK,GAAG,CAAC,EAAC,CAAC;YACb,EAAE,EAAC,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC;gBACf,MAAM,CAAC,IAAI,CAAC;YAChB,CAAC;YACD,IAAI,EAAC;gBACD,KAAK,GAAI,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAwB,CAAC,MAAM,CAAC,GAAG,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;gBACnF,EAAE,KAAK,CAAC;YACZ,CAAC;QACL,CAAC;QACD,MAAM,CAAC,KAAK,CAAC;IACjB,CAAC;IAQD;;OAEG;IACH,IAAW,QAAQ;QACf,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC;IAC1B,CAAC;IAED;;OAEG;IACH,IAAW,MAAM;QACb,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC;IAC5B,CAAC;IAED,IAAW,MAAM,CAAC,EAAW;QAEzB,EAAE,EAAC,CAAC,IAAI,CAAC,qBAAqB,EAAE,CAAC,EAAC;YAC9B,MAAM,IAAI,KAAK,CAAC,yEAAyE,CAAC,CAAC;QAC/F,CAAC;QAED,6FAA6F;QAC7F,EAAE,EAAC,EAAE,IAAI,IAAI,CAAC,MAAM,KAAK,EAAE,CAAC;YAAC,MAAM,CAAC;QACpC,IAAI,CAAC,EAAE,EAAC,EAAE,CAAC,EAAC;YACR,MAAM,GAAG,GAAI,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAwB,CAAC,SAAS,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;YAChF,EAAE,EAAC,GAAG,CAAC,EAAC;gBACJ,EAAE,EAAC,GAAG,CAAC,OAAO,IAAI,IAAI,CAAC,EAAE,CAAC;oBAAC,GAAG,CAAC,OAAO,GAAG,IAAI,CAAC,EAAE,CAAC;YACrD,CAAC;YACD,iFAAiF;YACjF,gFAAgF;YAChF,mFAAmF;YACnF,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;YACrB,IAAI,CAAC,QAAQ,CAAC,qBAAqB,EAAoB,CAAC,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,EAAC,IAAI,CAAC,CAAC;QAC3F,CAAC;QACD,IAAI,EAAC;YACD,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;YACvB,IAAI,CAAC,QAAQ,CAAC,qBAAqB,EAAoB,CAAC,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,EAAC,IAAI,CAAC,CAAC;QAC3F,CAAC;IACL,CAAC;IAED;;OAEG;IACH,IAAW,IAAI;QACX,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC;IACtB,CAAC;IAED,IAAW,IAAI,CAAC,KAAc;QAE1B,EAAE,EAAC,CAAC,IAAI,CAAC,qBAAqB,EAAE,CAAC,EAAC;YAC9B,MAAM,IAAI,KAAK,CAAC,yEAAyE,CAAC,CAAC;QAC/F,CAAC;QACD,EAAE,EAAC,IAAI,CAAC,WAAW,EAAE,IAAI,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,gBAAgB,EAAE,CAAC,EAAC;YACnE,MAAM,IAAI,KAAK,CAAC,yEAAyE,CAAC,CAAC;QAC/F,CAAC;QAED,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QAClB,IAAI,CAAC,QAAQ,CAAC,qBAAqB,EAAoB,CAAC,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,EAAC,IAAI,CAAC,CAAC;IAC3F,CAAC;IAED;;OAEG;IACH,IAAW,IAAI;QACX,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC;IACtB,CAAC;IAED,IAAW,IAAI,CAAC,KAAc;QAC1B,EAAE,EAAC,CAAC,IAAI,CAAC,qBAAqB,EAAE,CAAC,EAAC;YAC9B,MAAM,IAAI,KAAK,CAAC,yEAAyE,CAAC,CAAC;QAC/F,CAAC;QACD,EAAE,EAAC,IAAI,CAAC,WAAW,EAAE,IAAI,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,gBAAgB,EAAE,CAAC,EAAC;YACnE,MAAM,IAAI,KAAK,CAAC,yEAAyE,CAAC,CAAC;QAC/F,CAAC;QACD,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QAClB,IAAI,CAAC,QAAQ,CAAC,qBAAqB,EAAoB,CAAC,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,EAAC,IAAI,CAAC,CAAC;IAC3F,CAAC;IAED;;OAEG;IACH,IAAW,MAAM;QACb,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC;IACxB,CAAC;IAED,IAAW,MAAM,CAAC,EAAW;QACzB,EAAE,EAAC,CAAC,IAAI,CAAC,qBAAqB,EAAE,CAAC,EAAC;YAC9B,MAAM,IAAI,KAAK,CAAC,yEAAyE,CAAC,CAAC;QAC/F,CAAC;QACD,EAAE,EAAC,IAAI,CAAC,WAAW,EAAE,IAAI,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,gBAAgB,EAAE,CAAC,EAAC;YACnE,MAAM,IAAI,KAAK,CAAC,yEAAyE,CAAC,CAAC;QAC/F,CAAC;QACD,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;QACjB,IAAI,CAAC,QAAQ,CAAC,qBAAqB,EAAoB,CAAC,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,EAAC,IAAI,CAAC,CAAC;IAC3F,CAAC;IAED;;;OAGG;IACH,gBAAgB;QACZ,IAAI,GAAG,GAAG,EAAE,CAAC;QAEb,IAAI,IAAI,GAAI,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAwB,CAAC,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QAExF,GAAG,EAAC,IAAI,CAAC,IAAI,IAAI,CAAC,WAAW,CAAC,EAAC;YAC3B,IAAI,KAAK,GAAI,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAwB,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YAC/E,EAAE,EAAC,CAAC,KAAK,CAAC,iBAAiB,CAAC,CAAC,CAAC;gBAC1B,IAAI,IAAI,GAAI,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAwB,CAAC,aAAa,CAAC,GAAG,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;gBAC9F,EAAE,EAAC,IAAI,CAAC,QAAQ,KAAK,qBAAS,CAAC,SAAS,CAAC;oBAAC,GAAG,CAAC,IAAI,CAAC,IAAkB,CAAC,CAAC;YAC3E,CAAC;QACL,CAAC;QACD,MAAM,CAAC,GAAG,CAAC;IACf,CAAC;IAED;;;OAGG;IACH,qBAAqB;QACjB,IAAI,GAAG,GAAG,EAAE,CAAC;QAEb,IAAI,IAAI,GAAI,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAwB,CAAC,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QAExF,GAAG,EAAC,IAAI,CAAC,IAAI,IAAI,CAAC,WAAW,CAAC,EAAC;YAC3B,IAAI,KAAK,GAAI,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAwB,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YAC/E,EAAE,EAAC,CAAC,KAAK,CAAC,iBAAiB,CAAC,CAAC,CAAC;gBAC1B,IAAI,IAAI,GAAI,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAwB,CAAC,aAAa,CAAC,GAAG,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;gBAC9F,EAAE,EAAC,IAAI,CAAC,QAAQ,KAAK,qBAAS,CAAC,SAAS,CAAC;oBAAC,GAAG,CAAC,IAAI,CAAC,IAAkB,CAAC,CAAC;YAC3E,CAAC;QACL,CAAC;QACD,MAAM,CAAC,GAAG,CAAC;IACf,CAAC;IAED;;;OAGG;IACH,mBAAmB;QACf,IAAI,GAAG,GAAG,EAAE,CAAC;QACb,GAAG,EAAC,IAAI,CAAC,IAAI,IAAI,CAAC,kBAAkB,CAAC,EAAC;YAClC,IAAI,UAAU,GAAI,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAwB,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YACtF,EAAE,EAAC,CAAC,UAAU,CAAC,iBAAiB,CAAC;gBAAC,GAAG,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QAC3D,CAAC;QACD,MAAM,CAAC,GAAG,CAAC;IACf,CAAC;IAED;;;OAGG;IACH,oBAAoB;QAChB,IAAI,GAAG,GAAG,EAAE,CAAC;QACb,GAAG,EAAC,IAAI,CAAC,IAAI,IAAI,CAAC,mBAAmB,CAAC,EAAC;YACnC,IAAI,UAAU,GAAG,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAwB,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YACrF,EAAE,EAAC,CAAC,UAAU,CAAC,iBAAiB,CAAC;gBAAC,GAAG,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QAC3D,CAAC;QACD,MAAM,CAAC,GAAG,CAAC;IACf,CAAC;IAED;;;OAGG;IACH,SAAS;QACL,IAAI,IAAI,GAAI,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAwB,CAAC,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QACxF,IAAI,QAAQ,GAAG,IAAI,CAAC,SAAS,EAAE,CAAC;QAEhC,EAAE,EAAC,QAAQ,CAAC,EAAC;YACT,IAAI,KAAK,GAAI,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAwB,CAAC,SAAS,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;YACtF,MAAM,CAAE,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAwB,CAAC,aAAa,CAAC,GAAG,CACtE,KAAK,CAAC,OAAO,CAAe,CAAC;QACrC,CAAC;QACD,IAAI,EAAC;YACD,MAAM,CAAC,IAAI,CAAC;QAChB,CAAC;IACL,CAAC;IAED;;;;;OAKG;IACH,eAAe;QACX,MAAM,CAAE,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAwB;aACnD,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,eAAe,EAAE,CAAC;IACtD,CAAC;IAED;;;OAGG;IACH,KAAK;QAED,IAAI,IAAI,GAAG,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,OAAO,CAAC,gBAAgB,CACzD,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,CAAgB,CAAC;QAExD,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;QACrB,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,MAAM,CAAC;QAC/B,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC;QAC3B,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,QAAQ,CAAC;QAC7B,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC;QAC7B,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,UAAU,CAAC;QACnC,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,WAAW,CAAC;QAErC,GAAG,CAAC,CAAC,IAAI,CAAC,IAAI,IAAI,CAAC,UAAU,CAAC,EAAC;YAC3B,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;QAC5B,CAAC;QAED,GAAG,CAAC,CAAC,IAAI,CAAC,IAAI,IAAI,CAAC,kBAAkB,CAAC,EAAC;YACnC,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;QACpC,CAAC;QAED,GAAG,CAAC,CAAC,IAAI,CAAC,IAAI,IAAI,CAAC,mBAAmB,CAAC,EAAC;YACpC,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;QACrC,CAAC;QAED,MAAM,CAAC,IAAI,CAAC;IAChB,CAAC;IAED,MAAM,CAAC,KAAS;QACZ,IAAI,CAAC,GAAG,GAAG,KAAK,CAAC;IACrB,CAAC;CACJ;AApeD,8BAoeC;;;;;;;;;;;ACzfD,oGAA4C;AAK5C,4FAA6C;AAC7C,4GAA6D;AAM7D;;GAEG;AACH,eAAuB,SAAQ,2BAAiC;IAEpD,qBAAqB;QACzB,IAAI,WAAW,GAAG,IAAI,CAAC,QAAQ,CAAC,qBAAqB,EAAE,CAAC;QACxD,EAAE,EAAC,CAAC,WAAW,IAAI,WAAW,CAAC,MAAM,IAAI,qCAAiB,CAAC,OAAO,CAAC;YAAC,MAAM,CAAC,KAAK;QAChF,IAAI;YAAC,MAAM,CAAC,IAAI,CAAC;IACrB,CAAC;IAED;;;;;;;OAOG;IACH,YAAY,SAAsB,EAAE,IAAY,EAAE,IAAa,EAAE,OAAgB,EAAE,QAAiB;QAChG,KAAK,EAAE,CAAC;QACR,IAAI,CAAC,YAAY,GAAG,SAAS,CAAC,EAAE,CAAC;QACjC,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC,QAAQ,CAAC;QACpC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;QAClB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;QAClB,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC;QACxB,IAAI,CAAC,SAAS,GAAG,QAAQ,CAAC;QAC1B,IAAI,CAAC,SAAS,GAAG,qBAAS,CAAC,SAAS,CAAC;IACzC,CAAC;IAED;;;;OAIG;IACH,qBAAqB;QACjB,MAAM,CAAE,IAAI,CAAC,SAAS,CAAC,UAAU,EAAwB,CAAC,aAAa;aAClE,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,SAAS,EAAE,CAAC;IAC3C,CAAC;IAED;;;;;OAKG;IACH,SAAS;QACL,MAAM,CAAC,IAAI,CAAC,iBAAiB,IAAI,IAAI,CAAC,qBAAqB,EAAE,CAAC;IAClE,CAAC;IAKD,IAAW,QAAQ;QACf,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC;IAC1B,CAAC;IAED;;;OAGG;IACH,IAAW,WAAW;QAClB,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC;IAC7B,CAAC;IAYD;;;OAGG;IACH,IAAW,QAAQ;QACf,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC;IAC1B,CAAC;IAED,IAAW,QAAQ,CAAC,KAAc;QAC9B,EAAE,EAAC,CAAC,IAAI,CAAC,qBAAqB,EAAE,CAAC,EAAC;YAC9B,MAAM,IAAI,KAAK,CAAC,yEAAyE,CAAC,CAAC;QAC/F,CAAC;QACD,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;QACtB,IAAI,CAAC,QAAQ,CAAC,qBAAqB,EAAoB,CAAC,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,EAAC,IAAI,CAAC,CAAC;IAC3F,CAAC;IAED;;;OAGG;IACH,IAAW,SAAS;QAChB,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC;IAC3B,CAAC;IAED,IAAW,SAAS,CAAC,KAAc;QAC/B,EAAE,EAAC,CAAC,IAAI,CAAC,qBAAqB,EAAE,CAAC,EAAC;YAC9B,MAAM,IAAI,KAAK,CAAC,yEAAyE,CAAC,CAAC;QAC/F,CAAC;QACD,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;QACvB,IAAI,CAAC,QAAQ,CAAC,qBAAqB,EAAoB,CAAC,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,EAAC,IAAI,CAAC,CAAC;IAC3F,CAAC;IAED;;;OAGG;IACH,IAAW,iBAAiB;QACxB,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC;IAC3B,CAAC;IAED,IAAW,iBAAiB,CAAC,KAAc;QACvC,EAAE,EAAC,CAAC,IAAI,CAAC,qBAAqB,EAAE,CAAC,EAAC;YAC9B,MAAM,IAAI,KAAK,CAAC,yEAAyE,CAAC,CAAC;QAC/F,CAAC;QACD,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;QACvB,IAAI,CAAC,QAAQ,CAAC,qBAAqB,EAAoB,CAAC,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,EAAC,IAAI,CAAC,CAAC;QACvF,EAAE,EAAC,IAAI,CAAC,UAAU,CAAC;YAAE,IAAI,CAAC,QAAQ,CAAC,qBAAqB,EAAoB,CAAC,YAAY,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,EAAC,IAAI,CAAC,CAAC;IAChH,CAAC;IAED;;;OAGG;IACH,IAAW,OAAO;QACd,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC;IACxB,CAAC;IAED,IAAW,OAAO,CAAC,KAAc;QAC7B,EAAE,EAAC,CAAC,IAAI,CAAC,qBAAqB,EAAE,CAAC,EAAC;YAC9B,MAAM,IAAI,KAAK,CAAC,yEAAyE,CAAC,CAAC;QAC/F,CAAC;QACD,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;QACpB,IAAI,CAAC,QAAQ,CAAC,qBAAqB,EAAoB,CAAC,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,EAAC,IAAI,CAAC,CAAC;IAC3F,CAAC;IAED;;;OAGG;IACH,IAAW,IAAI;QACX,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC;IACtB,CAAC;IAED,IAAW,IAAI,CAAC,KAAc;QAC1B,EAAE,EAAC,CAAC,IAAI,CAAC,qBAAqB,EAAE,CAAC,EAAC;YAC9B,MAAM,IAAI,KAAK,CAAC,yEAAyE,CAAC,CAAC;QAC/F,CAAC;QACD,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QAClB,IAAI,CAAC,QAAQ,CAAC,qBAAqB,EAAoB,CAAC,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,EAAC,IAAI,CAAC,CAAC;IAC3F,CAAC;IAED;;;OAGG;IACH,IAAW,IAAI;QACX,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC;IACtB,CAAC;IAED,IAAW,IAAI,CAAC,KAAc;QAC1B,EAAE,EAAC,CAAC,IAAI,CAAC,qBAAqB,EAAE,CAAC,EAAC;YAC9B,MAAM,IAAI,KAAK,CAAC,yEAAyE,CAAC,CAAC;QAC/F,CAAC;QACD,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QAClB,IAAI,CAAC,QAAQ,CAAC,qBAAqB,EAAoB,CAAC,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,EAAC,IAAI,CAAC,CAAC;IAC3F,CAAC;IAED;;;OAGG;IACH,IAAW,QAAQ;QACf,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC;IAC1B,CAAC;IAED,IAAW,QAAQ,CAAC,KAAc;QAC9B,EAAE,EAAC,CAAC,IAAI,CAAC,qBAAqB,EAAE,CAAC,EAAC;YAC9B,MAAM,IAAI,KAAK,CAAC,yEAAyE,CAAC,CAAC;QAC/F,CAAC;QACD,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;QACtB,IAAI,CAAC,QAAQ,CAAC,qBAAqB,EAAoB,CAAC,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,EAAC,IAAI,CAAC,CAAC;IAC3F,CAAC;IAED,IAAW,QAAQ;QACf,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC;IAC1B,CAAC;IAED,MAAM,CAAC,KAAU;QACb,IAAI,CAAC,GAAG,GAAG,KAAK,CAAC;IACrB,CAAC;IAED,KAAK,CAAC,KAAkB;QACpB,IAAI,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,OAAO,CAAC,gBAAgB,CAC1D,KAAK,EAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,KAAK,EAAC,IAAI,CAAC,QAAQ,EAC1C,IAAI,CAAC,SAAS,CAAgB,CAAC;QACnC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;QACrB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC;QAChC,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC;QAClC,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,iBAAiB,CAAC;QAEzC,MAAM,CAAC,IAAI,CAAC;IAChB,CAAC;IAED,YAAY;QACR,MAAM,CAAE,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAwB,CAAC,aAAa;aACjE,GAAG,CAAC,IAAI,CAAC,WAAW,CAAe,CAAC;IAC7C,CAAC;CACJ;AAjND,8BAiNC;;;;;;;;;;;AC9ND,oGAA4C;AAI5C;;;;GAIG;AACH,qBAA6B,SAAQ,2BAAuC;IAExE;;;;;OAKG;IACH,YAAY,GAAkB,EAAE,gBAAyB;QAErD,KAAK,EAAE,CAAC;QACR,IAAI,CAAC,YAAY,GAAG,GAAG,CAAC;QAExB,gBAAgB,GAAG,gBAAgB,CAAC,WAAW,EAAE,CAAC;QAElD,0FAA0F;QAC1F,IAAI,CAAC,cAAc,GAAG,IAAI,GAAG,EAA+B,CAAC;QAC7D,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,gBAAgB,EAAE,IAAI,GAAG,EAAkB,CAAC,CAAC;QAErE,IAAI,CAAC,uBAAuB,GAAG,gBAAgB,CAAC;QAChD,IAAI,CAAC,uBAAuB,GAAG,gBAAgB,CAAC;QAEhD,IAAI,CAAC,SAAS,CAAC,mBAAmB,EAAE,2BAA2B,EAC3D,0BAA0B,CAAC,CAAC;IACpC,CAAC;IAED;;;;;;;OAOG;IACI,MAAM,CAAC,MAAe,EAAE,GAAG,IAAY;QAE1C,EAAE,EAAC,CAAC,MAAM,CAAC;YAAC,MAAM,CAAC,IAAI,CAAC;QAExB,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC,UAAU,EAAE,UAAS,KAAK,EAAE,MAAM;YACpD,MAAM,CAAC,OAAO,IAAI,CAAC,MAAM,CAAC,IAAI,WAAW,GAAG,CAAC,IAAI,IAAI,IAAI,CAAC,MAAM,CAAC,GAAG,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,QAAQ,EAAE,CAAC,GAAG,KAAK,CAAC;QAClH,CAAC,CAAC,CAAC;IACP,CAAC;IAAA,CAAC;IAEF;;;;;OAKG;IACI,QAAQ,CAAC,GAAY,EAAE,GAAG,IAAY;QACzC,MAAM,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;QACnC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,GAAG,IAAI,CAAC,CAAC;IACxC,CAAC;IAED;;;;;;;OAOG;IACH,SAAS,CAAC,YAAqB,EAAE,GAAY,EAAE,GAAG,IAAY;QAC1D,MAAM,MAAM,GAAG,IAAI,CAAC,UAAU,CAAC,YAAY,EAAE,GAAG,CAAC,CAAC;QAClD,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,GAAG,IAAI,CAAC,CAAC;IACxC,CAAC;IAED;;;;OAIG;IACI,eAAe,CAAC,GAAY;QAE/B,MAAM,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,GAAG,CAAC,WAAW,EAAE,CAAC,CAAC,GAAG,KAAK,GAAG,IAAI,CAAC;IAC/F,CAAC;IAID;;OAEG;IACH,IAAW,WAAW;QAClB,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC;IAC7B,CAAC;IAMD,IAAW,uBAAuB;QAC9B,MAAM,CAAC,IAAI,CAAC,wBAAwB,CAAC;IACzC,CAAC;IAED;;;;;;OAMG;IACH,IAAW,uBAAuB,CAAC,KAAc;QAE7C,EAAE,EAAC,KAAK,IAAI,KAAK,CAAC,IAAI,EAAE,IAAI,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,KAAK,CAAC,WAAW,EAAE,CAAC,CAAC,EAAC;YACtE,IAAI,CAAC,wBAAwB,GAAG,KAAK,CAAC,WAAW,EAAE,CAAC;QACxD,CAAC;QACD,IAAI,EAAC;YACD,MAAM,IAAI,KAAK,CAAC,yCAAyC,GAAG,KAAK,GAAG,GAAG,CAAC,CAAC;QAC7E,CAAC;IACL,CAAC;IAED;;;OAGG;IACH,IAAW,uBAAuB;QAC9B,MAAM,CAAC,IAAI,CAAC,wBAAwB,CAAC;IACzC,CAAC;IAED;;;;OAIG;IACH,IAAW,uBAAuB,CAAC,KAAc;QAE7C,EAAE,EAAC,KAAK,IAAI,KAAK,CAAC,IAAI,EAAE,IAAI,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,KAAK,CAAC,WAAW,EAAE,CAAC,CAAC,EAAC;YACtE,IAAI,CAAC,wBAAwB,GAAG,KAAK,CAAC,WAAW,EAAE,CAAC;QACxD,CAAC;QACD,IAAI,EAAC;YACD,MAAM,IAAI,KAAK,CAAC,yCAAyC,GAAG,KAAK,GAAG,GAAG,CAAC,CAAC;QAC7E,CAAC;IACL,CAAC;IAED;;;;;;;;;;;;;;;;;OAiBG;IACH,eAAe,CAAC,IAAY,EAAE,SAAiB,IAAI;QAE/C,EAAE,EAAC,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,EAAC;YACtB,MAAM,MAAM,GAAG,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,EACxD,wDAAwD,CAAC,CAAC;YAC9D,MAAM,CAAC,MAAM,CAAC;QAClB,CAAC;QAED,IAAI,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;QAE1B,EAAE,EAAC,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,EAAC;YAC9B,MAAM,MAAM,GAAG,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,EACxD,yBAAyB,IAAI,yBAAyB,CAAC,CAAC;YAC5D,MAAM,CAAC,MAAM,CAAC;QAClB,CAAC;QAED,EAAE,EAAC,MAAM,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,MAAM,CAAC,WAAW,EAAE,CAAC,CAAC,EAAC;YACzD,MAAM,MAAM,GAAG,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,EACxD,yBAAyB,IAAI,8CAA8C,CAAC,CAAC;YACjF,MAAM,CAAC,MAAM,CAAC;QAClB,CAAC;QAED,IAAI,UAAmB,CAAC;QAExB,EAAE,EAAC,CAAC,MAAM,CAAC,EAAC;YACR,UAAU,GAAG,IAAI,CAAC,uBAAuB,CAAC;QAC9C,CAAC;QACD,IAAI,EAAC;YACD,UAAU,GAAG,MAAM,CAAC;QACxB,CAAC;QAED,IAAI,GAAG,GAAG,IAAI,GAAG,EAAkB,CAAC;QACpC,UAAU,GAAG,UAAU,CAAC,WAAW,EAAE,CAAC;QAEtC,GAAG,EAAC,IAAI,CAAC,IAAI,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC,EAAC;YAC9C,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACxB,CAAC;QAED,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;QAEnC,MAAM,MAAM,GAAG,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,aAAa,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC;QACjE,MAAM,CAAC,MAAM,CAAC;IAClB,CAAC;IAED;;;;;OAKG;IACH,kBAAkB,CAAC,IAAY;QAE3B,EAAE,EAAC,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,EAAC;YACtB,MAAM,MAAM,GAAG,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,EACxD,2DAA2D,CAAC,CAAC;YACjE,MAAM,CAAC,MAAM,CAAC;QAClB,CAAC;QAED,IAAI,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;QAE1B,EAAE,EAAC,IAAI,CAAC,uBAAuB,KAAK,IAAI,CAAC,EAAC;YACtC,MAAM,MAAM,GAAG,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,EACxD,oEAAoE,CAAC,CAAC;YAC1E,MAAM,CAAC,MAAM,CAAC;QAClB,CAAC;QACD,IAAI,CAAC,EAAE,EAAC,IAAI,CAAC,uBAAuB,KAAK,IAAI,CAAC,EAAC;YAC3C,MAAM,MAAM,GAAG,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,EACxD,iDAAiD,CAAC,CAAC;YACvD,MAAM,CAAC,MAAM,CAAC;QAClB,CAAC;QACD,IAAI,CAAC,EAAE,EAAC,CAAC,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;YACrC,MAAM,MAAM,GAAG,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,EACxD,yBAAyB,IAAI,wBAAwB,CAAC,CAAC;YAC3D,MAAM,CAAC,MAAM,CAAC;QAClB,CAAC;QACD,IAAI,EAAC;YACD,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;YACjC,MAAM,MAAM,GAAG,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,aAAa,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC;YACjE,MAAM,CAAC,MAAM,CAAC;QAClB,CAAC;IACL,CAAC;IAED;;;OAGG;IACI,qBAAqB;QACxB,MAAM,CAAC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC;IACpC,CAAC;IAGD;;;OAGG;IACH,oBAAoB;QAChB,MAAM,CAAC,IAAI,CAAC,cAAc,CAAC,IAAI,EAAE,CAAC;IACtC,CAAC;IAED;;;;OAIG;IACH,MAAM,CAAC,GAAW;QACd,EAAE,EAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC;YAAC,MAAM,CAAC,KAAK,CAAC;QACrC,MAAM,CAAC,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,IAAI,CAAC,uBAAuB,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,WAAW,EAAE,CAAC,CAAC;IACxF,CAAC;IAED;;;;;;;;OAQG;IACH,SAAS,CAAC,GAAW,EAAE,cAAsB,EAAE,YAAoB;QAE/D,EAAE,EAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC,EAAC;YACpB,MAAM,MAAM,GAAG,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,EACxD,kDAAkD,CAAC,CAAC;YACxD,MAAM,CAAC,MAAM,CAAC;QAClB,CAAC;QAED,EAAE,EAAC,CAAC,cAAc,IAAI,CAAC,cAAc,CAAC,IAAI,EAAE,IAAI,CAAC,YAAY,IAAI,CAAC,YAAY,CAAC,IAAI,EAAE,CAAC,EAAC;YACnF,MAAM,MAAM,GAAG,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,EACxD,6EAA6E,CAAC,CAAC;YACnF,MAAM,CAAC,MAAM,CAAC;QAClB,CAAC;QAED,GAAG,GAAG,GAAG,CAAC,WAAW,EAAE,CAAC;QAExB,EAAE,EAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,EAAC;YACjB,MAAM,MAAM,GAAG,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,EACxD,oBAAoB,GAAG,6CAA6C,CAAC,CAAC;YAC1E,MAAM,CAAC,MAAM,CAAC;QAClB,CAAC;QACD,IAAI,EAAC;YACD,GAAG,EAAC,IAAI,IAAI,IAAI,IAAI,CAAC,oBAAoB,EAAE,CAAC,EAAC;gBACzC,MAAM,GAAG,GAAyB,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;gBAChE,MAAM,IAAI,GAAG,IAAI,CAAC,uBAAuB,KAAK,IAAI,GAAG,cAAc,GAAG,YAAY,CAAC;gBACnF,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,WAAW,EAAE,EAAE,IAAI,CAAC,CAAC;YACrC,CAAC;YACD,MAAM,MAAM,GAAG,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,aAAa,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC;YACjE,MAAM,CAAC,MAAM,CAAC;QAClB,CAAC;IACL,CAAC;IAED;;;;OAIG;IACH,YAAY,CAAC,GAAW;QAEpB,EAAE,EAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC,EAAC;YACpB,MAAM,MAAM,GAAG,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,EACxD,gDAAgD,CAAC,CAAC;YACtD,MAAM,CAAC,MAAM,CAAC;QAClB,CAAC;QAED,GAAG,GAAG,GAAG,CAAC,WAAW,EAAE,CAAC;QAExB,EAAE,EAAC,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,EAAC;YAClB,MAAM,MAAM,GAAG,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,EACxD,oBAAoB,GAAG,8CAA8C,CAAC,CAAC;YAC3E,MAAM,CAAC,MAAM,CAAC;QAClB,CAAC;QACD,IAAI,EAAC;YACD,GAAG,GAAG,GAAG,CAAC,WAAW,EAAE,CAAC;YACxB,GAAG,EAAC,IAAI,IAAI,IAAI,IAAI,CAAC,oBAAoB,EAAE,CAAC,EAAC;gBACzC,MAAM,GAAG,GAAyB,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;gBAChE,EAAE,EAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;oBAAC,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;YACrC,CAAC;YACD,MAAM,MAAM,GAAG,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,aAAa,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC;YACjE,MAAM,CAAC,MAAM,CAAC;QAClB,CAAC;IACL,CAAC;IAED;;;;;;OAMG;IACH,SAAS,CAAC,YAAoB,EAAE,GAAW,EAAE,KAAa;QAEtD,EAAE,EAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC,EAAC;YACpB,MAAM,MAAM,GAAG,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,EACxD,6CAA6C,CAAC,CAAC;YACnD,MAAM,CAAC,MAAM,CAAC;QAClB,CAAC;QAED,EAAE,EAAC,CAAC,KAAK,CAAC,EAAC;YACP,MAAM,MAAM,GAAG,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,EACxD,4DAA4D,CAAC,CAAC;YAClE,MAAM,CAAC,MAAM,CAAC;QAClB,CAAC;QAED,GAAG,GAAG,GAAG,CAAC,WAAW,EAAE,CAAC;QAExB,EAAE,EAAC,CAAC,IAAI,CAAC,eAAe,CAAC,YAAY,CAAC,CAAC,EAAC;YACpC,MAAM,MAAM,GAAG,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,EACxD,gBAAgB,YAAY,eAAe,CAAC,CAAC;YACjD,MAAM,CAAC,MAAM,CAAC;QAClB,CAAC;QACD,EAAE,EAAC,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,EAAC;YAClB,MAAM,MAAM,GAAG,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,EACxD,oBAAoB,GAAG,8CAA8C,CAAC,CAAC;YAC3E,MAAM,CAAC,MAAM,CAAC;QAClB,CAAC;QACD,IAAI,EAAC;YACD,YAAY,GAAG,YAAY,CAAC,WAAW,EAAE,CAAC;YAC1C,GAAG,GAAG,GAAG,CAAC,WAAW,EAAE,CAAC;YACxB,MAAM,GAAG,GAAyB,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;YACxE,EAAE,EAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;gBAAC,GAAG,CAAC,GAAG,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC;YAErC,MAAM,MAAM,GAAG,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,aAAa,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC;YACjE,MAAM,CAAC,MAAM,CAAC;QAClB,CAAC;IACL,CAAC;IAED;;;;OAIG;IACK,SAAS,CAAC,GAAW;QAEzB,EAAE,EAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC;YAAC,MAAM,CAAC,IAAI,CAAC;QAEpC,GAAG,GAAG,GAAG,CAAC,WAAW,EAAE,CAAC;QAExB,MAAM,GAAG,GAAG,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,IAAI,CAAC,uBAAuB,CAAC,CAAC;QAClE,EAAE,EAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAAC;YACb,MAAM,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QACxB,CAAC;QACD,IAAI,EAAC;YACD,MAAM,CAAC,IAAI,CAAC;QAChB,CAAC;IACL,CAAC;IAED;;;;;;OAMG;IACK,UAAU,CAAC,YAAqB,EAAE,GAAY;QAElD,EAAE,EAAC,CAAC,YAAY,IAAI,CAAC,YAAY,CAAC,IAAI,EAAE,CAAC;YAAC,MAAM,CAAC,IAAI,CAAC;QAEtD,YAAY,GAAG,YAAY,CAAC,WAAW,EAAE,CAAC;QAE1C,EAAE,EAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC;YAAC,MAAM,CAAC,IAAI,CAAC;QAEpC,GAAG,GAAG,GAAG,CAAC,WAAW,EAAE,CAAC;QAExB,EAAE,EAAC,CAAC,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAAC;YAC1F,MAAM,CAAC,IAAI,CAAC;QAChB,CAAC;QACD,IAAI,EAAC;YACD,MAAM,CAAC,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QAC1D,CAAC;IACL,CAAC;CACJ;AAraD,0CAqaC;;;;;;;;;;;AC9aD;;GAEG;AACH;IAKI;;;;OAIG;IACH,YAAY,OAAiB,EAAE,YAAqB;QAChD,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC;QACxB,IAAI,CAAC,aAAa,GAAG,YAAY,CAAC;IACtC,CAAC;IAED;;;;;OAKG;IACH,IAAW,OAAO;QACd,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC;IACzB,CAAC;IAED;;;;OAIG;IACH,IAAW,YAAY;QACnB,MAAM,CAAC,IAAI,CAAC,aAAa,CAAC;IAC9B,CAAC;CACJ;AAjCD,wBAiCC;;;;;;;;;;;ACtCD,4GAA6D;AAC7D,oGAA4C;AAQ5C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;GA6CG;AACH,iBAAyB,SAAQ,2BAAmC;IAEhE;;;OAGG;IACH,YAAY,GAAe;QAEvB,KAAK,EAAE,CAAC;QACR,IAAI,CAAC,SAAS,GAAG,GAAG,CAAC;QACrB,IAAI,CAAC,OAAO,GAAG,qCAAiB,CAAC,OAAO,CAAC;QAEzC,IAAI,CAAC,UAAU,GAAG,IAAI,GAAG,EAAU,CAAC;QACpC,IAAI,CAAC,WAAW,GAAG,IAAI,GAAG,EAAU,CAAC;QACrC,IAAI,CAAC,YAAY,GAAG,IAAI,GAAG,EAAU,CAAC;IAC1C,CAAC;IAQD;;OAEG;IACH,IAAW,QAAQ;QACf,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC;IAC1B,CAAC;IAED;;;;;;;;;;;;;;OAcG;IACH,KAAK;QAED,EAAE,EAAC,IAAI,CAAC,OAAO,KAAK,qCAAiB,CAAC,OAAO,CAAC,EAAC;YAC3C,MAAM,IAAI,KAAK,CAAC,8CAA8C,CAAC;QACnE,CAAC;QAED,IAAI,CAAC,OAAO,GAAG,qCAAiB,CAAC,OAAO,CAAC;QACxC,IAAI,CAAC,QAAuB,CAAC,gBAAgB,CAAC,IAAI,CAAC,CAAC;IACzD,CAAC;IAED;;;OAGG;IACH,MAAM;QACF,EAAE,EAAC,IAAI,CAAC,OAAO,KAAK,qCAAiB,CAAC,OAAO,CAAC,EAAC;YAC3C,MAAM,IAAI,KAAK,CAAC,kEAAkE,CAAC;QACvF,CAAC;QAED,IAAI,CAAC,OAAO,GAAG,qCAAiB,CAAC,QAAQ,CAAC;QACzC,IAAI,CAAC,QAAuB,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;IACxD,CAAC;IAED;;;OAGG;IACH,QAAQ;QACJ,EAAE,EAAC,IAAI,CAAC,OAAO,KAAK,qCAAiB,CAAC,OAAO,CAAC,EAAC;YAC3C,MAAM,IAAI,KAAK,CAAC,sEAAsE,CAAC;QAC3F,CAAC;QAED,IAAI,CAAC,OAAO,GAAG,qCAAiB,CAAC,UAAU,CAAC;QAC3C,IAAI,CAAC,QAAuB,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;IACxD,CAAC;IAID;;OAEG;IACH,IAAW,MAAM;QACb,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC;IACxB,CAAC;CACJ;AAzFD,kCAyFC;;;;;;;;;;;AChJD,oGAA4C;AAS5C,4FAA6C;AAQ7C;;;;;GAKG;AACH,cAAsB,SAAQ,2BAAgC;IAE1D;;OAEG;IACH,YAAY,QAAoB;QAC5B,KAAK,EAAE,CAAC;QACR,IAAI,CAAC,SAAS,GAAG,QAAQ,CAAC;QAC1B,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;QACxB,IAAI,CAAC,SAAS,GAAG,qBAAS,CAAC,QAAQ,CAAC;QACpC,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;QACtB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QACrB,IAAI,CAAC,YAAY,GAAG,IAAI,KAAK,EAAU,CAAC;QAExC,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;QACxB,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;IAC5B,CAAC;IAID;;;;OAIG;IACH,qBAAqB;QACjB,EAAE,EAAC,IAAI,CAAC,SAAS,CAAC,EAAC;YACf,IAAI,MAAM,GAAI,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAwB,CAAC,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;YAC7F,EAAE,EAAC,MAAM,CAAC,iBAAiB,CAAC;gBAAC,MAAM,CAAC,IAAI,CAAC;YACzC,IAAI;gBAAC,MAAM,CAAC,MAAM,CAAC,qBAAqB,EAAE,CAAC;QAC/C,CAAC;QACD,IAAI;YAAC,MAAM,CAAC,KAAK,CAAC;IACtB,CAAC;IAED;;;;;OAKG;IACH,SAAS;QACL,MAAM,CAAC,IAAI,CAAC,iBAAiB,IAAI,IAAI,CAAC,qBAAqB,EAAE,CAAC;IAClE,CAAC;IAED;;;OAGG;IACH,MAAM;QACF,EAAE,EAAC,IAAI,CAAC,WAAW,EAAE,KAAK,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,gBAAgB,EAAE,CAAC,EAAC;YACpE,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;YAC9B,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,OAAO,CAAC,aAAa,CAAC,IAAI,EAAC,EAAE,CAAC,CAAC;QACpE,CAAC;QACD,IAAI,EAAC;YACD,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,EACxD,gEAAgE,CAAC,CAAC;QAC1E,CAAC;IACL,CAAC;IAED;;;OAGG;IACH,IAAI;QACA,6DAA6D;QAC7D,EAAE,EAAC,IAAI,CAAC,WAAW,EAAE,KAAK,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,gBAAgB,EAAE,CAAC,EAAC;YACpE,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,OAAO,CAAC,aAAa,CAAC,IAAI,EAAC,EAAE,CAAC,CAAC;QACpE,CAAC;QAED,IAAI,CAAC,EAAE,EAAC,IAAI,CAAC,WAAW,EAAE,KAAK,IAAI,CAAC,EAAC;YAEjC,sDAAsD;YACtD,IAAI,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,YAAY,CAAC,kBAAkB,CAClE,IAAI,CAAC,QAAQ,CAAC,EAAE,EAAE,IAAI,CAAC,EAAE,CAAC,CAAC;YAE/B,6DAA6D;YAC7D,EAAE,EAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC;gBAChB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,gBAAgB,EAAE,CAAC;gBAC7D,GAAG,EAAC,IAAI,CAAC,IAAI,IAAI,CAAC,WAAW,CAAC,EAAC;oBAC3B,IAAI,IAAI,GAAI,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAwB,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,CAAuB,CAAC;oBACpG,IAAI,CAAC,IAAI,EAAE,CAAC;gBAChB,CAAC;YACL,CAAC;YAED,MAAM,CAAC,MAAM,CAAC,CAAC,2BAA2B;QAC9C,CAAC;QAED,IAAI,CAAC,CAAC;YACF,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,EACxD,2EAA2E,CAAC,CAAC;QACrF,CAAC;IACL,CAAC;IAED;;;OAGG;IACH,MAAM;QACF,oDAAoD;QACpD,IAAI,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,YAAY,CAAC,oBAAoB,CACpE,IAAI,CAAC,QAAQ,CAAC,EAAE,EAAE,IAAI,CAAC,EAAE,CAAC,CAAC;QAE/B,yEAAyE;QACzE,EAAE,EAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC;YAChB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;YACrB,GAAG,EAAC,IAAI,CAAC,IAAI,IAAI,CAAC,WAAW,CAAC,EAAC;gBAC3B,IAAI,IAAI,GAAI,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAwB,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,CAAuB,CAAC;gBACpG,IAAI,CAAC,MAAM,EAAE,CAAC;YAClB,CAAC;QACL,CAAC;QAED,MAAM,CAAC,MAAM,CAAC;IAClB,CAAC;IAED;;;;OAIG;IACH,WAAW;QACP,yEAAyE;QACzE,EAAE,EAAC,IAAI,CAAC,QAAQ,CAAC;YAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC;QACvC,IAAI,EAAC;YACD,IAAI,QAAQ,GAAG,IAAI,CAAC,SAAS,EAAE,CAAC;YAChC,EAAE,EAAC,QAAQ,CAAC,EAAC;gBACT,IAAI,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAwB,CAAC,SAAS,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;gBACtF,MAAM,CAAC,MAAM,CAAC,WAAW,EAAE,CAAC;YAChC,CAAC;YACD,IAAI;gBAAC,MAAM,CAAC,IAAI,CAAC;QACrB,CAAC;IACL,CAAC;IAGD;;OAEG;IACH,IAAW,QAAQ;QACf,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC;IAC1B,CAAC;IAEO,aAAa;QACjB,IAAI,KAAK,GAAG,CAAC,CAAC;QACd,IAAI,KAAK,GAAG,IAA2B,CAAC;QACxC,IAAI,MAAM,GAAG,KAAK,CAAC,SAAS,EAAE,CAAC;QAE/B,OAAM,MAAM,EAAC,CAAC;YACV,KAAK,GAAI,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAwB,CAAC,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;YAChF,EAAE,EAAC,CAAC,KAAK,CAAC,iBAAiB,CAAC;gBAAC,EAAE,KAAK,CAAC;YACrC,MAAM,GAAG,KAAK,CAAC,SAAS,EAAE,CAAC;QAC/B,CAAC;QACD,MAAM,CAAC,KAAK,CAAC;IACjB,CAAC;IAED;;;;;OAKG;IACI,eAAe;QAElB,IAAI,UAAU,GAAG,IAAI,CAAC,aAAa,EAAE,CAAC;QACtC,IAAI,OAAO,GAAG,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAuB,CAAC;QAE9D,IAAI,WAAW,GAAG,CAAC,CAAC;QAEpB,GAAG,EAAC,IAAI,GAAG,IAAI,OAAO,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC,EAAC;YAClC,EAAE,CAAC,CAAC,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,iBAAiB,CAAC;gBAAC,EAAE,WAAW,CAAC;QAClE,CAAC;QACD,uCAAuC;QACvC,8CAA8C;QAC9C,MAAM,CAAC,UAAU,IAAI,CAAC,IAAI,UAAU,GAAG,WAAW,GAAG,CAAC,CAAC;IAC3D,CAAC;IAED;;OAEG;IACH,IAAW,QAAQ;QACf,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC;IAC1B,CAAC;IAID;;OAEG;IACI,SAAS;QACZ,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC;IAC1B,CAAC;IAEM,SAAS,CAAC,EAAW;QAExB,EAAE,EAAC,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,gBAAgB,EAAE,CAAC,EAAC;YAC9D,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,EACxD,2FAA2F,CAAC,CAAC;QACrG,CAAC;QAED,2EAA2E;QAC3E,EAAE,EAAC,EAAE,IAAI,EAAE,KAAK,IAAI,CAAC,SAAS,CAAC;YAAC,MAAM,CAAC;QAEvC,gFAAgF;QAChF,MAAM,UAAU,GAAI,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAwB,CAAC,SAAS,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;QAEvF,EAAE,EAAC,UAAU,IAAI,CAAC,UAAU,CAAC,eAAe,EAAE,CAAC,EAAC;YAC5C,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,EACxD,uBAAuB,EAAE,4CAA4C,CAAC,CAAC;QAC/E,CAAC;QAED,mEAAmE;QACnE,EAAE,EAAC,IAAI,CAAC,SAAS,CAAC,EAAC;YACf,MAAM,WAAW,GAAI,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAwB,CAAC,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;YACpG,EAAE,EAAC,WAAW,CAAC,EAAC;gBACZ,MAAM,KAAK,GAAG,WAAW,CAAC,WAAW,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;gBACvD,EAAE,EAAC,KAAK,IAAI,CAAC,CAAC,CAAC,CAAC;oBACZ,WAAW,CAAC,WAAW,CAAC,MAAM,CAAC,KAAK,EAAC,CAAC,CAAC,CAAC;oBACxC,IAAI,KAAK,GAAI,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAwB,CAAC,aAAa,CAAC,GAAG,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC;oBACpG,IAAI,CAAC,QAAQ,CAAC,qBAAqB,EAAoB,CAAC,WAAW,CAAC,GAAG,CACpE,WAAW,CAAC,OAAO,EAAC,KAAK,CAAC,CAAC;gBACnC,CAAC;YACL,CAAC;QACL,CAAC;QAED,EAAE,EAAC,CAAC,EAAE,CAAC,EAAC;YACJ,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;QAC1B,CAAC;QACD,IAAI,EAAC;YACD,qEAAqE;YACrE,wCAAwC;YACxC,MAAM,KAAK,GAAG,UAAU,CAAC,WAAW,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;YACtD,EAAE,EAAC,KAAK,GAAG,CAAC,CAAC;gBAAC,UAAU,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;YAEnD,iFAAiF;YACjF,gFAAgF;YAChF,mFAAmF;YACnF,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;QACxB,CAAC;QAED,IAAI,KAAK,GAAI,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAwB,CAAC,aAAa,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QAC7F,IAAI,CAAC,QAAQ,CAAC,qBAAqB,EAAoB,CAAC,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;QAE9F,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,OAAO,CAAC,aAAa,CAAC,IAAI,EAAC,EAAE,CAAC,CAAC;IACpE,CAAC;IAID;;;;;OAKG;IACH,IAAW,WAAW;QAClB,6EAA6E;QAC7E,wFAAwF;QACxF,+EAA+E;QAC/E,EAAE,EAAC,IAAI,CAAC,eAAe,EAAE,CAAC;YAAC,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC;QACpD,IAAI;YAAC,MAAM,CAAC,EAAE,CAAC;IACnB,CAAC;IAED;;OAEG;IACH,IAAW,OAAO;QACd,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC;IACzB,CAAC;IAED,IAAW,OAAO,CAAC,EAAY;QAE3B,EAAE,EAAC,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,gBAAgB,EAAE,CAAC,EAAC;YAC9D,MAAM,IAAI,KAAK,CAAC,yFAAyF,CAAC,CAAC;QAC/G,CAAC;QAED,2EAA2E;QAC3E,EAAE,EAAC,EAAE,IAAI,EAAE,KAAK,IAAI,CAAC,OAAO,CAAC;YAAC,MAAM,CAAC;QAErC,oEAAoE;QACpE,EAAE,EAAC,IAAI,CAAC,QAAQ,CAAC,EAAC;YACd,MAAM,MAAM,GAAI,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAwB,CAAC,aAAa,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YAClG,EAAE,EAAC,MAAM,CAAC,EAAC;gBACN,MAAwB,CAAC,MAAM,GAAG,IAAI,CAAC;gBACvC,IAAI,CAAC,QAAQ,CAAC,qBAAqB,EAAoB,CAAC,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,EAAC,MAAM,CAAC,CAAC;YACnG,CAAC;QACL,CAAC;QAED,oCAAoC;QACpC,EAAE,EAAC,CAAC,EAAE,CAAC,EAAC;YACJ,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QACzB,CAAC;QACD,IAAI,EAAC;YACD,8CAA8C;YAC9C,MAAM,MAAM,GAAI,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAwB;iBAC3D,aAAa,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAkB,CAAC;YACvD,EAAE,EAAC,MAAM,CAAC,EAAC;gBACP,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC,EAAE,CAAC;YAC5B,CAAC;YACD,iFAAiF;YACjF,gFAAgF;YAChF,mFAAmF;YACnF,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;YACnB,IAAI,KAAK,GAAI,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAwB,CAAC,aAAa,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;YAC7F,IAAI,CAAC,QAAQ,CAAC,qBAAqB,EAAoB,CAAC,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;QAClG,CAAC;IACL,CAAC;IAED;;;;OAIG;IACH,IAAW,iBAAiB;QACxB,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC;IAC3B,CAAC;IAED,IAAW,iBAAiB,CAAC,KAAe;QACxC,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;QACxB,IAAI,IAAI,GAAI,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAwB,CAAC,aAAa,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QAC5F,IAAI,CAAC,QAAQ,CAAC,qBAAqB,EAAoB,CAAC,YAAY,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,EAAC,IAAI,CAAC,CAAC;IACjG,CAAC;IAOD;;;OAGG;IACH,IAAW,QAAQ;QACf,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC;IAC1B,CAAC;IAED,IAAW,QAAQ,CAAC,KAAc;QAC9B,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;QACvB,IAAI,IAAI,GAAI,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAwB,CAAC,aAAa,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QAC5F,IAAI,CAAC,QAAQ,CAAC,qBAAqB,EAAoB,CAAC,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,EAAC,IAAI,CAAC,CAAC;IAChG,CAAC;IAED;;;;;OAKG;IACH,IAAW,SAAS;QAChB,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC;IAC3B,CAAC;IAED,IAAW,SAAS,CAAC,KAAe;QAChC,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;QACxB,IAAI,IAAI,GAAI,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAwB,CAAC,aAAa,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QAC5F,IAAI,CAAC,QAAQ,CAAC,qBAAqB,EAAoB,CAAC,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,EAAC,IAAI,CAAC,CAAC;IAChG,CAAC;IAED;;;OAGG;IACH,QAAQ;QACJ,IAAI,UAAU,GAAG,IAAI,CAAC,aAAa,EAAE,CAAC;QACtC,IAAI,OAAO,GAAG,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAuB,CAAC;QAC9D,IAAI,KAAK,GAAG,OAAO,CAAC,WAAW,EAAE,CAAC;QAElC,EAAE,EAAC,UAAU,IAAI,CAAC,CAAC;YAAC,MAAM,CAAC,KAAK,CAAC;QACjC,IAAI,EAAC;YACD,OAAM,UAAU,EAAC,CAAC;gBACd,KAAK,GAAG,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;gBACzC,EAAE,UAAU,CAAC;YACjB,CAAC;YACD,MAAM,CAAC,KAAK,CAAC;QACjB,CAAC;IACL,CAAC;IAED,KAAK;QACD,IAAI,IAAI,GAAG,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,OAAO,CAAC,eAAe,CACxD,IAAI,CAAC,QAAQ,CAAmB,CAAC;QAErC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;QACrB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC;QAC7B,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC;QAEhC,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC;QAChC,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC;QAClC,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,iBAAiB,CAAC;QAEzC,GAAG,EAAC,IAAI,CAAC,IAAI,IAAI,CAAC,WAAW,CAAC,EAAC;YAC3B,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;QAC7B,CAAC;QACD,MAAM,CAAC,IAAI,CAAC;IAChB,CAAC;IAED,MAAM,CAAC,KAAU;QACb,IAAI,CAAC,GAAG,GAAG,KAAK,CAAC;IACrB,CAAC;CACJ;AA1YD,4BA0YC;;;;;;;;;;;ACjaD,oGAA4C;AAS5C,4FAA6C;AAC7C,4GAA6D;AAS7D;;GAEG;AACH,aAAqB,SAAQ,2BAA+B;IAEhD,qBAAqB;QACzB,IAAI,WAAW,GAAG,IAAI,CAAC,SAAS,CAAC,qBAAqB,EAAE,CAAC;QACzD,EAAE,EAAC,CAAC,WAAW,IAAI,WAAW,CAAC,MAAM,IAAI,qCAAiB,CAAC,OAAO,CAAC;YAAC,MAAM,CAAC,KAAK;QAChF,IAAI;YAAC,MAAM,CAAC,IAAI,CAAC;IACrB,CAAC;IAED,YAAY,SAAsB,EAAE,IAAY;QAC5C,KAAK,EAAE,CAAC;QACR,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC,QAAQ,CAAC;QACpC,IAAI,CAAC,SAAS,GAAG,qBAAS,CAAC,OAAO,CAAC;QACnC,IAAI,CAAC,YAAY,GAAG,SAAS,CAAC,EAAE,CAAC;QACjC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;QAClB,IAAI,CAAC,kBAAkB,GAAG,IAAI,KAAK,EAAgB,CAAC;QACpD,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;QACtB,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;QACxB,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;QAExB,IAAI,CAAC,kBAAkB,GAAG,EAAE,CAAC;IACjC,CAAC;IAED;;;;OAIG;IACH,qBAAqB;QACjB,EAAE,EAAC,IAAI,CAAC,WAAW,CAAC,EAAC;YACjB,IAAI,SAAS,GAAI,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAwB;iBAC5D,aAAa,CAAC,GAAG,CAAC,IAAI,CAAC,WAAW,CAAgB,CAAC;YACxD,MAAM,CAAC,SAAS,CAAC,SAAS,EAAE,CAAC;QACjC,CAAC;QACD,IAAI;YAAC,MAAM,CAAC,KAAK,CAAC;IACtB,CAAC;IAED;;;;;OAKG;IACH,SAAS;QACL,MAAM,CAAC,IAAI,CAAC,iBAAiB,IAAI,IAAI,CAAC,qBAAqB,EAAE,CAAC;IAClE,CAAC;IAID;;;OAGG;IACH,IAAW,QAAQ;QACf,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC;IAC1B,CAAC;IAWD;;;OAGG;IACH,IAAW,WAAW;QAClB,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC;IAC7B,CAAC;IAED,IAAW,WAAW,CAAC,KAAkB;QACrC,EAAE,EAAC,CAAC,IAAI,CAAC,qBAAqB,EAAE,CAAC,EAAC;YAC9B,MAAM,IAAI,KAAK,CAAC,yEAAyE,CAAC,CAAC;QAC/F,CAAC;QACD,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;QACzB,IAAI,CAAC,QAAQ,CAAC,qBAAqB,EAAoB,CAAC,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,EAAC,IAAI,CAAC,CAAC;IAC3F,CAAC;IAED;;;OAGG;IACH,IAAW,IAAI;QACX,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC;IACtB,CAAC;IAED,IAAW,IAAI,CAAC,KAAa;QACzB,EAAE,EAAC,CAAC,IAAI,CAAC,qBAAqB,EAAE,CAAC,EAAC;YAC9B,MAAM,IAAI,KAAK,CAAC,yEAAyE,CAAC,CAAC;QAC/F,CAAC;QACD,EAAE,EAAC,IAAI,CAAC,YAAY,EAAE,CAAC,WAAW,EAAE,IAAI,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,gBAAgB,EAAE,CAAC,EAAC;YAClF,MAAM,IAAI,KAAK,CAAC,yEAAyE,CAAC,CAAC;QAC/F,CAAC;QACD,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QAClB,IAAI,CAAC,QAAQ,CAAC,qBAAqB,EAAoB,CAAC,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,EAAC,IAAI,CAAC,CAAC;IAC3F,CAAC;IAED;;;OAGG;IACH,IAAW,iBAAiB;QACxB,MAAM,CAAC,IAAI,CAAC,kBAAkB,CAAC;IACnC,CAAC;IAED,IAAW,iBAAiB,CAAC,KAA2B;QACpD,EAAE,EAAC,CAAC,IAAI,CAAC,qBAAqB,EAAE,CAAC,EAAC;YAC9B,MAAM,IAAI,KAAK,CAAC,yEAAyE,CAAC,CAAC;QAC/F,CAAC;QACD,EAAE,EAAC,IAAI,CAAC,YAAY,EAAE,CAAC,WAAW,EAAE,IAAI,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,gBAAgB,EAAE,CAAC,EAAC;YAClF,MAAM,IAAI,KAAK,CAAC,yEAAyE,CAAC,CAAC;QAC/F,CAAC;QACD,IAAI,CAAC,kBAAkB,GAAG,KAAK,CAAC;IACpC,CAAC;IAED;;;OAGG;IACH,IAAW,QAAQ;QACf,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC;IAC1B,CAAC;IAED,IAAW,QAAQ,CAAC,KAAa;QAC7B,EAAE,EAAC,CAAC,IAAI,CAAC,qBAAqB,EAAE,CAAC,EAAC;YAC9B,MAAM,IAAI,KAAK,CAAC,yEAAyE,CAAC,CAAC;QAC/F,CAAC;QACD,EAAE,EAAC,IAAI,CAAC,YAAY,EAAE,CAAC,WAAW,EAAE,IAAI,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,gBAAgB,EAAE,CAAC,EAAC;YAClF,MAAM,IAAI,KAAK,CAAC,yEAAyE,CAAC,CAAC;QAC/F,CAAC;QACD,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;QACtB,IAAI,CAAC,QAAQ,CAAC,qBAAqB,EAAoB,CAAC,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,EAAC,IAAI,CAAC,CAAC;IAC3F,CAAC;IAED;;;OAGG;IACH,IAAW,SAAS;QAChB,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC;IAC3B,CAAC;IAED,IAAW,SAAS,CAAC,KAAe;QAChC,EAAE,EAAC,CAAC,IAAI,CAAC,qBAAqB,EAAE,CAAC,EAAC;YAC9B,MAAM,IAAI,KAAK,CAAC,yEAAyE,CAAC,CAAC;QAC/F,CAAC;QACD,EAAE,EAAC,IAAI,CAAC,YAAY,EAAE,CAAC,WAAW,EAAE,IAAI,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,gBAAgB,EAAE,CAAC,EAAC;YAClF,MAAM,IAAI,KAAK,CAAC,yEAAyE,CAAC,CAAC;QAC/F,CAAC;QACD,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;IAC5B,CAAC;IAED;;;OAGG;IACH,IAAW,iBAAiB;QACxB,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC;IAC3B,CAAC;IAED,IAAW,iBAAiB,CAAC,KAAe;QACxC,EAAE,EAAC,CAAC,IAAI,CAAC,qBAAqB,EAAE,CAAC,EAAC;YAC9B,MAAM,IAAI,KAAK,CAAC,yEAAyE,CAAC,CAAC;QAC/F,CAAC;QACD,EAAE,EAAC,IAAI,CAAC,YAAY,EAAE,CAAC,WAAW,EAAE,IAAI,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,gBAAgB,EAAE,CAAC,EAAC;YAClF,MAAM,IAAI,KAAK,CAAC,yEAAyE,CAAC,CAAC;QAC/F,CAAC;QACD,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;QACvB,IAAI,CAAC,QAAQ,CAAC,qBAAqB,EAAoB,CAAC,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,EAAC,IAAI,CAAC,EAAE,CAAC,CAAC;QAC1F,EAAE,EAAC,IAAI,CAAC,UAAU,CAAC;YAAE,IAAI,CAAC,QAAQ,CAAC,qBAAqB,EAAoB,CAAC,YAAY,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,EAAC,IAAI,CAAC,CAAC;IAChH,CAAC;IAED;;;OAGG;IACH,IAAW,QAAQ;QACf,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC;IAC1B,CAAC;IAED;;;OAGG;IACH,oBAAoB;QAChB,IAAI,GAAG,GAAG,EAAE,CAAC;QACb,GAAG,EAAC,IAAI,CAAC,IAAI,IAAI,CAAC,iBAAiB,CAAC,EAAC;YACjC,IAAI,UAAU,GAAI,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAwB,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YACtF,EAAE,EAAC,CAAC,UAAU,CAAC,iBAAiB,CAAC;gBAAC,GAAG,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QAC3D,CAAC;QACD,MAAM,CAAC,GAAG,CAAC;IACf,CAAC;IAED;;;OAGG;IACH,YAAY;QAER,IAAI,OAAO,GAAI,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAwB,CAAC;QAChE,EAAE,EAAC,OAAO,CAAC,aAAa,CAAC,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,EAAC;YAC5C,IAAI,SAAS,GAAG,OAAO,CAAC,aAAa,CAAC,GAAG,CAAC,IAAI,CAAC,WAAW,CAAe,CAAC;YAC1E,MAAM,CAAC,SAAS,CAAC;QACrB,CAAC;QACD,IAAI,EAAC;YACD,MAAM,CAAC,IAAI,CAAC;QAChB,CAAC;IACL,CAAC;IAED,MAAM,CAAC,KAAU;QACb,IAAI,CAAC,GAAG,GAAG,KAAK,CAAC;IACrB,CAAC;IAGD,KAAK,CAAC,KAAkB;QACpB,IAAI,IAAI,GAAG,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,OAAO,CAAC,cAAc,CAAC,KAAK,EAC7D,IAAI,CAAC,IAAI,CAAc,CAAC;QAC5B,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;QACrB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC;QACvB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,QAAQ,CAAC;QAC/B,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,SAAS,CAAC;QACjC,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,iBAAiB,CAAC;QAEzC,GAAG,EAAC,IAAI,CAAC,IAAI,IAAI,CAAC,iBAAiB,CAAC,EAAC;YACjC,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;QACnC,CAAC;QAED,MAAM,CAAC,IAAI,CAAC;IAChB,CAAC;CACJ;AAxOD,0BAwOC;;;;;;;;;;;AC5PD,kGAAkD;AAClD,sGAAiE;AAEjE,IAAI,GAAG,GAAmB,IAAI,CAAC;AAC/B,IAAI,UAAU,GAAG,IAAI,CAAC,CAAC,+EAA+E;AACtG,IAAI,UAAU,GAAG,MAAM,UAAU,GAAG,IAAI,iCAAe,EAAE,GAAG,IAAI,yBAAW,EAAE,CAAC;AAE9E;;;GAGG;AACH;IAEI,EAAE,EAAC,CAAC,GAAG,CAAC,EAAC;QACL,GAAG,GAAG,UAAU,EAAE,CAAC;IACvB,CAAC;IACD,MAAM,CAAC,GAAG,CAAC;AACf,CAAC;AAND,wCAMC;AAED;;;;GAIG;AACH;IAEI,EAAE,EAAC,CAAC,GAAG,CAAC,EAAC;QACL,GAAG,GAAG,UAAU,EAAE,CAAC;IACvB,CAAC;IACD,MAAM,CAAC,GAAG,CAAC;AACf,CAAC;AAND,0CAMC;;;;;;;;;;;ACjCD;;GAEG;AACH,IAAY,iBAiBX;AAjBD,WAAY,iBAAiB;IACzB;;OAEG;IACH,+DAAO;IACP;;OAEG;IACH,+DAAO;IACP;;OAEG;IACH,iEAAQ;IACR;;OAEG;IACH,qEAAU;AACd,CAAC,EAjBW,iBAAiB,GAAjB,yBAAiB,KAAjB,yBAAiB,QAiB5B;;;;;;;;;;;ACnBD,IAAY,SAWX;AAXD,WAAY,SAAS;IACjB,2CAAK;IACL,mDAAS;IACT,mDAAS;IACT,qDAAU;IACV,mDAAS;IACT,+CAAO;IACP,qDAAU;IACV,6CAAM;IACN,6CAAM;IACN,iDAAQ;AACZ,CAAC,EAXW,SAAS,GAAT,iBAAS,KAAT,iBAAS,QAWpB;;;;;;;;;;;ACZD;;GAEG;AACH,IAAY,qBAqBX;AArBD,WAAY,qBAAqB;IAC7B;;OAEG;IACH,uGAAuB;IACvB;;OAEG;IACH,iGAAoB;IACpB;;OAEG;IACH,uGAAuB;IACvB;;OAEG;IACH,uFAAe;IACf;;OAEG;IACH,yFAAgB;AACpB,CAAC,EArBW,qBAAqB,GAArB,6BAAqB,KAArB,6BAAqB,QAqBhC;;;;;;;;;;;ACvBD;;GAEG;AACH,IAAY,kBASX;AATD,WAAY,kBAAkB;IAC1B;;OAEG;IACH,iFAAe;IACf;;OAEG;IACH,2FAAoB;AACxB,CAAC,EATW,kBAAkB,GAAlB,0BAAkB,KAAlB,0BAAkB,QAS7B;;;;;;;;;;;ACbD;;GAEG;AACH,IAAY,yBAiBX;AAjBD,WAAY,yBAAyB;IACjC;;OAEG;IACH,6FAAc;IACd;;OAEG;IACH,+FAAe;IACf;;OAEG;IACH,6FAAc;IACd;;OAEG;IACH,+GAAuB;AAC3B,CAAC,EAjBW,yBAAyB,GAAzB,iCAAyB,KAAzB,iCAAyB,QAiBpC;;;;;;;;;;;ACnBD,oGAA+D;AAI/D,0FAAqD;AAErD,wGAAoD;AAapD;;GAEG;AACH,qBAA6B,SAAQ,2BAAmC;IAEpE,mBAAmB,CAAC,MAA0B;QAC1C,IAAI,CAAC,gBAAgB,GAAG,MAAM,CAAC;IACnC,CAAC;IACD,gBAAgB,CAAC,QAAyB;QACtC,IAAI,CAAC,aAAa,GAAG,QAAQ,CAAC;IAClC,CAAC;IACD,mBAAmB,CAAC,MAA0B;QAC1C,IAAI,CAAC,gBAAgB,GAAG,MAAM,CAAC;IACnC,CAAC;IACD,WAAW,CAAC,OAAmB;QAC3B,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC;IAC5B,CAAC;IACD,YAAY,CAAC,EAAe;QACxB,IAAI,CAAC,eAAe,GAAG,EAAE,CAAC;IAC9B,CAAC;IAID;;OAEG;IACH,IAAW,cAAc;QACrB,MAAM,CAAC,IAAI,CAAC,eAAe,CAAC;IAChC,CAAC;IAGD;;OAEG;IACH,IAAW,YAAY;QACnB,MAAM,CAAC,IAAI,CAAC,aAAa,CAAC;IAC9B,CAAC;IAID;;;OAGG;IACH,IAAW,eAAe;QACtB,MAAM,CAAC,IAAI,CAAC,gBAAgB,CAAC;IACjC,CAAC;IAED;;OAEG;IACH;QACI,KAAK,EAAE,CAAC;QAER,IAAI,CAAC,QAAQ,GAAG,IAAI,iBAAO,CAAC,IAAI,CAAC,CAAC;QAClC,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,OAAO,CAAC,sBAAsB,EAAE,CAAC;QAE9D,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,OAAO,CAAC,sBAAsB,CAAC,IAAI,CAAC,CAAC;QAClE,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,QAAQ,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;QAC3D,IAAI,CAAC,aAAa,GAAG,IAAI,mCAAgB,CAAC,IAAI,CAAC,CAAC;QAC/C,IAAI,CAAC,aAAkC,CAAC,aAAa,EAAE,CAAC;IAC7D,CAAC;IAID;;;OAGG;IACH,IAAW,eAAe;QACtB,MAAM,CAAC,IAAI,CAAC,gBAAgB,CAAC;IACjC,CAAC;IAID;;;OAGG;IACH,IAAW,OAAO;QACd,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC;IACzB,CAAC;IAED;;;OAGG;IACI,gBAAgB;QACnB,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,gBAAgB,EAAE,CAAC;IAChD,CAAC;IAEM,mBAAmB;QACtB,MAAM,CAAC,IAAI,CAAC,gBAAgB,CAAC;IACjC,CAAC;IAEM,gBAAgB;QACnB,MAAM,CAAC,IAAI,CAAC,aAAa,CAAC;IAC9B,CAAC;IAEM,mBAAmB;QACtB,MAAM,CAAC,IAAI,CAAC,gBAAgB,CAAC;IACjC,CAAC;IAEM,WAAW;QACd,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC;IACzB,CAAC;IAEM,YAAY;QACf,MAAM,CAAC,IAAI,CAAC,eAAe,CAAC;IAChC,CAAC;CACJ;AA3GD,0CA2GC;;;;;;;;;;;AC/HD,oGAA+D;AAS/D;;;;GAIG;AACH,sBAA8B,SAAQ,2BAAY;IAE9C;;;OAGG;IACH,YAAY,GAAkB;QAC1B,KAAK,CAAC,GAAG,CAAC,CAAC;QAEX,IAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC;QAC/B,IAAI,CAAC,mBAAmB,GAAG,KAAK,CAAC;QAEjC,IAAI,CAAC,uBAAuB,GAAG,KAAK,CAAC;QACrC,IAAI,CAAC,yBAAyB,GAAG,KAAK,CAAC;QAEvC,kDAAkD;QAClD,IAAI,CAAC,SAAS,GAAG,IAAI,KAAK,EAAa,CAAC;IAE5C,CAAC;IAEM,aAAa;QAChB,IAAI,CAAC,SAAS,GAAG,IAAI,KAAK,EAAa,CAAC;QACxC,IAAI,IAAI,GAAG,IAAI,CAAC,gBAAgB,EAAE,CAAC;QACnC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC1B,IAAI,IAAI,GAAG,IAAI,CAAC,gBAAgB,EAAE,CAAC;QACnC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IAC9B,CAAC;IAsBD;;;;;OAKG;IACO,aAAa,CAAC,UAAc,EAAE,QAAY;QAChD,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,aAAa,CAAC,IAAI,CAAC,iBAAiB,EAAE,EAAE,CAAC,CAAC;IAC9E,CAAC;IAED;;;;;OAKG;IACO,eAAe,CAAC,UAAc,EAAE,QAAY;QAClD,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,aAAa,CAAC,IAAI,CAAC,mBAAmB,EAAE,EAAE,CAAC,CAAC;IAChF,CAAC;IAED;;;;;OAKG;IACO,mBAAmB,CAAC,KAAS,EAAE,QAAY;QACjD,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,aAAa,CAAC,IAAI,CAAC,uBAAuB,EAAE,EAAE,CAAC,CAAC;IACpF,CAAC;IAED;;;;;OAKG;IACO,qBAAqB,CAAC,KAAS,EAAE,QAAY;QACnD,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,aAAa,CAAC,IAAI,CAAC,yBAAyB,EAAE,EAAE,CAAC,CAAC;IACtF,CAAC;IAED;;;;;OAKG;IACI,YAAY,CAAC,KAAU;QAE1B,GAAG,EAAC,IAAI,CAAC,IAAI,IAAI,CAAC,SAAS,CAAC,EAAC;YACzB,EAAE,EAAC,CAAC,CAAC,EAAE,KAAK,KAAK,CAAC;gBAAC,MAAM,CAAC,CAAC,CAAC;QAChC,CAAC;QACD,MAAM,CAAC,IAAI,CAAC;IAChB,CAAC;IAED;;;OAGG;IACK,gBAAgB;QAEpB,IAAI,GAAG,GAAG,IAAI,CAAC,WAAW,CAAC,eAAe,CAAC,MAAM,CAC7C,uCAAuC,EAAE,KAAK,CAAC,CAAC;QACpD,EAAE,EAAC,CAAC,GAAG,CAAC;YAAC,MAAM,IAAI,KAAK,CAAC,8BAA8B,CAAC,CAAC;QAEzD,IAAI,WAAW,GAAG,GAAG,CAAC,iBAAiB,EAAE,CAAC;QAC1C,WAAW,CAAC,KAAK,EAAE,CAAC;QAEnB,GAAkB,CAAC,MAAM,CAAC,sCAAsC,CAAC,CAAC;QAEnE,MAAM,MAAM,GAAG,CAAC,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,CAAC,CAAC;QAC7F,MAAM,WAAW,GAAG,MAAM,CAAC,MAAM,CAAC;QAClC,oFAAoF;QACpF,GAAG,EAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,WAAW,EAAE,EAAE,CAAC,EAAC,CAAC;YACjC,IAAI,IAAI,GAAG,QAAQ,GAAG,CAAC,CAAC;YACxB,IAAI,IAAI,GAAG,MAAM,GAAG,CAAC,CAAC;YACtB,IAAI,KAAK,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;YACtB,IAAI,OAAO,GAAG,IAAI,CAAC;YACnB,GAAG,CAAC,UAAU,EAAE,CAAC,SAAS,CAAC,IAAI,EAAC,IAAI,EAAE,KAAK,EAAE,OAAO,CAAC,CAAC;QAC1D,CAAC;QACD,IAAI,QAAQ,GAAG,IAAI,CAAC;QAEpB,0CAA0C;QAC1C,IAAI,IAAI,GAAG,MAAM,CAAC;QAClB,IAAI,IAAI,GAAG,MAAM,CAAC;QAClB,IAAI,MAAM,GAAG,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,gBAAgB,CAAC,GAAG,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;QACxE,GAAG,CAAC,UAAU,EAAE,CAAC,cAAc,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC;QAClD,QAAQ,GAAG,MAAM,CAAC,EAAE,CAAC;QAErB,wBAAwB;QACxB,IAAI,GAAG,KAAK,CAAC;QACb,IAAI,GAAG,KAAK,CAAC;QACb,MAAM,GAAG,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,gBAAgB,CAAC,GAAG,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;QACpE,GAAG,CAAC,UAAU,EAAE,CAAC,cAAc,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC;QAElD,uBAAuB;QACvB,IAAI,GAAG,OAAO,CAAC;QACf,IAAI,GAAG,IAAI,CAAC;QACZ,IAAI,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,gBAAgB,CAAC,GAAG,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;QACzE,GAAG,CAAC,UAAU,EAAE,CAAC,cAAc,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC;QAEnD,yCAAyC;QAEzC,GAAG,CAAC,UAAU,EAAE,CAAC,aAAa,CAAC,MAAM,CAAC,EAAE,EAAE,OAAO,CAAC,EAAE,EAAE,+BAA+B,CAAC,CAAC;QAEvF,oBAAoB;QACpB,IAAI,SAAS,GAAG,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,gBAAgB,CAAC,GAAG,EAAE,IAAI,EAAC,cAAc,CAAC,CAAC;QACpF,GAAG,CAAC,UAAU,EAAE,CAAC,cAAc,CAAC,QAAQ,EAAE,SAAS,CAAC,CAAC;QAErD,mCAAmC;QACnC,GAAG,CAAC,UAAU,EAAE,CAAC,aAAa,CAAC,OAAO,CAAC,EAAE,EAAC,SAAS,CAAC,EAAE,EAAE,gCAAgC,CAAC,CAAC;QAE1F,8CAA8C;QAC9C,IAAI,SAAS,GAAI,GAAG,CAAC,UAAU,EAAE,CAAC,UAAU,CAAC,SAAS,CAAC,EAAE,EAAE,QAAQ,CAAC,CAAC;QACrE,EAAE,EAAC,CAAC,SAAS,CAAC;YAAC,MAAM,IAAI,KAAK,CAAC,oCAAoC,CAAC,CAAC;QAErE,IAAI,SAAS,GAAG,GAAG,CAAC,UAAU,EAAE,CAAC,UAAU,CAAC,SAAS,CAAC,EAAE,EAAE,OAAO,CAAC,CAAC;QACnE,EAAE,EAAC,CAAC,SAAS,CAAC;YAAC,MAAM,IAAI,KAAK,CAAC,oCAAoC,CAAC,CAAC;QAErE,IAAI,SAAS,GAAG,GAAG,CAAC,UAAU,EAAE,CAAC,UAAU,CAAC,SAAS,CAAC,EAAE,EAAE,SAAS,CAAC,CAAC;QACrE,EAAE,EAAC,CAAC,SAAS,CAAC;YAAC,MAAM,IAAI,KAAK,CAAC,oCAAoC,CAAC,CAAC;QAErE,mFAAmF;QACnF,IAAI,UAAU,GAAG,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,gBAAgB,CAAC,GAAG,EAC1D,aAAa,EAAE,IAAI,CAAC,CAAC;QACzB,GAAG,CAAC,UAAU,EAAE,CAAC,cAAc,CAAC,QAAQ,EAAE,UAAU,CAAC,CAAC;QAEtD,IAAI,UAAU,GAAG,GAAG,CAAC,UAAU,EAAE,CAAC,aAAa,CAAC,SAAS,CAAC,EAAE,EACxD,UAAU,CAAC,EAAE,EAAE,2BAA2B,CAAC,CAAC;QAEhD,EAAE,EAAC,CAAC,UAAU,CAAC;YAAC,MAAM,IAAI,KAAK,CAAC,gDAAgD,CAAC,CAAC;QAGlF,IAAI,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,gBAAgB,CAAC,GAAG,EAC3D,cAAc,EAAE,IAAI,CAAC,CAAC;QAC1B,GAAG,CAAC,UAAU,EAAE,CAAC,cAAc,CAAC,QAAQ,EAAE,WAAW,CAAC,CAAC;QAEvD,UAAU,GAAG,GAAG,CAAC,UAAU,EAAE,CAAC,aAAa,CAAC,SAAS,CAAC,EAAE,EACpD,WAAW,CAAC,EAAE,EAAE,4BAA4B,CAAC,CAAC;QAElD,EAAE,EAAC,CAAC,UAAU,CAAC;YAAC,MAAM,IAAI,KAAK,CAAC,gDAAgD,CAAC,CAAC;QAElF,IAAI,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,gBAAgB,CAAC,GAAG,EAC3D,cAAc,EAAE,KAAK,CAAC,CAAC;QAC3B,GAAG,CAAC,UAAU,EAAE,CAAC,cAAc,CAAC,QAAQ,EAAE,WAAW,CAAC,CAAC;QAEvD,UAAU,GAAG,GAAG,CAAC,UAAU,EAAE,CAAC,aAAa,CAAC,SAAS,CAAC,EAAE,EACpD,WAAW,CAAC,EAAE,EAAE,4BAA4B,CAAC,CAAC;QAElD,EAAE,EAAC,CAAC,UAAU,CAAC;YAAC,MAAM,IAAI,KAAK,CAAC,iDAAiD,CAAC,CAAC;QAEnF,WAAW,CAAC,MAAM,EAAE,CAAC;QAErB,MAAM,CAAC,GAAG,CAAC;IACf,CAAC;IAED;;;OAGG;IACK,gBAAgB;QACpB,6EAA6E;QAC7E,sDAAsD;QAEtD,IAAI,GAAG,GAAG,IAAI,CAAC,WAAW,CAAC,eAAe,CAAC,MAAM,CAC7C,mCAAmC,EAAE,KAAK,CAAC,CAAC;QAChD,EAAE,EAAC,CAAC,GAAG,CAAC;YAAC,MAAM,IAAI,KAAK,CAAC,8BAA8B,CAAC,CAAC;QAEzD,IAAI,WAAW,GAAG,GAAG,CAAC,iBAAiB,EAAE,CAAC;QAC1C,WAAW,CAAC,KAAK,EAAE,CAAC;QAEnB,GAAkB,CAAC,MAAM,CAAC,sCAAsC,CAAC,CAAC;QAEnE,MAAM,MAAM,GAAG,CAAC,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,CAAC,CAAC;QAC7F,MAAM,WAAW,GAAG,MAAM,CAAC,MAAM,CAAC;QAClC,oFAAoF;QACpF,GAAG,EAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,WAAW,EAAE,EAAE,CAAC,EAAC,CAAC;YACjC,IAAI,IAAI,GAAG,QAAQ,GAAG,CAAC,CAAC;YACxB,IAAI,IAAI,GAAG,MAAM,GAAG,CAAC,CAAC;YACtB,IAAI,KAAK,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;YACtB,IAAI,OAAO,GAAG,IAAI,CAAC;YACnB,GAAG,CAAC,UAAU,EAAE,CAAC,SAAS,CAAC,IAAI,EAAC,IAAI,EAAE,KAAK,EAAE,OAAO,CAAC,CAAC;QAC1D,CAAC;QAED,IAAI,gBAAgB,GAAG,IAAI,KAAK,EAAgB,CAAC;QACjD,IAAI,IAAI,GAAG,IAAI,CAAC;QAEhB,IAAI,WAAW,GAAG,UACd,MAAW,EAAE,UAAmB,EAAE,UAAmB,EAAE,UAAmB,EAC1E,GAAyB;YAEzB,GAAG,EAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,EAAE,CAAC,EAAC,CAAC;gBACvB,IAAI,IAAI,GAAG,UAAU,GAAG,CAAC,CAAC;gBAC1B,IAAI,IAAI,GAAG,UAAU,GAAG,CAAC,CAAC;gBAC1B,IAAI,MAAM,GAAG,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,gBAAgB,CAAC,GAAG,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;gBACxE,GAAG,CAAC,UAAU,EAAE,CAAC,cAAc,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;gBAEhD,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YACrB,CAAC;QACL,CAAC,CAAC;QAEF,0CAA0C;QAC1C,IAAI,IAAI,GAAG,MAAM,CAAC;QAClB,IAAI,IAAI,GAAG,MAAM,CAAC;QAClB,IAAI,MAAM,GAAG,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,gBAAgB,CAAC,GAAG,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;QACxE,GAAG,CAAC,UAAU,EAAE,CAAC,cAAc,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;QAC9C,IAAI,QAAQ,GAAG,MAAM,CAAC,EAAE,CAAC;QAEzB,gEAAgE;QAChE,WAAW,CAAC,QAAQ,EAAE,QAAQ,EAAE,MAAM,EAAE,QAAQ,EAAE,gBAAgB,CAAC,CAAC;QAEpE,mEAAmE;QACnE,uCAAuC;QAEvC,IAAI,mBAAmB,GAAG,IAAI,KAAK,EAAgB,CAAC;QAEpD,IAAI,IAAI,GAAG;YACP,EAAC,UAAU,EAAG,KAAK,EAAE,UAAU,EAAG,IAAI,EAAE,UAAU,EAAG,MAAM,EAAC;YAC5D,EAAC,UAAU,EAAG,KAAK,EAAE,UAAU,EAAG,IAAI,EAAE,UAAU,EAAG,QAAQ,EAAC;YAC9D,EAAC,UAAU,EAAG,KAAK,EAAE,UAAU,EAAG,IAAI,EAAE,UAAU,EAAG,OAAO,EAAC;SAChE,CAAC;QAEF,GAAG,EAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,gBAAgB,CAAC,MAAM,EAAE,EAAE,CAAC,EAAC,CAAC;YAC7C,WAAW,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC,UAAU,EAClD,IAAI,CAAC,CAAC,CAAC,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC,UAAU,EACtC,mBAAmB,CAAC,CAAC;QAC7B,CAAC;QAED,4FAA4F;QAC5F,oEAAoE;QAEpE,IAAI,cAAc,GAAG,UAAS,MAAW;YAErC,cAAc;YACd,IAAI,IAAI,GAAG,MAAM,GAAG,MAAM,CAAC;YAC3B,IAAI,IAAI,GAAG,MAAM,GAAG,MAAM,CAAC;YAC3B,IAAI,MAAM,GAAG,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,gBAAgB,CAAC,GAAG,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;YACxE,GAAG,CAAC,UAAU,EAAE,CAAC,cAAc,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;YAEhD,cAAc;YACd,IAAI,GAAG,QAAQ,GAAG,MAAM,CAAC;YACzB,IAAI,GAAG,KAAK,GAAG,MAAM,CAAC;YACtB,IAAI,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,gBAAgB,CAAC,GAAG,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;YACzE,GAAG,CAAC,UAAU,EAAE,CAAC,cAAc,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC;YAEjD,yCAAyC;YACzC,GAAG,CAAC,UAAU,EAAE,CAAC,aAAa,CAAC,MAAM,CAAC,EAAE,EAAE,OAAO,CAAC,EAAE,EAAE,8BAA8B,CAAC,CAAC;YAEtF,oBAAoB;YACpB,IAAI,SAAS,GAAG,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,gBAAgB,CAAC,GAAG,EAAE,IAAI,EAAC,cAAc,CAAC,CAAC;YACpF,GAAG,CAAC,UAAU,EAAE,CAAC,cAAc,CAAC,MAAM,EAAE,SAAS,CAAC,CAAC;YAEnD,mCAAmC;YACnC,GAAG,CAAC,UAAU,EAAE,CAAC,aAAa,CAAC,OAAO,CAAC,EAAE,EAAE,SAAS,CAAC,EAAE,EAAE,+BAA+B,CAAC,CAAC;YAE1F,8CAA8C;YAC9C,IAAI,SAAS,GAAG,GAAG,CAAC,UAAU,EAAE,CAAC,UAAU,CAAC,SAAS,CAAC,EAAE,EAAE,QAAQ,CAAC,CAAC;YAEpE,IAAI,SAAS,GAAG,GAAG,CAAC,UAAU,EAAE,CAAC,UAAU,CAAC,SAAS,CAAC,EAAE,EAAE,OAAO,CAAC,CAAC;YAEnE,IAAI,SAAS,GAAG,GAAG,CAAC,UAAU,EAAE,CAAC,UAAU,CAAC,SAAS,CAAC,EAAE,EAAE,SAAS,CAAC,CAAC;YAErE,mFAAmF;YAEnF,IAAI,UAAU,GAAG,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,gBAAgB,CAAC,GAAG,EAC1D,aAAa,EAAE,IAAI,CAAC,CAAC;YACzB,GAAG,CAAC,UAAU,EAAE,CAAC,cAAc,CAAC,MAAM,EAAE,UAAU,CAAC,CAAC;YAEpD,GAAG,CAAC,UAAU,EAAE,CAAC,aAAa,CAAC,SAAS,CAAC,EAAE,EAAE,UAAU,CAAC,EAAE,EAAE,2BAA2B,CAAC,CAAC;YAEzF,IAAI,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,gBAAgB,CAAC,GAAG,EAC3D,cAAc,EAAE,IAAI,CAAC,CAAC;YAC1B,GAAG,CAAC,UAAU,EAAE,CAAC,cAAc,CAAC,MAAM,EAAE,WAAW,CAAC,CAAC;YAErD,GAAG,CAAC,UAAU,EAAE,CAAC,aAAa,CAAC,SAAS,CAAC,EAAE,EAAE,WAAW,CAAC,EAAE,EAAE,4BAA4B,CAAC,CAAC;YAE3F,IAAI,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,gBAAgB,CAAC,GAAG,EAC3D,cAAc,EAAE,KAAK,CAAC,CAAC;YAC3B,GAAG,CAAC,UAAU,EAAE,CAAC,cAAc,CAAC,MAAM,EAAE,WAAW,CAAC,CAAC;YAErD,GAAG,CAAC,UAAU,EAAE,CAAC,aAAa,CAAC,SAAS,CAAC,EAAE,EAAE,WAAW,CAAC,EAAE,EAAE,4BAA4B,CAAC,CAAC;QAC/F,CAAC,CAAC;QAEF,GAAG,EAAC,IAAI,CAAC,IAAI,mBAAmB,CAAC,EAAC;YAC9B,cAAc,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;QACzB,CAAC;QAED,WAAW,CAAC,MAAM,EAAE,CAAC;QACrB,MAAM,CAAC,GAAG,CAAC;IACf,CAAC;IAKD;;;OAGG;IACH,eAAe;QACX,IAAI,GAAG,GAAG,EAAE,CAAC;QAEb,GAAG,EAAC,IAAI,CAAC,IAAI,IAAI,CAAC,SAAS,CAAC,EAAC;YACzB,IAAI,IAAI,GAAG,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,mBAAmB,CACnD,CAAC,CAAC,EAAE,EAAC,CAAC,CAAC,UAAU,EAAE,CAAC,YAAY,EAAC,CAAC,CAAC,UAAU,EAAE,CAAC,YAAY,CAAC,CAAC;YAClE,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACnB,CAAC;QACD,MAAM,CAAC,GAAG,CAAC;IACf,CAAC;IAED;;;OAGG;IACH,gBAAgB;QACZ,MAAM,CAAC,gBAAgB,CAAC;IAC5B,CAAC;CACJ;AA3WD,4CA2WC;;;;;;;;;;;;;;;;;AC5XD,6GAAwD;AACxD,yEAAuC;AACvC,yGAA8D;AAC9D,sGAA4D;AAC5D,kHAA6E;AAC7E,mGAAyD;AACzD,2HAAiF;AACjF,+GAAqE;AACrE,kHAAwE;AACxE,0IAA+F;AAC/F,oIAAyF;AACzF,iIAAsF;AACtF,4EAAmD;AACnD,iIAAsF;AACtF,oGAAyD;AACzD,8FAAoD;AACpD,iFAAqD;AACrD,gGAAsD;AACtD,qGAA0D;AAC1D,wHAA6E;AAC7E,sGAA2D;AA+B3D,IAAa,SAAS,GAAtB;CACC;AADY,SAAS;IA7BrB,eAAQ,CAAC;QACR,YAAY,EAAE;YACZ,4BAAY;YACZ,0CAAmB;YACnB,kCAAe;YACf,oCAAgB;YAChB,mDAAuB;YACvB,+CAAqB;YACrB,6CAAoB;YACpB,6CAAoB;YACpB,uCAAiB;SAClB;QACD,OAAO,EAAE;YACP,gCAAa;YACb,qCAAgB;YAChB,oCAAuB;YACvB,gCAAc;YACd,2BAAmB;YACnB,wBAAW,CAAC,OAAO,EAAE;SACtB;QACD,SAAS,EAAE;YACT,EAAC,OAAO,EAAE,+BAAa,EAAE,QAAQ,EAAE,+BAAa,EAAC;YACjD,EAAC,OAAO,EAAE,0BAAW,EAAE,QAAQ,EAAE,0BAAW,EAAC;YAC7C,EAAC,OAAO,EAAE,4BAAY,EAAE,QAAQ,EAAE,4BAAY,EAAC;YAC/C,EAAC,OAAO,EAAE,yBAAY,EAAE,QAAQ,EAAE,yCAAkB,EAAC;YACrD,EAAC,OAAO,EAAE,iCAAc,EAAE,QAAQ,EAAE,iCAAc,EAAC;SACpD;QACD,SAAS,EAAE,CAAC,4BAAY,CAAC;KAC1B,CAAC;GACW,SAAS,CACrB;AADY,8BAAS;;;;;;;;ACnDtB,yF;;;;;;;ACAA;AACA;;;AAGA;AACA;;AAEA;;;AAGA;AACA,2C;;;;;;;;;;;;;;;;;;;ACXA,yEAAkE;AAClE,iFAAyC;AACzC,gGAA0D;AAO1D,IAAa,YAAY,GAAzB;IAEE,YAAmB,MAAqB,EAAE,GAAqB,EAAU,aAA2B;QAAjF,WAAM,GAAN,MAAM,CAAe;QAAiC,kBAAa,GAAb,aAAa,CAAc;QAClG,IAAI,CAAC,MAAM,CAAC,uBAAuB,CAAC,GAAG,CAAC,CAAC;IAC3C,CAAC;IAED,QAAQ;QACN,IAAI,CAAC,aAAa,CAAC,eAAe,CAAC,SAAS,CAAC,SAAS,IAAI,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,SAAS,CAAC,OAAO,EAAE,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC;IAC7H,CAAC;CACF;AATY,YAAY;IALxB,gBAAS,CAAC;QACT,QAAQ,EAAE,UAAU;QACpB,yFAAmC;QACnC,yFAAmC;KACpC,CAAC;yDAG2B,0BAAa,oBAAb,0BAAa,sDAAO,uBAAgB,oBAAhB,uBAAgB,sDAAyB,4BAAY,oBAAZ,4BAAY;GAFzF,YAAY,CASxB;AATY,oCAAY;;;;;;;;;;;;;;;;;;;;;ACTzB,yEAWuB;AACvB,4EAAuE;AACvE,2EAA2C;AAC3C,oEAAuC;AACvC,qEAAwC;AAaxC,IAAa,oBAAoB,4BAAjC;IA2BE,YAAoB,OAAe,EACf,UAAsB,EACtB,IAAuB;QAFvB,YAAO,GAAP,OAAO,CAAQ;QACf,eAAU,GAAV,UAAU,CAAY;QACtB,SAAI,GAAJ,IAAI,CAAmB;QA3B3C,kBAAkB;QAClB,aAAQ,GAAa,MAAM,IAAI,CAAC;QAOhC,eAAU,GAAG,yCAAyC,CAAC;QAEvD,qBAAgB,GAAa,EAAE,CAAC;QAChC,UAAK,GAAG,CAAC,CAAC,EAAE,GAAG,EAAE,EAAE,CAAC,CAAC;QAErB,cAAS,GAAG,GAAG,CAAC;QAChB,eAAU,GAAG,KAAK,CAAC;QACnB,yBAAoB,GAAG,CAAC,CAAC;QAEzB,aAAQ,GAAG,GAAG,CAAC;QACf,cAAS,GAAG,GAAG,CAAC;QAChB,cAAS,GAAG,KAAK,CAAC;QAIlB,iBAAY,GAAG,KAAK,CAAC;IAKrB,CAAC;IAGD,WAAW,CAAC,KAAiB;QAC3B,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;YACpB,IAAI,CAAC,iBAAiB,CAAC,KAAK,CAAC,CAAC;QAChC,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;YAC1B,IAAI,CAAC,iBAAiB,CAAC,KAAK,CAAC,CAAC;QAChC,CAAC;IACH,CAAC;IAGD,SAAS,CAAC,KAAiB;QACzB,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;YACtC,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;YACxB,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;QACzB,CAAC;IACH,CAAC;IAGD,eAAe,CAAC,CAAa;QAC3B,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC;YAAC,MAAM,CAAC;QAC/B,IAAI,MAAM,GAAG,CAAC,CAAC,UAAU,IAAI,CAAC,CAAC,MAAM,CAAC;QACtC,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,QAAQ,CAAC,MAAM,CAAC,IAAI,IAAI,CAAC,UAAU,CAAC,aAAa,KAAK,MAAM,CAAC,CAAC,CAAC;YAC/F,MAAM,CAAC;QACT,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;QAC5B,CAAC;IACH,CAAC;IAED,4CAA4C;IAE5C,IAAI,WAAW,CAAC,MAAgB;QAC9B,MAAM,KAAK,GAAa,EAAE,CAAC;QAC3B,MAAM,CAAC,OAAO,CAAC,KAAK;YAClB,MAAM,GAAG,GAAG,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;YAClC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;gBACR,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;YAClB,CAAC;QACH,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;IAChC,CAAC;IAAA,CAAC;IAEF,IAAI,cAAc;QAChB,MAAM,QAAQ,GAAQ;YACpB,UAAU,EAAE,IAAI,CAAC,kBAAkB;SACpC,CAAC;QAEF,EAAE,CAAC,CAAC,IAAI,CAAC,oBAAoB,CAAC,CAAC,CAAC;YAC9B,QAAQ,CAAC,GAAG,GAAG,GAAG,IAAI,CAAC,oBAAoB,GAAG,CAAC;QACjD,CAAC;QAED,MAAM,CAAC,QAAQ,CAAC;IAClB,CAAC;IAED,IAAI,cAAc;QAChB,MAAM,QAAQ,GAAQ;YACpB,UAAU,EAAE,IAAI,CAAC,YAAY;SAC9B,CAAC;QAEF,EAAE,CAAC,CAAC,IAAI,CAAC,oBAAoB,CAAC,CAAC,CAAC;YAC9B,QAAQ,CAAC,GAAG,GAAG,IAAI,CAAC,oBAAoB,CAAC;QAC3C,CAAC;QAED,EAAE,CAAC,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC,CAAC;YAC/B,QAAQ,CAAC,IAAI,GAAG,IAAI,CAAC,qBAAqB,CAAC;QAC7C,CAAC;QAED,MAAM,CAAC,QAAQ,CAAC;IAClB,CAAC;IAED,IAAI,kBAAkB;QACpB,MAAM,CAAC,OAAO,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,cAAc,CAAC;IAC5C,CAAC;IAED,IAAI,YAAY;QACd,MAAM,CAAC,OAAO,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,KAAK,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,MAAM,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC;IACvE,CAAC;IAED,IAAI,QAAQ;QACV,MAAM,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;QAC7E,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE,CAAC;IAC9H,CAAC;IAED,eAAe;QACb,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC;QACjD,IAAI,CAAC,sBAAsB,EAAE,CAAC;IAChC,CAAC;IAED,MAAM;QACJ,IAAI,CAAC,YAAY,GAAG,CAAC,IAAI,CAAC,YAAY,CAAC;IACzC,CAAC;IAED,QAAQ,CAAC,KAAiB;QACxB,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;QACvB,IAAI,CAAC,iBAAiB,CAAC,KAAK,CAAC,CAAC;IAChC,CAAC;IAED,QAAQ,CAAC,KAAiB;QACxB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;QACtB,IAAI,CAAC,iBAAiB,CAAC,KAAK,CAAC,CAAC;IAChC,CAAC;IAED,iBAAiB,CAAC,KAAiB;QACjC,MAAM,WAAW,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,CAAC,GAAG,CAAC;QAE/D,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC,KAAK,CAAC,KAAK,GAAG,WAAW,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC,CAAC;QAC7H,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,KAAK,GAAG,WAAW,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,GAAG,CAAC,CAAC;QAChH,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC;QACjD,IAAI,CAAC,QAAQ,CAAC,GAAG,GAAG,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;IACxD,CAAC;IAED,iBAAiB,CAAC,KAAiB;QACjC,MAAM,WAAW,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,CAAC;QAC3D,MAAM,YAAY,GAAG,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,KAAK,GAAG,WAAW,CAAC,IAAI,EAAE,CAAC,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;QAE3F,IAAI,CAAC,qBAAqB,GAAG,YAAY,GAAG,IAAI,CAAC;QACjD,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,KAAK,GAAG,WAAW,CAAC,GAAG,EAAE,CAAC,EAAE,IAAI,CAAC,SAAS,CAAC,GAAG,IAAI,CAAC;QAEzG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,YAAY,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,GAAG,CAAC,CAAC;QAEjE,IAAI,CAAC,GAAG,KAAK,CAAC,KAAK,GAAG,WAAW,CAAC,IAAI,CAAC;QACvC,IAAI,CAAC,GAAG,KAAK,CAAC,KAAK,GAAG,WAAW,CAAC,GAAG,CAAC;QAEtC,EAAE,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;YACtB,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC;QACpB,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YACjB,CAAC,GAAG,CAAC,CAAC;QACR,CAAC;QAED,EAAE,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;YACvB,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC;QACrB,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YACjB,CAAC,GAAG,CAAC,CAAC;QACR,CAAC;QAED,8BAA8B;QAC9B,MAAM,MAAM,GAAG,CAAC,GAAG,IAAI,CAAC,QAAQ,GAAG,GAAG,CAAC;QACvC,MAAM,MAAM,GAAG,CAAC,GAAG,IAAI,CAAC,SAAS,GAAG,GAAG,CAAC;QACxC,MAAM,QAAQ,GAAG,CAAC,GAAG,CAAC,MAAM,GAAG,GAAG,CAAC,CAAC;QACpC,MAAM,aAAa,GAAG,MAAM,GAAG,GAAG,CAAC;QACnC,MAAM,SAAS,GAAG,CAAC,QAAQ,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,aAAa,CAAC,CAAC;QAEvD,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,GAAG,GAAG,CAAC,CAAC;QAC5C,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC;QACjD,IAAI,CAAC,QAAQ,CAAC,GAAG,GAAG,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;IACxD,CAAC;IAED,SAAS,CAAC,KAAa,EAAE,MAAM,GAAG,IAAI;QACpC,MAAM,MAAM,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAC3C,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;YACX,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,GAAG,KAAK,CAAC;YACzC,MAAM,CAAC,GAAG,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;YAClC,MAAM,CAAC,GAAG,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;YAClC,MAAM,CAAC,GAAG,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;YAElC,MAAM,GAAG,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YACpC,MAAM,GAAG,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YAEpC,IAAI,CAAC,oBAAoB,GAAG,GAAG,CAAC,CAAC,CAAC,GAAG,GAAG,GAAG,GAAG,CAAC;YAC/C,IAAI,CAAC,qBAAqB,GAAG,GAAG,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC;YAC1C,IAAI,CAAC,oBAAoB,GAAG,GAAG,GAAG,CAAE,GAAG,CAAC,CAAC,CAAC,GAAG,GAAG,CAAE,GAAG,GAAG,CAAC;YAEzD,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;YACvB,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;YACvB,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;YAEvB,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;gBACX,IAAI,CAAC,QAAQ,CAAC,GAAG,GAAG,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;YACxD,CAAC;YAED,IAAI,CAAC,IAAI,CAAC,aAAa,EAAE,CAAC;QAC5B,CAAC;IACH,CAAC;IAEO,sBAAsB;QAC5B,IAAI,CAAC,OAAO,CAAC,iBAAiB,CAAC;YAC7B,uBAAU,CAAC,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC,aAAa,EAAE,OAAO,CAAC;iBACtD,YAAY,CAAC,GAAG,CAAC;iBACjB,SAAS,CAAC,CAAC;gBACV,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,CAAC,WAAW,EAAE,CAAC;gBAClF,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;oBAChD,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;oBAChF,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;gBACnD,CAAC;gBAAC,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC;oBACzD,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;gBACnD,CAAC;YACH,CAAC,CAAC,CAAC;QACP,CAAC,CAAC,CAAC;IACL,CAAC;IAED,4CAA4C;IAC5C,UAAU,CAAC,KAAU;QACnB,MAAM,GAAG,GAAG,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;QAClC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;YACR,IAAI,CAAC,SAAS,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC;QAC7B,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,IAAI,CAAC,SAAS,CAAC,QAAQ,EAAE,KAAK,CAAC,CAAC;QAClC,CAAC;IACH,CAAC;IAED,gBAAgB,CAAC,EAAO;QACtB,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;IACrB,CAAC;IAED,iBAAiB,CAAC,EAAO;QACvB,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;IACtB,CAAC;IAED,UAAU;IACF,SAAS,CAAC,GAAQ;QACxB,MAAM,CAAC,GAAG,KAAK,IAAI,IAAI,GAAG,KAAK,GAAG,CAAC,MAAM,CAAC;IAC5C,CAAC;IAEO,UAAU,CAAC,OAAY;QAC7B,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,GAAG,OAAO,GAAG,OAAO,CAAC,QAAQ,KAAK,CAAC,IAAI,OAAO,CAAC,WAAW,CAAC;IAC3F,CAAC;IAEO,OAAO,CAAC,OAAY;QAE1B,MAAM,GAAG,GAAG,OAAO,IAAI,OAAO,CAAC,aAAa,CAAC;QAC7C,MAAM,OAAO,GAAG,GAAG,CAAC,eAAe,CAAC;QACpC,MAAM,GAAG,GAAG,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC;QAEjC,IAAI,GAAG,GAAG;YACR,GAAG,EAAE,CAAC;YACN,IAAI,EAAE,CAAC;SACR,CAAC;QAEF,EAAE,CAAC,CAAC,OAAO,OAAO,CAAC,qBAAqB,KAAK,OAAO,SAAS,CAAC,CAAC,CAAC;YAC9D,GAAG,GAAG,OAAO,CAAC,qBAAqB,EAAE,CAAC;QACxC,CAAC;QAED,MAAM,CAAC;YACL,GAAG,EAAE,GAAG,CAAC,GAAG,GAAG,GAAG,CAAC,WAAW,GAAG,OAAO,CAAC,SAAS;YAClD,IAAI,EAAE,GAAG,CAAC,IAAI,GAAG,GAAG,CAAC,WAAW,GAAG,OAAO,CAAC,UAAU;SACtD,CAAC;IACJ,CAAC;IAED,gBAAgB;IACR,SAAS,CAAC,KAAU;QAC1B,EAAE,CAAC,CAAC,OAAO,KAAK,KAAK,QAAQ,CAAC,CAAC,CAAC;YAC9B,MAAM,CAAC;QACT,CAAC;QAED,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC;YACrB,KAAK,GAAG,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;QACzB,CAAC;QAED,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;YAChC,MAAM,CAAC,KAAK,CAAC,WAAW,EAAE,CAAC;QAC7B,CAAC;QAED,MAAM,CAAC;IACT,CAAC;IAEO,cAAc,CAAC,GAAW,EAAE,GAAW,EAAE,GAAW;QAC1D,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,CAAC;IAC3C,CAAC;IAEO,aAAa,CAAC,CAAM;QAC1B,MAAM,CAAC,OAAO,CAAC,KAAK,QAAQ,IAAI,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC;IACxD,CAAC;IAEO,eAAe,CAAC,CAAM;QAC5B,MAAM,CAAC,OAAO,CAAC,KAAK,QAAQ,IAAI,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,IAAI,UAAU,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;IAC/E,CAAC;IAEO,QAAQ,CAAC,CAAM,EAAE,GAAQ;QAC/B,EAAE,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YAC5B,CAAC,GAAG,MAAM,CAAC;QACb,CAAC;QAED,MAAM,cAAc,GAAG,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC;QAC7C,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAE9C,+CAA+C;QAC/C,EAAE,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC;YACnB,CAAC,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC;QACtB,CAAC;QAED,wCAAwC;QACxC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC;YACnC,MAAM,CAAC,CAAC,CAAC;QACX,CAAC;QAED,gDAAgD;QAChD,MAAM,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,GAAG,UAAU,CAAC,GAAG,CAAC,CAAC;IACrC,CAAC;IAEO,SAAS,CAAC,CAAS,EAAE,CAAS,EAAE,CAAS;QAC/C,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;QAEZ,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC;QAC1B,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC;QAC1B,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC;QAE1B,iBAAiB,CAAS,EAAE,CAAS,EAAE,CAAS;YAC9C,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;gBACV,CAAC,IAAI,CAAC,CAAC;YACT,CAAC;YAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;gBACjB,CAAC,IAAI,CAAC,CAAC;YACT,CAAC;YAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;gBACrB,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;YAC7B,CAAC;YAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;gBACrB,MAAM,CAAC,CAAC,CAAC;YACX,CAAC;YAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;gBACrB,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;YACvC,CAAC;YACD,MAAM,CAAC,CAAC,CAAC;QACX,CAAC;QAED,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;YACZ,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,aAAa;QAC9B,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,MAAM,CAAC,GAAG,CAAC,GAAG,GAAG,GAAG,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;YAChD,MAAM,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;YACpB,CAAC,GAAG,OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;YAC7B,CAAC,GAAG,OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YACrB,CAAC,GAAG,OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;QAC/B,CAAC;QAED,MAAM,CAAC,CAAC,CAAC,GAAG,GAAG,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,GAAG,GAAG,CAAC,CAAC;IACrC,CAAC;IAEO,SAAS,CAAC,CAAS,EAAE,CAAS,EAAE,CAAS;QAC/C,MAAM,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAC9B,MAAM,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAC9B,MAAM,CAAC,GAAG,GAAG,GAAG,GAAG,CAAC;QACpB,MAAM,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,GAAG,CAAC,CAAC;QACpC,MAAM,CAAC,GAAG,GAAG,GAAG,GAAG,CAAC;QAEpB,IAAI,CAAC,CAAC;QAEN,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;YACZ,KAAK,GAAG;gBACN,CAAC,GAAG,CAAC,CAAC;gBACN,KAAK,CAAC;YACR,KAAK,CAAC;gBACJ,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;gBAClC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;gBACX,KAAK,CAAC;YACR,KAAK,CAAC;gBACJ,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;gBACpB,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;gBACX,KAAK,CAAC;YACR,KAAK,CAAC;gBACJ,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;gBACpB,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;gBACX,KAAK,CAAC;QACV,CAAC;QAED,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;IACnB,CAAC;IAEO,SAAS,CAAC,CAAS,EAAE,CAAS,EAAE,CAAS;QAC/C,CAAC,GAAG,CAAC,GAAG,GAAG,CAAC;QACZ,CAAC,GAAG,CAAC,GAAG,GAAG,CAAC;QACZ,CAAC,GAAG,CAAC,GAAG,GAAG,CAAC;QAEZ,MAAM,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QACnC,MAAM,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QACnC,eAAe;QACf,IAAI,CAAC,GAAG,CAAC,QAAQ,GAAG,QAAQ,CAAC,GAAG,CAAC,CAAC;QAClC,IAAI,CAAC,GAAG,CAAC,CAAC;QACV,IAAI,CAAC,GAAG,CAAC,CAAC;QAEV,EAAE,CAAC,CAAC,QAAQ,KAAK,QAAQ,CAAC,CAAC,CAAC;YAC1B,eAAe;YACf,EAAE,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;gBACZ,CAAC,GAAG,CAAC,QAAQ,GAAG,QAAQ,CAAC,GAAG,CAAC,QAAQ,GAAG,QAAQ,CAAC,CAAC;YACpD,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,CAAC,GAAG,CAAC,QAAQ,GAAG,QAAQ,CAAC,GAAG,CAAC,GAAG,GAAG,QAAQ,GAAG,QAAQ,CAAC,CAAC;YAC1D,CAAC;YACD,eAAe;YACf,EAAE,CAAC,CAAC,CAAC,KAAK,QAAQ,CAAC,CAAC,CAAC;gBACnB,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,QAAQ,GAAG,QAAQ,CAAC,CAAC;YACtC,CAAC;YAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,KAAK,QAAQ,CAAC,CAAC,CAAC;gBAC1B,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,QAAQ,GAAG,QAAQ,CAAC,CAAC;YAC5C,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,QAAQ,GAAG,QAAQ,CAAC,CAAC;YAC5C,CAAC;QACH,CAAC;QAED,CAAC,GAAG,CAAC,GAAG,GAAG,CAAC;QACZ,CAAC,GAAG,CAAC,GAAG,GAAG,CAAC;QACZ,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC;QAEX,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YACV,CAAC,IAAI,GAAG,CAAC;QACX,CAAC;QAED,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;IACnB,CAAC;CACF;AAnamB;IAAjB,gBAAS,CAAC,KAAK,CAAC;kDAAQ,iBAAU,oBAAV,iBAAU;mDAAC;AAClB;IAAjB,gBAAS,CAAC,KAAK,CAAC;kDAAQ,iBAAU,oBAAV,iBAAU;mDAAC;AAChB;IAAnB,gBAAS,CAAC,OAAO,CAAC;kDAAU,iBAAU,oBAAV,iBAAU;qDAAC;AAyBxC;IADC,mBAAY,CAAC,WAAW,EAAE,CAAC,QAAQ,CAAC,CAAC;;;;uDAOrC;AAGD;IADC,mBAAY,CAAC,SAAS,EAAE,CAAC,QAAQ,CAAC,CAAC;;;;qDAMnC;AAGD;IADC,mBAAY,CAAC,gBAAgB,EAAE,CAAC,QAAQ,CAAC,CAAC;;;;2DAS1C;AAID;IADC,YAAK,EAAE;;;uDAWP;AAxEU,oBAAoB;IAXhC,gBAAS,CAAC;QACT,QAAQ,EAAE,cAAc;QACxB,iGAAkC;QAClC,gGAAiC;QACjC,eAAe,EAAE,8BAAuB,CAAC,MAAM;QAC/C,SAAS,EAAE,CAAC;gBACV,OAAO,EAAE,yBAAiB;gBAC1B,WAAW,EAAE,iBAAU,CAAC,MAAM,sBAAoB,CAAC;gBACnD,KAAK,EAAE,IAAI;aACZ,CAAC;KACH,CAAC;yDA4B6B,aAAM,oBAAN,aAAM,sDACH,iBAAU,oBAAV,iBAAU,sDAChB,wBAAiB,oBAAjB,wBAAiB;GA7BhC,oBAAoB,CAyahC;AAzaY,oDAAoB;;;;;;;;;AC5BjC;AACA;;;AAGA;AACA,gCAAiC,qBAAqB,yBAAyB,KAAK,uCAAuC,4BAA4B,yBAAyB,uBAAuB,KAAK,uCAAuC,kBAAkB,mBAAmB,yBAAyB,cAAc,aAAa,yBAAyB,KAAK,qCAAqC,8BAA8B,gBAAgB,mCAAmC,oBAAoB,kBAAkB,yBAAyB,mHAAmH,KAAK,wCAAwC,oBAAoB,yBAAyB,gBAAgB,cAAc,iBAAiB,2BAA2B,2CAA2C,2CAA2C,+BAA+B,uBAAuB,oBAAoB,wBAAwB,mHAAmH,KAAK,+CAA+C,iBAAiB,2BAA2B,yCAAyC,yCAAyC,KAAK,6CAA6C,wIAAwI,kBAAkB,oBAAoB,yBAAyB,4BAA4B,sBAAsB,mBAAmB,KAAK,qDAAqD,kBAAkB,mBAAmB,KAAK,oDAAoD,yBAAyB,gBAAgB,aAAa,+CAA+C,uCAAuC,kBAAkB,kBAAkB,8BAA8B,sBAAsB,kDAAkD,oCAAoC,KAAK,2DAA2D,kBAAkB,mBAAmB,KAAK,6CAA6C,iBAAiB,oBAAoB,4BAA4B,oCAAoC,yBAAyB,sBAAsB,gCAAgC,6BAA6B,4BAA4B,wBAAwB,KAAK,wDAAwD,yBAAyB,+CAA+C,uCAAuC,kBAAkB,mBAAmB,aAAa,iBAAiB,yBAAyB,8BAA8B,kBAAkB,0CAA0C,oCAAoC,kDAAkD,KAAK,+DAA+D,kBAAkB,mBAAmB,KAAK,iGAAiG,yBAAyB,aAAa,eAAe,gBAAgB,cAAc,KAAK,mDAAmD,0EAA0E,KAAK,mDAAmD,wEAAwE,KAAK;;AAEh6G;;;AAGA;AACA,2C;;;;;;;ACXA,iRAAiR,umC;;;;;;;ACAjR,s3B;;;;;;;ACAA;AACA;;;AAGA;AACA,6CAA8C,iBAAiB,sCAAsC,yCAAyC,EAAE,8BAA8B,yBAAyB,yBAAyB,kBAAkB,iBAAiB,8BAA8B,+BAA+B,gCAAgC,6BAA6B,8BAA8B,oCAAoC,uBAAuB,EAAE,sBAAsB,kBAAkB,EAAE,gBAAgB,gBAAgB,iBAAiB,qBAAqB,EAAE;;AAE1kB;;;AAGA;AACA,2C;;;;;;;;;;;;;;;;;;;ACXA,yEAAkF;AAClF,qEAAqC;AAErC,+EAA+C;AAC/C,gGAA0D;AAC1D,oGAA6D;AAS7D,IAAa,uBAAuB,GAApC;IAQE,YAAoB,MAAc,EACd,MAAqB,EACrB,KAAqB,EACrB,YAA0B;QAH1B,WAAM,GAAN,MAAM,CAAQ;QACd,WAAM,GAAN,MAAM,CAAe;QACrB,UAAK,GAAL,KAAK,CAAgB;QACrB,iBAAY,GAAZ,YAAY,CAAc;QAVvC,qBAAgB,GAAiB,IAAI,iBAAO,EAAE,CAAC;QAC/C,oBAAe,GAAmB,IAAI,iBAAO,EAAE,CAAC;QAChD,mBAAc,GAAoB,IAAI,iBAAO,EAAE,CAAC;QAChD,mBAAc,GAAuB,IAAI,iBAAO,EAAE,CAAC;QAElD,kBAAa,GAAmB,EAAE,CAAC;IAM3C,CAAC;IAED,QAAQ;IACR,CAAC;IAED,WAAW;QACT,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,CAAC,WAAW,EAAE,CAAC,CAAC;IACnD,CAAC;IAED,eAAe;QACb,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,SAAS,CAAC,MAAM;YAC1D,MAAM,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,eAAe,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC;YACxE,EAAE,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;gBACb,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YACrC,CAAC;YACD,IAAI,CAAC,CAAC;gBACJ,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,oBAAoB,EAAE,2BAA2B,CAAC,CAAC;YAC7E,CAAC;QACH,CAAC,CAAC,CAAC,CAAC;IACN,CAAC;IAED,UAAU,CAAC,CAAmB;QAC5B,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;IAChC,CAAC;IAED,iBAAiB,CAAC,SAAgB;QAChC,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;IACvC,CAAC;IAED,oBAAoB,CAAC,EAAU;QAC7B,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;IAC/B,CAAC;CACF;AA5CY,uBAAuB;IALnC,gBAAS,CAAC;QACT,QAAQ,EAAE,iBAAiB;QAC3B,iHAA+C;QAC/C,iHAA+C;KAChD,CAAC;yDAS4B,aAAM,oBAAN,aAAM,sDACN,+BAAa,oBAAb,+BAAa,sDACd,uBAAc,oBAAd,uBAAc,sDACP,4BAAY,oBAAZ,4BAAY;GAXnC,uBAAuB,CA4CnC;AA5CY,0DAAuB;;;;;;;;;ACdpC,uEAAuE,mBAAmB,yOAAyO,eAAe,GAAG,iBAAiB,uP;;;;;;;ACAtW;AACA;;;AAGA;AACA;;AAEA;;;AAGA;AACA,2C;;;;;;;;;;;;;;;;;;;ACXA,yEAAgD;AAChD,oGAA6D;AAQ7D,IAAa,qBAAqB,GAAlC;IAGE,YAAoB,OAAsB;QAAtB,YAAO,GAAP,OAAO,CAAe;IAC1C,CAAC;IAED,QAAQ;QACN,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,eAAe,CAAC,sBAAsB,EAAE,CAAC;IAC7E,CAAC;IAED,QAAQ,CAAC,QAAuB;QAC9B,KAAK,CAAC,GAAG,QAAQ,CAAC,IAAI,IAAI,QAAQ,CAAC,IAAI,EAAE,CAAC,CAAC;IAC7C,CAAC;CACF;AAbY,qBAAqB;IALjC,gBAAS,CAAC;QACT,QAAQ,EAAE,mBAAmB;QAC7B,6GAA6C;QAC7C,6GAA6C;KAC9C,CAAC;yDAI6B,+BAAa,oBAAb,+BAAa;GAH/B,qBAAqB,CAajC;AAbY,sDAAqB;;;;;;;;;ACTlC,2CAA2C,mBAAmB,0sEAA0sE,iDAAiD,OAAO,sU;;;;;;;ACAh0E;AACA;;;AAGA;AACA,gDAAiD,gBAAgB,iBAAiB,iBAAiB,EAAE;;AAErG;;;AAGA;AACA,2C;;;;;;;;;;;;;;;;;;;ACXA,yEAIuB;AACvB,uFAA4B;AAC5B,yFAAgC;AAEhC,+GAAmD;AACnD,+FAAoC;AACpC,2GAAgD;AAChD,iHAAqD;AACrD,yGAA8C;AAC9C,2HAA+D;AAC/D,qGAA0C;AAC1C,qHAAyD;AACzD,qGAAyC;AACzC,yEAAoC;AAGpC,mGAAuC;AACvC,yGAA6C;AAC7C,8DAA4B;AAC5B,+FAAoC;AAIpC,2EAA2C;AAG3C,4FAA8D;AAE9D,8FAAwD;AACxD,0HAA4F;AAG5F,gGAA0D;AAE1D,mGAA6D;AAC7D,iEAAoC;AAEpC,iHAAqD;AAGrD,IAAO,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC;AAClC,sGAA+D;AAO/D,IAAa,eAAe,GAA5B;IA6BE,YAAoB,MAAc,EACd,YAA0B,EAC1B,OAAuB,EACvB,WAAwB;QAHxB,WAAM,GAAN,MAAM,CAAQ;QACd,iBAAY,GAAZ,YAAY,CAAc;QAC1B,YAAO,GAAP,OAAO,CAAgB;QACvB,gBAAW,GAAX,WAAW,CAAa;QA5BlC,WAAM,GAAwB,IAAI,mBAAY,CAAC,IAAI,CAAC,CAAC;QACrD,mBAAc,GAAyB,IAAI,mBAAY,CAAC,IAAI,CAAC,CAAC;QAEhE,YAAO,GAAY,IAAI,iBAAO,EAAE,CAAC;QAUjC,oBAAe,GAAmB,EAAE,CAAC;QAErC,SAAI,GAAS,IAAI,WAAI,CAAC,IAAI,CAAC,CAAC;QAC5B,gBAAW,GAAmD,EAAE,CAAC;QACjE,WAAM,GAAuB,IAAI,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC;QAGtD,kBAAa,GAAmB,EAAE,CAAC;QAGpC,WAAM,GAAa,EAAE,CAAC;IAM7B,CAAC;IAEM,QAAQ;QACb,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,gBAAgB,CAAC,SAAS,CAAC,CAAC,EAAU;YACjE,EAAE,CAAC,CAAC,EAAE,KAAK,IAAI,CAAC,mBAAmB,CAAC,EAAE,CAAC,CAAC,CAAC;gBACvC,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;YAEpB,CAAC;QACH,CAAC,CAAC,CAAC,CAAC;QACJ,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC,QAAmB;YACxE,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;YAEzB,IAAI,CAAC,MAAM,CAAC,iBAAiB,CAAC,MAAM,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;QAC3D,CAAC,CAAC,CAAC,CAAC;QACJ,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,QAAQ,IAAI,wCAAkB,CAAC,MAAM,CAAC,QAAQ,EAAE,uCAAkB,CAAC,eAAe,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,IAAI,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACpL,CAAC;IAEM,eAAe;QACpB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,kBAAkB,CAAC;YACtC,IAAI,EAAE,IAAI,CAAC,aAAa,CAAC,aAAa;YACtC,KAAK,EAAE,IAAI,CAAC,aAAa,CAAC,aAAa,CAAC,aAAa,CAAC,WAAW;YACjE,MAAM,EAAE,IAAI,CAAC,aAAa,CAAC,aAAa,CAAC,aAAa,CAAC,YAAY;YACnE,WAAW,EAAE,IAAI;YACjB,UAAU,EAAE,IAAI;YAChB,SAAS,EAAE,IAAI;SAChB,CAAkB,CAAC;IACtB,CAAC;IAEM,WAAW;QAChB,EAAE,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC;YAAC,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC;QACrC,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,CAAC,WAAW,EAAE,CAAC,CAAC;QACjD,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC;YAAC,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC;QACpC,IAAI,CAAC,SAAS,EAAE,CAAC;QAEjB,kBAAkB;QAClB,uBAAuB;QACvB,0EAA0E;QAC1E,IAAI,CAAC,oBAAoB,EAAE,CAAC;QAC5B,GAAG;QAEH,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC;YAAC,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC;QACvC,EAAE,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;YAClB,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC;YACxB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QACvB,CAAC;IACH,CAAC;IAGD,QAAQ,CAAC,KAAK;QACZ,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC;YAAC,MAAM,CAAC;QAC3B,MAAM,EAAE,GAAG,IAAI,CAAC,aAAa,CAAC,aAAa,CAAC,aAAa,CAAC;QAC1D,MAAM,CAAC,GAAG,EAAE,CAAC,WAAW,CAAC;QACzB,MAAM,CAAC,GAAG,EAAE,CAAC,YAAY,CAAC;QAC1B,MAAM,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;QAC/B,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG,CAAC,GAAG,IAAI,CAAC;QACrC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,GAAG,IAAI,CAAC;QACtC,QAAQ,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IACxB,CAAC;IAEM,WAAW;QAChB,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,mBAAmB,CAAC,EAAE,CAAC,CAAC;IACjF,CAAC;IAEM,eAAe;QACpB,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,eAAe,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,mBAAmB,CAAC,EAAE,CAAC,CAAC;IACtF,CAAC;IAEM,UAAU;QACf,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,YAAY,4BAAY,CAAmB,CAAC,CAAC;QACpG,IAAI,CAAC,SAAS,EAAE,CAAC;IACnB,CAAC;IAEM,WAAW;QAChB,IAAI,CAAC,UAAU,CAAC,IAAI,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC;QACnC,4BAAY,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC,IAAI,CAAC,MAAM,IAAI,CAAC,UAAU,EAAE,CAAC,CAAC;IAChF,CAAC;IAEM,SAAS;QACd,MAAM,UAAU,GAAG,IAAI,CAAC;QACxB,MAAM,OAAO,GAAG,CAAC,GAAG,CAAC;QACrB,MAAM,CAAC,GAAG;YACR,MAAM,MAAM,GAAmB,IAAI,CAAC,IAAI,CAAC,cAAc,EAAE,CAAC;YAC1D,MAAM,UAAU,GAAG,EAAC,CAAC,EAAE,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE,MAAM,CAAC,CAAC,EAAE,KAAK,EAAE,MAAM,CAAC,KAAK,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAC,CAAC;YAC1F,MAAM,YAAY,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,GAAG,UAAU,CAAC,KAAK,EAAE,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,UAAU,CAAC,MAAM,CAAC,GAAG,UAAU,CAAC;YAC7H,MAAM,OAAO,GAAG,IAAI,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,KAAK,GAAG,CAAC,EAAE,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;YAC1F,MAAM,UAAU,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC;YAC/C,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC,EAAE,UAAU,CAAC,CAAC,CAAC,CAAC;YACrD,IAAI,CAAC,IAAI,CAAC,YAAY,GAAG,YAAY,CAAC;YACtC,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,GAAG,CAAC,GAAG,UAAU,CAAC,CAAC,EAAE,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,GAAG,UAAU,CAAC,CAAC,CAAC,CAAC;YACvG,IAAI,CAAC,UAAU,EAAE,CAAC;QACpB,CAAC,CAAC;QACF,CAAC,EAAE,CAAC;QACJ,CAAC,EAAE,CAAC;QACJ,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC;QAClC,IAAI,CAAC,UAAU,EAAE,CAAC;IACpB,CAAC;IAEM,cAAc;QACnB,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,eAAe,CAAC,CAAC;IACtE,CAAC;IAEM,EAAE,CAAC,MAAmB;QAC3B,MAAM,MAAM,GAAS,IAAI,CAAC,QAAS,CAAC,MAAM,GAAG,IAAI,CAAC,EAAE,CAAC;QACrD,EAAE,CAAC,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC;YAAC,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;IACtE,CAAC;IAEM,YAAY;QACjB,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC;aACjC,KAAK,CAAC,CAAC;YACN,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC,EAAE,gCAAgC,CAAC,CAAC;YAC7D,MAAM,CAAC,uBAAU,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC;QAC9B,CAAC,CAAC;aACD,SAAS,CAAC,CAAC,MAAe,KAAK,MAAM,IAAI,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,0BAA0B,CAAC,CAAC,CAAC;IACrG,CAAC;IAEO,QAAQ,CAAC,YAAoB;QACnC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC;YAAC,MAAM,CAAC;QAC3B,IAAI,CAAC,SAAS,EAAE,CAAC;QACjB,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,QAAQ,EAAE,YAAY,CAAC,CAAC;QAC7C,IAAI,CAAC,WAAW,EAAE,CAAC;IACrB,CAAC;IAEO,SAAS;QACf,MAAM,OAAO,GAAG,CAAC,SAAyB;YACxC,EAAE,CAAC,CAAC,CAAC,SAAS,CAAC;gBAAC,MAAM,CAAC;YACvB,EAAE,CAAC,CAAC,UAAU,IAAI,SAAS,CAAC;gBAAC,SAAS,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC;oBACvD,EAAE,CAAC,CAAC,CAAC,YAAY,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;wBAChC,OAAO,CAAC,CAAC,CAAC,CAAC;oBACb,CAAC;oBACD,IAAI,CAAC,EAAE,CAAC,CAAC,SAAS,IAAI,CAAC,CAAC,CAAC,CAAC;wBAClB,CAAE,CAAC,OAAO,EAAE,CAAC;oBACrB,CAAC;gBACH,CAAC,CAAC,CAAC;QACL,CAAC,CAAC;QACF,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QACpB,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC;YAAC,IAAI,CAAC,IAAI,CAAC,cAAc,EAAE,CAAC;QAC1C,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC;YAAC,IAAI,CAAC,OAAO,CAAC,cAAc,EAAE,CAAC;QAChD,EAAE,CAAC,CAAC,IAAI,CAAC,mBAAmB,CAAC;YAAC,IAAI,CAAC,mBAAmB,CAAC,cAAc,EAAE,CAAC;IAC1E,CAAC;IAEO,oBAAoB;QAC1B,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC;YAAC,MAAM,CAAC;QAC3D,MAAM,OAAO,GAAS,IAAI,CAAC,QAAQ,CAAC,aAAc,CAAC,cAAc,CAAC;QAClE,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,OAAO,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;YACxC,EAAE,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;gBACpD,OAAO,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC,OAAO,EAAE,CAAC;gBAC1D,OAAO,OAAO,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC;YACzD,CAAC;QACH,CAAC;QACD,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,WAAW,GAAG,EAAE,CAAC;QAC7C,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,SAAS,EAAE,CAAC;QAClC,IAAI,CAAC,QAAQ,CAAC,aAAc,CAAC,cAAc,GAAG,EAAE,CAAC;IACzD,CAAC;IAEO,IAAI,CAAC,QAAmB;QAC9B,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;YACnB,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,sBAAsB,CAAC,CAAC;YAChD,MAAM,CAAC;QACT,CAAC;QACD,MAAM,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;QAC3B,MAAM,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;QAC/B,MAAM,CAAC,IAAI,EAAE,CAAC;QACd,IAAI,CAAC,cAAc,EAAE,CAAC;QACtB,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC;QAC1B,EAAE,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC;YAAC,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC;QACrC,MAAM,KAAK,GAAG,IAAI,CAAC,KAAK,GAAG,IAAI,eAAO,CAAC,QAAQ,CAAC,OAAO,CAAC,WAAW,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;QACzF,IAAI,CAAC,UAAU,CAAC,QAAQ,EAAE,KAAK,CAAC,CAAC;QACjC,MAAM,CAAC,GAAG,CAAC,CAAC,SAAS;YACnB,MAAM,UAAU,GAAG,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,aAAa,EAAE,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;YAC1E,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC,EAAE,UAAU,CAAC,CAAC,CAAC,CAAC;YACrD,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAC9B,CAAC,CAAC,CAAC;QACH,MAAM,CAAC,KAAK,EAAE,CAAC;IACjB,CAAC;IAEO,UAAU,CAAC,QAAmB;QACpC,MAAM,SAAS,GAAG,MAAM,IAAI,CAAC,UAAU,CAAC,QAAQ,EAAE,QAAQ,CAAC,UAAU,EAAE,CAAC,WAAW,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1F,MAAM,eAAe,GAAG,sBAAS,CAAC,SAAS,CAAC,CAAC;QAC7C,IAAI,CAAC,MAAM,GAAG,eAAe,CAAC,MAAM,CAAC;QACrC,EAAE,CAAC,CAAC,CAAC,eAAe,CAAC,cAAc,CAAC;YAAC,SAAS,EAAE,CAAC;IACnD,CAAC;IAEO,SAAS,CAAC,CAAmB;QACnC,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,CAAC,GAAG,CAAC,CAAC;YAClE,MAAM,SAAS,GAAG,CAAC,CAAC,iBAAiB,EAAE,CAAC;YACxC,2DAA2D;YAC3D,MAAM,CAAC;gBACL,MAAM,EAAE,CAAC;gBACT,MAAM,EAAE,IAAI,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC;aACrF,CAAC;QACJ,CAAC,CAAC,CAAC;IACL,CAAC;IAEO,UAAU,CAAC,KAAa,IAAI;QAClC,MAAM,CAAC,GAAW,EAAE,IAAI,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC;QAC5C,IAAI,CAAC,mBAAmB,CAAC,SAAS,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACtF,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACvE,IAAI,CAAC,aAAa,CAAC,SAAS,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;IACpE,CAAC;IAEO,gBAAgB,CAAC,GAAc,EAAE,EAAQ,EAAE,EAAQ;QACzD,EAAE,CAAC,CAAC,EAAE,CAAC,WAAW,KAAK,EAAE,CAAC,WAAW,CAAC;YAAC,MAAM,CAAC;QAC9C,EAAE,CAAC,CAAC,EAAE,CAAC,OAAO,KAAK,EAAE,CAAC,OAAO,CAAC;YAAC,MAAM,CAAC;QACtC,IAAI,UAAU,GAAG,EAAE,CAAC,OAAO,GAAG,EAAE,GAAG,EAAE,CAAC;QACtC,IAAI,UAAU,GAAG,EAAE,CAAC,OAAO,GAAG,EAAE,GAAG,EAAE,CAAC;QACtC,EAAE,CAAC,CAAC,UAAU,CAAC,WAAW,YAAY,qBAAS,CAAC,CAAC,CAAC;YAChD,MAAM,SAAS,GAAG,UAAU,CAAC,WAAwB,CAAC;YACtD,MAAM,KAAK,GAAG,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,EAAC,IAAI,EAAE,UAAU,EAAC,CAAS,CAAC;YAClE,IAAI,CAAC,WAAW,CAAC,gBAAgB,CAAC,GAAG,EAAE,KAAK,CAAC,EAAE,EAAE,UAAU,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC;QAC9E,CAAC;QACD,IAAI,CAAC,WAAW,CAAC,gBAAgB,CAAC,GAAG,EAAE,UAAU,CAAC,WAAW,CAAC,EAAE,EAAE,UAAU,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC;IAC/F,CAAC;IAEO,iBAAiB,CAAC,IAA2B;QACnD,MAAM,UAAU,GAAG,IAAI,uBAAU,CAAC,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;QACpE,UAAU,CAAC,EAAE,GAAG,IAAI,CAAC,YAAY,CAAC;QAClC,UAAU,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QAClC,UAAU,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QAClC,UAAU,CAAC,KAAK,EAAE,CAAC;QACnB,MAAM,CAAC,UAAU,CAAC;IACpB,CAAC;IAEO,UAAU,CAAC,QAAmB,EAAE,UAAkB;QACxD,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QACrC,MAAM,QAAQ,GAAG,IAAI,CAAC,mBAAmB,GAAG,QAAQ,CAAC,UAAU,EAAE,CAAC,SAAS,CAAC,UAAU,CAAe,CAAC;QAEtG,IAAI,MAAM,GAAG,EAAE,CAAC;QACf,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAwB,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;QAChG,MAAM,KAAK,GAAG,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,mBAAmB,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,CAAC;QACvE,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC,KAAK,GAAG,CAAC,EAAE,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;QAE1D,IAAI,CAAC,IAAI,GAAG,IAAI,WAAI,EAAE,CAAC;QACvB,IAAI,CAAC,UAAU,EAAE,CAAC;QAClB,IAAI,CAAC,iBAAiB,GAAG,IAAI,sCAAiB,EAAE,CAAC;QACjD,MAAM,KAAK,GAAqB,IAAI,GAAG,EAAE,CAAC;QAC1C,MAAM,WAAW,GAA6B,IAAI,GAAG,EAAE,CAAC;QACxD,MAAM,UAAU,GAAoB,QAAQ,CAAC,gBAAgB,EAAqB,CAAC,MAAM,CAAC,QAAQ,CAAC,qBAAqB,EAAoB,CAAC,CAAC;QAC9I,UAAU,CAAC,OAAO,CAAC,CAAC,SAAuB;YACzC,MAAM,CAAC,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC,CAAC;gBAC3B,KAAK,qBAAS,CAAC,SAAS;oBACtB,MAAM,SAAS,GAAG,SAAuB,CAAC;oBAC1C,MAAM,KAAK,GAAG,IAAI,CAAC,wBAAwB,CAAC,SAAS,CAAC,CAAC;oBACvD,KAAK,CAAC,GAAG,CAAC,SAAS,CAAC,EAAE,EAAE,KAAK,CAAC,CAAC;oBAC/B,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;oBAC1B,SAAS,CAAC,mBAAmB,EAAE,CAAC,MAAM,CAAC,SAAS,CAAC,oBAAoB,EAAE,CAAC,CAAC,OAAO,CAAC,CAAC;wBAChF,EAAE,CAAC,CAAC,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;4BAAC,WAAW,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;oBACvD,CAAC,CAAC,CAAC;oBACH,KAAK,CAAC;gBACR,KAAK,qBAAS,CAAC,SAAS;oBACtB,MAAM,UAAU,GAAG,SAAuB,CAAC;oBAC3C,MAAM,SAAS,GAAG,IAAI,qBAAS,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;oBACjD,SAAS,CAAC,EAAE,GAAG,UAAU,CAAC,EAAE,CAAC;oBAC7B,SAAS,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;oBACjC,SAAS,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;oBACjC,UAAU,CAAC,WAAW,EAAE,CAAC,OAAO,CAAC,OAAO;wBACtC,MAAM,KAAK,GAAG,IAAI,WAAI,CAAC,OAAO,CAAC,EAAE,EAAE,OAAO,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;wBAC5D,SAAS,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;wBACzB,KAAK,CAAC,GAAG,CAAC,OAAO,CAAC,EAAE,EAAE,KAAK,CAAC,CAAC;oBAC/B,CAAC,CAAC,CAAC;oBACH,KAAK,CAAC,GAAG,CAAC,UAAU,CAAC,EAAE,EAAE,SAAS,CAAC,CAAC;oBACpC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;oBAC9B,UAAU,CAAC,mBAAmB,EAAE,CAAC,MAAM,CAAC,CAAC,CAAC,OAAO,CAAC,UAAU,CAAC,WAAW,EAAE,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,oBAAoB,EAAE,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC;wBACvH,EAAE,CAAC,CAAC,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;4BAAC,WAAW,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;oBACvD,CAAC,CAAC,CAAC;oBACH,KAAK,CAAC;gBACR;oBACE,MAAM,IAAI,KAAK,CAAC,kBAAkB,SAAS,CAAC,QAAQ,EAAE,CAAC,CAAC;YAC5D,CAAC;QACH,CAAC,CAAC,CAAC;QAEH,WAAW,CAAC,OAAO,CAAC,CAAC,WAAW,EAAE,EAAE;YAClC,MAAM,MAAM,GAAwB,KAAK,CAAC,GAAG,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;YACpE,MAAM,MAAM,GAAiB,KAAK,CAAC,GAAG,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;YAC7D,MAAM,UAAU,GAAG,IAAI,CAAC,iBAAiB,CAAC;gBACxC,UAAU,EAAE,MAAM,CAAC,cAAc,EAAE,CAAC,CAAC,CAAC;gBACtC,UAAU,EAAE,MAAM,CAAC,YAAY,EAAE;gBACjC,YAAY,EAAE,EAAE;aACjB,CAAC,CAAC;YACH,IAAI,CAAC,mBAAmB,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC;QAChD,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,mBAAmB,CAAC,QAAQ,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;QAC1D,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC;YAAC,IAAI,CAAC,UAAU,EAAE,CAAC;IACvD,CAAC;IAEO,wBAAwB,CAAC,SAAqB;QACpD,MAAM,KAAK,GAAG,IAAI,0BAAW,EAAE,CAAC;QAChC,KAAK,CAAC,SAAS,GAAG,SAAS,CAAC,IAAI,CAAC;QACjC,KAAK,CAAC,SAAS,GAAG,SAAS,CAAC,IAAI,CAAC;QACjC,KAAK,CAAC,UAAU,GAAG,SAAS,CAAC,UAAU,IAAI,CAAC,CAAC;QAC7C,KAAK,CAAC,EAAE,GAAG,SAAS,CAAC,EAAE,CAAC;QACxB,KAAK,CAAC,KAAK,GAAG,SAAS,CAAC,QAAQ,EAAE,CAAC,KAAK,CAAC;QACzC,KAAK,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QAC7B,KAAK,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QAC7B,KAAK,CAAC,KAAK,EAAE,CAAC;QACd,MAAM,CAAC,KAAK,CAAC;IACf,CAAC;IAEO,YAAY,CAAC,eAA+B;QAClD,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC;YACd,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,cAAc,IAAI,cAAc,CAAC,EAAE,CAAC,CAAC,CAAC;QAClF,CAAC,CAAC,CAAC;IACL,CAAC;IAEO,gBAAgB,CAAC,GAAa;QACpC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC;YACd,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QACxB,CAAC,CAAC,CAAC;IACL,CAAC;IAEO,mBAAmB,CAAC,QAAoB;QAC9C,EAAE,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC;YAAC,IAAI,CAAC,kBAAkB,EAAE,CAAC;QACnD,IAAI,CAAC,cAAc,GAAG,IAAI,gCAAc,CAAC,QAAQ,CAAC,KAAK,EAAE,CAAC,CAAC;QAC3D,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;IAC7C,CAAC;IAEO,kBAAkB;QACxB,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;QAC9C,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;IAC7B,CAAC;IAEO,oBAAoB,CAAC,QAAoB;QAC/C,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC;YAAC,MAAM,CAAC;QACjC,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;IACvC,CAAC;IAEO,iBAAiB,CAAC,IAAoB,EAAE,SAA4C;QAC1F,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,SAAS,CAAC,KAAK;YAC9C,wBAAU,CAAC,kBAAkB,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,GAAG,wBAAU,CAAC,mBAAmB,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,CAAmB,CAAC;IACxH,CAAC;IAEO,SAAS;QACf,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,YAAY,4BAAY,CAAmB,EAAE,IAAI,CAAC,CAAC;IAC7G,CAAC;IAEO,WAAW;QACjB,IAAI,CAAC,kBAAkB,CAAC,EAAE,EAAE,KAAK,CAAC,CAAC;QACnC,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,gBAAgB,EAAE,CAAC,CAAC;IACjD,CAAC;IAEO,kBAAkB,CAAC,QAAuC,EAAE,MAAM,GAAG,IAAI,EAAE,MAAM,GAAG,KAAK;QAC/F,MAAM,OAAO,GAAG,QAAQ,YAAY,KAAK,GAAG,QAAQ,GAAG,CAAC,QAAQ,CAAC,CAAC;QAClE,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;YACX,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;QAC9D,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC,CAAC;YACxD,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,MAAM,GAAG,OAAO,GAAG,EAAE,CAAC;QACpD,CAAC;QACD,OAAO,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC,CAAC;QAC5C,EAAE,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,MAAM,GAAG,CAAC,CAAC;YAAC,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;QAC7E,IAAI,CAAC,CAAC;YACJ,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,gBAAgB,EAAE,CAAC,CAAC;QACjD,CAAC;IACH,CAAC;IAEO,gBAAgB;QACtB,MAAM,UAAU,GAAG,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAE,CAAC,WAAW,EAAE,CAAC,EAAE,CAAC;QAC/D,EAAE,CAAC,CAAC,IAAI,CAAC,mBAAmB,CAAC,EAAE,KAAK,UAAU,CAAC;YAAC,MAAM,CAAC,CAAC,IAAI,CAAC,mBAAmB,CAAC,EAAE,CAAC,CAAC;QACrF,IAAI;YAAC,MAAM,CAAC,EAAE,CAAC;IACjB,CAAC;IAEO,QAAQ;QACd,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;IACxB,CAAC;IAEO,UAAU,CAAC,CAAoC;QACrD,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,UAAU;YACjC,EAAE,CAAC,CAAC,CAAC,UAAU,CAAC,MAAM,CAAC,MAAM,CAAC;gBAAC,MAAM,CAAC,CAAC,8CAA8C;YACrF,MAAM,MAAM,GAAG,UAAU,CAAC,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC,IAAI,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,UAAU,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;YAC9I,UAAU,CAAC,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;QACxC,CAAC,CAAC,CAAC;IACL,CAAC;IAEO,UAAU,CAAC,QAAmB,EAAE,KAAc;QACpD,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,SAAS,CAAC,IAAI;YACjD,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;YAC7B,IAAI,CAAC,UAAU,EAAE,CAAC;QACpB,CAAC,CAAC,CAAC,CAAC;QACJ,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC;YACnD,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;YAClC,IAAI,CAAC,UAAU,EAAE,CAAC;QACpB,CAAC,CAAC,CAAC,CAAC;QACJ,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC;YACjD,MAAM,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;gBAClB,KAAK,CAAC;oBACJ,EAAE,CAAC,CAAC,IAAI,CAAC,mBAAmB,IAAI,IAAI,CAAC,mBAAmB,CAAC,SAAS,EAAE,CAAC;wBAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,mBAAmB,CAAC,SAAS,EAAE,CAAC,EAAE,CAAC,CAAC;oBAC7H,KAAK,CAAC;gBACR,KAAK,EAAE;oBACL,IAAI,CAAC,cAAc,EAAE,CAAC;oBACtB,KAAK,CAAC;gBACR,KAAK,EAAE;oBACL,EAAE,CAAC,CAAC,KAAK,CAAC,aAAa,EAAE,CAAC,CAAC,CAAC;wBAC1B,IAAI,CAAC,SAAS,EAAE,CAAC;wBACjB,CAAC,CAAC,cAAc,EAAE,CAAC;oBACrB,CAAC;oBACD,KAAK,CAAC;gBACR,KAAK,EAAE;oBACL,EAAE,CAAC,CAAC,KAAK,CAAC,aAAa,EAAE,CAAC,CAAC,CAAC;wBAC1B,EAAE,CAAC,CAAC,KAAK,CAAC,cAAc,EAAE,CAAC,CAAC,CAAC;4BAC3B,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC;wBAChB,CAAC;wBAAC,IAAI,CAAC,CAAC;4BACN,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC;wBAChB,CAAC;oBACH,CAAC;oBACD,KAAK,CAAC;YACV,CAAC;QACH,CAAC,CAAC,CAAC,CAAC;QACJ,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC;YACnD,EAAE,CAAC,CAAC,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,CAAC,CAAC;gBAC9B,MAAM,SAAS,GAAG,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;gBACvF,EAAE,CAAC,CAAC,SAAS,YAAY,WAAI,IAAI,SAAS,CAAC,OAAO,KAAK,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC,CAAC;oBACjF,8BAA8B;gBAChC,CAAC;gBACD,MAAM,QAAQ,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;gBAChD,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;YACnD,CAAC;YACD,EAAE,CAAC,CAAC,KAAK,CAAC,eAAe,EAAE,CAAC,CAAC,CAAC;gBAC5B,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;gBACnB,IAAI,CAAC,oBAAoB,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YAC3C,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,IAAI,CAAC,QAAQ,EAAE,CAAC;gBAChB,IAAI,CAAC,kBAAkB,EAAE,CAAC;YAC5B,CAAC;QACH,CAAC,CAAC,CAAC,CAAC;QACJ,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,KAAK,CAAC,KAAK,CAAC,gBAAgB,CAAC,CAAC,SAAS,CAAC;YAC/E,IAAI,CAAC,kBAAkB,EAAE,CAAC;QAC5B,CAAC,CAAC,CAAC,CAAC;QACJ,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC;YACjD,IAAI,CAAC,QAAQ,EAAE,CAAC;YAChB,EAAE,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC;gBACxB,MAAM,IAAI,GAAG,IAAI,CAAC,cAAc,CAAC,OAAO,EAAE,CAAC;gBAC3C,EAAE,CAAC,CAAC,IAAI,CAAC;oBAAC,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,iBAAiB,CAAC,IAAI,EAAE,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,EAAE,IAAI,CAAC,CAAC;gBACrG,IAAI,CAAC,kBAAkB,EAAE,CAAC;YAC5B,CAAC;QACH,CAAC,CAAC,CAAC,CAAC;QACJ,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC;YACnD,MAAM,SAAS,GAAG,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;YACvF,EAAE,CAAC,CAAC,KAAK,CAAC,cAAc,EAAE,IAAI,SAAS,YAAY,0BAAW,IAAI,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAE,CAAC,YAAY,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC,eAAe,EAAE,CAAC;gBAAC,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC;YACvK,EAAE,CAAC,CAAC,IAAI,CAAC,iBAAiB,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC;gBACtC,MAAM,IAAI,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC;gBACjD,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;oBACT,EAAE,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,OAAO,KAAK,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,YAAY,CAAC,WAAW,KAAK,IAAI,CAAC,WAAW,CAAC;wBAAC,IAAI,CAAC,gBAAgB,CAAC,QAAQ,EAAE,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,CAAC;gBACjK,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,IAAI,CAAC,WAAW,EAAE,CAAC,SAAS,CAAC,SAAS,IAAI,IAAI,CAAC,iBAAiB,CAAC,SAAS,CAAC,EAAE,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC,CAAC;gBACnI,CAAC;gBACD,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;gBACzB,IAAI,CAAC,iBAAiB,CAAC,IAAI,EAAE,CAAC;gBAC9B,MAAM,CAAC;YACT,CAAC;YACD,EAAE,CAAC,CAAC,SAAS,YAAY,WAAI,CAAC,CAAC,CAAC;gBAC9B,IAAI,CAAC,WAAW,EAAE,CAAC;gBACnB,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,YAAY,KAAK,SAAS,CAAC,CAAC,CAAC;oBAC1D,IAAI,CAAC,YAAY,GAAG,SAAS,CAAC;oBAC9B,IAAI,CAAC,iBAAiB,CAAC,OAAO,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;oBAClD,MAAM,CAAC;gBACT,CAAC;gBACD,IAAI,CAAC,gBAAgB,CAAC,QAAQ,EAAE,IAAI,CAAC,YAAY,EAAE,SAAiB,CAAC,CAAC;gBACtE,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;gBACzB,IAAI,CAAC,iBAAiB,CAAC,IAAI,EAAE,CAAC;YAChC,CAAC;YAAC,IAAI,CAAC,EAAE,CAAC,CAAC,SAAS,YAAY,4BAAY,CAAC,CAAC,CAAC;gBAC7C,EAAE,CAAC,CAAC,CAAC,SAAS,CAAC,QAAQ,CAAC;oBAAC,IAAI,CAAC,kBAAkB,CAAC,SAAS,EAAE,IAAI,EAAE,KAAK,CAAC,aAAa,EAAE,CAAC,CAAC;gBACzF,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;YACpB,CAAC;YAAC,IAAI,CAAC,EAAE,CAAC,CAAC,SAAS,YAAY,4BAAY,CAAC,CAAC,CAAC;gBAC7C,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAgB,SAAU,CAAC,YAAY,CAAC,CAAC,CAAC;YAC1F,CAAC;YAAC,IAAI,CAAC,EAAE,CAAC,CAAC,SAAS,KAAK,IAAI,CAAC,CAAC,CAAC;gBAC9B,IAAI,CAAC,WAAW,EAAE,CAAC;gBACnB,EAAE,CAAC,CAAC,IAAI,CAAC,YAAY,KAAK,IAAI,CAAC,CAAC,CAAC;oBAC/B,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;oBACzB,IAAI,CAAC,iBAAiB,CAAC,IAAI,EAAE,CAAC;gBAChC,CAAC;gBACD,IAAI,CAAC,mBAAmB,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YAC1C,CAAC;QACH,CAAC,CAAC,CAAC,CAAC;QACJ,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,KAAK,CAAC,kBAAkB,CAAC,SAAS,CAAC,CAAC;YAC1D,MAAM,SAAS,GAAG,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;YACvF,EAAE,CAAC,CAAC,SAAS,YAAY,0BAAW,IAAI,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAE,CAAC,YAAY,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC,eAAe,EAAE,CAAC;gBAAC,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC;YAC7I,EAAE,CAAC,CAAC,CAAC,SAAS,IAAI,KAAK,CAAC,aAAa,EAAE,CAAC,CAAC,CAAC;gBACxC,EAAE,CAAC,CAAC,KAAK,CAAC,cAAc,EAAE,CAAC,CAAC,CAAC;oBAC3B,IAAI,CAAC,eAAe,EAAE,CAAC,SAAS,CAAC,SAAS,IAAI,IAAI,CAAC,iBAAiB,CAAC,SAAS,CAAC,EAAE,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;gBACrG,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,IAAI,CAAC,WAAW,EAAE,CAAC,SAAS,CAAC,SAAS,IAAI,IAAI,CAAC,iBAAiB,CAAC,SAAS,CAAC,EAAE,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;gBACjG,CAAC;YACH,CAAC;QACH,CAAC,CAAC,CAAC,CAAC;IACN,CAAC;IAEO,UAAU,CAAC,QAAoB;QACrC,MAAM,iBAAiB,GAAG,GAAG,CAAC;QAC9B,MAAM,KAAK,GAAG,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,YAAY,4BAAY,GAAG,CAAC,CAAC,WAAW,EAAE,GAAG,EAAE,CAAC;aACxG,GAAG,CAAC,CAAC;YACJ,MAAM,OAAO,GAAG,CAAC,CAAC,iBAAiB,EAAE,CAAC;YACtC,MAAM,CAAC;gBACL,IAAI,EAAE,CAAC;gBACP,QAAQ,EAAE,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;aAC/F,CAAC;QACJ,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,QAAQ,GAAG,iBAAiB,IAAI,CAAC,CAAC,IAAI,KAAK,IAAI,CAAC,YAAY,IAAI,CAAC,CAAC,IAAI,CAAC,OAAO,KAAK,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,EAAE,UAAU,CAAC,CAAC;QAC9I,MAAM,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,GAAG,EAAC,QAAQ,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,iBAAiB,EAAE,EAAE,IAAI,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,EAAC,GAAG;YAC7F,QAAQ,EAAE,QAAQ;YAClB,IAAI,EAAE,IAAI;SACX,CAAC;IACJ,CAAC;IAEO,cAAc;QACpB,IAAI,CAAC,IAAI,GAAG,IAAI,IAAI,CAAC,SAAS,EAAE,CAAC;QACjC,IAAI,CAAC,mBAAmB,GAAG,IAAI,IAAI,CAAC,SAAS,EAAE,CAAC;QAChD,IAAI,CAAC,aAAa,GAAG,IAAI,IAAI,CAAC,SAAS,EAAE,CAAC;QAC1C,IAAI,CAAC,OAAO,GAAG,IAAI,IAAI,CAAC,SAAS,EAAE,CAAC;QACpC,IAAI,CAAC,KAAK,GAAG,IAAI,IAAI,CAAC,SAAS,EAAE,CAAC;QAClC,IAAI,CAAC,iBAAiB,GAAG,IAAI,sCAAiB,EAAE,CAAC;QACjD,IAAI,CAAC,IAAI,GAAG,IAAI,WAAI,EAAE,CAAC;QACvB,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC;QACtD,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACvC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;QACxC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;IACpC,CAAC;IAEO,eAAe,CAAC,CAAa;QACnC,EAAE,CAAC,CAAC,CAAC,CAAC,MAAmB,KAAK,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;YAC5C,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,iEAAiE,EAAE,QAAQ,CAAC,CAAC;YACrG,MAAM,CAAC;QACT,CAAC;QACD,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;YACZ,IAAI,CAAC,SAAS,EAAE,CAAC;YACjB,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,mBAAmB,CAAC,EAAE,CAAC,CAAC;YAC5D,MAAM,CAAC;QACT,CAAC;QACD,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,EAAE;YACrB,MAAM,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAE,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC;YACrD,MAAM,CAAC,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,CAAC;gBACrB,KAAK,qBAAS,CAAC,SAAS;oBACtB,MAAM,KAAK,GAAG,IAAI,CAAC,wBAAwB,CAAC,GAAgB,CAAC,CAAC;oBAC9D,KAAK,CAAC,WAAW,CAAC,IAAI,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,GAAG,CAAC,GAAG,KAAK,CAAC,KAAK,EAAE,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,GAAG,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC;oBAClH,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;oBAC1B,IAAI,CAAC,kBAAkB,CAAC,KAAK,CAAC,CAAC;oBAC/B,KAAK,CAAC;gBACR,KAAK,qBAAS,CAAC,SAAS;oBACtB,MAAM,SAAS,GAAG,IAAI,CAAC,6BAA6B,CAAC,GAAiB,CAAC,CAAC;oBACxE,SAAS,CAAC,WAAW,CAAC,IAAI,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,GAAG,CAAC,GAAG,SAAS,CAAC,KAAK,EAAE,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,GAAG,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC;oBAC9H,IAAI,CAAC,kBAAkB,CAAC,SAAS,CAAC,CAAC;oBACnC,KAAK,CAAC;gBACR,KAAK,qBAAS,CAAC,UAAU;oBACvB,MAAM,WAAW,GAAG,GAAkB,CAAC;oBACvC,IAAI,UAAgB,CAAC;oBACrB,MAAM,UAAU,GAAG,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAE,CAAC,SAAS,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;oBAC9E,EAAE,CAAC,CAAC,UAAU,CAAC,QAAQ,KAAK,qBAAS,CAAC,SAAS,CAAC,CAAC,CAAC;wBAChD,UAAU,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,IAAI,CAAiB,CAAC;6BACxD,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE,KAAK,WAAW,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,cAAc,EAAE,CAAC,CAAC,CAAC,CAAC;oBACvE,CAAC;oBAAC,IAAI,CAAC,CAAC;wBACN,MAAM,OAAO,GAAG,UAAsB,CAAC;wBACvC,MAAM,SAAS,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,IAAI,CAAiB,CAAC;6BAC7D,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE,KAAK,OAAO,CAAC,YAAY,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAc,CAAC;wBACnE,UAAU,GAAG,SAAS,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE,KAAK,WAAW,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;oBAClF,CAAC;oBACD,MAAM,UAAU,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,IAAI,CAAiB,CAAC;yBAC9D,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE,KAAK,WAAW,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,YAAY,EAAE,CAAC;oBAChE,IAAI,CAAC,mBAAmB,CAAC,QAAQ,CAAC,IAAI,CAAC,iBAAiB,CAAC;wBACvD,UAAU,EAAE,UAAU;wBACtB,UAAU,EAAE,UAAU;wBACtB,YAAY,EAAE,WAAW,CAAC,EAAE;qBAC7B,CAAC,CAAC,CAAC;oBACJ,KAAK,CAAC;YACV,CAAC;QACH,CAAC,CAAC,CAAC;QAEH,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,EAAE;YACtB,EAAE,CAAC,CAAC,EAAE,KAAK,IAAI,CAAC;gBAAC,MAAM,CAAC;YACxB,IAAI,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,GAAG,IAAI,GAAG,YAAY,4BAAY,CAAC;iBACnE,GAAG,CAAC,CAAC,IAAI,CAAiB,CAAC;iBAC3B,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;YAC/B,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC;gBAAC,MAAM,CAAC;YAChB,MAAM,UAAU,GAAG,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAE,CAAC,WAAW,EAAE,CAAC,EAAE,CAAC;YAC/D,EAAE,CAAC,CAAC,EAAE,KAAK,UAAU,CAAC;gBAAC,MAAM,CAAC;YAC9B,MAAM,IAAI,GAAG,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAE,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC;YACtD,MAAM,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;gBACtB,KAAK,qBAAS,CAAC,SAAS;oBACtB,MAAM,SAAS,GAAG,IAAiB,CAAC;oBACpC,MAAM,KAAK,GAAG,EAAiB,CAAC;oBAChC,KAAK,CAAC,SAAS,GAAG,SAAS,CAAC,IAAI,CAAC;oBACjC,KAAK,CAAC,SAAS,GAAG,SAAS,CAAC,IAAI,CAAC;oBACjC,KAAK,CAAC,UAAU,GAAG,SAAS,CAAC,UAAU,GAAG,SAAS,CAAC,UAAU,GAAG,CAAC,CAAC;oBACnE,4BAA4B;oBAC5B,KAAK,CAAC,MAAM,EAAE,CAAC;oBACf,KAAK,CAAC;gBACR,KAAK,qBAAS,CAAC,SAAS;oBACtB,IAAI,UAAU,GAAG,IAAkB,CAAC;oBACpC,MAAM,SAAS,GAAG,EAAe,CAAC;oBAClC,SAAS,CAAC,KAAK,GAAG,UAAU,CAAC,IAAI,CAAC;oBAClC,SAAS,CAAC,IAAI,GAAG,UAAU,CAAC,IAAI,CAAC;oBACjC,UAAU,CAAC,WAAW,EAAE,CAAC,OAAO,CAAC,CAAC;wBAChC,EAAE,CAAC,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;4BAC7C,SAAS,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;4BAC1E,MAAM,CAAC;wBACT,CAAC;wBACD,SAAS,CAAC,OAAO,CAAC,IAAI,WAAI,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC,CAAC;oBACvD,CAAC,CAAC,CAAC;oBACH,SAAS,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;wBACvB,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC;4BAAC,SAAS,CAAC,KAAK,CAAC,MAAM,CAAC,SAAS,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;oBACzG,CAAC,CAAC,CAAC;oBACH,SAAS,CAAC,MAAM,EAAE,CAAC;oBACnB,KAAK,CAAC;YACV,CAAC;QACH,CAAC,CAAC,CAAC;QAEH,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,EAAE;YACvB,EAAE,CAAC,CAAC,IAAI,CAAC,mBAAmB,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAa,KAAK,CAAC,CAAC,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC,CAAC;gBAC3E,MAAM,UAAU,GAAG,CAAC,CAAC,IAAI,CAAa,IAAI,CAAC,mBAAmB,CAAC,QAAwB,EAAE,EAAC,EAAE,EAAE,EAAE,EAAC,CAAC,CAAC;gBACnG,UAAU,CAAC,OAAO,EAAE,CAAC;gBACrB,IAAI,CAAC,mBAAmB,CAAC,WAAW,CAAC,UAAU,CAAC,CAAC;YACnD,CAAC;QACH,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAM;YAChC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC;gBAAC,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;QAE5E,CAAC,CAAC,CAAC;IACL,CAAC;IAEO,iBAAiB,CAAC,WAAmB,EAAE,KAAiB,EAAE,cAAsB,IAAI;QAC1F,MAAM,IAAI,GAAG,CAAC,CAAC,IAAI,CAAe,IAAI,CAAC,IAAI,CAAC,QAA0B,EAAE,EAAC,EAAE,EAAE,WAAW,EAAC,CAAC,CAAC;QAC3F,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;YACV,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,sCAAsC,CAAC,CAAC;YAChE,MAAM,CAAC;QACT,CAAC;QACD,MAAM,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;QACpC,EAAE,CAAC,CAAC,IAAI,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;QACxB,IAAI,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC;QACrB,EAAE,CAAC,CAAC,WAAW,CAAC;YAAC,IAAI,CAAC,WAAW,CAAC,gBAAgB,CAAC,IAAI,CAAC,QAAQ,EAAE,WAAW,EAAE,IAAI,CAAC,EAAE,CAAC,CAAC;IAC1F,CAAC;IAEO,6BAA6B,CAAC,UAAsB;QAC1D,MAAM,SAAS,GAAG,IAAI,qBAAS,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;QACjD,SAAS,CAAC,IAAI,GAAG,UAAU,CAAC,IAAI,CAAC;QACjC,SAAS,CAAC,EAAE,GAAG,UAAU,CAAC,EAAE,CAAC;QAC7B,UAAU,CAAC,WAAW,EAAE,CAAC,OAAO,CAAC,CAAC;YAChC,SAAS,CAAC,OAAO,CAAC,IAAI,WAAI,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC,CAAC;QACvD,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;QAC9B,MAAM,CAAC,SAAS,CAAC;IACnB,CAAC;IAEM,UAAU,CAAC,SAAiB;QACjC,EAAE,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,MAAM,GAAG,CAAC,CAAC;YAAC,MAAM,CAAC;QAC5C,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,YAAY,qBAAS,CAAC,CAAC;YAAC,MAAM,CAAC;QACxE,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACjC,MAAM,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;YAEjD,MAAM,SAAS,GAAG,IAAI,CAAC,eAAe,CAAC,CAAC,CAAgB,CAAC;YACzD,IAAI,CAAC,eAAe,CAAC,SAAS,EAAE,KAAK,EAAE,IAAI,CAAC,CAAC;YAC7C,SAAS,CAAC,MAAM,EAAE,CAAC;QACrB,CAAC;IACH,CAAC;IAED,UAAU;QACR,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,YAAY,0BAAW,IAAI,CAAC,CAAC,iBAAiB,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC;YAC7F,CAAE,CAAC,iBAAiB,GAAG,SAAS,CAAC;YACjC,CAAE,CAAC,MAAM,EAAE,CAAC;QAC5B,CAAC,CAAC,CAAC;IACL,CAAC;IAEO,eAAe,CAAC,SAAsB,EAAE,KAAa,EAAE,KAAa;QAC1E,EAAE,CAAC,CAAC,KAAK,KAAK,CAAC,CAAC;YAAC,MAAM,CAAC;QACxB,MAAM,WAAW,GAAG,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAE,CAAC,YAAY,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC,gBAAgB,EAAE,CAAC;QAC7F,MAAM,gBAAgB,GAAG,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAE,CAAC,YAAY,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC,qBAAqB,EAAE,CAAC;QACvG,MAAM,UAAU,GAAoC,WAAY,CAAC,MAAM,CAAkB,gBAAiB,CAAC,CAAC;QAC5G,IAAI,iBAAiB,GAAc,IAAI,SAAS,EAAE,CAAC;QACnD,IAAI,eAAe,GAAc,IAAI,SAAS,EAAE,CAAC;QACjD,MAAM,KAAK,GAAqB,IAAI,GAAG,EAAE,CAAC;QAC1C,MAAM,WAAW,GAA6B,IAAI,GAAG,EAAE,CAAC;QACxD,UAAU,CAAC,OAAO,CAAC,CAAC,SAAuB;YACzC,MAAM,CAAC,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC,CAAC;gBAC3B,KAAK,qBAAS,CAAC,SAAS;oBACtB,MAAM,SAAS,GAAG,SAAuB,CAAC;oBAC1C,MAAM,KAAK,GAAG,IAAI,CAAC,wBAAwB,CAAC,SAAS,CAAC,CAAC;oBACvD,KAAK,CAAC,OAAO,GAAG,KAAK,CAAC;oBACtB,IAAI,CAAC,eAAe,CAAC,KAAK,EAAE,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,IAAI,CAAC,CAAC;oBACrD,KAAK,CAAC,GAAG,CAAC,SAAS,CAAC,EAAE,EAAE,KAAK,CAAC,CAAC;oBAC/B,eAAe,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;oBAChC,SAAS,CAAC,mBAAmB,EAAE,CAAC,MAAM,CAAC,SAAS,CAAC,oBAAoB,EAAE,CAAC,CAAC,OAAO,CAAC,CAAC;wBAChF,EAAE,CAAC,CAAC,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;4BAAC,WAAW,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;oBACvD,CAAC,CAAC,CAAC;oBACH,KAAK,CAAC;gBACR,KAAK,qBAAS,CAAC,SAAS;oBACtB,MAAM,UAAU,GAAG,SAAuB,CAAC;oBAC3C,MAAM,SAAS,GAAG,IAAI,qBAAS,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;oBACjD,SAAS,CAAC,EAAE,GAAG,UAAU,CAAC,EAAE,CAAC;oBAC7B,SAAS,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;oBACjC,SAAS,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;oBACjC,SAAS,CAAC,OAAO,GAAG,KAAK,CAAC;oBAC1B,UAAU,CAAC,WAAW,EAAE,CAAC,OAAO,CAAC,OAAO;wBACtC,MAAM,KAAK,GAAG,IAAI,WAAI,CAAC,OAAO,CAAC,EAAE,EAAE,OAAO,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;wBAC5D,SAAS,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;wBACzB,KAAK,CAAC,GAAG,CAAC,OAAO,CAAC,EAAE,EAAE,KAAK,CAAC,CAAC;oBAC/B,CAAC,CAAC,CAAC;oBACH,KAAK,CAAC,GAAG,CAAC,UAAU,CAAC,EAAE,EAAE,SAAS,CAAC,CAAC;oBACpC,eAAe,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;oBACpC,UAAU,CAAC,mBAAmB,EAAE,CAAC,MAAM,CAAC,CAAC,CAAC,OAAO,CAAC,UAAU,CAAC,WAAW,EAAE,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,oBAAoB,EAAE,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC;wBACvH,EAAE,CAAC,CAAC,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;4BAAC,WAAW,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;oBACvD,CAAC,CAAC,CAAC;oBACH,KAAK,CAAC;gBACR;oBACE,MAAM,IAAI,KAAK,CAAC,kBAAkB,SAAS,CAAC,QAAQ,EAAE,CAAC,CAAC;YAC5D,CAAC;QACH,CAAC,CAAC,CAAC;QAEH,IAAI,qBAAqB,GAAG,IAAI,SAAS,EAAE,CAAC;QAC5C,WAAW,CAAC,OAAO,CAAC,CAAC,WAAW,EAAE,EAAE;YAClC,MAAM,MAAM,GAAwB,KAAK,CAAC,GAAG,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;YACpE,MAAM,MAAM,GAAiB,KAAK,CAAC,GAAG,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;YAC7D,MAAM,UAAU,GAAG,IAAI,CAAC,iBAAiB,CAAC;gBACxC,UAAU,EAAE,MAAM,CAAC,cAAc,EAAE,CAAC,CAAC,CAAC;gBACtC,UAAU,EAAE,MAAM,CAAC,YAAY,EAAE;gBACjC,YAAY,EAAE,EAAE;aACjB,CAAC,CAAC;YACH,qBAAqB,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC;QAC7C,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,eAAe,CAAC,QAA0B,CAAC,CAAC;QAEnE,iBAAiB,CAAC,QAAQ,CAAC,qBAAqB,EAAE,eAAe,CAAC,CAAC;QACnE,iBAAiB,CAAC,KAAK,CAAC,GAAG,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;QAC1C,SAAS,CAAC,iBAAiB,GAAG,iBAAiB,CAAC;IAElD,CAAC;CAEF;AApvBoB;IAAlB,gBAAS,CAAC,MAAM,CAAC;;sDAAe;AACxB;IAAR,YAAK,EAAE;kDAAmB,uBAAU,oBAAV,uBAAU;yDAAM;AAClC;IAAR,YAAK,EAAE;kDAAiB,uBAAU,oBAAV,uBAAU;uDAAY;AACrC;IAAT,aAAM,EAAE;kDAAS,mBAAY,oBAAZ,mBAAY;+CAAiC;AACrD;IAAT,aAAM,EAAE;kDAAiB,mBAAY,oBAAZ,mBAAY;uDAAkC;AA4ExE;IADC,mBAAY,CAAC,eAAe,CAAC;;;;+CAU7B;AA1FU,eAAe;IAL3B,gBAAS,CAAC;QACT,QAAQ,EAAE,YAAY;QACtB,+FAAsC;QACtC,+FAAsC;KACvC,CAAC;yDA8B4B,aAAM,oBAAN,aAAM,sDACA,4BAAY,oBAAZ,4BAAY,sDACjB,iCAAc,oBAAd,iCAAc,sDACV,0BAAW,oBAAX,0BAAW;GAhCjC,eAAe,CAqvB3B;AArvBY,0CAAe;;;;;;;;;;;;ACpD5B;IACE,YAAY,QAAoB;QAC9B,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;IAC3B,CAAC;CAGF;AAND,kDAMC;;;;;;;;;;;ACLD,mGAAuC;AAGvC,sBAA6B,QAAuB,EAAE,SAAoB;IACxE,MAAM,OAAO,GAAG,IAAI,sBAAS,CAAC,QAAQ,CAAC,CAAC;IACxC,MAAM,CAAC,IAAI,OAAO,CAAC,CAAC,OAAO,EAAE,MAAM;QACjC,OAAO,CAAC,MAAM,CAAC,SAAS,EAAE,IAAI,IAAI,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,KAAK,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,IAAI;YACzH,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC,CAAC;YACvC,OAAO,EAAE,CAAC;QACZ,CAAC,EAAE,WAAW,CAAC,CAAC;IAClB,CAAC,CAAC,CAAC;AACL,CAAC;AARD,oCAQC;;;;;;;;;;;ACTD,MAAM,MAAM,GAAG,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC;AACzC,MAAM,MAAM,GAAG;IACb,CAAC,MAAM,EAAE,iBAAiB,CAAC;IAC3B,CAAC,KAAK,EAAE,gBAAgB,CAAC;IACzB,CAAC,KAAK,EAAE,gBAAgB,CAAC;IACzB,CAAC,OAAO,EAAE,kBAAkB,CAAC;IAC7B,CAAC,YAAY,EAAE,uBAAuB,CAAC;IACvC,CAAC,KAAK,EAAE,gBAAgB,CAAC;IACzB,CAAC,SAAS,EAAE,oBAAoB,CAAC;IACjC,CAAC,OAAO,EAAE,kBAAkB,CAAC;IAC7B,CAAC,OAAO,EAAE,kBAAkB,CAAC;IAC7B,CAAC,MAAM,EAAE,iBAAiB,CAAC;IAC3B,CAAC,SAAS,EAAE,oBAAoB,CAAC;CAClC,CAAC;AAEF,mBAA0B,EAAa;IACrC,IAAI,iBAAiB,GAAG,KAAK,CAAC;IAC9B,MAAM,CAAC,OAAO,CAAC,KAAK;QAClB,EAAE,CAAC,CAAC,CAAC,MAAM,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YAChC,MAAM,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;YAC/B,iBAAiB,GAAG,IAAI,CAAC;QAC3B,CAAC;IACH,CAAC,CAAC,CAAC;IACH,EAAE,CAAC,CAAC,iBAAiB,CAAC,CAAC,CAAC;QACtB,MAAM,CAAC,UAAU,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;IAC5B,CAAC;IACD,MAAM,CAAC,IAAI,EAAE,CAAC;IACd,MAAM,CAAC,EAAC,MAAM,EAAE,MAAM,EAAE,cAAc,EAAE,iBAAiB,EAAC,CAAC;AAC7D,CAAC;AAbD,8BAaC;;;;;;;;;;;AC/BD,MAAM,MAAM,GAAG,mRAAmR,CAAC;AAEnS,MAAM,QAAQ,GAAG,2sDAA2sD,CAAC;AAE7tD;;;;;;;;;;;;;;;;;;;;GAoBG;AAEH,gBAAwB,SAAQ,IAAI,CAAC,MAAW;IAG9C,YAAY,QAAQ,EAAE,aAAa,EAAE,aAAa,EAAE,KAAK,EAAE,OAAO;QAChE,EAAE,CAAC,CAAC,QAAQ,KAAK,KAAK,CAAC,CAAC;YAAC,QAAQ,GAAG,EAAE,CAAC;QACvC,EAAE,CAAC,CAAC,aAAa,KAAK,KAAK,CAAC,CAAC;YAAC,aAAa,GAAG,CAAC,CAAC;QAChD,EAAE,CAAC,CAAC,aAAa,KAAK,KAAK,CAAC,CAAC;YAAC,aAAa,GAAG,CAAC,CAAC;QAChD,EAAE,CAAC,CAAC,KAAK,KAAK,KAAK,CAAC,CAAC;YAAC,KAAK,GAAG,QAAQ,CAAC;QACvC,EAAE,CAAC,CAAC,OAAO,KAAK,KAAK,CAAC,CAAC;YAAC,OAAO,GAAG,GAAG,CAAC;QAEtC,KAAK,CAAC,MAAM,EAAE,QAAQ;aACnB,OAAO,CAAC,kBAAkB,EAAE,EAAE,GAAG,CAAC,CAAC,GAAG,OAAO,GAAG,QAAQ,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;aACrE,OAAO,CAAC,UAAU,EAAE,EAAE,GAAG,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAElD,IAAI,CAAC,QAAQ,CAAC,SAAS,GAAG,IAAI,YAAY,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;QACzD,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;QACzB,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QACnB,IAAI,CAAC,aAAa,GAAG,aAAa,CAAC;QACnC,IAAI,CAAC,aAAa,GAAG,aAAa,CAAC;IACrC,CAAC;IAED,IAAW,KAAK;QACd,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;IACrD,CAAC;IAED,IAAW,KAAK,CAAC,KAAK;QACpB,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,KAAK,EAAE,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;IACrD,CAAC;IAED,IAAW,QAAQ;QACjB,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC;IAChC,CAAC;IAED,IAAW,QAAQ,CAAC,KAAK;QACvB,IAAI,CAAC,QAAQ,CAAC,QAAQ,GAAG,KAAK,CAAC;IACjC,CAAC;IAED,IAAW,aAAa;QACtB,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC;IACrC,CAAC;IAED,IAAW,aAAa,CAAC,KAAK;QAC5B,IAAI,CAAC,QAAQ,CAAC,aAAa,GAAG,KAAK,CAAC;IACtC,CAAC;IAED,IAAW,aAAa;QACtB,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC;IACrC,CAAC;IAED,IAAW,aAAa,CAAC,KAAK;QAC5B,IAAI,CAAC,QAAQ,CAAC,aAAa,GAAG,KAAK,CAAC;IACtC,CAAC;CACF;AApDD,gCAoDC;;;;;;;;;;;AC3ED,qEAAqC;AACrC,2EAA2C;AAC3C,+DAAkC;AAClC,iEAAoC;AACpC,4DAA+B;AAC/B,+DAAkC;AAClC,gEAAmC;AAGnC;IA0DE,YAAoB,kBAAsC,EAAU,aAAyB;QAAzE,uBAAkB,GAAlB,kBAAkB,CAAoB;QAAU,kBAAa,GAAb,aAAa,CAAY;QAzDrF,WAAM,GAAG,IAAI,GAAG,EAAE,CAAC;QAGnB,gBAAW,GAAe,IAAI,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;QAE/C,iBAAY,GAAG,IAAI,iBAAO,EAAE,CAAC;QAC7B,sBAAiB,GAAG,IAAI,iBAAO,EAAE,CAAC;QAClC,sBAAiB,GAAG,IAAI,iBAAO,EAAE,CAAC;QAClC,oBAAe,GAAG,IAAI,iBAAO,EAAE,CAAC;QAChC,2BAAsB,GAAG,IAAI,iBAAO,EAAE,CAAC;QACvC,sBAAiB,GAAG,IAAI,iBAAO,EAAE,CAAC;QAClC,qBAAgB,GAAG,IAAI,iBAAO,EAAE,CAAC;QACjC,oBAAe,GAAG,IAAI,iBAAO,EAAE,CAAC;QAEjC,WAAM,GAAuB,IAAI,CAAC,YAAY,CAAC,YAAY,EAAE,CAAC;QAC9D,gBAAW,GAAoB,IAAI,CAAC,iBAAiB,CAAC,YAAY,EAAE,CAAC;QACrE,gBAAW,GAAiC,IAAI,CAAC,iBAAiB,CAAC,YAAY,EAAE,CAAC;QAClF,cAAS,GAAiC,IAAI,CAAC,eAAe,CAAC,YAAY,EAAE,CAAC;QAC9E,qBAAgB,GAAiC,IAAI,CAAC,sBAAsB,CAAC,YAAY,EAAE,CAAC;QAC5F,gBAAW,GAAiC,IAAI,CAAC,iBAAiB,CAAC,YAAY,EAAE,CAAC;QAClF,eAAU,GAAiC,IAAI,CAAC,gBAAgB,CAAC,YAAY,EAAE,CAAC;QAChF,cAAS,GAA8B,IAAI,CAAC,eAAe,CAAC,YAAY,EAAE,CAAC;QAE3E,kBAAa,GAAe,IAAI,IAAI,CAAC,KAAK,EAAE,CAAC;QAC7C,uBAAkB,GAAoB,IAAI,CAAC,iBAAiB;aAChE,MAAM,CAAC,IAAI,CAAC,iBAAiB,CAAC,QAAQ,CAAC,CAAC,IAAI,uBAAU,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC;aACnE,MAAM,CAAC,CAAC,IAAwB,KAAK,IAAI,CAAC,MAAM,KAAK,CAAC,IAAI,OAAO,CAAC,iBAAiB,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;aAC7F,GAAG,CAAC,CAAC,IAAwB,KAAK,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;QAEtC,yBAAoB,GAAG;YAC7B,SAAS,EAAE,CAAC,CAAmB,KAAK,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC;YAC3D,SAAS,EAAE,CAAC,CAAmB,KAAK,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC;YAC3D,OAAO,EAAE,CAAC,CAAmB,KAAK,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC;YACvD,QAAQ,EAAE,CAAC,CAAmB,KAAK,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC;YACzD,cAAc,EAAE,CAAC,CAAmB,KAAK,IAAI,CAAC,oBAAoB,CAAC,CAAC,CAAC;YACrE,SAAS,EAAE,CAAC,CAAmB,KAAK,IAAI,CAAC,oBAAoB,CAAC,CAAC,CAAC;YAChE,OAAO,EAAE,CAAC,CAAmB,KAAK,IAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC;SAC7D,CAAC;QAEM,4BAAuB,GAAG;YAChC,OAAO,EAAE,CAAC,CAAgB,KAAK,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC;YACpD,KAAK,EAAE,CAAC,CAAgB,KAAK,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC;YAChD,KAAK,EAAE,CAAC,CAAa,KAAK,IAAI,CAAC,gBAAgB,CAAC,CAAC,CAAC;YAClD,WAAW,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC,cAAc,EAAE;SACvC,CAAC;QAEM,2BAAsB,GAAG;YAC/B,OAAO,EAAE,CAAC,CAAgB,KAAK,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,OAAO,CAAC,GAAG,IAAI;YAC5D,KAAK,EAAE,CAAC,CAAgB,KAAK,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,OAAO,CAAC,GAAG,KAAK;SAC5D,CAAC;QASA,GAAG,CAAC,CAAC,IAAI,KAAK,IAAI,IAAI,CAAC,oBAAoB,CAAC;YAAC,kBAAkB,CAAC,EAAE,CAAC,KAAK,EAAE,IAAI,CAAC,oBAAoB,CAAC,KAAK,CAAC,CAAC,CAAC;QAC5G,GAAG,CAAC,CAAC,IAAI,KAAK,IAAI,IAAI,CAAC,uBAAuB,CAAC;YAAC,aAAa,CAAC,aAAa,CAAC,UAAU,CAAC,gBAAgB,CAAC,KAAK,EAAE,IAAI,CAAC,uBAAuB,CAAC,KAAK,CAAC,EAAE,KAAK,CAAC,CAAC;QAC3J,GAAG,CAAC,CAAC,IAAI,KAAK,IAAI,IAAI,CAAC,sBAAsB,CAAC;YAAC,QAAQ,CAAC,gBAAgB,CAAC,KAAK,EAAE,IAAI,CAAC,sBAAsB,CAAC,KAAK,CAAC,EAAE,KAAK,CAAC,CAAC;IAC7H,CAAC;IAVD,OAAO;QACL,GAAG,CAAC,CAAC,IAAI,KAAK,IAAI,IAAI,CAAC,oBAAoB,CAAC;YAAC,IAAI,CAAC,kBAAkB,CAAC,GAAG,CAAC,KAAK,EAAE,IAAI,CAAC,oBAAoB,CAAC,KAAK,CAAC,CAAC,CAAC;QAClH,GAAG,CAAC,CAAC,IAAI,KAAK,IAAI,IAAI,CAAC,uBAAuB,CAAC;YAAC,IAAI,CAAC,aAAa,CAAC,aAAa,CAAC,mBAAmB,CAAC,KAAK,EAAE,IAAI,CAAC,uBAAuB,CAAC,KAAK,CAAC,EAAE,KAAK,CAAC,CAAC;QACxJ,GAAG,CAAC,CAAC,IAAI,KAAK,IAAI,IAAI,CAAC,sBAAsB,CAAC;YAAC,QAAQ,CAAC,mBAAmB,CAAC,KAAK,EAAE,IAAI,CAAC,sBAAsB,CAAC,KAAK,CAAC,EAAE,KAAK,CAAC,CAAC;IAChI,CAAC;IAQO,eAAe,CAAC,CAAmB;QACzC,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC;QACjC,EAAE,CAAC,CAAC,IAAI,CAAC,iBAAiB,IAAI,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC;YACnD,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC;gBAC1B,EAAE,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,iBAAiB,CAAC,CAAC;gBAC9C,EAAE,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,iBAAiB,CAAC,CAAC;aAC/C,CAAC,CAAC;YACH,IAAI,CAAC,iBAAiB,GAAG,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC;QACjD,CAAC;QACD,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;QACzD,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;IACjC,CAAC;IAEO,eAAe,CAAC,CAAmB;QACzC,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;QAC3B,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;IACjC,CAAC;IAEO,aAAa,CAAC,CAAmB;QACvC,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;QAC5B,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;IAC/B,CAAC;IAEO,aAAa,CAAC,CAAgB;QACpC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC;QAC9B,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;IAC/B,CAAC;IAEO,WAAW,CAAC,CAAgB;QAClC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,OAAO,CAAC,GAAG,KAAK,CAAC;IACjC,CAAC;IAEO,gBAAgB,CAAC,CAAa;QACpC,EAAE,CAAC,CAAC,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;YACjB,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QAC9B,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;YACxB,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC;QAC/B,CAAC;QACD,CAAC,CAAC,cAAc,EAAE,CAAC;IACrB,CAAC;IAEO,oBAAoB,CAAC,CAAmB;QAC9C,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;QAC5B,IAAI,CAAC,iBAAiB,GAAG,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC;IACjD,CAAC;IAEO,kBAAkB,CAAC,CAAmB;QAC5C,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC;QAC7B,IAAI,CAAC,iBAAiB,GAAG,SAAS,CAAC;IACrC,CAAC;IAEM,aAAa;QAClB,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,KAAK,IAAI,CAAC;IAClC,CAAC;IAEM,eAAe;QACpB,MAAM,CAAC,IAAI,CAAC,cAAc,KAAK,IAAI,CAAC;IACtC,CAAC;IAEM,gBAAgB;QACrB,MAAM,CAAC,IAAI,CAAC,eAAe,KAAK,IAAI,CAAC;IACvC,CAAC;IAEM,aAAa;QAClB,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC;IAC1B,CAAC;IAEO,oBAAoB,CAAC,CAAmB;QAC9C,IAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;IACtC,CAAC;IAEO,cAAc,CAAC,CAAmB;QACxC,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;IAChC,CAAC;IAEM,cAAc;QACnB,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,KAAK,IAAI,CAAC;IAClC,CAAC;IAEO,MAAM,CAAC,iBAAiB,CAAC,IAAwB,EAAE,SAAiB;QAC1E,MAAM,EAAE,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;QACnE,MAAM,EAAE,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;QACnE,MAAM,MAAM,GAAG,EAAE,GAAG,SAAS,IAAI,EAAE,GAAG,SAAS,CAAC;QAChD,EAAE,CAAC,CAAC,CAAC,MAAM,CAAC;YAAC,OAAO,CAAC,GAAG,CAAC,6BAA6B,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC;QAChE,MAAM,CAAC,MAAM,CAAC;IAChB,CAAC;CACF;AAtJD,0BAsJC;;;;;;;;;;;AClKD,IAAO,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC;AAC1C,IAAO,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;AAE5B,MAAM,SAAS,GAAG,IAAI,IAAI,CAAC,SAAS,EAAE,CAAC;AACvC,MAAM,eAAe,GAAG,CAAC,CAAC;AAE1B;;;;;;;GAOG;AACH;IAGE;;OAEG;IACH,YAAY,QAAQ;QAClB,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;QACzB;;;;;;WAMG;QACH,QAAQ,CAAC,OAAO,GAAG,IAAI,CAAC;IAC1B,CAAC;IAED;;;;;;OAMG;IACH,KAAK,CAAC,MAAM;QACV,MAAM,KAAK,GAAG,IAAI,KAAK,EAAE,CAAC;QAE1B,KAAK,CAAC,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;QAEhC,MAAM,CAAC,KAAK,CAAC;IACf,CAAC;IAED;;;;;;;OAOG;IACH,MAAM,CAAC,MAAM;QACX,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,SAAS,EAAE,CAAC;IACzC,CAAC;IAED;;;;;;OAMG;IACH,MAAM,CAAC,MAAM,EAAE,SAAyB,IAAI;QAC1C,MAAM,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;QAC/B,IAAI,aAAa,CAAC;QAClB,IAAI,UAAU,CAAC;QACf,IAAI,KAAK,CAAC;QACV,IAAI,KAAK,GAAG,KAAK,CAAC;QAClB,IAAI,aAAa,CAAC;QAClB,KAAK,GAAG,MAAM,CAAC;QACf,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;YACX,EAAE,CAAC,CAAC,MAAM,YAAY,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC;gBACzC,aAAa,GAAG,MAAM,CAAC;YACzB,CAAC;YACD,IAAI,CAAC,CAAC;gBACJ,aAAa,GAAG,IAAI,CAAC,eAAe,CAAC,MAAM,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YACrD,CAAC;QACH,CAAC;QAED,EAAE,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC;YAClB,aAAa,GAAG,aAAa,CAAC,WAAW,CAAC,gBAAgB,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC;YACtF,UAAU,GAAG,aAAa,CAAC,UAAU,CAAC;YACtC,wCAAwC;YACxC,KAAK,GAAG,KAAK,CAAC;QAChB,CAAC;QACD,IAAI,CAAC,CAAC;YACJ,aAAa,GAAG,IAAI,CAAC,QAAQ,CAAC,gBAAgB,CAAC;YAC/C,UAAU,GAAG,aAAa,CAAC,UAAU,CAAC;YACtC,KAAK,GAAG,IAAI,CAAC;YAEb,oBAAoB;YACpB,0CAA0C;YAC1C,2CAA2C;QAC7C,CAAC;QAED,MAAM,KAAK,GAAG,KAAK,CAAC,KAAK,GAAG,UAAU,CAAC;QACvC,MAAM,MAAM,GAAG,KAAK,CAAC,MAAM,GAAG,UAAU,CAAC;QAEzC,MAAM,YAAY,GAAG,IAAI,IAAI,CAAC,kBAAkB,CAAC,KAAK,EAAE,MAAM,EAAE,CAAC,CAAC,CAAC;QAEnE,EAAE,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC;YAClB,kBAAkB;YAClB,QAAQ,CAAC,gBAAgB,CAAC,aAAa,CAAC,CAAC;YAEzC,4BAA4B;YAC5B,MAAM,WAAW,GAAG,IAAI,UAAU,CAAC,eAAe,GAAG,KAAK,GAAG,MAAM,CAAC,CAAC;YAErE,2BAA2B;YAC3B,MAAM,EAAE,GAAG,QAAQ,CAAC,EAAE,CAAC;YAEvB,EAAE,CAAC,UAAU,CACX,KAAK,CAAC,CAAC,GAAG,UAAU,EACpB,KAAK,CAAC,CAAC,GAAG,UAAU,EACpB,KAAK,EACL,MAAM,EACN,EAAE,CAAC,IAAI,EACP,EAAE,CAAC,aAAa,EAChB,WAAW,CACZ,CAAC;YAEF,+BAA+B;YAC/B,MAAM,UAAU,GAAG,YAAY,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,EAAE,CAAC,EAAE,KAAK,EAAE,MAAM,CAAC,CAAC;YAE1E,UAAU,CAAC,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;YAEjC,YAAY,CAAC,OAAO,CAAC,YAAY,CAAC,UAAU,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YAEpD,iBAAiB;YACjB,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;gBACV,YAAY,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;gBAClC,YAAY,CAAC,OAAO,CAAC,SAAS,CAAC,YAAY,CAAC,MAAM,EAAE,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC;YAClE,CAAC;QACH,CAAC;QAED,yBAAyB;QACzB,MAAM,CAAC,YAAY,CAAC,MAAM,CAAC;IAC7B,CAAC;IAED,eAAe,CAAC,aAAa,EAAE,SAAS,EAAE,UAAU;QAClD,MAAM,MAAM,GAAG,aAAa,CAAC,cAAc,EAAE,CAAC;QAE9C,MAAM,aAAa,GAAG,aAAa,CAAC,MAAM,CAAC,MAAM,CAAC,KAAK,GAAG,CAAC,EAAE,MAAM,CAAC,MAAM,GAAG,CAAC,EAAE,SAAS,EAAE,UAAU,CAAC,CAAC;QAEvG,MAAM,UAAU,GAAG,IAAI,MAAM,EAAE,CAAC;QAChC,UAAU,CAAC,EAAE,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC;QAC1B,UAAU,CAAC,EAAE,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC;QAE1B,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,aAAa,EAAE,aAAa,EAAE,KAAK,EAAE,UAAU,EAAE,IAAI,CAAC,CAAC;QAE5E,MAAM,CAAC,aAAa,CAAC;IACvB,CAAC;IAED;;;;;;;OAOG;IACH,MAAM,CAAC,MAAM;QACX,MAAM,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;QAC/B,IAAI,aAAa,CAAC;QAClB,IAAI,UAAU,CAAC;QACf,IAAI,KAAK,CAAC;QACV,IAAI,aAAa,CAAC;QAElB,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;YACX,EAAE,CAAC,CAAC,MAAM,YAAY,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC;gBACzC,aAAa,GAAG,MAAM,CAAC;YACzB,CAAC;YACD,IAAI,CAAC,CAAC;gBACJ,aAAa,GAAG,IAAI,CAAC,QAAQ,CAAC,eAAe,CAAC,MAAM,CAAC,CAAC;YACxD,CAAC;QACH,CAAC;QAED,EAAE,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC;YAClB,aAAa,GAAG,aAAa,CAAC,WAAW,CAAC,gBAAgB,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC;YACtF,UAAU,GAAG,aAAa,CAAC,UAAU,CAAC;YACtC,KAAK,GAAG,aAAa,CAAC,KAAK,CAAC;QAC9B,CAAC;QACD,IAAI,CAAC,CAAC;YACJ,aAAa,GAAG,IAAI,CAAC,QAAQ,CAAC,gBAAgB,CAAC;YAC/C,UAAU,GAAG,aAAa,CAAC,UAAU,CAAC;YAEtC,KAAK,GAAG,SAAS,CAAC;YAClB,KAAK,CAAC,KAAK,GAAG,aAAa,CAAC,IAAI,CAAC,KAAK,CAAC;YACvC,KAAK,CAAC,MAAM,GAAG,aAAa,CAAC,IAAI,CAAC,MAAM,CAAC;QAC3C,CAAC;QAED,MAAM,KAAK,GAAG,KAAK,CAAC,KAAK,GAAG,UAAU,CAAC;QACvC,MAAM,MAAM,GAAG,KAAK,CAAC,MAAM,GAAG,UAAU,CAAC;QAEzC,MAAM,WAAW,GAAG,IAAI,UAAU,CAAC,eAAe,GAAG,KAAK,GAAG,MAAM,CAAC,CAAC;QAErE,EAAE,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC;YAClB,kBAAkB;YAClB,QAAQ,CAAC,gBAAgB,CAAC,aAAa,CAAC,CAAC;YACzC,2BAA2B;YAC3B,MAAM,EAAE,GAAG,QAAQ,CAAC,EAAE,CAAC;YAEvB,EAAE,CAAC,UAAU,CACX,KAAK,CAAC,CAAC,GAAG,UAAU,EACpB,KAAK,CAAC,CAAC,GAAG,UAAU,EACpB,KAAK,EACL,MAAM,EACN,EAAE,CAAC,IAAI,EACP,EAAE,CAAC,aAAa,EAChB,WAAW,CACZ,CAAC;QACJ,CAAC;QAED,MAAM,CAAC,WAAW,CAAC;IACrB,CAAC;IAED;;;OAGG;IACH,OAAO;QACL,IAAI,CAAC,QAAQ,CAAC,OAAO,GAAG,IAAI,CAAC;QAC7B,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;IACvB,CAAC;CACF;AArND,8BAqNC;;;;;;;;;;;ACnOD,IAAY,SAIX;AAJD,WAAY,SAAS;IACnB,+CAAO;IAAE,uCAAG;IAAE,iDAAQ;IACtB,qDAAU;IAAE,6CAAM;IAAE,uDAAW;IAC/B,qDAAU;IAAE,6CAAM;IAAE,uDAAW;AACjC,CAAC,EAJW,SAAS,GAAT,iBAAS,KAAT,iBAAS,QAIpB;;;;;;;;;;;ACJD,IAAO,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC;AAClC,yGAA8B;AAC9B,2HAA2C;AAC3C,IAAO,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;AAEhC,UAAkB,SAAQ,SAAS;IAoBjC,YAAY,KAAY,EAAE,GAAW,EAAE,GAAW,EAAE,QAAiB,KAAK;QACxE,KAAK,EAAE,CAAC;QAlBF,iBAAY,GAAc,0BAAS,CAAC,OAAO,CAAC;QAC5C,UAAK,GAAa,IAAI,QAAQ,EAAE,CAAC;QAEzC,gBAAW,GAAW,CAAC,CAAC;QACxB,aAAQ,GAAW,CAAC,CAAC;QAEb,gBAAW,GAAW,CAAC,CAAC;QACxB,iBAAY,GAAW,CAAC,CAAC;QACzB,eAAU,GAAW,CAAC,CAAC;QACvB,kBAAa,GAAW,CAAC,CAAC;QAElC,SAAI,GAAW,CAAC,CAAC;QAGT,YAAO,GAAY,KAAK,CAAC;QACzB,cAAS,GAAG,IAAI,IAAI,CAAC,QAAQ,EAAE,CAAC;QAKtC,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;QACrB,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QACnB,IAAI,CAAC,WAAW,GAAG,GAAG,CAAC;QACvB,IAAI,CAAC,QAAQ,GAAG,GAAG,CAAC;QACpB,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC;YAAC,IAAI,CAAC,SAAS,EAAE,CAAC;IACrC,CAAC;IAGD,GAAG,CAAC,GAAc;QAChB,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QAC9B,IAAI,CAAC,MAAM,GAAG,GAAG,CAAC;QAClB,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;QACnB,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAED,cAAc;IACd,KAAK,CAAC,KAAgB;QACpB,MAAM,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;YACd,KAAK,0BAAS,CAAC,OAAO;gBACpB,IAAI,CAAC,YAAY,EAAE,CAAC;gBACpB,KAAK,CAAC;YACR,KAAK,0BAAS,CAAC,GAAG;gBAChB,IAAI,CAAC,QAAQ,EAAE,CAAC;gBAChB,KAAK,CAAC;YACR,KAAK,0BAAS,CAAC,QAAQ;gBACrB,IAAI,CAAC,aAAa,EAAE,CAAC;gBACrB,KAAK,CAAC;YACR,KAAK,0BAAS,CAAC,UAAU;gBACvB,IAAI,CAAC,eAAe,EAAE,CAAC;gBACvB,KAAK,CAAC;YACR,KAAK,0BAAS,CAAC,MAAM;gBACnB,IAAI,CAAC,WAAW,EAAE,CAAC;gBACnB,KAAK,CAAC;YACR,KAAK,0BAAS,CAAC,WAAW;gBACxB,IAAI,CAAC,gBAAgB,EAAE,CAAC;gBACxB,KAAK,CAAC;YACR,KAAK,0BAAS,CAAC,UAAU;gBACvB,IAAI,CAAC,eAAe,EAAE,CAAC;gBACvB,KAAK,CAAC;YACR,KAAK,0BAAS,CAAC,MAAM;gBACnB,IAAI,CAAC,WAAW,EAAE,CAAC;gBACnB,KAAK,CAAC;YACR,KAAK,0BAAS,CAAC,WAAW;gBACxB,IAAI,CAAC,gBAAgB,EAAE,CAAC;gBACxB,KAAK,CAAC;QACV,CAAC;QACD,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAED,YAAY;QACV,IAAI,CAAC,YAAY,GAAG,0BAAS,CAAC,OAAO,CAAC;QACtC,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC;QACjC,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC;QAChC,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAED,QAAQ;QACN,IAAI,CAAC,YAAY,GAAG,0BAAS,CAAC,GAAG,CAAC;QAClC,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QACrD,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC;QAChC,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAED,aAAa;QACX,IAAI,CAAC,YAAY,GAAG,0BAAS,CAAC,QAAQ,CAAC;QACvC,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG,IAAI,CAAC,YAAY,CAAC;QACnE,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC;QAChC,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAED,eAAe;QACb,IAAI,CAAC,YAAY,GAAG,0BAAS,CAAC,UAAU,CAAC;QACzC,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC;QACjC,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC,aAAa,CAAC;QACtE,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAED,WAAW;QACT,IAAI,CAAC,YAAY,GAAG,0BAAS,CAAC,MAAM,CAAC;QACrC,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QACrD,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC,aAAa,CAAC;QACtE,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAED,gBAAgB;QACd,IAAI,CAAC,YAAY,GAAG,0BAAS,CAAC,WAAW,CAAC;QAC1C,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG,IAAI,CAAC,YAAY,CAAC;QACnE,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC,aAAa,CAAC;QACtE,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAED,eAAe;QACb,IAAI,CAAC,YAAY,GAAG,0BAAS,CAAC,UAAU,CAAC;QACzC,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC;QACjC,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;QACvD,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAED,WAAW;QACT,IAAI,CAAC,YAAY,GAAG,0BAAS,CAAC,MAAM,CAAC;QACrC,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QACrD,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;QACvD,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAED,gBAAgB;QACd,IAAI,CAAC,YAAY,GAAG,0BAAS,CAAC,WAAW,CAAC;QAC1C,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG,IAAI,CAAC,YAAY,CAAC;QACnE,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;QACvD,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAGD,WAAW;IAEX,gBAAgB;IAEhB,OAAO,CAAC,GAAW;QACjB,IAAI,CAAC,WAAW,GAAG,GAAG,CAAC;QACvB,IAAI,CAAC,GAAG,EAAE,CAAC;QACX,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAED,QAAQ,CAAC,GAAW;QAClB,IAAI,CAAC,YAAY,GAAG,GAAG,CAAC;QACxB,IAAI,CAAC,GAAG,EAAE,CAAC;QACX,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAED,MAAM,CAAC,GAAW;QAChB,IAAI,CAAC,UAAU,GAAG,GAAG,CAAC;QACtB,IAAI,CAAC,GAAG,EAAE,CAAC;QACX,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAED,SAAS,CAAC,GAAW;QACnB,IAAI,CAAC,aAAa,GAAG,GAAG,CAAC;QACzB,IAAI,CAAC,GAAG,EAAE,CAAC;QACX,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAED,MAAM,CAAC,GAAW;QAChB,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;QAClB,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;QACnB,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;QACjB,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;QACpB,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAEO,GAAG;QACT,IAAI,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,YAAY,CAAC;QACrE,IAAI,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,aAAa,CAAC;QACvE,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC;IAC9B,CAAC;IAED,WAAW;IAEX,OAAO,CAAC,CAAS;QACf,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC;QACd,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;QACtB,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAED,OAAO,CAAC,KAAa,EAAE,MAAc;QACnC,iDAAiD;QACjD,kDAAkD;QAClD,MAAM,YAAY,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC;QAC9D,IAAI,CAAC,IAAI,GAAG,IAAI,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;QAE1C,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,IAAI,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC;QAChD,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACzB,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC;YAAC,IAAI,CAAC,SAAS,EAAE,CAAC;QACnC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QACtB,IAAI,CAAC,MAAM,EAAE,CAAC;IAChB,CAAC;IAED,MAAM;QACJ,cAAc;QACd,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;IAChC,CAAC;IAEO,SAAS;QACf,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC;QACtC,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;QACvD,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;IAChC,CAAC;IAED,KAAK,CAAC,KAAc;QAClB,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;QACrB,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,IAAI,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC;QAChD,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACzB,EAAE,CAAC,CAAC,KAAK,CAAC;YAAC,IAAI,CAAC,SAAS,EAAE,CAAC;QAC5B,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QACtB,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,YAAY,aAAK,CAAC;YAAC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;IAC7D,CAAC;IAED,SAAS;QACP,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC;QACnB,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;QACxB,EAAE,CAAC,CAAC,IAAI,CAAC,QAAQ,KAAK,CAAC,CAAC,CAAC,CAAC;YACxB,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;YACxB,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;QACnC,CAAC;QACD,EAAE,CAAC,CAAC,IAAI,CAAC,QAAQ,KAAK,IAAI,CAAC,KAAK,CAAC,SAAS,GAAG,CAAC,CAAC,CAAC,CAAC;YAC/C,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;YAClC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;QAC7C,CAAC;QAAC,IAAI;YAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;QAClD,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,KAAK,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC;YAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;QAC5E,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IAC5B,CAAC;CACF;AAzOD,oBAyOC;;;;;;;;;;;AC9OD,IAAO,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC;AAClC,uGAA4B;AAE5B,WAAmB,SAAQ,SAAS;IAApC;;QACU,WAAM,GAAW,CAAC,CAAC;QACnB,WAAM,GAAW,CAAC,CAAC;QAE3B,UAAK,GAAa,CAAC,EAAE,CAAC,CAAC;IAoJzB,CAAC;IAlJC,IAAI,UAAU;QACZ,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC;IACzD,CAAC;IAED,IAAI,YAAY;QACd,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC;aACjC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;IACtC,CAAC;IAED,IAAI,SAAS;QACX,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC;IAC3B,CAAC;IAGD,GAAG,CAAC,GAAc;QAChB,IAAI,IAAI,GAAG,IAAI,WAAI,CAAC,IAAI,EAAE,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;QACpD,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QACd,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACnC,IAAI,CAAC,MAAM,EAAE,CAAC;QACd,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;QACpB,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAED,OAAO,CAAC,GAAW;QACjB,IAAI,IAAI,GAAG,IAAI,WAAI,CAAC,IAAI,EAAE,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;QACpD,IAAI,CAAC,GAAG,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;QAC7B,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACnC,IAAI,CAAC,MAAM,EAAE,CAAC;QACd,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;QACpB,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAED,GAAG;QACD,EAAE,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;YAC/C,MAAM,IAAI,KAAK,CAAC,kCAAkC,CAAC,CAAC;QACtD,CAAC;QACD,IAAI,CAAC,MAAM,EAAE,CAAC;QACd,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;QAChB,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;QACpB,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAEO,SAAS;QACf,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,EAAE,IAAI,EAAE,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC;aACrE,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACpC,CAAC;IAED,OAAO,CAAC,CAAS;QACf,IAAI,CAAC,MAAM,IAAI,CAAC,GAAG,CAAC,CAAC;IACvB,CAAC;IAED,KAAK;QACH,IAAI,IAAI,GAAW,CAAC,CAAC;QACrB,IAAI,IAAI,GAAW,CAAC,CAAC;QAErB,GAAG,CAAC,CAAC,IAAI,GAAG,GAAW,CAAC,EAAE,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,GAAG,EAAE,EAAE,CAAC;YACzD,GAAG,CAAC,CAAC,IAAI,GAAG,GAAW,CAAC,EAAE,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,GAAG,EAAE,EAAE,CAAC;gBAC9D,IAAI,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;gBAEhC,IAAI,SAAS,GAAG,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC;gBACvC,2CAA2C;gBAC3C,IAAI,QAAQ,GAAG,IAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;gBAExE,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,SAAS,CAAC,CAAC;gBAClC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;gBAC9B,IAAI,IAAI,IAAI,CAAC,KAAK,CAAC;YACrB,CAAC;YACD,IAAI,GAAG,CAAC,CAAC;YACT,IAAI,IAAI,IAAI,CAAC,MAAM,CAAC;QACtB,CAAC;IACH,CAAC;IAED,MAAM,CAAC,YAAqB,KAAK;QAC/B,IAAI,IAAI,GAAW,CAAC,CAAC;QACrB,IAAI,IAAI,GAAW,CAAC,CAAC;QAErB,IAAI,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;QAExD,IAAI,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC;QACrC,IAAI,SAAS,GAAG,EAAE,CAAC;QACnB,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,YAAY,EAAE,CAAC,EAAE,EAAE,CAAC;YACtC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,CAAC;QACzC,CAAC;QACD,IAAI,UAAU,GAAG,EAAE,CAAC;QACpB,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;YAC3C,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC;QACxC,CAAC;QAED,QAAQ,CAAC,OAAO,CAAC,IAAI;YACnB,IAAI,KAAK,GAAG,CAAC,CAAC;YACd,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC,GAAG,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,IAAI,EAAE,CAAC,EAAE,EAAE,CAAC;gBACrE,KAAK,IAAI,SAAS,CAAC,CAAC,CAAC,CAAC;YACxB,CAAC;YACD,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,UAAU,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;QACjD,CAAC,CAAC,CAAC;QAEH,GAAG,CAAC,CAAC,IAAI,GAAG,GAAW,CAAC,EAAE,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,GAAG,EAAE,EAAE,CAAC;YACzD,GAAG,CAAC,CAAC,IAAI,GAAG,GAAW,CAAC,EAAE,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,GAAG,EAAE,EAAE,CAAC;gBAC9D,IAAI,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;gBAChC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;gBAC9B,IAAI,IAAI,IAAI,CAAC,KAAK,CAAC;YACrB,CAAC;YACD,IAAI,GAAG,CAAC,CAAC;YACT,IAAI,IAAI,IAAI,CAAC,MAAM,CAAC;QACtB,CAAC;QAED,EAAE,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC;YACd,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC;gBACvD,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC;oBAAC,CAAC,CAAC,SAAS,EAAE,CAAC;YACxC,CAAC,CAAC,CAAC;QAEL,CAAC;IAEH,CAAC;IAEO,YAAY,CAAC,GAAW;QAC9B,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC;aACtC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;IACtC,CAAC;IAEO,sBAAsB,CAAC,GAAW,EAAE,IAAY;QACtD,IAAI,MAAM,GAAG,CAAC,CAAC;QACf,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,EAAE,CAAC,EAAE,EAAE,CAAC;YAC9B,MAAM,IAAI,IAAI,CAAC,cAAc,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;QACzC,CAAC;QACD,MAAM,CAAC,MAAM,CAAC;IAChB,CAAC;IAEO,cAAc,CAAC,GAAW;QAChC,IAAI,MAAM,GAAG,EAAE,CAAC;QAEhB,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;aACrC,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,WAAW,KAAK,GAAG,CAAC;aAClC,OAAO,CAAC,CAAC;YACR,sBAAsB;YACtB,IAAI,MAAM,GAAG,CAAC,CAAC,KAAK,CAAC;YACrB,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YACpB,IAAI;QACN,CAAC,CAAC,CAAC;QAEL,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;IACjD,CAAC;IAED,KAAK,CAAC,KAAc;QAClB,EAAE,CAAC,CAAC,KAAK,CAAC;YAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;IACrE,CAAC;CACF;AAxJD,sBAwJC;;;;;;;;;;;AC1JD,IAAO,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;AAC1B,+GAA2C;AAE3C;IAAA;QACU,aAAQ,GAAW,EAAE,CAAC;QACtB,UAAK,GAAmB,EAAE,CAAC;IA4GrC,CAAC;IA1GC,eAAe,CAAC,OAAuB;QACrC,IAAI,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC,iBAAiB,EAAE,CAAC,CAAC,CAAC;QACzC,OAAO,CAAC,OAAO,CAAC,CAAC;YACf,IAAI,CAAC,GAAG,CAAC,CAAC,iBAAiB,EAAE,CAAC;YAC9B,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;YACR,IAAI,IAAI,GAAG,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;YAC/B,CAAC,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;QACtB,CAAC,CAAC,CAAC;IACL,CAAC;IAED,qBAAqB,CAAC,OAAuB;QAC3C,IAAI,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC,iBAAiB,EAAE,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC;QACjE,OAAO,CAAC,OAAO,CAAC,CAAC;YACf,IAAI,CAAC,GAAG,CAAC,CAAC,iBAAiB,EAAE,CAAC;YAC9B,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC;YACvB,IAAI,IAAI,GAAG,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;YAC/B,CAAC,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;QACtB,CAAC,CAAC,CAAC;IACL,CAAC;IAED,aAAa,CAAC,OAAuB;QACnC,IAAI,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC,iBAAiB,EAAE,CAAC,CAAC,CAAC;QACzC,OAAO,CAAC,OAAO,CAAC,CAAC;YACf,IAAI,CAAC,GAAG,CAAC,CAAC,iBAAiB,EAAE,CAAC;YAC9B,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;YACR,IAAI,IAAI,GAAG,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;YAC/B,CAAC,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;QACtB,CAAC,CAAC,CAAC;IACL,CAAC;IAED,mBAAmB,CAAC,OAAuB;QACzC,IAAI,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC,iBAAiB,EAAE,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC;QAChE,OAAO,CAAC,OAAO,CAAC,CAAC;YACf,IAAI,CAAC,GAAG,CAAC,CAAC,iBAAiB,EAAE,CAAC;YAC9B,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC;YACtB,IAAI,IAAI,GAAG,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;YAC/B,CAAC,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;QACtB,CAAC,CAAC,CAAC;IACL,CAAC;IAED,oBAAoB,CAAC,OAAuB,EAAE,UAAmB,IAAI;QACnE,EAAE,CAAC,CAAC,OAAO,CAAC;YAAC,OAAO,GAAG,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAChD,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,OAAO,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;YACxC,IAAI,IAAI,GAAG,IAAI,KAAK,CAAC,OAAO,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,GAAG,IAAI,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YAC5F,OAAO,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;QAC/B,CAAC;IACH,CAAC;IAED,kBAAkB,CAAC,OAAuB,EAAE,UAAmB,IAAI;QACjE,EAAE,CAAC,CAAC,OAAO,CAAC;YAAC,OAAO,GAAG,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAChD,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,OAAO,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;YACxC,IAAI,IAAI,GAAG,IAAI,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC;YAC7F,OAAO,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;QAC/B,CAAC;IACH,CAAC;IAED,SAAS,CAAC,OAAuB;QAC/B,IAAI,QAAQ,GAAG,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC;QAC5C,IAAI,CAAC,GAAG,CAAC,CAAC;QACV,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC;YACpB,IAAI,IAAI,GAAG,IAAI,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;YAC3B,CAAC,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;YACpB,IAAI,YAAY,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC;YAC5C,CAAC,IAAI,YAAY,GAAG,IAAI,CAAC,QAAQ,CAAC;QACpC,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,KAAK,GAAG,EAAE,CAAC;IAClB,CAAC;IAEO,cAAc,CAAC,OAAuB;QAC5C,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,YAAY,0BAAW,IAAI,CAAC,CAAC,CAAC,YAAY,EAAE,CAAC,cAAc,EAAE,CAAC,CAAC;IAC7F,CAAC;IAEO,OAAO,CAAC,CAAe,EAAE,OAAuB;QACtD,IAAI,KAAK,GAAG,CAAC,CAAC;QACd,IAAI,KAAK,GAAG,CAAC,CAAC,cAAc,EAAE,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,cAAc,EAAE,CAAC,CAAC;QAC/D,KAAK,CAAC,OAAO,CAAC,CAAC;YACb,CAAC,CAAC,cAAc,EAAE,CAAC,OAAO,CAAC,CAAC;gBAC1B,IAAI,IAAI,GAAG,CAAC,CAAC,UAAU,CAAC,WAAW,CAAC;gBACpC,EAAE,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;oBACpC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC;oBACtC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC;oBACpB,IAAI,KAAK,GAAG,IAAI,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;oBAC5B,KAAK,IAAI,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC;oBACrC,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;oBACxB,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBACtB,EAAE,CAAC,CAAC,IAAI,CAAC,cAAc,EAAE,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,cAAc,EAAE,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC;wBAAC,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;gBACpG,CAAC;YACH,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;QAEH,MAAM,CAAC,KAAK,KAAK,CAAC,GAAG,CAAC,CAAC,MAAM,GAAG,KAAK,CAAC;IACxC,CAAC;IAEO,KAAK,CAAC,CAAe,EAAE,CAAe;QAC5C,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YAAC,MAAM,CAAC,CAAC,CAAC;QACxB,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YAAC,MAAM,CAAC,CAAC,CAAC,CAAC;QAC9B,IAAI;YAAC,MAAM,CAAC,CAAC,CAAC;IAChB,CAAC;IAEO,KAAK,CAAC,CAAe,EAAE,CAAe;QAC5C,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YAAC,MAAM,CAAC,CAAC,CAAC;QACxB,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YAAC,MAAM,CAAC,CAAC,CAAC,CAAC;QAC9B,IAAI;YAAC,MAAM,CAAC,CAAC,CAAC;IAChB,CAAC;CAGF;AA9GD,0BA8GC;;;;;;;;;;;AClHD,IAAO,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;AAI5B,YAAoB,SAAQ,IAAI,CAAC,SAAS;IAWxC,YAAY,IAAY,EAAE,KAAe;QACvC,KAAK,EAAE,CAAC;QAVF,MAAC,GAAW,CAAC,CAAC;QAEd,SAAI,GAAG,KAAK,IAAI,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;QACtC,OAAE,GAAG,KAAK,IAAI,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;QAQxC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;QAClB,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;IACtB,CAAC;IAEM,KAAK;QACV,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC;YAAC,MAAM,IAAI,KAAK,CAAC,gBAAgB,CAAC,CAAC;QACpD,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC;YAAC,MAAM,IAAI,KAAK,CAAC,gBAAgB,CAAC,CAAC;QACpD,IAAI,CAAC,MAAM,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,OAAO,CAAC,CAAC;QACpE,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG,EAAE,CAAC;QACvB,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,EAAE,CAAC;QACxB,IAAI,CAAC,MAAM,CAAC,WAAW,GAAG,IAAI,CAAC;QAE/B,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,YAAY,EAAE,CAAC;YAC5B,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;YAC5B,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC7B,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,aAAa,EAAE,CAAC;YAC7B,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YAC9B,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;QAC3B,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QAC3B,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,CAAC,CAAC,KAAK,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC;IAChD,CAAC;IAED,SAAS,CAAC,MAA0B;QAClC,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;IACvB,CAAC;IAED,SAAS,CAAC,MAA2B;QACnC,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;IACvB,CAAC;IAED,OAAO,CAAC,KAAa;QACnB,IAAI,CAAC,CAAC,IAAI,GAAG,GAAG,KAAK,CAAC;QACtB,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC;QACtC,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC,CAAC;YAClB,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;QAC9B,CAAC;IACH,CAAC;IAED,SAAS,CAAC,KAAa;QACrB,IAAI,CAAC,CAAC,IAAI,GAAG,GAAG,KAAK,CAAC;QACtB,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC;QACtC,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;YAChB,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;YAC5B,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAChC,CAAC;IACH,CAAC;CACF;AA9DD,wBA8DC;;;;;;;;;;;AClED,+FAA6C;AAE7C,yGAAsC;AACtC,IAAO,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC;AAElC,UAAkB,SAAQ,SAAS;IAKjC,YAAY,EAAU,EAAE,KAAa,EAAE,MAAoB;QACzD,KAAK,EAAE,CAAC;QACR,IAAI,CAAC,EAAE,GAAG,EAAE,CAAC;QACb,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QACnB,IAAI,CAAC,IAAI,GAAG,IAAI,WAAI,CAAC,MAAM,EAAE,sBAAe,CAAC,KAAK,CAAC,CAAC;QACpD,IAAI,CAAC,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;QAC1B,IAAI,CAAC,GAAG,IAAI,aAAK,EAAE,CAAC;QACpB,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,gBAAgB,EAAE,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;QACrD,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;QAC5B,CAAC,CAAC,MAAM,EAAE,CAAC;QAEX,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;IACnB,CAAC;IAED,MAAM,CAAC,KAAa;QAClB,IAAI,CAAC,cAAc,EAAE,CAAC;QACtB,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QACnB,IAAI,CAAC,GAAG,IAAI,aAAK,EAAE,CAAC;QACpB,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,gBAAgB,EAAE,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;QACrD,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;QAC5B,CAAC,CAAC,MAAM,EAAE,CAAC;QACX,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;IACnB,CAAC;IAED,cAAc;QACZ,MAAM,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IACrB,CAAC;CAEF;AAjCD,oBAiCC;;;;;;;;;;;ACtCD,iHAA6C;AAC7C,+FAA6C;AAC7C,yGAAsC;AAKtC,eAAuB,SAAQ,4BAAY;IAOzC,YAAmB,KAAa;QAC9B,KAAK,EAAE,CAAC;QADS,UAAK,GAAL,KAAK,CAAQ;QALzB,aAAQ,GAAW,EAAE,CAAC;QAGtB,UAAK,GAAW,EAAE,CAAC;QAIxB,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;QACxB,IAAI,CAAC,WAAW,CAAC,OAAO,EAAE,CAAC;YACzB,IAAI,CAAC,MAAM,EAAE,CAAC;QAChB,CAAC,CAAC,CAAC;IACL,CAAC;IAEM,OAAO,CAAC,KAAW;QACxB,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QACvB,IAAI,CAAC,MAAM,EAAE,CAAC;IAChB,CAAC;IAEM,OAAO;QACZ,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC;IACpB,CAAC;IAEM,OAAO;QACZ,kCAAkC;IACpC,CAAC;IAEM,MAAM;QACX,IAAI,CAAC,cAAc,EAAE,CAAC;QACtB,IAAI,SAAS,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC;QACvC,IAAI,KAAK,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;QAC/B,IAAI,GAAG,GAAG,IAAI,CAAC,SAAS,CAAC,SAAS,EAAE,KAAK,CAAC,CAAC;QAC3C,KAAK,CAAC,QAAQ,CAAC,GAAG,CAAC,GAAG,CAAC,KAAK,GAAG,KAAK,CAAC,KAAK,GAAG,EAAE,EAAE,SAAS,CAAC,MAAM,CAAC,CAAC;QACnE,IAAI,CAAC,QAAQ,CAAC,GAAG,EAAE,SAAS,EAAE,KAAK,CAAC,CAAC;IACvC,CAAC;IAEO,eAAe;QACrB,IAAI,CAAC,GAAG,IAAI,aAAK,EAAE,CAAC;QACpB,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;YACjB,IAAI,CAAC,MAAM,GAAG,IAAI,WAAI,CAAC,IAAI,EAAE,sBAAe,CAAC,IAAI,CAAC,CAAC;QACrD,CAAC;QACD,IAAI,CAAC,MAAM,CAAC,OAAO,GAAG,IAAI,CAAC;QAC3B,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;QAC9B,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,eAAe,EAAE,CAAC;QACxC,CAAC,CAAC,MAAM,EAAE,CAAC;QACX,MAAM,CAAC,CAAC,CAAC;IACX,CAAC;IAEO,WAAW;QACjB,IAAI,KAAK,GAAG,IAAI,aAAK,EAAE,CAAC;QACxB,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;QACnB,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC;YACzB,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,gBAAgB,EAAE,CAAC;YAChC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC;gBAAC,KAAK,CAAC,GAAG,EAAE,CAAC;QACpC,CAAC,CAAC,CAAC;QACH,KAAK,CAAC,MAAM,EAAE,CAAC;QACf,MAAM,CAAC,KAAK,CAAC;IACf,CAAC;IAEO,SAAS,CAAC,SAAgB,EAAE,KAAY;QAC9C,IAAI,GAAG,GAAG,IAAI,CAAC,GAAG,GAAG,IAAI,IAAI,CAAC,QAAQ,EAAE,CAAC;QACzC,IAAI,MAAM,GAAG,SAAS,CAAC,MAAM,GAAG,KAAK,CAAC,MAAM,CAAC;QAC7C,IAAI,KAAK,GAAG,SAAS,CAAC,KAAK,IAAI,KAAK,CAAC,KAAK,GAAG,SAAS,CAAC,KAAK,GAAG,KAAK,CAAC,KAAK,CAAC;QAC3E,GAAG,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;QACxB,GAAG,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;QACjB,GAAG,CAAC,eAAe,CAAC,CAAC,EAAE,CAAC,EAAE,KAAK,EAAE,MAAM,EAAE,EAAE,CAAC,CAAC;QAC7C,GAAG,CAAC,OAAO,EAAE,CAAC;QACd,MAAM,CAAC,GAAG,CAAC;IACb,CAAC;CACF;AAtED,8BAsEC;;;;;;;;;;;AC5ED,IAAO,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;AAChC,kEAAqC;AACrC,8DAAiC;AAIjC,iHAA6C;AAG7C,gBAAwB,SAAQ,IAAI,CAAC,SAAS;IAgB5C,YAAY,GAAS,EAAE,GAAS;QAC9B,KAAK,EAAE,CAAC;QAVF,aAAQ,GAAW,CAAC,CAAC;QACrB,kBAAa,GAAG,CAAC,CAAC;QAElB,eAAU,GAAG,KAAK,CAAC;QACnB,QAAG,GAAG,CAAC,KAAK,KAAK,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAElC,aAAQ,GAAY,KAAK,CAAC;QAKhC,EAAE,CAAC,CAAC,GAAG,CAAC,OAAO,KAAK,GAAG,CAAC,OAAO,CAAC;YAAC,MAAM,IAAI,KAAK,CAAC,6CAA6C,CAAC,CAAC;QAChG,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;QACxB,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,GAAG,GAAG,CAAC,OAAO,GAAG,CAAC,GAAG,EAAE,GAAG,CAAC,GAAG,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;QACrE,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;QAC7B,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;QAE7B,EAAE,CAAC,CAAC,UAAU,CAAC,OAAO,CAAC;YAAC,MAAM,IAAI,KAAK,EAAE,CAAC;QAC1C,EAAE,CAAC,CAAC,CAAC,UAAU,CAAC,OAAO,CAAC;YAAC,MAAM,IAAI,KAAK,EAAE,CAAC;QAC3C,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC;YAAC,MAAM,IAAI,KAAK,EAAE,CAAC;QAC/C,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC;YAAC,MAAM,IAAI,KAAK,EAAE,CAAC;QAEhD,UAAU,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;QAC/B,UAAU,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;QAE/B,IAAI,CAAC,KAAK,GAAG,IAAI,QAAQ,EAAE,CAAC;QAC5B,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IAC5B,CAAC;IAED,KAAK;QACH,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC;YAAC,MAAM,IAAI,KAAK,CAAC,gBAAgB,CAAC,CAAC;QACpD,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC;YAAC,MAAM,IAAI,KAAK,CAAC,gBAAgB,CAAC,CAAC;QACpD,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QACrB,IAAI,CAAC,kBAAkB,EAAE,CAAC;QAC1B,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,iBAAiB,CAAC,KAAK,CAAC,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,SAAS,CAAC,CAAC,IAAI,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC;QAC3K,IAAI,CAAC,WAAW,CAAC,OAAO,EAAE,CAAC,IAAI,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC;IAChD,CAAC;IAEM,SAAS,CAAC,MAA2B;QAC1C,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;IACvB,CAAC;IAEM,SAAS,CAAC,MAA0B;QACzC,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;IACvB,CAAC;IAEM,OAAO;QACZ,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;QAClB,IAAI,CAAC,UAAU,EAAE,CAAC;QAClB,IAAI,CAAC,kBAAkB,CAAC,WAAW,EAAE,CAAC;QACtC,IAAI,CAAC,kBAAkB,EAAE,CAAC;IAC5B,CAAC;IAEM,WAAW,CAAC,KAAc;QAC/B,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;QACxB,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;YACV,IAAI,CAAC,UAAU,EAAE,CAAC;QACpB,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,IAAI,CAAC,kBAAkB,EAAE,CAAC;QAC5B,CAAC;QACD,IAAI,CAAC,MAAM,EAAE,CAAC;IAChB,CAAC;IAEM,UAAU;QACf,IAAI,CAAC,UAAU,CAAC,gBAAgB,CAAC,IAAI,CAAC,CAAC;QACvC,IAAI,CAAC,UAAU,CAAC,gBAAgB,CAAC,IAAI,CAAC,CAAC;IACzC,CAAC;IAEO,MAAM;QACZ,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,cAAc,EAAE,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;YAAC,MAAM,IAAI,KAAK,EAAE,CAAC;QAC1E,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,cAAc,EAAE,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;YAAC,MAAM,IAAI,KAAK,EAAE,CAAC;QAE1E,MAAM,mBAAmB,GAAG,IAAI,CAAC,UAAU,CAAC,iBAAiB,EAAE,CAAC;QAChE,MAAM,mBAAmB,GAAG,IAAI,CAAC,UAAU,CAAC,iBAAiB,EAAE,CAAC;QAEhE,IAAI,IAAI,GAAG,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,mBAAmB,CAAC,CAAC,GAAG,mBAAmB,CAAC,CAAC,CAAC,CAAC;QAC1E,IAAI,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,GAAG,CAAE,mBAAmB,CAAC,CAAC,GAAG,mBAAmB,CAAC,CAAC,CAAC,CAAC,CAAC;QAC5E,EAAE,CAAC,CAAC,IAAI,GAAG,IAAI,CAAC;YAAC,IAAI,GAAG,IAAI,CAAC;QAC7B,MAAM,SAAS,GAAG,IAAI,IAAI,CAAC,KAAK,CAAC,mBAAmB,CAAC,CAAC,GAAG,IAAI,EAAE,mBAAmB,CAAC,CAAC,CAAC,CAAC;QACtF,MAAM,SAAS,GAAG,IAAI,IAAI,CAAC,KAAK,CAAC,mBAAmB,CAAC,CAAC,GAAG,IAAI,EAAE,mBAAmB,CAAC,CAAC,CAAC,CAAC;QAEtF,MAAM,aAAa,GAAG,IAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,CAAC;QACxD,MAAM,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;QAEzC,MAAM,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;QACzC,MAAM,aAAa,GAAG,IAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,CAAC;QAGxD,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC;QACnB,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,IAAI,CAAC,UAAU,GAAG,CAAC,GAAG,CAAC,EAAE,IAAI,CAAC,UAAU,GAAG,QAAQ,GAAG,QAAQ,CAAC,CAAC;QACrF,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC,GAAG,EAAE,EAAE,aAAa,CAAC,CAAC,CAAC,CAAC;QACzD,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,EAAE,aAAa,CAAC,CAAC,GAAG,EAAE,EAAE,aAAa,CAAC,CAAC,CAAC,CAAC;QAChH,EAAE,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC;YAAC,IAAI,CAAC,eAAe,EAAE,CAAC;IAChD,CAAC;IAEO,cAAc;QACpB,IAAI,KAAK,GAAG,IAAI,IAAI,CAAC,KAAK,EAAE,CAAC;QAC7B,IAAI,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,iBAAiB,EAAE,CAAC;QAC5C,IAAI,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,iBAAiB,EAAE,CAAC;QAC5C,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;QAC1B,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;QAC1B,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;IAC7B,CAAC;IAEO,UAAU;QAChB,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC;YAAC,IAAI,CAAC,kBAAkB,EAAE,CAAC;QAClD,IAAI,CAAC,eAAe,EAAE,CAAC;QACvB,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;QACjC,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;YAChB,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;YAC/B,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QAC5B,CAAC;IACH,CAAC;IAEO,kBAAkB;QACxB,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;QACpC,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC;YAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QAC9C,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,MAAM,EAAE,GAAG,GAAG,CAAC;IAC3C,CAAC;IAEO,eAAe;QACrB,IAAI,CAAC,GAAG,IAAI,CAAC,cAAc,EAAE,CAAC;QAC9B,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;IAC3C,CAAC;IAEO,IAAI,CAAC,KAAa;QACxB,IAAI,CAAC,QAAQ,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,aAAa,IAAI,KAAK,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC,GAAG,IAAI,GAAG,GAAG,CAAC;QAC9E,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;IAC5D,CAAC;IAEO,kBAAkB;QACxB,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC;YAAC,MAAM,IAAI,KAAK,CAAC,mBAAmB,CAAC,CAAC;QACvD,IAAI,CAAC,YAAY,GAAG,IAAI,4BAAY,CAAC,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,GAAG,CAAC,OAAO,EAAE,IAAI,CAAC,EAAE,CAAC,CAAC;QACjF,IAAI,CAAC,YAAY,CAAC,KAAK,GAAG,EAAE,CAAC;QAC7B,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,EAAE,CAAC;QAC9B,IAAI,CAAC,YAAY,CAAC,KAAK,GAAG,IAAI,IAAI,CAAC,KAAK,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;QACjD,IAAI,CAAC,YAAY,CAAC,WAAW,GAAG,IAAI,CAAC;QACrC,IAAI,CAAC,YAAY,CAAC,UAAU,GAAG,IAAI,CAAC;IACtC,CAAC;CACF;AAlJD,gCAkJC;;;;;;;;;;;AC5JD,kBAA0B,SAAQ,IAAI,CAAC,MAAM;IAC3C,YAAY,OAAqB,EAAS,YAAoB;QAC5D,KAAK,CAAC,OAAO,CAAC,CAAC;QADyB,iBAAY,GAAZ,YAAY,CAAQ;IAE9D,CAAC;CACF;AAJD,oCAIC;;;;;;;;;;;ACJD,qEAAqC;AAErC,gIAAoE;AACpE,+FAA4B;AAC5B,uFAAmC;AACnC,IAAO,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC;AAKlC,kBAAmC,SAAQ,IAAI,CAAC,SAAS;IA0BvD;QACE,KAAK,EAAE,CAAC;QA1BA,eAAU,GAAG,KAAK,CAAC;QACnB,4BAAuB,GAAiC,IAAI,iBAAO,EAAE,CAAC;QAEzE,sBAAiB,GAAoC,IAAI,CAAC,uBAAuB,CAAC,YAAY,EAAE,CAAC;QAGjG,YAAO,GAAY,IAAI,CAAC;QAMrB,WAAM,GAAW,QAAQ,CAAC;IAepC,CAAC;IAbD,IAAW,KAAK;QACd,IAAI,MAAM,GAAG,CAAC,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;QAC7D,IAAI,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;QAC7E,MAAM,CAAC,GAAG,GAAG,MAAM,CAAC;IACtB,CAAC;IAED,IAAW,KAAK,CAAC,GAAW;QAC1B,GAAG,GAAG,GAAG,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;QACvB,IAAI,CAAC,MAAM,GAAG,QAAQ,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC;IAClC,CAAC;IAQM,SAAS,CAAC,MAA0B;QACzC,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;IACvB,CAAC;IAEM,SAAS,CAAC,MAA2B;QAC1C,EAAE,CAAC,CAAC,CAAC,MAAM,CAAC;YAAC,MAAM,IAAI,KAAK,CAAC,gBAAgB,CAAC,CAAC;QAC/C,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;IACvB,CAAC;IAEM,OAAO;QACZ,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;IACpB,CAAC;IAEM,WAAW,CAAC,KAAiB;QAClC,IAAI,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;QACjB,IAAI,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;QACjB,IAAI,CAAC,uBAAuB,CAAC,IAAI,CAAC,IAAI,2CAAmB,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;IAC5E,CAAC;IAEM,WAAW,CAAC,UAAmB;QACpC,EAAE,CAAC,CAAC,UAAU,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;YACnC,IAAI,CAAC,iBAAiB,EAAE,CAAC;YACzB,IAAI,CAAC,OAAO,GAAG,CAAC,IAAI,iBAAU,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,QAAQ,EAAE,GAAG,CAAC,CAAC,CAAC;QAC3D,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,UAAU,IAAI,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;YAC1C,IAAI,CAAC,mBAAmB,EAAE,CAAC;YAC3B,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;QACpB,CAAC;QACD,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;IAC/B,CAAC;IAED,IAAW,QAAQ;QACjB,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC;IACzB,CAAC;IAEM,iBAAiB;QACtB,IAAI,CAAC,WAAW,EAAE,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,cAAc,EAAE,CAAC;aAC/C,OAAO,CAAC,CAAC,IAAI,CAAC,CAAC,cAAc,EAAE,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;IACxE,CAAC;IAEM,mBAAmB;QACxB,IAAI,CAAC,WAAW,EAAE,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,cAAc,EAAE,CAAC;aAC/C,OAAO,CAAC,CAAC,IAAI,CAAC,CAAC,cAAc,EAAE,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;IACzE,CAAC;IAEM,eAAe;QACpB,MAAM,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,cAAc,EAAE,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC;IACvE,CAAC;IAEM,YAAY;QACjB,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;IACvD,CAAC;IAEM,cAAc;QACnB,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC;IACrD,CAAC;IAEM,WAAW;QAChB,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;IAC7B,CAAC;IAEO,QAAQ,CAAC,GAAmB;QAClC,IAAI,MAAM,GAAW,EAAE,CAAC;QACxB,GAAG,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC;YACpB,EAAE,CAAC,CAAC,CAAC,YAAY,WAAI,CAAC,CAAC,CAAC;gBACtB,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;YACjB,CAAC;YACD,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,YAAY,SAAS,CAAC,CAAC,CAAC;gBAChC,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;YAC3C,CAAC;QACH,CAAC,CAAC,CAAC;QACH,MAAM,CAAC,MAAM,CAAC;IAChB,CAAC;CACF;AAxGD,oCAwGC;;;;;;;;;;;ACjHD,IAAO,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;AAChC,IAAO,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC;AAClC,IAAO,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;AAE1B,uBAA+B,SAAQ,SAAS;IAI9C;QACE,KAAK,EAAE,CAAC;QACR,IAAI,CAAC,KAAK,GAAG,IAAI,QAAQ,EAAE,CAAC;QAC5B,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IAC5B,CAAC;IAEM,IAAI;QACT,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC;QACnB,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC;IACjB,CAAC;IAEM,OAAO,CAAC,EAAQ;QACrB,IAAI,CAAC,EAAE,GAAG,EAAE,CAAC;IACf,CAAC;IAEM,QAAQ;QACb,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC;IACnB,CAAC;IAEM,MAAM,CAAC,CAAa;QACzB,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC;YAAC,MAAM,CAAC;QACrB,IAAI,EAAc,CAAC;QACnB,IAAI,EAAc,CAAC;QACnB,IAAI,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,iBAAiB,EAAE,CAAC;QAEpC,EAAE,GAAG,IAAI,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;QAChD,EAAE,GAAG,IAAI,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;QAEhD,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;QACpB,EAAE,GAAG,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;QACtB,EAAE,GAAG,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;QACtB,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;QAEpB,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC;QACnB,IAAI,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;QACrE,IAAI,IAAI,GAAG,CAAC,GAAG,CAAC,GAAG,GAAG,EAAE,CAAC,CAAC;QAC1B,IAAI,KAAK,GAAG,IAAI,GAAG,GAAG,CAAC;QACvB,IAAI,IAAI,KAAK,CAAC;QACd,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,IAAI,GAAG,KAAK,EAAE,CAAC;YAC1C,IAAI,GAAG,GAAG,iBAAiB,CAAC,OAAO,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YACrD,IAAI,GAAG,GAAG,iBAAiB,CAAC,OAAO,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,CAAC;YAE5D,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC;YAClC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC;YAChC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC;QAClC,CAAC;IACH,CAAC;IAEO,MAAM,CAAC,OAAO,CAAC,EAAc,EAAE,EAAc,EAAE,EAAc,EAAE,EAAc,EAAE,EAAU;QAC/F,IAAI,IAAY,EAAE,KAAa,EAAE,GAAW,CAAC;QAC7C,IAAI,CAAC,GAAG,IAAI,IAAI,CAAC,KAAK,EAAE,CAAC;QAEzB,IAAI,GAAG,CAAC,GAAG,EAAE,CAAC;QACd,KAAK,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,CAAC;QAC3B,GAAG,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC;QAEnB,CAAC,CAAC,CAAC,GAAG,KAAK,GAAG,EAAE,CAAC,CAAC,GAAG,CAAC,GAAG,EAAE,GAAG,IAAI,GAAG,IAAI,GAAG,EAAE,CAAC,CAAC,GAAG,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI,GAAG,EAAE,CAAC,CAAC,GAAG,GAAG,GAAG,EAAE,CAAC,CAAC,CAAC;QAC1F,CAAC,CAAC,CAAC,GAAG,KAAK,GAAG,EAAE,CAAC,CAAC,GAAG,CAAC,GAAG,EAAE,GAAG,IAAI,GAAG,IAAI,GAAG,EAAE,CAAC,CAAC,GAAG,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI,GAAG,EAAE,CAAC,CAAC,GAAG,GAAG,GAAG,EAAE,CAAC,CAAC,CAAC;QAE1F,MAAM,CAAC,CAAC,CAAC;IACX,CAAC;IAEO,SAAS,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE;QAC1B,MAAM,CAAC,GAAG,IAAI,KAAK,CACjB,EAAE,CAAC,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,EACtB,EAAE,CAAC,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CACvB,CAAC;QACF,MAAM,CAAC,GAAG,IAAI,KAAK,CACjB,CAAC,GAAG,EAAE,CAAC,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC,CAAC,EACnB,CAAC,GAAG,EAAE,CAAC,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC,CAAC,CACpB,CAAC;QACF,MAAM,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;QACtC,MAAM,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;QACtC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;QAEhC,MAAM,IAAI,GAAG,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;QACtC,MAAM,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;QACzB,MAAM,IAAI,GAAG,CAAC,GAAG,CAAC,GAAG,GAAG,CAAC;QACzB,MAAM,GAAG,GAAG,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;QAC7B,MAAM,EAAE,GAAG,CAAC,GAAG,GAAG,CAAC;QAEnB,MAAM,CAAC,CAAC,IAAI,GAAG,IAAI,GAAG,GAAG,GAAG,CAAC,GAAG,CAAC,IAAI,GAAG,GAAG,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC;IAClI,CAAC;CACF;AAvFD,8CAuFC;;;;;;;;;;;AC1FD,uFAAmC;AAGnC,UAAkB,SAAQ,IAAI,CAAC,QAAQ;IAerC,YAAmB,MAAoB,EAAE,WAAW,GAAG,eAAe,CAAC,IAAI;QACzE,KAAK,EAAE,CAAC;QADS,WAAM,GAAN,MAAM,CAAc;QAdvC,YAAO,GAAY,KAAK,CAAC;QAEjB,gBAAW,GAAiB,EAAE,CAAC;QAE/B,WAAM,GAAG,QAAQ,CAAC;QAYxB,IAAI,CAAC,WAAW,GAAG,MAAM,CAAC;QAC1B,IAAI,CAAC,WAAW,GAAG,WAAW,CAAC;QAC/B,IAAI,CAAC,MAAM,EAAE,CAAC;QACd,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;QACxB,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;QAEvB,IAAI,CAAC,WAAW,CAAC,WAAW,EAAE,CAAC;YAC7B,IAAI,CAAC,OAAO,GAAG,CAAC,IAAI,iBAAU,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,QAAQ,EAAE,GAAG,CAAC,CAAC,CAAC;QAC3D,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,WAAW,CAAC,UAAU,EAAE,CAAC;YAC5B,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;QACpB,CAAC,CAAC,CAAC;IACL,CAAC;IAvBD,IAAI,KAAK;QACP,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC;IACrB,CAAC;IAED,IAAI,KAAK,CAAC,CAAS;QACjB,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;QAChB,IAAI,CAAC,MAAM,EAAE,CAAC;IAChB,CAAC;IAkBD,OAAO;QACL,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;IACpB,CAAC;IAEM,aAAa,CAAC,UAAsB;QACzC,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,CAAC;YAAC,MAAM,IAAI,KAAK,CAAC,6BAA6B,CAAC,CAAC;QAChG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;IACpC,CAAC;IAEM,gBAAgB,CAAC,UAAsB;QAC5C,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,CAAC;YAAC,MAAM,IAAI,KAAK,CAAC,+BAA+B,CAAC,CAAC;QAClG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC,CAAC;IACnE,CAAC;IAEM,cAAc;QACnB,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC;IAC1B,CAAC;IAEM,aAAa,CAAC,UAAsB;QACzC,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,CAAC;IACrD,CAAC;IAEM,cAAc;QACnB,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,CAAC,CAAC;IACrC,CAAC;IAEO,MAAM;QACZ,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAC3B,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;QAClB,MAAM,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;QAC9C,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,KAAK,EAAE,IAAI,CAAC,EAAE,GAAG,KAAK,CAAC,CAAC;QAC3C,IAAI,CAAC,OAAO,EAAE,CAAC;IACjB,CAAC;IAEO,QAAQ,CAAC,WAA4B;QAC3C,MAAM,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC;YACpB,KAAK,eAAe,CAAC,IAAI;gBACvB,MAAM,CAAC,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC;YACrB,KAAK,eAAe,CAAC,KAAK;gBACxB,MAAM,CAAC,IAAI,CAAC,EAAE,GAAG,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC;YAC/B;gBACE,MAAM,CAAC,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC;QACvB,CAAC;IACH,CAAC;CACF;AA3ED,oBA2EC;AAED,IAAY,eAGX;AAHD,WAAY,eAAe;IACzB,qDAAI;IACJ,uDAAK;AACP,CAAC,EAHW,eAAe,GAAf,uBAAe,KAAf,uBAAe,QAG1B;;;;;;;;;;;ACrFD,oBAA4B,SAAQ,IAAI,CAAC,QAAQ;IAM/C,YAAoB,UAAsB;QACxC,KAAK,EAAE,CAAC;QADU,eAAU,GAAV,UAAU,CAAY;IAE1C,CAAC;IAEM,MAAM,CAAC,YAAwB;QACpC,IAAI,CAAC,KAAK,EAAE,CAAC;QACb,IAAI,KAAK,GAAG,YAAY,CAAC,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;QAC/C,IAAI,MAAM,GAAG,YAAY,CAAC,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;QAChD,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;QAClC,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;QACpC,IAAI,CAAC,SAAS,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC;QAC5B,IAAI,CAAC,SAAS,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;QAC/B,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC,EAAE,KAAK,EAAE,MAAM,CAAC,CAAC;QACnE,IAAI,CAAC,OAAO,EAAE,CAAC;QACf,IAAI,CAAC,QAAQ,GAAG,YAAY,CAAC,KAAK,EAAE,CAAC;QACrC,IAAI,CAAC,SAAS,GAAG,EAAC,IAAI,EAAE,MAAM,GAAG,CAAC,EAAE,KAAK,EAAE,KAAK,GAAG,CAAC,EAAC,CAAC;IACxD,CAAC;IAEM,OAAO;QACZ,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC;YAAC,MAAM,CAAC,IAAI,CAAC;QAChC,MAAM,CAAC,IAAI,IAAI,CAAC,SAAS,CACvB,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,EAC5C,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,EAC5C,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;IACvC,CAAC;CACF;AA/BD,wCA+BC;;;;;;;;;;;AC/BD,+FAA6C;AAC7C,iHAA6C;AAC7C,yGAAsC;AACtC,mGAAgC;AAEhC,IAAO,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC;AAGlC,iBAAyB,SAAQ,4BAAY;IAe3C;QACE,KAAK,EAAE,CAAC;QAXH,cAAS,GAAkB,EAAE,CAAC;QAC9B,eAAU,GAAkB,EAAE,CAAC;QAItC,cAAS,GAAW,4BAA4B,CAAC;QACjD,cAAS,GAAW,cAAc,CAAC;QACnC,cAAS,GAAW,OAAO,CAAC;QAC5B,eAAU,GAAW,KAAK,CAAC;QAIzB,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;IAC1B,CAAC;IAEM,OAAO;QACZ,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC;IACxB,CAAC;IAEM,KAAK;QACV,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC;YAAC,MAAM,IAAI,KAAK,CAAC,gBAAgB,CAAC,CAAC;QACpD,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC;YAAC,MAAM,IAAI,KAAK,CAAC,gBAAgB,CAAC,CAAC;QACpD,IAAI,CAAC,WAAW,CAAC,OAAO,EAAE,CAAC;YACzB,IAAI,CAAC,MAAM,EAAE,CAAC;QAChB,CAAC,CAAC,CAAC;IACL,CAAC;IAEM,OAAO;QACZ,kCAAkC;IACpC,CAAC;IAED,WAAW,CAAC,GAAgB;QAC1B,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QACzB,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAED,YAAY,CAAC,GAAgB;QAC3B,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QAC1B,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAEM,MAAM;QACX,EAAE,CAAC,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC;YAC3B,IAAI,CAAC,iBAAiB,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,YAAY,WAAW,CAAC,CAAC,OAAO,CAAC,CAAC,IAAkB,CAAE,CAAC,MAAM,EAAE,CAAC,CAAC;QAChH,CAAC;QACD,IAAI,CAAC,cAAc,EAAE,CAAC;QACtB,IAAI,CAAC,uBAAuB,EAAE,CAAC;QAC/B,IAAI,IAAI,GAAG,IAAI,CAAC,iBAAiB,EAAE,CAAC;QACpC,IAAI,IAAI,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;QACjC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;QAC/D,IAAI,GAAG,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;QACjD,IAAI,CAAC,WAAW,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;QACzC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,OAAO,EAAE,GAAG,EAAE,GAAG,IAAI,EAAE,IAAI,CAAC,CAAC;IAC/D,CAAC;IAEO,UAAU,CAAC,SAAgB;QACjC,IAAI,SAAS,GAAG,IAAI,aAAK,EAAE,CAAC;QAC5B,GAAG,CAAC,CAAC,IAAI,GAAG,IAAI,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;YAC/B,SAAS,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;YACnB,SAAS,CAAC,GAAG,EAAE,CAAC;QAClB,CAAC;QACD,EAAE,CAAC,CAAC,SAAS,CAAC,UAAU,GAAG,CAAC,CAAC,CAAC,CAAC;YAC7B,SAAS,CAAC,MAAM,EAAE,CAAC;YACnB,SAAS,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;QAC/B,CAAC;QAED,IAAI,UAAU,GAAG,IAAI,aAAK,EAAE,CAAC;QAC7B,GAAG,CAAC,CAAC,IAAI,GAAG,IAAI,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;YAChC,UAAU,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;YACpB,UAAU,CAAC,GAAG,EAAE,CAAC;QACnB,CAAC;QACD,EAAE,CAAC,CAAC,UAAU,CAAC,UAAU,GAAG,CAAC,CAAC,CAAC,CAAC;YAC9B,UAAU,CAAC,MAAM,EAAE,CAAC;YACpB,UAAU,CAAC,QAAQ,CAAC,GAAG,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;QAC9C,CAAC;QAED,MAAM,CAAC,CAAC,SAAS,EAAE,UAAU,CAAC,CAAC;IACjC,CAAC;IAEO,iBAAiB;QACvB,IAAI,KAAK,GAAG,IAAI,aAAK,EAAE,CAAC;QACxB,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,WAAW,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;QACvD,KAAK,CAAC,GAAG,EAAE,CAAC;QACZ,EAAE,CAAC,CAAC,IAAI,CAAC,iBAAiB,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;YAC/C,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;YACtE,KAAK,CAAC,GAAG,EAAE,CAAC;QACd,CAAC;QACD,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,WAAW,EAAE,CAAC,eAAc;QAC1D,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,WAAW,EAAE,CAAC,eAAc;QAC1D,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,UAAU,CAAC,QAAQ,EAAE,CAAC,CAAC,WAAW,EAAE,CAAC;QACxD,KAAK,CAAC,GAAG,EAAE,CAAC;QACZ,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;QACpB,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;QACnB,MAAM,CAAC,KAAK,CAAC;IACf,CAAC;IAEO,uBAAuB;QAC7B,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC;YAC5B,IAAI,CAAC,iBAAiB,GAAG,IAAI,SAAS,EAAE,CAAC;QAC3C,CAAC;QACD,4CAA4C;QAC5C,4BAA4B;QAC5B,sCAAsC;QACtC,0BAA0B;QAC1B,sCAAsC;QACtC,4BAA4B;QAC5B,4DAA4D;QAC5D,6BAA6B;IAC/B,CAAC;IAEO,SAAS,CAAC,SAAgB,EAAE,SAAgB,EAAE,UAAiB;QACrE,IAAI,GAAG,GAAG,IAAI,CAAC,IAAI,GAAG,IAAI,IAAI,CAAC,QAAQ,EAAE,CAAC;QAC1C,IAAI,CAAC,GAAG,SAAS,CAAC,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,MAAM,EAAE,UAAU,CAAC,MAAM,CAAC,CAAC;QACzE,IAAI,CAAC,GAAG,SAAS,CAAC,KAAK,CAAC;QACxB,2BAA2B;QAC3B,GAAG,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QAC3B,GAAG,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;QACjB,GAAG,CAAC,eAAe,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC;QACpC,GAAG,CAAC,OAAO,EAAE,CAAC;QACd,MAAM,CAAC,GAAG,CAAC;IACb,CAAC;IAEO,WAAW,CAAC,SAAgB,EAAE,SAAgB,EAAE,UAAiB;QACvE,IAAI,CAAC,GAAG,SAAS,CAAC,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,MAAM,EAAE,UAAU,CAAC,MAAM,CAAC,CAAC;QACzE,IAAI,CAAC,GAAG,SAAS,CAAC,KAAK,CAAC;QACxB,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC;YAAC,IAAI,CAAC,MAAM,GAAG,IAAI,WAAI,CAAC,IAAI,EAAE,sBAAe,CAAC,IAAI,CAAC,CAAC;QACrE,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC;QAClB,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,GAAG,SAAS,CAAC,MAAM,GAAG,CAAC,CAAC;QACzC,IAAI,CAAC,MAAM,CAAC,OAAO,GAAG,IAAI,CAAC;QAC3B,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC;YAAC,IAAI,CAAC,OAAO,GAAG,IAAI,WAAI,CAAC,IAAI,EAAE,sBAAe,CAAC,KAAK,CAAC,CAAC;QACxE,IAAI,CAAC,OAAO,CAAC,CAAC,GAAG,CAAC,CAAC;QACnB,IAAI,CAAC,OAAO,CAAC,CAAC,GAAG,CAAC,GAAG,SAAS,CAAC,MAAM,GAAG,CAAC,CAAC;QAC1C,MAAM,CAAC,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;IACrC,CAAC;IAEO,OAAO,CAAC,SAAgB;QAE9B,IAAI,KAAK,GAAG,IAAI,aAAK,EAAE,CAAC;QACxB,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC,WAAW,EAAE,CAAC;QACjD,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,CAAC,WAAW,EAAE,CAAC;QAChD,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC,CAAC,WAAW,EAAE,CAAC;QAClD,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,UAAU,CAAC,YAAY,CAAC,CAAC,CAAC,WAAW,EAAE,CAAC;QACvD,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC,CAAC,WAAW,EAAE,CAAC;QAClD,KAAK,CAAC,MAAM,EAAE,CAAC;QAEf,IAAI,MAAM,GAAG,IAAI,aAAK,EAAE,CAAC;QACzB,MAAM,CAAC,GAAG,CAAC,IAAI,CAAC,YAAY,CAAC,SAAS,EAAE;YACtC,KAAK,CAAC,UAAU,CAAC,CAAC;QACpB,CAAC,CAAC,CAAC,CAAC;QACJ,MAAM,CAAC,GAAG,CAAC,IAAI,CAAC,YAAY,CAAC,SAAS,EAAE;YACtC,MAAM,CAAC,IAAI,CAAC,8BAA8B,CAAC,CAAC;QAC9C,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;QAC9B,MAAM,CAAC,GAAG,CAAC,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE;QACtC,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;QAC9B,MAAM,CAAC,GAAG,CAAC,IAAI,CAAC,YAAY,CAAC,KAAK,EAAE;QACpC,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;QAC9B,MAAM,CAAC,GAAG,CAAC,IAAI,CAAC,YAAY,CAAC,MAAM,EAAE;QACrC,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;QAC9B,MAAM,CAAC,MAAM,EAAE,CAAC;QAEhB,SAAS,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,eAAe,EAAE,CAAC;QACvC,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,gBAAgB,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;IAEtD,CAAC;IAEO,YAAY,CAAC,IAAY,EAAE,EAAa;QAC9C,MAAM,MAAM,GAAG,IAAI,eAAM,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC;QACpC,MAAM,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QAC9B,MAAM,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QAC9B,MAAM,CAAC,KAAK,EAAE,CAAC;QACf,MAAM,CAAC,MAAM,CAAC;IAChB,CAAC;IAEO,UAAU,CAAC,IAAY;QAC7B,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC;YAAC,MAAM,IAAI,KAAK,CAAC,mBAAmB,CAAC,CAAC;QACvD,IAAI,MAAM,GAAG,IAAI,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,CAAC;QAClE,MAAM,CAAC,KAAK,GAAG,IAAI,IAAI,CAAC,KAAK,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;QACxC,MAAM,CAAC,KAAK,GAAG,EAAE,CAAC;QAClB,MAAM,CAAC,MAAM,GAAG,EAAE,CAAC;QACnB,MAAM,CAAC,MAAM,CAAC;IAChB,CAAC;CAGF;AA5LD,kCA4LC;;;;;;;;;;;ACpMD,iHAAqD;AAIrD;IACS,MAAM,CAAC,kBAAkB,CAAC,IAAU,EAAE,IAAoB;QAC/D,MAAM,CAAC,UAAU,MAAoC;YACnD,EAAE,CAAC,CAAC,CAAC,CAAC,MAAM,YAAY,4BAAY,CAAC,CAAC;gBAAC,MAAM,CAAC,KAAK,CAAC;YACpD,IAAI,MAAM,GAAG,MAAM,CAAC,SAAS,EAAE,CAAC;YAChC,MAAM,CAAC,IAAI,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,IAAI,IAAI,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,KAAK,GAAG,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,KAAK,CAAC;gBAC9F,CAAC,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC;QACtD,CAAC;IACH,CAAC;IAAA,CAAC;IAEK,MAAM,CAAC,mBAAmB,CAAC,IAAU,EAAE,IAAoB;QAChE,MAAM,CAAC,UAAU,MAAoC;YACnD,EAAE,CAAC,CAAC,CAAC,CAAC,MAAM,YAAY,4BAAY,CAAC,CAAC;gBAAC,MAAM,CAAC,KAAK,CAAC;YACpD,MAAM,CAAC,IAAI,CAAC,gBAAgB,CAAC,IAAI,EAAE,MAAM,CAAC,SAAS,EAAE,CAAC,CAAC;QACzD,CAAC;IACH,CAAC;IAAA,CAAC;CACH;AAhBD,gCAgBC;;;;;;;;;;;ACpBD,qEAAgC;AAEhC;IAAA;QACU,eAAU,GAAG,IAAI,CAAC;QAElB,eAAU,GAAG,CAAC,CAAC;QACf,eAAU,GAAG,CAAC,CAAC;QAEf,YAAO,GAAG,CAAC,CAAC;QACZ,YAAO,GAAG,CAAC,CAAC;QAEZ,kBAAa,GAAG,CAAC,CAAC;QAClB,kBAAa,GAAG,CAAC,CAAC;QAElB,mBAAc,GAAG,IAAI,IAAI,CAAC,MAAM,EAAE,CAAC;QACnC,gBAAW,GAAG,IAAI,IAAI,CAAC,MAAM,EAAE,CAAC;QAChC,oBAAe,GAAG,IAAI,IAAI,CAAC,MAAM,EAAE,CAAC;QACpC,oBAAe,GAAG,IAAI,IAAI,CAAC,MAAM,EAAE,CAAC;QAEpC,eAAU,GAAG,IAAI,IAAI,CAAC,MAAM,EAAE,CAAC;IA6GzC,CAAC;IA3GS,aAAa;QACnB,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,oBAAoB;QAC9F,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,gBAAgB;QAClF,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,aAAa,EAAE,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,oBAAoB;QAEpG,mCAAmC;QACnC,kGAAkG;QAClG,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;QAC7C,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;QACjD,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;QAEjD,2FAA2F;QAC3F,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC;QACjB,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC;QAEjB,uFAAuF;QACvF,iEAAiE;QACjE,mCAAmC;QACnC,IAAI,CAAC,UAAU,CAAC,GAAG,CACjB,IAAI,CAAC,cAAc,CAAC,CAAC,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC,EAC1F,IAAI,CAAC,cAAc,CAAC,EAAE,EAAE,IAAI,CAAC,cAAc,CAAC,EAAE,CAAC,CAAC;QAClD,8CAA8C;QAC9C,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;IAC9D,CAAC;IAED,IAAW,SAAS;QAClB,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;YACpB,IAAI,CAAC,aAAa,EAAE,CAAC;YAErB,uEAAuE;YACvE,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;QAC1B,CAAC;QACD,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC;IACzB,CAAC;IAED,IAAW,SAAS,CAAC,CAAc;QACjC,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;IACtB,CAAC;IAED;;;OAGG;IACI,WAAW,CAAC,IAAY,EAAE,IAAY;QAC3C,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;QACvB,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;QACvB,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;IACzB,CAAC;IAED,IAAW,SAAS;QAClB,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC;IACzB,CAAC;IAED,IAAW,SAAS;QAClB,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC;IACzB,CAAC;IAED;;;OAGG;IACI,MAAM,CAAC,MAAc,EAAE,MAAc;QAC1C,IAAI,CAAC,OAAO,IAAI,MAAM,CAAC;QACvB,IAAI,CAAC,OAAO,IAAI,MAAM,CAAC;QACvB,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;IACzB,CAAC;IAEM,WAAW,CAAC,MAAc,EAAE,MAAc;QAC/C,IAAI,CAAC,UAAU,IAAI,MAAM,CAAC;QAC1B,IAAI,CAAC,UAAU,IAAI,MAAM,CAAC;QAC1B,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;IACzB,CAAC;IAED;;;OAGG;IACH,IAAW,YAAY,CAAC,QAAgB;QACtC,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;YACpB,IAAI,CAAC,aAAa,EAAE,CAAC;QACvB,CAAC;QAED,kEAAkE;QAClE,iFAAiF;QACjF,kEAAkE;QAClE,0BAA0B;QAE1B,sFAAsF;QACtF,6EAA6E;QAC7E,oFAAoF;QACpF,MAAM,WAAW,GAAW,QAAQ,GAAG,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC;QAE7D,IAAI,CAAC,OAAO,GAAG,WAAW,CAAC;QAC3B,IAAI,CAAC,OAAO,GAAG,WAAW,CAAC;QAE3B,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;IACzB,CAAC;IAED,IAAW,YAAY;QACrB,MAAM,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC;IAC/B,CAAC;IAEM,cAAc,CAAC,IAAY,EAAE,IAAY;QAC9C,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;QAC1B,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;QAC1B,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;IACzB,CAAC;CACF;AA9HD,oBA8HC;;;;;;;;AChID,8EAA8E,mBAAmB,gLAAgL,8dAA8d,mFAAmF,GAAG,ikBAAikB,uBAAuB,sBAAsB,+nB;;;;;;;ACAn7C;AACA;;;AAGA;AACA;;AAEA;;;AAGA;AACA,2C;;;;;;;;;;;;;;;;;;;ACXA,yEAAgD;AAChD,4EAA+F;AAC/F,gGAA0D;AAC1D,8FAAwD;AAExD,+EAAuC;AACvC,8DAAiC;AACjC,2EAA2C;AAO3C,IAAa,oBAAoB,GAAjC;IAGE,YAAoB,WAAwB,EACxB,YAA0B,EAC1B,MAAc,EACd,WAAwB;QAHxB,gBAAW,GAAX,WAAW,CAAa;QACxB,iBAAY,GAAZ,YAAY,CAAc;QAC1B,WAAM,GAAN,MAAM,CAAQ;QACd,gBAAW,GAAX,WAAW,CAAa;QAC1C,IAAI,CAAC,IAAI,GAAG,WAAW,CAAC,KAAK,CAAC;YAC5B,IAAI,EAAE,WAAW,CAAC,OAAO,CAAC,EAAE,CAAC;YAC7B,IAAI,EAAE,WAAW,CAAC,OAAO,CAAC,EAAE,CAAC;YAC7B,MAAM,EAAE,WAAW,CAAC,KAAK,CAAC;gBACxB,WAAW,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC;aACpC,CAAC;SACH,CAAC,CAAC;IACL,CAAC;IAED,QAAQ;IACR,CAAC;IAEM,QAAQ,CAAC,EAAC,KAAK,EAAE,KAAK,EAAC;QAC5B,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;YACX,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,iBAAiB,CAAC,CAAC;YAC3C,MAAM,CAAC;QACT,CAAC;QACD,IAAI,CAAC,WAAW,CAAC,cAAc,CAAC,KAAK,CAAC,IAAI,EAAE,KAAK,CAAC,IAAI,EAAE,KAAK,CAAC,MAAM,CAAC;aAClE,KAAK,CAAC,CAAC;YACN,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;YAC3B,MAAM,CAAC,uBAAU,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC;QAE7B,CAAC,CAAC;aACD,SAAS,CAAC,QAAQ;YACf,EAAE,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;gBACb,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,QAAQ,EAAE,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAC;YAChD,CAAC;QACH,CAAC,CACF;IACL,CAAC;IAEO,SAAS;QACf,MAAM,CAAC;YACL,IAAI,EAAE,EAAE;YACR,IAAI,EAAE,EAAE;YACR,aAAa,EAAE,IAAI;YACnB,KAAK,EAAE,QAAQ;SAChB,CAAC;IACJ,CAAC;IAEM,QAAQ;QACb,MAAM,OAAO,GAAc,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC;QACrD,MAAM,KAAK,GAAG,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC,CAAC;QACvD,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IACtB,CAAC;IAEM,WAAW,CAAC,KAAK,EAAE,CAAC;QACzB,MAAM,OAAO,GAAc,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC;QACrD,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;IACtB,CAAC;IAEM,cAAc;QACnB,MAAM,CAAa,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAO,CAAC,QAAQ,CAAC;IACzD,CAAC;CACF;AA7DY,oBAAoB;IALhC,gBAAS,CAAC;QACT,QAAQ,EAAE,kBAAkB;QAC5B,2GAA4C;QAC5C,2GAA4C;KAC7C,CAAC;yDAIiC,mBAAW,oBAAX,mBAAW,sDACV,4BAAY,oBAAZ,4BAAY,sDAClB,eAAM,oBAAN,eAAM,sDACD,0BAAW,oBAAX,0BAAW;GANjC,oBAAoB,CA6DhC;AA7DY,oDAAoB;;;;;;;;;;;;ACVjC;;GAEG;AACH;IACE,YAAoB,MAAwB,EAAU,KAAQ,EAAU,EAA2B;QAA/E,WAAM,GAAN,MAAM,CAAkB;QAAU,UAAK,GAAL,KAAK,CAAG;QAAU,OAAE,GAAF,EAAE,CAAyB;IACnG,CAAC;IAEM,SAAS;QACd,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,EAAE,CAAC,CAAC;QAC7C,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAEM,WAAW;QAChB,IAAI,CAAC,MAAM,CAAC,cAAc,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,EAAE,CAAC,CAAC;IAClD,CAAC;CACF;AAZD,oDAYC;;;;;;;;ACnBD,oR;;;;;;;ACAA;AACA;;;AAGA;AACA,qCAAsC,iBAAiB,EAAE;;AAEzD;;;AAGA;AACA,2C;;;;;;;;;;;;;;;;;;;ACXA,yEAAgD;AAOhD,IAAa,iBAAiB,GAA9B;IAEE;IACA,CAAC;IAED,QAAQ;IACR,CAAC;CAEF;AARY,iBAAiB;IAL7B,gBAAS,CAAC;QACT,QAAQ,EAAE,eAAe;QACzB,qGAAyC;QACzC,qGAAyC;KAC1C,CAAC;;GACW,iBAAiB,CAQ7B;AARY,8CAAiB;;;;;;;;;;;ACP9B,0DAAyB;AAEzB,qEAAqC;AAGrC;IAeE,YAAY,UAAsB;QAd3B,aAAQ,GAAG,GAAG,CAAC;QACf,WAAM,GAAG,EAAC,GAAG,EAAE,EAAE,EAAE,KAAK,EAAE,GAAG,EAAE,MAAM,EAAE,EAAE,EAAE,IAAI,EAAE,GAAG,EAAC,CAAC;QAGrD,YAAO,GAAG,GAAG,CAAC;QACd,MAAC,GAAG,CAAC,CAAC;QAEN,iBAAY,GAAG,EAAE,CAAC;QAClB,cAAS,GAAiB,IAAI,iBAAO,EAAE,CAAC;QAIzC,eAAU,GAAG,IAAI,CAAC,SAAS,CAAC,YAAY,EAAE,CAAC;QAGhD,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;IAC/B,CAAC;IAEM,IAAI,CAAC,QAA0B,EAAE,iBAAyB;QAC/D,IAAI,CAAC,iBAAiB,GAAG,iBAAiB,CAAC;QAC3C,MAAM,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC;QACnC,IAAI,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;QACzB,IAAI,KAAK,GAAG,UAAU,CAAC,WAAW,GAAG,MAAM,CAAC,KAAK,GAAG,MAAM,CAAC,IAAI,CAAC;QAChE,IAAI,MAAM,GAAG,UAAU,CAAC,YAAY,GAAG,MAAM,CAAC,GAAG,GAAG,MAAM,CAAC,MAAM,CAAC;QAClE,EAAE,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,CAAC;QAC9C,MAAM,GAAG,GAAG,IAAI,CAAC,GAAG,GAAG,EAAE,CAAC,MAAM,CAAC,UAAU,CAAC;aACzC,IAAI,CAAC,OAAO,EAAE,KAAK,GAAG,MAAM,CAAC,KAAK,GAAG,MAAM,CAAC,IAAI,CAAC;aACjD,IAAI,CAAC,QAAQ,EAAE,MAAM,GAAG,MAAM,CAAC,GAAG,GAAG,MAAM,CAAC,MAAM,CAAC;aACnD,MAAM,CAAC,GAAG,CAAC;aACX,IAAI,CAAC,WAAW,EAAE,YAAY,GAAG,MAAM,CAAC,IAAI,GAAG,GAAG,GAAG,MAAM,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC;QAC1E,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC,CAAC;QAC/C,IAAI,IAAI,GAAG,EAAE,CAAC,SAAS,CAAC,QAAQ,EAAE,CAAC,CAAM,KAAK,CAAC,CAAC,QAAQ,CAAC,CAAC;QACpD,IAAK,CAAC,EAAE,GAAG,MAAM,GAAG,CAAC,CAAC;QACtB,IAAK,CAAC,EAAE,GAAG,CAAC,CAAC;QACnB,EAAE,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC;YAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,IAAI,IAAI,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;QACjF,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QACjB,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;IACpB,CAAC;IAEO,QAAQ,CAAC,CAAC,EAAE,eAAwB,KAAK;QAC/C,EAAE,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;YACf,EAAE,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC;gBACjB,yBAAyB;gBACzB,CAAC,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,IAAI,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;YAC5C,CAAC;YAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;gBAC5B,CAAC,CAAC,SAAS,GAAG,CAAC,CAAC,QAAQ,CAAC;gBACzB,CAAC,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,IAAI,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;gBAC3C,CAAC,CAAC,QAAQ,GAAG,IAAI,CAAC;YACpB,CAAC;QACH,CAAC;IACH,CAAC;IAEO,KAAK,CAAC,CAAC;QACb,EAAE,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC;YAAC,CAAC,CAAC,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,IAAI,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;QACpF,EAAE,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;YACf,CAAC,CAAC,SAAS,GAAG,CAAC,CAAC,QAAQ,CAAC;YACzB,CAAC,CAAC,QAAQ,GAAG,IAAI,CAAC;QACpB,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,CAAC,CAAC,QAAQ,GAAG,CAAC,CAAC,SAAS,CAAC;YACzB,CAAC,CAAC,SAAS,GAAG,IAAI,CAAC;QACrB,CAAC;QACD,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;IACjB,CAAC;IAEO,MAAM,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC;QAC1B,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE;IAC9F,CAAC;IAEM,MAAM,CAAC,MAAM;QAClB,IAAI,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACvC,IAAI,KAAK,GAAG,QAAQ,CAAC,WAAW,EAAE,EAChC,KAAK,GAAG,QAAQ,CAAC,WAAW,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;QAC1C,KAAK,CAAC,OAAO,CAAC,CAAC;YACb,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,KAAK,GAAG,IAAI,CAAC,OAAO;QAC9B,CAAC,CAAC,CAAC;QACH,IAAI,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,EAAE,GAAG,IAAI,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;QAExF,IAAI,SAAS,GAAG,IAAI,CAAC,KAAK,EAAE,CAAC,MAAM,CAAC,GAAG,CAAC;aACrC,IAAI,CAAC,OAAO,EAAE,MAAM,CAAC;aACrB,IAAI,CAAC,WAAW,EAAE,CAAC,IAAI,YAAY,GAAG,MAAM,CAAC,EAAE,GAAG,GAAG,GAAG,MAAM,CAAC,EAAE,GAAG,GAAG,CAAC;aACxE,EAAE,CAAC,aAAa,EAAE,CAAC;YAClB,EAAE,CAAC,KAAK,CAAC,cAAc,EAAE,CAAC;YAC1B,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;QAC9B,CAAC,CAAC;aACD,EAAE,CAAC,OAAO,EAAE,CAAC,IAAI,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;QACnC,SAAS,CAAC,MAAM,CAAC,QAAQ,CAAC;aACvB,IAAI,CAAC,OAAO,EAAE,MAAM,CAAC;aACrB,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC;aACf,KAAK,CAAC,MAAM,EAAE,CAAC,CAAM,KAAK,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC;QACnD,SAAS,CAAC,MAAM,CAAC,MAAM,CAAC;aACrB,IAAI,CAAC,IAAI,EAAE,OAAO,CAAC;aACnB,IAAI,CAAC,GAAG,EAAE,CAAC,CAAM,KAAK,CAAC,CAAC,QAAQ,IAAI,CAAC,CAAC,SAAS,GAAG,CAAC,EAAE,GAAG,EAAE,CAAC;aAC3D,IAAI,CAAC,aAAa,EAAE,CAAC,CAAM,KAAK,CAAC,CAAC,QAAQ,IAAI,CAAC,CAAC,SAAS,GAAG,KAAK,GAAG,OAAO,CAAC;aAC5E,IAAI,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC;aAC1B,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC1B,IAAI,UAAU,GAAG,SAAS,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;QACvC,UAAU,CAAC,UAAU,EAAE;aACpB,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC;aACvB,IAAI,CAAC,WAAW,EAAE,CAAC,CAAC;YACnB,MAAM,CAAC,YAAY,GAAG,CAAC,CAAC,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC;QAC9C,CAAC,CAAC,CAAC;QACL,UAAU,CAAC,MAAM,CAAC,aAAa,CAAC;aAC7B,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,YAAY,CAAC;aAC5B,KAAK,CAAC,MAAM,EAAE,CAAC,CAAM,KAAK,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC;aAC/C,IAAI,CAAC,QAAQ,EAAE,SAAS,CAAC,CAAC;QAC7B,IAAI,QAAQ,GAAG,IAAI,CAAC,IAAI,EAAE,CAAC,UAAU,EAAE;aACpC,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC;aACvB,IAAI,CAAC,WAAW,EAAE,CAAC,CAAC;YACnB,MAAM,CAAC,YAAY,GAAG,MAAM,CAAC,CAAC,GAAG,GAAG,GAAG,MAAM,CAAC,CAAC,GAAG,GAAG,CAAC;QACxD,CAAC,CAAC;aACD,MAAM,EAAE,CAAC;QACZ,QAAQ,CAAC,MAAM,CAAC,QAAQ,CAAC;aACtB,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;QACnB,QAAQ,CAAC,MAAM,CAAC,MAAM,CAAC;aACpB,KAAK,CAAC,cAAc,EAAE,IAAI,CAAC,CAAC;QAE/B,IAAI,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,WAAW,CAAC;aACvC,IAAI,CAAC,KAAK,EAAE,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC;QAC1B,IAAI,SAAS,GAAG,IAAI,CAAC,KAAK,EAAE,CAAC,MAAM,CAAC,MAAM,EAAE,GAAG,CAAC;aAC7C,IAAI,CAAC,OAAO,EAAE,MAAM,CAAC;aACrB,IAAI,CAAC,GAAG,EAAE,CAAC;YACV,IAAI,CAAC,GAAG,EAAC,CAAC,EAAE,MAAM,CAAC,EAAE,EAAE,CAAC,EAAE,MAAM,CAAC,EAAE,EAAC,CAAC;YACrC,MAAM,CAAC,eAAe,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;QACxC,CAAC,CAAC,CAAC;QACL,IAAI,UAAU,GAAG,SAAS,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;QACvC,UAAU,CAAC,UAAU,EAAE;aACpB,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC;aACvB,IAAI,CAAC,GAAG,EAAE,CAAC;YACV,MAAM,CAAC,eAAe,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC;QAC/C,CAAC,CAAC,CAAC;QACL,IAAI,QAAQ,GAAG,IAAI,CAAC,IAAI,EAAE,CAAC,UAAU,EAAE;aACpC,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC;aACvB,IAAI,CAAC,GAAG,EAAE,CAAC;YACV,IAAI,CAAC,GAAG,EAAC,CAAC,EAAE,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE,MAAM,CAAC,CAAC,EAAC,CAAC;YACnC,MAAM,CAAC,eAAe,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;QACxC,CAAC,CAAC;aACD,MAAM,EAAE,CAAC;QACZ,KAAK,CAAC,OAAO,CAAC,CAAC,CAAM;YACnB,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC;YACX,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC;QACb,CAAC,CAAC,CAAC;IACL,CAAC;IAEO,YAAY,CAAC,IAAI;QACvB,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,KAAK,IAAI,CAAC,iBAAiB,GAAG,SAAS,GAAG,IAAI,CAAC,SAAS,GAAG,gBAAgB,GAAG,MAAM;IACzG,CAAC;IAEO,KAAK;QACX,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC;QACZ,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC;IAChB,CAAC;CACF;AAxJD,0CAwJC;;;;;;;;AC7JD,kVAAkV,QAAQ,8N;;;;;;;ACA1V;AACA;;;AAGA;AACA,sDAAuD,iCAAiC,EAAE,uCAAuC,wBAAwB,6BAA6B,yBAAyB,EAAE;;AAEjN;;;AAGA;AACA,2C;;;;;;;;;;;;;;;;;;;ACXA,yEAA2G;AAC3G,mHAAmD;AACnD,iFAAgD;AAChD,oGAA6D;AAC7D,sGAAgE;AAEhE,0HAA4F;AAI5F,2EAA2C;AAE3C,kHAA8D;AAO9D,IAAa,mBAAmB,GAAhC;IAeE,YAAoB,aAA4B,EAAU,MAAc;QAApD,kBAAa,GAAb,aAAa,CAAe;QAAU,WAAM,GAAN,MAAM,CAAQ;QAZ9D,aAAQ,GAAyB,IAAI,mBAAY,CAAC,IAAI,CAAC,CAAC;QAK1D,kBAAa,GAAmB,EAAE,CAAC;QAKpC,gBAAW,GAAU,EAAE,CAAC;IAG/B,CAAC;IAED,QAAQ;QACN,MAAM,eAAe,GAAG,IAAI,CAAC,eAAe,GAAG,IAAI,kCAAe,CAAC,IAAI,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;QAC3F,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,QAAQ;YAC5D,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;YACzB,EAAE,CAAC,CAAC,IAAI,CAAC,uBAAuB,CAAC;gBAAC,IAAI,CAAC,uBAAuB,CAAC,WAAW,EAAE,CAAC;YAC7E,IAAI,CAAC,uBAAuB,GAAG,IAAI,4CAAoB,CAAqB,QAAQ,EAAE,uCAAkB,CAAC,eAAe,EAAE,CAAC,CAAa;gBACtI,IAAI,CAAC,cAAc,CAAC,QAAQ,EAAE,eAAe,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC;YACtE,CAAC,CAAC,CAAC,SAAS,EAAE,CAAC;YACf,IAAI,CAAC,cAAc,CAAC,QAAQ,EAAE,eAAe,EAAE,QAAQ,CAAC,UAAU,EAAE,CAAC,WAAW,EAAE,CAAC,EAAE,CAAC,CAAC;QACzF,CAAC,CAAC,CAAC,CAAC;QAEJ,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,eAAe,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC;YAC5D,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC;gBAAC,MAAM,CAAC;YAC3B,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC;gBACd,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC;gBACvB,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;YAC3B,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC,CAAC;QAEJ,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,EAAE;YACtD,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC;gBAAC,MAAM,CAAC;YAC3B,MAAM,WAAW,GAAG,EAAE,CAAC;YACvB,IAAI,IAAI,GAAG,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAE,CAAC,SAAS,CAAC,EAAE,CAAe,CAAC;YAClE,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC;gBAAC,MAAM,CAAC;YAClB,OAAO,IAAI,EAAE,CAAC;gBACZ,WAAW,CAAC,IAAI,CAAC;oBACf,EAAE,EAAE,IAAI,CAAC,EAAE;oBACX,IAAI,EAAE,IAAI,CAAC,IAAI;oBACf,IAAI,EAAE,IAAI,CAAC,IAAI;oBACf,KAAK,EAAE,IAAI,CAAC,QAAQ,EAAE,CAAC,KAAK;iBAC7B,CAAC,CAAC;gBACH,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC;oBAAC,KAAK,CAAC;gBAC7B,IAAI,GAAG,IAAI,CAAC,SAAS,EAAE,CAAC;YAC1B,CAAC;YACD,IAAI,CAAC,WAAW,GAAG,WAAW,CAAC,OAAO,EAAE,CAAC;YACzC,IAAI,CAAC,cAAc,GAAG,EAAE,CAAC;YACzB,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,eAAe,EAAE,EAAE,CAAC,CAAC;QAC/D,CAAC,CAAC,CAAC,CAAC;IACN,CAAC;IAED,WAAW;QACT,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,CAAC,WAAW,EAAE,CAAC,CAAC;IACnD,CAAC;IAEO,cAAc,CAAC,QAAmB,EAAE,eAAgC,EAAE,UAAkB;QAC9F,MAAM,WAAW,GAAG,CAAC,SAAqB,EAAE,MAAwB;YAClE,MAAM,SAAS,GAAG,IAAI,oCAAgB,CAAC,SAAS,CAAC,EAAE,EAAE,SAAS,CAAC,IAAI,EAAE,SAAS,CAAC,IAAI,CAAC,CAAC;YACrF,SAAS,CAAC,MAAM,GAAG,MAAM,CAAC;YAC1B,SAAS,CAAC,QAAQ,GAAG,SAAS,CAAC,gBAAgB,EAAE;iBAC9C,MAAM,CAAC,cAAc;gBACpB,MAAM,CAAC,cAAc,CAAC,eAAe,EAAE,CAAC;YAC1C,CAAC,CAAC;iBACD,GAAG,CAAC,CAAC,IAAI,WAAW,CAAC,CAAe,EAAE,SAAS,CAAC,CAAC,CAAC;YACrD,EAAE,CAAC,CAAC,SAAS,CAAC,EAAE,KAAK,UAAU,CAAC,CAAC,CAAC;gBAChC,SAAS,CAAC,QAAQ,GAAG,IAAI,CAAC;gBAC1B,IAAI,MAAM,GAAG,SAAS,CAAC;gBACvB,OAAO,IAAI,EAAE,CAAC;oBACZ,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC;oBACvB,EAAE,CAAC,CAAC,CAAC,MAAM,CAAC;wBAAC,KAAK,CAAC;oBACnB,MAAM,CAAC,QAAQ,GAAG,IAAI,CAAC;gBACzB,CAAC;YACH,CAAC;YACD,MAAM,CAAC,SAAS,CAAC;QACnB,CAAC,CAAC;QACF,MAAM,QAAQ,GAAG,QAAQ,CAAC,UAAU,EAAE,CAAC,WAAW,EAAE,CAAC;QACrD,MAAM,IAAI,GAAG,IAAI,oCAAgB,CAAC,QAAQ,CAAC,EAAE,EAAE,QAAQ,CAAC,IAAI,EAAE,QAAQ,CAAC,IAAI,CAAC,CAAC;QAC7E,IAAI,CAAC,QAAQ,GAAI,QAAQ,CAAC,gBAAgB,EAAqB,CAAC,GAAG,CAAC,CAAC,IAAI,WAAW,CAAC,CAAe,EAAE,IAAI,CAAC,CAAC,CAAC;QAC7G,eAAe,CAAC,IAAI,CAAC,IAAI,EAAE,UAAU,CAAC,CAAC;IACzC,CAAC;IAEM,aAAa,CAAC,EAAU;QAC7B,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;IACzB,CAAC;CACF;AA1FmB;IAAjB,gBAAS,CAAC,KAAK,CAAC;;gDAAK;AACI;IAAzB,gBAAS,CAAC,wBAAa,CAAC;;sDAAW;AAC1B;IAAT,aAAM,EAAE;kDAAW,mBAAY,oBAAZ,mBAAY;qDAAkC;AACzD;IAAR,YAAK,EAAE;kDAAiB,uBAAU,oBAAV,uBAAU;2DAAS;AACnC;IAAR,YAAK,EAAE;kDAAiB,uBAAU,oBAAV,uBAAU;2DAAY;AALpC,mBAAmB;IAL/B,gBAAS,CAAC;QACT,QAAQ,EAAE,gBAAgB;QAC1B,uGAA0C;QAC1C,uGAA0C;KAC3C,CAAC;yDAgBmC,+BAAa,oBAAb,+BAAa,sDAAkB,aAAM,oBAAN,aAAM;GAf7D,mBAAmB,CA2F/B;AA3FY,kDAAmB;;;;;;;;;ACnBhC,4CAA4C,q9BAAq9B,MAAM,ygBAAygB,gsCAAgsC,yuC;;;;;;;ACAhtF;AACA;;;AAGA;AACA;;AAEA;;;AAGA;AACA,2C;;;;;;;;;;;;;;;;;;;ACXA,yEAAkE;AAClE,2EAA2C;AAC3C,oGAA6D;AAC7D,4EAAiE;AAIjE,4FAA8D;AAC9D,8FAAwD;AAExD,kEAAqC;AACrC,uEAA0C;AAE1C,0HAA4F;AAC5F,mGAA6D;AAC7D,2DAA8B;AAQ9B,IAAa,gBAAgB,GAA7B;IAYE,YAAoB,OAAsB,EAAU,EAAe,EAAU,WAAwB;QAAjF,YAAO,GAAP,OAAO,CAAe;QAAU,OAAE,GAAF,EAAE,CAAa;QAAU,gBAAW,GAAX,WAAW,CAAa;QAR7F,sBAAiB,GAAmB,EAAE,CAAC;QACxC,UAAK,GAAa,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;QAC7B,aAAQ,GAAwC,EAAE,CAAC;QAClD,kBAAa,GAAmB,EAAE,CAAC;IAQ3C,CAAC;IAED,IAAI,QAAQ;QACV,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,UAAU,CAAc,CAAC;IAChD,CAAC;IAED,IAAI,KAAK;QACP,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,OAAO,CAAc,CAAC;IAC7C,CAAC;IAED,WAAW;QACT,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,CAAC,WAAW,EAAE,CAAC,CAAC;QACjD,IAAI,CAAC,iBAAiB,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,CAAC,WAAW,EAAE,CAAC,CAAC;IACvD,CAAC;IAED,QAAQ;QACN,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,EAAE,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC,CAAC,OAAO,CAAC,QAAQ,IAAI,wCAAkB,CAAC,MAAM,CAAC,QAAQ,EAAE,uCAAkB,CAAC,eAAe,CAAC,CAAC;aAC9K,SAAS,CAAC,CAAC,CAAa;YACvB,MAAM,GAAG,GAAG,CAAC,CAAC,MAAmB,CAAC;YAClC,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;gBACX,MAAM,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;oBACtB,KAAK,QAAQ;wBACX,MAAM,eAAe,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,KAAiB,CAAC;wBACjE,EAAE,CAAC,CAAC,eAAe,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;4BAC/B,MAAM,KAAK,GAAG,eAAe,CAAC,GAAG,CAAC,CAAC,IAAI,GAAG,CAAC,UAAU,EAAE,CAAC,YAAY,CAAC,CAAC,CAAe,CAAC,CAAC;4BACvF,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,gBAAgB,CAAC,KAAK,CAAC,CAAC;4BACzC,IAAI,CAAC,aAAa,EAAE,CAAC;wBACvB,CAAC;wBACD,KAAK,CAAC;oBACR,KAAK,WAAW;wBACd,MAAM,kBAAkB,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,KAAiB,CAAC;wBACpE,EAAE,CAAC,CAAC,kBAAkB,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;4BAClC,MAAM,KAAK,GAAG,kBAAkB,CAAC,GAAG,CAAC,CAAC,IAAI,GAAG,CAAC,UAAU,EAAE,CAAC,YAAY,CAAC,CAAC,CAAe,CAAC,CAAC;4BAC1F,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,mBAAmB,CAAC,KAAK,CAAC,CAAC;4BAC5C,IAAI,CAAC,aAAa,EAAE,CAAC;wBACvB,CAAC;wBACD,KAAK,CAAC;gBACV,CAAC;YACH,CAAC;QACH,CAAC,CAAC,CAAC,CAAC;QAEN,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,cAAc,CAAC,IAAI,CAAC,cAAc,CAAC;aAC7E,SAAS,CAAC,CAAC,CAAC,KAAK,EAAE,QAAQ,CAAC;YAC3B,IAAI,CAAC,cAAc,EAAE,CAAC;YACtB,EAAE,CAAC,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;gBACrB,MAAM,UAAU,GAAmB,KAAK,CAAC,GAAG,CAAC,MAAM,IAAI,QAAQ,CAAC,UAAU,EAAE,CAAC,YAAY,CAAC,MAAM,CAAC,IAAI,QAAQ,CAAC,UAAU,EAAE,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC,CAAC;gBACjJ,EAAE,CAAC,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,CAAC,QAAQ,KAAK,qBAAS,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;oBAC9D,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;oBACzB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,gBAAgB,CAAC,UAA0B,CAAC,CAAC;oBAC9D,IAAI,CAAC,aAAa,EAAE,CAAC;gBACvB,CAAC;gBACD,IAAI,CAAC,EAAE,CAAC,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,CAAC,QAAQ,KAAK,qBAAS,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;oBACnE,IAAI,CAAC,QAAQ,GAAG,WAAW,CAAC;oBAC5B,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,mBAAmB,CAAC,UAA0B,CAAC,CAAC;oBACjE,IAAI,CAAC,aAAa,EAAE,CAAC;gBACvB,CAAC;gBAAC,IAAI,CAAC,EAAE,CAAC,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,QAAQ,KAAK,qBAAS,CAAC,SAAS,CAAC;oBACjE,UAAU,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,QAAQ,KAAK,qBAAS,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;oBAC3D,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;gBACxB,CAAC;gBACD,IAAI,CAAC,CAAC;oBACJ,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;gBACrB,CAAC;YACH,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;YACrB,CAAC;QACH,CAAC,CAAC,CAAC,CAAC;IACR,CAAC;IAEO,aAAa;QACnB,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY;aAE/C,SAAS,CAAC,KAAK,IAAI,IAAI,CAAC,WAAW,CAAC,sBAAsB,CAAC,IAAI,CAAC,QAAQ,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;IACxF,CAAC;IAEO,cAAc;QACpB,IAAI,CAAC,iBAAiB,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,CAAC,WAAW,EAAE,CAAC,CAAC;QACrD,IAAI,CAAC,iBAAiB,GAAG,EAAE,CAAC;IAC9B,CAAC;IAED,gBAAgB,CAAC,UAAwB;QACvC,IAAI,MAAM,GAAQ,EAAE,CAAC;QACrB,MAAM,CAAC,QAAQ,GAAG,QAAQ,CAAC;QAC3B,MAAM,CAAC,KAAK,GAAG,EAAE,CAAC;QAClB,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;QAC7C,MAAM,CAAC,KAAK,GAAG,IAAI,CAAC,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;QACjC,MAAM,CAAC,IAAI,GAAG,EAAE,CAAC;QACjB,MAAM,CAAC,IAAI,GAAG,EAAE,CAAC;QACjB,MAAM,CAAC,IAAI,GAAG,EAAE,CAAC;QACjB,MAAM,CAAC,UAAU,GAAG,CAAC,CAAC;QACtB,MAAM,CAAC,WAAW,GAAG,EAAE,CAAC;QACxB,MAAM,CAAC,IAAI,GAAG,EAAE,CAAC;QACjB,MAAM,CAAC,MAAM,GAAG,EAAE,CAAC;QAEnB,IAAI,IAAI,GAAG,IAAI,CAAC,EAAE,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;QAEjC,EAAE,CAAC,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;YACxD,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;QAClD,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,UAAU,CAAC,aAAa,CAAC,CAAC;YAC3C,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,OAAO,EAAE,CAAC;QAC7B,CAAC;QACD,EAAE,CAAC,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;YACxD,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;QAClD,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,UAAU,CAAC,aAAa,CAAC,CAAC;YAC3C,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,OAAO,EAAE,CAAC;QAC7B,CAAC;QACD,EAAE,CAAC,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,UAAU,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;YACpE,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC;QAC9D,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC,UAAU,CAAC,aAAa,CAAC,CAAC;QACnD,CAAC;QACD,EAAE,CAAC,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,WAAW,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;YACtE,IAAI,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC;QAChE,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,IAAI,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC,UAAU,CAAC,aAAa,CAAC,CAAC;YAClD,IAAI,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC,OAAO,EAAE,CAAC;QACpC,CAAC;QAGD,4BAA4B;QAE5B,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAED,mBAAmB,CAAC,UAAwB;QAC1C,IAAI,MAAM,GAAQ,EAAE,CAAC;QACrB,MAAM,CAAC,QAAQ,GAAG,WAAW,CAAC;QAC9B,MAAM,CAAC,KAAK,GAAG,EAAE,CAAC;QAClB,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;QAC7C,MAAM,CAAC,IAAI,GAAG,EAAE,CAAC;QACjB,MAAM,CAAC,IAAI,GAAG,EAAE,CAAC;QACjB,MAAM,CAAC,QAAQ,GAAG,IAAI,CAAC,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;QAEpC,IAAI,IAAI,GAAG,IAAI,CAAC,EAAE,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;QAEjC,EAAE,CAAC,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;YACxD,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;QAClD,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,UAAU,CAAC,aAAa,CAAC,CAAC;QAC7C,CAAC;QACD,EAAE,CAAC,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;YACxD,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;QAClD,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,UAAU,CAAC,aAAa,CAAC,CAAC;QAC7C,CAAC;QACD,EAAE,CAAC,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,WAAW,EAAE,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;YAC5E,UAAU,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YAC1E,MAAM,OAAO,GAAG,UAAU,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE,CAAC,GAAG,CAAC,CAAC,IAAI,IAAI,CAAC,EAAE,CAAC,KAAK,CAAC,EAAC,EAAE,EAAE,CAAC,CAAC,EAAE,EAAE,IAAI,EAAE,CAAC,CAAC,IAAI,EAAC,CAAC,CAAC,CAAC;YAC9F,IAAI,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,UAAU,CAAc,CAAC;YAC9C,KAAK,CAAC,KAAK,EAAE,CAAC;YACd,OAAO,CAAC,OAAO,CAAC,CAAC,IAAI,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;QACtC,CAAC;QAED,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAED,6CAA6C;IAC7C,oEAAoE;IACpE,IAAI;IAEJ,UAAU;QACR,IAAI,CAAC,WAAW,CAAC,YAAY,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,KAAiB,EAAE,eAAe,CAAC,CAAC;IAC1G,CAAC;IAED,aAAa,CAAC,KAAa;QACzB,MAAM,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,UAAU,CAAc,CAAC;QACrD,MAAM,EAAE,GAAG,KAAK,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,KAAe,CAAC;QAC3D,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;IACtD,CAAC;CAEF;AAzLU;IAAR,YAAK,EAAE;kDAAkB,uBAAU,oBAAV,uBAAU;yDAAW;AACtC;IAAR,YAAK,EAAE;kDAAiB,uBAAU,oBAAV,uBAAU;wDAAY;AAFpC,gBAAgB;IAL5B,gBAAS,CAAC;QACT,QAAQ,EAAE,aAAa;QACvB,iGAAuC;QACvC,iGAAuC;KACxC,CAAC;yDAa6B,+BAAa,oBAAb,+BAAa,sDAAc,mBAAW,oBAAX,mBAAW,sDAAuB,0BAAW,oBAAX,0BAAW;GAZ1F,gBAAgB,CA0L5B;AA1LY,4CAAgB;;;;;;;;;;;;ACvB7B;IAGE,YAAY,eAAe,GAAG,IAAI;QAChC,EAAE,CAAC,CAAC,eAAe,KAAK,SAAS,CAAC;YAAC,MAAM,IAAI,KAAK,CAAC,0EAA0E,CAAC,CAAC;QAE/H,IAAI,CAAC,QAAQ,GAAG,MAAM,CAAC;IAEzB,CAAC;IAED,mEAAmE;IACnE,oEAAoE;IACpE,+DAA+D;IAC/D,yFAAyF;IACzF,yDAAyD;IACzD,gBAAgB;IAChB,sBAAsB,CAAC,MAAM;QAE3B,gCAAgC;QAChC,EAAE,CAAC,CAAC,IAAI,CAAC,QAAQ,KAAK,MAAM,CAAC,CAAC,CAAC;YAE7B,IAAI;YACJ,EAAE,CAAC,CAAC,MAAM,CAAC,EAAE,KAAK,SAAS,CAAC,CAAC,CAAC;gBAC5B,MAAM,CAAC,cAAc,CAAC,MAAM,EAAE,IAAI,EAAE;oBAClC,GAAG;wBACD,MAAM,CAAC,MAAM,CAAC,iBAAiB,EAAE,CAAC,CAAC;oBACrC,CAAC;oBACD,UAAU,EAAE,IAAI,EAAE,YAAY,EAAE,IAAI;iBACrC,CAAC,CAAC;YACL,CAAC;YAED,IAAI;YACJ,EAAE,CAAC,CAAC,MAAM,CAAC,EAAE,KAAK,SAAS,CAAC,CAAC,CAAC;gBAC5B,MAAM,CAAC,cAAc,CAAC,MAAM,EAAE,IAAI,EAAE;oBAClC,GAAG;wBACD,MAAM,CAAC,MAAM,CAAC,iBAAiB,EAAE,CAAC,CAAC;oBACrC,CAAC;oBACD,UAAU,EAAE,IAAI,EAAE,YAAY,EAAE,IAAI;iBACrC,CAAC,CAAC;YACL,CAAC;YAED,SAAS;YACT,EAAE,CAAC,CAAC,MAAM,CAAC,OAAO,KAAK,SAAS,CAAC,CAAC,CAAC;gBACjC,MAAM,CAAC,cAAc,CAAC,MAAM,EAAE,SAAS,EAAE;oBACvC,GAAG;wBACD,MAAM,CAAC,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,KAAK,GAAG,CAAC;oBACpC,CAAC;oBACD,UAAU,EAAE,IAAI,EAAE,YAAY,EAAE,IAAI;iBACrC,CAAC,CAAC;YACL,CAAC;YAED,SAAS;YACT,EAAE,CAAC,CAAC,MAAM,CAAC,OAAO,KAAK,SAAS,CAAC,CAAC,CAAC;gBACjC,MAAM,CAAC,cAAc,CAAC,MAAM,EAAE,SAAS,EAAE;oBACvC,GAAG;wBACD,MAAM,CAAC,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,MAAM,GAAG,CAAC;oBACrC,CAAC;oBACD,UAAU,EAAE,IAAI,EAAE,YAAY,EAAE,IAAI;iBACrC,CAAC,CAAC;YACL,CAAC;YAED,WAAW;YACX,EAAE,CAAC,CAAC,MAAM,CAAC,SAAS,KAAK,SAAS,CAAC,CAAC,CAAC;gBACnC,MAAM,CAAC,cAAc,CAAC,MAAM,EAAE,WAAW,EAAE;oBACzC,GAAG;wBACD,MAAM,CAAC,MAAM,CAAC,KAAK,GAAG,CAAC;oBACzB,CAAC;oBACD,UAAU,EAAE,IAAI,EAAE,YAAY,EAAE,IAAI;iBACrC,CAAC,CAAC;YACL,CAAC;YAED,YAAY;YACZ,EAAE,CAAC,CAAC,MAAM,CAAC,UAAU,KAAK,SAAS,CAAC,CAAC,CAAC;gBACpC,MAAM,CAAC,cAAc,CAAC,MAAM,EAAE,YAAY,EAAE;oBAC1C,GAAG;wBACD,MAAM,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC;oBAC1B,CAAC;oBACD,UAAU,EAAE,IAAI,EAAE,YAAY,EAAE,IAAI;iBACrC,CAAC,CAAC;YACL,CAAC;YAED,eAAe;YACf,EAAE,CAAC,CAAC,MAAM,CAAC,aAAa,KAAK,SAAS,CAAC,CAAC,CAAC;gBACvC,MAAM,CAAC,cAAc,CAAC,MAAM,EAAE,eAAe,EAAE;oBAC7C,GAAG;wBACD,EAAE,CAAC,CAAC,MAAM,CAAC,MAAM,KAAK,SAAS,CAAC,CAAC,CAAC;4BAChC,MAAM,CAAC,MAAM,CAAC,KAAK,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC;wBACxC,CAAC;wBAAC,IAAI,CAAC,CAAC;4BACN,MAAM,CAAC,CAAC,CAAC;wBACX,CAAC;oBACH,CAAC;oBACD,UAAU,EAAE,IAAI,EAAE,YAAY,EAAE,IAAI;iBACrC,CAAC,CAAC;YACL,CAAC;YAED,eAAe;YACf,EAAE,CAAC,CAAC,MAAM,CAAC,aAAa,KAAK,SAAS,CAAC,CAAC,CAAC;gBACvC,MAAM,CAAC,cAAc,CAAC,MAAM,EAAE,eAAe,EAAE;oBAC7C,GAAG;wBACD,EAAE,CAAC,CAAC,MAAM,CAAC,MAAM,KAAK,SAAS,CAAC,CAAC,CAAC;4BAChC,MAAM,CAAC,MAAM,CAAC,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC;wBACzC,CAAC;wBAAC,IAAI,CAAC,CAAC;4BACN,MAAM,CAAC,CAAC,CAAC;wBACX,CAAC;oBACH,CAAC;oBACD,UAAU,EAAE,IAAI,EAAE,YAAY,EAAE,IAAI;iBACrC,CAAC,CAAC;YACL,CAAC;YAED,EAAE,CAAC,CAAC,MAAM,CAAC,QAAQ,IAAI,MAAM,CAAC,MAAM,KAAK,SAAS,CAAC,CAAC,CAAC;gBACnD,MAAM,CAAC,cAAc,CAAC,MAAM,EAAE,QAAQ,EAAE;oBACtC,GAAG;wBACD,MAAM,CAAC,MAAM,CAAC,KAAK,GAAG,CAAC;oBACzB,CAAC;oBACD,UAAU,EAAE,IAAI,EAAE,YAAY,EAAE,IAAI;iBACrC,CAAC,CAAC;YACL,CAAC;YAED,gCAAgC;YAChC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;cA+CE;QACJ,CAAC;QAED,wEAAwE;QACxE,gCAAgC;QAChC,MAAM,CAAC,oBAAoB,GAAG,IAAI,CAAC;IACrC,CAAC;IAED;;;;;;;;;;MAUE;IAEF,YAAY,CAAC,KAAK,EAAE,MAAM;QAExB,0BAA0B;QAC1B,EAAE,CAAC,CAAC,CAAC,MAAM,CAAC,oBAAoB,CAAC;YAAC,IAAI,CAAC,sBAAsB,CAAC,MAAM,CAAC,CAAC;QAEtE,IAAI,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,EAAE,MAAM,EAAE,EAAE,EAAE,EAAE,EAAE,SAAS,EAAE,GAAG,CAAC;QAE5D,6DAA6D;QAC7D,uCAAuC;QACvC,EAAE,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC;YAClB,KAAK,GAAG,QAAQ,CAAC;QACnB,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,KAAK,GAAG,WAAW,CAAC;QACtB,CAAC;QAED,WAAW;QACX,EAAE,CAAC,CAAC,KAAK,KAAK,WAAW,CAAC,CAAC,CAAC;YAE1B,wCAAwC;YACxC,IAAI,GAAG,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,aAAa,CAAC;YACvC,KAAK,GAAG,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,KAAK,GAAG,MAAM,CAAC,aAAa,CAAC;YACvD,GAAG,GAAG,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,aAAa,CAAC;YACtC,MAAM,GAAG,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,MAAM,GAAG,MAAM,CAAC,aAAa,CAAC;YAEzD,qDAAqD;YACrD,GAAG,GAAG,KAAK,CAAC,CAAC,GAAG,IAAI,IAAI,KAAK,CAAC,CAAC,GAAG,KAAK,IAAI,KAAK,CAAC,CAAC,GAAG,GAAG,IAAI,KAAK,CAAC,CAAC,GAAG,MAAM,CAAC;QAC/E,CAAC;QAED,QAAQ;QACR,EAAE,CAAC,CAAC,KAAK,KAAK,QAAQ,CAAC,CAAC,CAAC;YAEvB,6CAA6C;YAC7C,sBAAsB;YACtB,IAAI,EAAE,GAAG,KAAK,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,MAAM,CAAC,aAAa,EACrE,EAAE,GAAG,KAAK,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,GAAG,MAAM,CAAC,aAAa,EACpE,SAAS,GAAG,IAAI,CAAC,IAAI,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,CAAC;YAE3C,uDAAuD;YACvD,6CAA6C;YAC7C,GAAG,GAAG,SAAS,GAAG,MAAM,CAAC,MAAM,CAAC;QAClC,CAAC;QAED,wCAAwC;QACxC,MAAM,CAAC,GAAG,CAAC;IACb,CAAC;IAED;;;;;;;;MAQE;IAEF,aAAa,CAAC,EAAE,EAAE,EAAE,EAAE,MAAM,GAAG,KAAK;QAElC,0BAA0B;QAC1B,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,oBAAoB,CAAC;YAAC,IAAI,CAAC,sBAAsB,CAAC,EAAE,CAAC,CAAC;QAC9D,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,oBAAoB,CAAC;YAAC,IAAI,CAAC,sBAAsB,CAAC,EAAE,CAAC,CAAC;QAE9D,IAAI,EAAE,EAAE,EAAE,EAAE,SAAS,EAAE,aAAa,EAAE,GAAG,CAAC;QAE1C,yDAAyD;QACzD,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;YACX,wBAAwB;YACxB,EAAE,GAAG,CAAC,EAAE,CAAC,EAAE,GAAG,CAAC,EAAE,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,aAAa,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,GAAG,CAAC,EAAE,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,aAAa,CAAC,CAAC;YAC/F,EAAE,GAAG,CAAC,EAAE,CAAC,EAAE,GAAG,CAAC,EAAE,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,aAAa,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,GAAG,CAAC,EAAE,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,aAAa,CAAC,CAAC;QACjG,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,uBAAuB;YACvB,EAAE,GAAG,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,aAAa,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,aAAa,CAAC,CAAC;YAC7F,EAAE,GAAG,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,aAAa,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,aAAa,CAAC,CAAC;QAC/F,CAAC;QAED,sDAAsD;QACtD,iDAAiD;QACjD,SAAS,GAAG,IAAI,CAAC,IAAI,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,CAAC;QAEzC,uCAAuC;QACvC,aAAa,GAAG,EAAE,CAAC,MAAM,GAAG,EAAE,CAAC,MAAM,CAAC;QAEtC,4DAA4D;QAC5D,iCAAiC;QACjC,GAAG,GAAG,SAAS,GAAG,aAAa,CAAC;QAEhC,wCAAwC;QACxC,MAAM,CAAC,GAAG,CAAC;IACb,CAAC;IAED;;;;;;;;;;;;;MAaE;IAEF,eAAe,CAAC,EAAE,EAAE,EAAE,EAAE,MAAM,GAAG,KAAK,EAAE,MAAM,GAAG,KAAK;QAEpD,0BAA0B;QAC1B,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,oBAAoB,CAAC;YAAC,IAAI,CAAC,sBAAsB,CAAC,EAAE,CAAC,CAAC;QAC9D,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,oBAAoB,CAAC;YAAC,IAAI,CAAC,sBAAsB,CAAC,EAAE,CAAC,CAAC;QAE9D,IAAI,SAAS,EAAE,aAAa,EAAE,OAAO,EACnC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,GAAG,EAAC,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,SAAS,EAAC,EAChD,GAAG,GAAG,KAAK,CAAC;QAEd,yDAAyD;QAEzD,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;YACX,wBAAwB;YACxB,EAAE,GAAG,CAAC,EAAE,CAAC,EAAE,GAAG,CAAC,EAAE,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,aAAa,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,GAAG,CAAC,EAAE,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,aAAa,CAAC,CAAC;YAC/F,EAAE,GAAG,CAAC,EAAE,CAAC,EAAE,GAAG,CAAC,EAAE,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,aAAa,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,GAAG,CAAC,EAAE,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,aAAa,CAAC,CAAC;QACjG,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,uBAAuB;YACvB,EAAE,GAAG,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,aAAa,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,aAAa,CAAC,CAAC;YAC7F,EAAE,GAAG,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,aAAa,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,aAAa,CAAC,CAAC;QAC/F,CAAC;QAED,sDAAsD;QACtD,iDAAiD;QACjD,SAAS,GAAG,IAAI,CAAC,IAAI,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,CAAC;QAEzC,gDAAgD;QAChD,aAAa,GAAG,EAAE,CAAC,MAAM,GAAG,EAAE,CAAC,MAAM,CAAC;QAEtC,mCAAmC;QACnC,EAAE,CAAC,CAAC,SAAS,GAAG,aAAa,CAAC,CAAC,CAAC;YAE9B,+BAA+B;YAC/B,GAAG,GAAG,IAAI,CAAC;YAEX,gDAAgD;YAChD,OAAO,GAAG,aAAa,GAAG,SAAS,CAAC;YAEpC,8DAA8D;YAC9D,8DAA8D;YAC9D,kEAAkE;YAClE,+DAA+D;YAC/D,+DAA+D;YAC/D,2DAA2D;YAC3D,IAAI,cAAc,GAAG,GAAG,CAAC;YACzB,OAAO,IAAI,cAAc,CAAC;YAE1B,sBAAsB;YACtB,sDAAsD;YACtD,EAAE,GAAG,EAAE,GAAG,SAAS,CAAC;YACpB,EAAE,GAAG,EAAE,GAAG,SAAS,CAAC;YAEpB,mDAAmD;YACnD,6DAA6D;YAC7D,qBAAqB;YACrB,EAAE,CAAC,CAAC,IAAI,OAAO,GAAG,EAAE,CAAC;YACrB,EAAE,CAAC,CAAC,IAAI,OAAO,GAAG,EAAE,CAAC;YAErB,QAAQ;YACR,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;gBACX,0EAA0E;gBAC1E,8CAA8C;gBAC9C,yEAAyE;gBACzE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC;gBACT,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC;gBAEV,2BAA2B;gBAC3B,IAAI,CAAC,gBAAgB,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;YAC/B,CAAC;QACH,CAAC;QACD,MAAM,CAAC,GAAG,CAAC;IACb,CAAC;IAED;;;;;;;;;;MAUE;IAEF,qBAAqB,CAAC,EAAE,EAAE,EAAE,EAAE,MAAM,GAAG,KAAK;QAE1C,0BAA0B;QAC1B,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,oBAAoB,CAAC;YAAC,IAAI,CAAC,sBAAsB,CAAC,EAAE,CAAC,CAAC;QAC9D,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,oBAAoB,CAAC;YAAC,IAAI,CAAC,sBAAsB,CAAC,EAAE,CAAC,CAAC;QAE9D,IAAI,aAAa,EAAE,OAAO,EAAE,KAAK,EAAE,KAAK;QACtC,uDAAuD;QACvD,CAAC,GAAG;YACF,EAAE,EAAE,SAAS;YACb,EAAE,EAAE,SAAS;YACb,EAAE,EAAE,SAAS;YACb,EAAE,EAAE,SAAS;YACb,SAAS,EAAE,SAAS;YACpB,EAAE,EAAE,SAAS;YACb,EAAE,EAAE,SAAS;YACb,MAAM,EAAE,SAAS;YACjB,MAAM,EAAE,SAAS;SAClB,EACD,GAAG,GAAG,EAAC,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,SAAS,EAAC,EAClC,GAAG,GAAG,EAAC,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,SAAS,EAAC,EAClC,GAAG,GAAG,EAAC,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,SAAS,EAAC,EAClC,GAAG,GAAG,EAAC,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,SAAS,EAAC,EAClC,GAAG,GAAG,KAAK,CAAC;QAEd,iDAAiD;QACjD,EAAE,CAAC,IAAI,GAAG,EAAE,CAAC,IAAI,IAAI,CAAC,CAAC;QACvB,EAAE,CAAC,IAAI,GAAG,EAAE,CAAC,IAAI,IAAI,CAAC,CAAC;QAEvB,yDAAyD;QACzD,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;YAEX,wBAAwB;YACxB,CAAC,CAAC,EAAE,GAAG,CAAC,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,MAAM,GAAG,EAAE,CAAC,aAAa,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,MAAM,GAAG,EAAE,CAAC,aAAa,CAAC,CAAC;YACvF,CAAC,CAAC,EAAE,GAAG,CAAC,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,MAAM,GAAG,EAAE,CAAC,aAAa,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,MAAM,GAAG,EAAE,CAAC,aAAa,CAAC,CAAC;QACzF,CAAC;QAAC,IAAI,CAAC,CAAC;YAEN,uBAAuB;YACvB,CAAC,CAAC,EAAE,GAAG,CAAC,EAAE,CAAC,CAAC,GAAG,EAAE,CAAC,MAAM,GAAG,EAAE,CAAC,aAAa,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,GAAG,EAAE,CAAC,MAAM,GAAG,EAAE,CAAC,aAAa,CAAC,CAAC;YACrF,CAAC,CAAC,EAAE,GAAG,CAAC,EAAE,CAAC,CAAC,GAAG,EAAE,CAAC,MAAM,GAAG,EAAE,CAAC,aAAa,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,GAAG,EAAE,CAAC,MAAM,GAAG,EAAE,CAAC,aAAa,CAAC,CAAC;QACvF,CAAC;QAED,sDAAsD;QACtD,iDAAiD;QACjD,CAAC,CAAC,SAAS,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC;QAEnD,gDAAgD;QAChD,aAAa,GAAG,EAAE,CAAC,MAAM,GAAG,EAAE,CAAC,MAAM,CAAC;QAEtC,mCAAmC;QACnC,EAAE,CAAC,CAAC,CAAC,CAAC,SAAS,GAAG,aAAa,CAAC,CAAC,CAAC;YAEhC,+BAA+B;YAC/B,GAAG,GAAG,IAAI,CAAC;YAEX,gDAAgD;YAChD,OAAO,GAAG,aAAa,GAAG,CAAC,CAAC,SAAS,CAAC;YAEtC,2CAA2C;YAC3C,OAAO,IAAI,GAAG,CAAC;YAEf,uBAAuB;YACvB,sDAAsD;YACtD,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,SAAS,CAAC;YAC1B,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,SAAS,CAAC;YAE1B,4BAA4B;YAC5B,sEAAsE;YACtE,CAAC,CAAC,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,GAAG,OAAO,GAAG,CAAC,CAAC,CAAC;YACxC,CAAC,CAAC,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,GAAG,OAAO,GAAG,CAAC,CAAC,CAAC;YAExC,kDAAkD;YAClD,CAAC,EAAE,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,KAAK,GAAG,CAAC,GAAG,KAAK,GAAG,CAAC,CAAC,CAAC;YACvC,CAAC,EAAE,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,KAAK,GAAG,CAAC,GAAG,KAAK,GAAG,CAAC,CAAC,CAAC;YAEvC,6CAA6C;YAC7C,yDAAyD;YACzD,wBAAwB;YACxB,EAAE,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,MAAM,GAAG,KAAK,CAAC,CAAC;YACjC,EAAE,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,MAAM,GAAG,KAAK,CAAC,CAAC;YAEjC,8BAA8B;YAC9B,EAAE,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,MAAM,GAAG,CAAC,KAAK,CAAC,CAAC;YAClC,EAAE,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,MAAM,GAAG,CAAC,KAAK,CAAC,CAAC;YAElC,iDAAiD;YAEjD,uCAAuC;YACvC,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE,CAAC;YACZ,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC;YAEb,kCAAkC;YAElC,iDAAiD;YACjD,IAAI,GAAG,GAAG,EAAE,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE,CAAC;YAEtC,kDAAkD;YAClD,GAAG,CAAC,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC,EAAE,CAAC;YACnB,GAAG,CAAC,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC,EAAE,CAAC;YAEnB,0EAA0E;YAC1E,IAAI,GAAG,GAAG,EAAE,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,SAAS,CAAC,GAAG,EAAE,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,SAAS,CAAC,CAAC;YAEtE,0DAA0D;YAC1D,GAAG,CAAC,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,SAAS,CAAC,CAAC;YACnC,GAAG,CAAC,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,SAAS,CAAC,CAAC;YAEnC,kCAAkC;YAElC,iDAAiD;YACjD,IAAI,GAAG,GAAG,EAAE,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE,CAAC;YAEtC,kDAAkD;YAClD,GAAG,CAAC,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC,EAAE,CAAC;YACnB,GAAG,CAAC,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC,EAAE,CAAC;YAEnB,0EAA0E;YAC1E,IAAI,GAAG,GAAG,EAAE,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,SAAS,CAAC,GAAG,EAAE,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,SAAS,CAAC,CAAC;YAEtE,sDAAsD;YACtD,GAAG,CAAC,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,SAAS,CAAC,CAAC;YACnC,GAAG,CAAC,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,SAAS,CAAC,CAAC;YAEnC,iCAAiC;YAEjC,WAAW;YACX,mBAAmB;YACnB,EAAE,CAAC,MAAM,GAAG,EAAE,CAAC;YACf,EAAE,CAAC,MAAM,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;YAC5B,EAAE,CAAC,MAAM,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;YAE5B,WAAW;YACX,mBAAmB;YACnB,EAAE,CAAC,MAAM,GAAG,EAAE,CAAC;YACf,EAAE,CAAC,MAAM,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;YAC5B,EAAE,CAAC,MAAM,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;YAE5B,gDAAgD;YAChD,gDAAgD;YAChD,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,MAAM,CAAC,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC;YAC9B,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,MAAM,CAAC,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC;YAC9B,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,MAAM,CAAC,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC;YAC9B,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,MAAM,CAAC,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC;QAChC,CAAC;QACD,MAAM,CAAC,GAAG,CAAC;IACb,CAAC;IAED;;;;;;MAME;IAEF,uBAAuB,CAAC,cAAc,EAAE,MAAM,GAAG,KAAK;QACpD,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,cAAc,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;YAE/C,gDAAgD;YAChD,IAAI,EAAE,GAAG,cAAc,CAAC,CAAC,CAAC,CAAC;YAC3B,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,cAAc,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;gBAEnD,iDAAiD;gBACjD,IAAI,EAAE,GAAG,cAAc,CAAC,CAAC,CAAC,CAAC;gBAE3B,uDAAuD;gBACvD,6DAA6D;gBAC7D,yCAAyC;gBACzC,IAAI,CAAC,qBAAqB,CAAC,EAAE,EAAE,EAAE,EAAE,MAAM,CAAC,CAAC;YAC7C,CAAC;QACH,CAAC;IACH,CAAC;IAED;;;;;;;;;;;MAWE;IAEF,kBAAkB,CAAC,EAAE,EAAE,EAAE,EAAE,MAAM,GAAG,KAAK,EAAE,MAAM,GAAG,IAAI;QAEtD,0BAA0B;QAC1B,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,oBAAoB,CAAC;YAAC,IAAI,CAAC,sBAAsB,CAAC,EAAE,CAAC,CAAC;QAC9D,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,oBAAoB,CAAC;YAAC,IAAI,CAAC,sBAAsB,CAAC,EAAE,CAAC,CAAC;QAE9D,IAAI,SAAS,EAAE,kBAAkB,EAAE,mBAAmB,EACpD,QAAQ,EAAE,QAAQ,EAAE,EAAE,EAAE,EAAE,CAAC;QAE7B,+BAA+B;QAC/B,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;YACX,EAAE,GAAG,CAAC,EAAE,CAAC,EAAE,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,SAAS,CAAC,GAAG,EAAE,CAAC,aAAa,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,SAAS,CAAC,GAAG,EAAE,CAAC,aAAa,CAAC,CAAC;YAC/G,EAAE,GAAG,CAAC,EAAE,CAAC,EAAE,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,UAAU,CAAC,GAAG,EAAE,CAAC,aAAa,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,UAAU,CAAC,GAAG,EAAE,CAAC,aAAa,CAAC,CAAC;QACnH,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,+BAA+B;YAC/B,+BAA+B;YAC/B,EAAE,GAAG,CAAC,EAAE,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,SAAS,CAAC,GAAG,EAAE,CAAC,aAAa,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,SAAS,CAAC,GAAG,EAAE,CAAC,aAAa,CAAC,CAAC;YAC7G,EAAE,GAAG,CAAC,EAAE,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,UAAU,CAAC,GAAG,EAAE,CAAC,aAAa,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,UAAU,CAAC,GAAG,EAAE,CAAC,aAAa,CAAC,CAAC;QACjH,CAAC;QAED,sDAAsD;QACtD,kBAAkB,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,SAAS,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC;QACrE,mBAAmB,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,UAAU,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC;QAExE,wDAAwD;QACxD,EAAE,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,kBAAkB,CAAC,CAAC,CAAC;YAEtC,iCAAiC;YACjC,yDAAyD;YACzD,EAAE,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,mBAAmB,CAAC,CAAC,CAAC;gBAEvC,yCAAyC;gBACzC,2DAA2D;gBAC3D,QAAQ,GAAG,kBAAkB,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;gBAC7C,QAAQ,GAAG,mBAAmB,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;gBAE9C,iDAAiD;gBACjD,sDAAsD;gBACtD,cAAc;gBAEd,EAAE,CAAC,CAAC,QAAQ,IAAI,QAAQ,CAAC,CAAC,CAAC;oBACzB,0CAA0C;oBAC1C,mCAAmC;oBAEnC,EAAE,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC;wBACX,SAAS,GAAG,KAAK,CAAC;wBAClB,yCAAyC;wBACzC,EAAE,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,GAAG,QAAQ,CAAC;oBACzB,CAAC;oBAAC,IAAI,CAAC,CAAC;wBACN,SAAS,GAAG,QAAQ,CAAC;wBACrB,yCAAyC;wBACzC,EAAE,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,GAAG,QAAQ,CAAC;oBACzB,CAAC;oBAED,QAAQ;oBACR,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;wBACX,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC;wBAEZ;;;;;;;;0BAQE;oBAEJ,CAAC;gBACH,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,0CAA0C;oBAC1C,mCAAmC;oBAEnC,EAAE,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC;wBACX,SAAS,GAAG,MAAM,CAAC;wBACnB,yCAAyC;wBACzC,EAAE,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,GAAG,QAAQ,CAAC;oBACzB,CAAC;oBAAC,IAAI,CAAC,CAAC;wBACN,SAAS,GAAG,OAAO,CAAC;wBACpB,yCAAyC;wBACzC,EAAE,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,GAAG,QAAQ,CAAC;oBACzB,CAAC;oBAED,QAAQ;oBACR,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;wBACX,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC;wBAEZ;;;;;;;;0BAQE;oBAEJ,CAAC;gBACH,CAAC;YACH,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,cAAc;YAChB,CAAC;QACH,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,cAAc;QAChB,CAAC;QAED,gEAAgE;QAChE,mEAAmE;QACnE,MAAM,CAAC,SAAS,CAAC;IACnB,CAAC;IAED;;;;;;;;;MASE;IAEF,gBAAgB,CAAC,EAAE,EAAE,EAAE,EAAE,MAAM,GAAG,KAAK;QAErC,0BAA0B;QAC1B,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,oBAAoB,CAAC;YAAC,IAAI,CAAC,sBAAsB,CAAC,EAAE,CAAC,CAAC;QAC9D,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,oBAAoB,CAAC;YAAC,IAAI,CAAC,sBAAsB,CAAC,EAAE,CAAC,CAAC;QAE9D,IAAI,GAAG,EAAE,kBAAkB,EAAE,mBAAmB,EAAE,EAAE,EAAE,EAAE,CAAC;QAEzD,qDAAqD;QACrD,GAAG,GAAG,KAAK,CAAC;QAEZ,+BAA+B;QAC/B,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;YACX,EAAE,GAAG,CAAC,EAAE,CAAC,EAAE,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,SAAS,CAAC,GAAG,EAAE,CAAC,aAAa,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,SAAS,CAAC,GAAG,EAAE,CAAC,aAAa,CAAC,CAAC;YAC/G,EAAE,GAAG,CAAC,EAAE,CAAC,EAAE,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,UAAU,CAAC,GAAG,EAAE,CAAC,aAAa,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,UAAU,CAAC,GAAG,EAAE,CAAC,aAAa,CAAC,CAAC;QACnH,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,EAAE,GAAG,CAAC,EAAE,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,SAAS,CAAC,GAAG,EAAE,CAAC,aAAa,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,SAAS,CAAC,GAAG,EAAE,CAAC,aAAa,CAAC,CAAC;YAC7G,EAAE,GAAG,CAAC,EAAE,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,UAAU,CAAC,GAAG,EAAE,CAAC,aAAa,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,UAAU,CAAC,GAAG,EAAE,CAAC,aAAa,CAAC,CAAC;QACjH,CAAC;QAED,sDAAsD;QACtD,kBAAkB,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,SAAS,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC;QACrE,mBAAmB,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,UAAU,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC;QAExE,qCAAqC;QACrC,EAAE,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,kBAAkB,CAAC,CAAC,CAAC;YAEtC,oEAAoE;YACpE,EAAE,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,mBAAmB,CAAC,CAAC,CAAC;gBAEvC,0CAA0C;gBAC1C,GAAG,GAAG,IAAI,CAAC;YACb,CAAC;YAAC,IAAI,CAAC,CAAC;gBAEN,oCAAoC;gBACpC,GAAG,GAAG,KAAK,CAAC;YACd,CAAC;QACH,CAAC;QAAC,IAAI,CAAC,CAAC;YAEN,oCAAoC;YACpC,GAAG,GAAG,KAAK,CAAC;QACd,CAAC;QAED,wCAAwC;QACxC,MAAM,CAAC,GAAG,CAAC;IACb,CAAC;IAED;;;;;;;;;MASE;IAEF,sBAAsB,CAAC,EAAE,EAAE,EAAE,EAAE,MAAM,GAAG,KAAK;QAE3C,0BAA0B;QAC1B,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,oBAAoB,CAAC;YAAC,IAAI,CAAC,sBAAsB,CAAC,EAAE,CAAC,CAAC;QAC9D,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,oBAAoB,CAAC;YAAC,IAAI,CAAC,sBAAsB,CAAC,EAAE,CAAC,CAAC;QAE9D,IAAI,MAAM,EAAE,SAAS,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAE1C,wCAAwC;QACxC,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;YACX,GAAG,GAAG,EAAE,CAAC,EAAE,CAAC;YACZ,GAAG,GAAG,EAAE,CAAC,EAAE;YACX,GAAG,GAAG,EAAE,CAAC,EAAE,CAAC;YACZ,GAAG,GAAG,EAAE,CAAC,EAAE,CAAC;QACd,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,GAAG,GAAG,EAAE,CAAC,CAAC,CAAC;YACX,GAAG,GAAG,EAAE,CAAC,CAAC,CAAC;YACX,GAAG,GAAG,EAAE,CAAC,CAAC,CAAC;YACX,GAAG,GAAG,EAAE,CAAC,CAAC,CAAC;QACb,CAAC;QAED,+CAA+C;QAC/C,EAAE,CAAC,CAAC,GAAG,GAAG,EAAE,CAAC,aAAa,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,UAAU,CAAC,GAAG,EAAE,CAAC,aAAa,CAAC,CAAC,CAAC;YAE9E,gDAAgD;YAChD,mCAAmC;YACnC,EAAE,CAAC,CAAC,GAAG,GAAG,EAAE,CAAC,aAAa,GAAG,GAAG,GAAG,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,SAAS,CAAC,GAAG,EAAE,CAAC,aAAa,CAAC,CAAC,CAAC;gBACjF,MAAM,GAAG,SAAS,CAAC;YACrB,CAAC;YAAC,IAAI,CAAC,EAAE,CAAC,CAAC,GAAG,GAAG,EAAE,CAAC,aAAa,GAAG,GAAG,GAAG,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,SAAS,CAAC,GAAG,EAAE,CAAC,aAAa,CAAC,CAAC,CAAC;gBACxF,MAAM,GAAG,UAAU,CAAC;YACtB,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,MAAM,GAAG,WAAW,CAAC;YACvB,CAAC;QACH,CAAC;QAID,IAAI,CAAC,EAAE,CAAC,CAAC,GAAG,GAAG,EAAE,CAAC,aAAa,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,UAAU,CAAC,GAAG,EAAE,CAAC,aAAa,CAAC,CAAC,CAAC;YAEnF,6DAA6D;YAC7D,gCAAgC;YAChC,EAAE,CAAC,CAAC,GAAG,GAAG,EAAE,CAAC,aAAa,GAAG,GAAG,GAAG,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,SAAS,CAAC,GAAG,EAAE,CAAC,aAAa,CAAC,CAAC,CAAC;gBACjF,MAAM,GAAG,YAAY,CAAC;YACxB,CAAC;YAAC,IAAI,CAAC,EAAE,CAAC,CAAC,GAAG,GAAG,EAAE,CAAC,aAAa,GAAG,GAAG,GAAG,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,SAAS,CAAC,GAAG,EAAE,CAAC,aAAa,CAAC,CAAC,CAAC;gBACxF,MAAM,GAAG,aAAa,CAAC;YACzB,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,MAAM,GAAG,cAAc,CAAC;YAC1B,CAAC;QACH,CAAC;QAID,IAAI,CAAC,CAAC;YACJ,EAAE,CAAC,CAAC,GAAG,GAAG,EAAE,CAAC,aAAa,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,SAAS,CAAC,GAAG,EAAE,CAAC,aAAa,CAAC,CAAC,CAAC;gBAC7E,MAAM,GAAG,YAAY,CAAC;YACxB,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,MAAM,GAAG,aAAa,CAAC;YACzB,CAAC;QACH,CAAC;QAED,4CAA4C;QAC5C,mBAAmB;QACnB,EAAE,CAAC,CAAC,MAAM,KAAK,WAAW,IAAI,MAAM,KAAK,cAAc,IAAI,MAAM,KAAK,YAAY,IAAI,MAAM,KAAK,aAAa,CAAC,CAAC,CAAC;YAE/G,qEAAqE;YACrE,SAAS,GAAG,IAAI,CAAC,gBAAgB,CAAC,EAAE,EAAE,EAAE,EAAE,MAAM,CAAC,CAAC;QACpD,CAAC;QAID,IAAI,CAAC,CAAC;YACJ,IAAI,KAAK,GAAG,EAAC,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,SAAS,EAAC,CAAC;YAEzC,MAAM,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;gBACf,KAAK,SAAS;oBACZ,KAAK,CAAC,CAAC,GAAG,GAAG,GAAG,EAAE,CAAC,aAAa,CAAC;oBACjC,KAAK,CAAC,CAAC,GAAG,GAAG,GAAG,EAAE,CAAC,aAAa,CAAC;oBACjC,KAAK,CAAC;gBAER,KAAK,UAAU;oBACb,KAAK,CAAC,CAAC,GAAG,GAAG,GAAG,EAAE,CAAC,KAAK,GAAG,EAAE,CAAC,aAAa,CAAC;oBAC5C,KAAK,CAAC,CAAC,GAAG,GAAG,GAAG,EAAE,CAAC,aAAa,CAAC;oBACjC,KAAK,CAAC;gBAER,KAAK,YAAY;oBACf,KAAK,CAAC,CAAC,GAAG,GAAG,GAAG,EAAE,CAAC,aAAa,CAAC;oBACjC,KAAK,CAAC,CAAC,GAAG,GAAG,GAAG,EAAE,CAAC,MAAM,GAAG,EAAE,CAAC,aAAa,CAAC;oBAC7C,KAAK,CAAC;gBAER,KAAK,aAAa;oBAChB,KAAK,CAAC,CAAC,GAAG,GAAG,GAAG,EAAE,CAAC,KAAK,GAAG,EAAE,CAAC,aAAa,CAAC;oBAC5C,KAAK,CAAC,CAAC,GAAG,GAAG,GAAG,EAAE,CAAC,MAAM,GAAG,EAAE,CAAC,aAAa,CAAC;YACjD,CAAC;YAED,wDAAwD;YACxD,SAAS,GAAG,IAAI,CAAC,kBAAkB,CAAC,EAAE,EAAE,KAAK,EAAE,MAAM,CAAC,CAAC;QACzD,CAAC;QAED,qCAAqC;QACrC,8DAA8D;QAC9D,EAAE,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC;YACd,MAAM,CAAC,MAAM,CAAC;QAChB,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,MAAM,CAAC,SAAS,CAAC;QACnB,CAAC;IACH,CAAC;IAED;;;;;;;;;MASE;IAEF,kBAAkB,CAAC,EAAE,EAAE,KAAK,EAAE,MAAM,GAAG,KAAK;QAE1C,0BAA0B;QAC1B,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,oBAAoB,CAAC;YAAC,IAAI,CAAC,sBAAsB,CAAC,EAAE,CAAC,CAAC;QAE9D,6CAA6C;QAC7C,8EAA8E;QAC9E,2DAA2D;QAC3D,UAAU;QACV,KAAK,CAAC,QAAQ,GAAG,CAAC,CAAC;QACnB,KAAK,CAAC,KAAK,GAAG,KAAK,CAAC,QAAQ,CAAC;QAC7B,KAAK,CAAC,MAAM,GAAG,GAAG,CAAC;QACnB,KAAK,CAAC,OAAO,GAAG,KAAK,CAAC,CAAC,CAAC;QACxB,KAAK,CAAC,OAAO,GAAG,KAAK,CAAC,CAAC,CAAC;QACxB,KAAK,CAAC,EAAE,GAAG,KAAK,CAAC,CAAC,CAAC;QACnB,KAAK,CAAC,EAAE,GAAG,KAAK,CAAC,CAAC,CAAC;QACnB,KAAK,CAAC,aAAa,GAAG,CAAC,CAAC;QACxB,KAAK,CAAC,aAAa,GAAG,CAAC,CAAC;QACxB,KAAK,CAAC,oBAAoB,GAAG,IAAI,CAAC;QAClC,MAAM,CAAC,IAAI,CAAC,aAAa,CAAC,EAAE,EAAE,KAAK,EAAE,MAAM,CAAC,CAAC;IAC/C,CAAC;IAED;;;;;;;;;MASE;IAEF,wBAAwB,CAAC,EAAE,EAAE,EAAE,EAAE,MAAM,GAAG,KAAK,EAAE,MAAM,GAAG,KAAK;QAE7D,0BAA0B;QAC1B,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,oBAAoB,CAAC;YAAC,IAAI,CAAC,sBAAsB,CAAC,EAAE,CAAC,CAAC;QAC9D,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,oBAAoB,CAAC;YAAC,IAAI,CAAC,sBAAsB,CAAC,EAAE,CAAC,CAAC;QAE9D,IAAI,MAAM,EAAE,SAAS,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAE1C,4CAA4C;QAC5C,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;YACX,GAAG,GAAG,EAAE,CAAC,EAAE,CAAC;YACZ,GAAG,GAAG,EAAE,CAAC,EAAE,CAAC;YACZ,GAAG,GAAG,EAAE,CAAC,EAAE,CAAC;YACZ,GAAG,GAAG,EAAE,CAAC,EAAE,CAAC;QACd,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,GAAG,GAAG,EAAE,CAAC,CAAC,CAAC;YACX,GAAG,GAAG,EAAE,CAAC,CAAC,CAAC;YACX,GAAG,GAAG,EAAE,CAAC,CAAC,CAAC;YACX,GAAG,GAAG,EAAE,CAAC,CAAC,CAAC;QACb,CAAC;QAED,+CAA+C;QAC/C,EAAE,CAAC,CAAC,GAAG,GAAG,EAAE,CAAC,aAAa,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,UAAU,CAAC,GAAG,EAAE,CAAC,aAAa,CAAC,CAAC,CAAC;YAE9E,gDAAgD;YAChD,mCAAmC;YACnC,EAAE,CAAC,CAAC,GAAG,GAAG,EAAE,CAAC,aAAa,GAAG,GAAG,GAAG,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,SAAS,CAAC,GAAG,EAAE,CAAC,aAAa,CAAC,CAAC,CAAC;gBACjF,MAAM,GAAG,SAAS,CAAC;YACrB,CAAC;YAAC,IAAI,CAAC,EAAE,CAAC,CAAC,GAAG,GAAG,EAAE,CAAC,aAAa,GAAG,GAAG,GAAG,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,SAAS,CAAC,GAAG,EAAE,CAAC,aAAa,CAAC,CAAC,CAAC;gBACxF,MAAM,GAAG,UAAU,CAAC;YACtB,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,MAAM,GAAG,WAAW,CAAC;YACvB,CAAC;QACH,CAAC;QAID,IAAI,CAAC,EAAE,CAAC,CAAC,GAAG,GAAG,EAAE,CAAC,aAAa,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,UAAU,CAAC,GAAG,EAAE,CAAC,aAAa,CAAC,CAAC,CAAC;YAEnF,6DAA6D;YAC7D,gCAAgC;YAChC,EAAE,CAAC,CAAC,GAAG,GAAG,EAAE,CAAC,aAAa,GAAG,GAAG,GAAG,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,SAAS,CAAC,GAAG,EAAE,CAAC,aAAa,CAAC,CAAC,CAAC;gBACjF,MAAM,GAAG,YAAY,CAAC;YACxB,CAAC;YAAC,IAAI,CAAC,EAAE,CAAC,CAAC,GAAG,GAAG,EAAE,CAAC,aAAa,GAAG,GAAG,GAAG,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,SAAS,CAAC,GAAG,EAAE,CAAC,aAAa,CAAC,CAAC,CAAC;gBACxF,MAAM,GAAG,aAAa,CAAC;YACzB,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,MAAM,GAAG,cAAc,CAAC;YAC1B,CAAC;QACH,CAAC;QAID,IAAI,CAAC,CAAC;YACJ,EAAE,CAAC,CAAC,GAAG,GAAG,EAAE,CAAC,aAAa,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,SAAS,CAAC,GAAG,EAAE,CAAC,aAAa,CAAC,CAAC,CAAC;gBAC7E,MAAM,GAAG,YAAY,CAAC;YACxB,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,MAAM,GAAG,aAAa,CAAC;YACzB,CAAC;QACH,CAAC;QAED,4CAA4C;QAC5C,mBAAmB;QACnB,EAAE,CAAC,CAAC,MAAM,KAAK,WAAW,IAAI,MAAM,KAAK,cAAc,IAAI,MAAM,KAAK,YAAY,IAAI,MAAM,KAAK,aAAa,CAAC,CAAC,CAAC;YAE/G,qEAAqE;YACrE,SAAS,GAAG,IAAI,CAAC,kBAAkB,CAAC,EAAE,EAAE,EAAE,EAAE,MAAM,EAAE,MAAM,CAAC,CAAC;QAC9D,CAAC;QAID,IAAI,CAAC,CAAC;YACJ,IAAI,KAAK,GAAG,EAAC,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,SAAS,EAAC,CAAC;YAEzC,MAAM,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;gBACf,KAAK,SAAS;oBACZ,KAAK,CAAC,CAAC,GAAG,GAAG,GAAG,EAAE,CAAC,aAAa,CAAC;oBACjC,KAAK,CAAC,CAAC,GAAG,GAAG,GAAG,EAAE,CAAC,aAAa,CAAC;oBACjC,KAAK,CAAC;gBAER,KAAK,UAAU;oBACb,KAAK,CAAC,CAAC,GAAG,GAAG,GAAG,EAAE,CAAC,KAAK,GAAG,EAAE,CAAC,aAAa,CAAC;oBAC5C,KAAK,CAAC,CAAC,GAAG,GAAG,GAAG,EAAE,CAAC,aAAa,CAAC;oBACjC,KAAK,CAAC;gBAER,KAAK,YAAY;oBACf,KAAK,CAAC,CAAC,GAAG,GAAG,GAAG,EAAE,CAAC,aAAa,CAAC;oBACjC,KAAK,CAAC,CAAC,GAAG,GAAG,GAAG,EAAE,CAAC,MAAM,GAAG,EAAE,CAAC,aAAa,CAAC;oBAC7C,KAAK,CAAC;gBAER,KAAK,aAAa;oBAChB,KAAK,CAAC,CAAC,GAAG,GAAG,GAAG,EAAE,CAAC,KAAK,GAAG,EAAE,CAAC,aAAa,CAAC;oBAC5C,KAAK,CAAC,CAAC,GAAG,GAAG,GAAG,EAAE,CAAC,MAAM,GAAG,EAAE,CAAC,aAAa,CAAC;YACjD,CAAC;YAED,wDAAwD;YACxD,SAAS,GAAG,IAAI,CAAC,oBAAoB,CAAC,EAAE,EAAE,KAAK,EAAE,MAAM,EAAE,MAAM,CAAC,CAAC;QACnE,CAAC;QAED,EAAE,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC;YACd,MAAM,CAAC,MAAM,CAAC;QAChB,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,MAAM,CAAC,SAAS,CAAC;QACnB,CAAC;IACH,CAAC;IAED;;;;;;;;;MASE;IAEF,oBAAoB,CAAC,EAAE,EAAE,KAAK,EAAE,MAAM,GAAG,KAAK,EAAE,MAAM,GAAG,KAAK;QAE5D,0BAA0B;QAC1B,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,oBAAoB,CAAC;YAAC,IAAI,CAAC,sBAAsB,CAAC,EAAE,CAAC,CAAC;QAE9D,6CAA6C;QAC7C,8EAA8E;QAC9E,2DAA2D;QAC3D,UAAU;QACV,KAAK,CAAC,QAAQ,GAAG,CAAC,CAAC;QACnB,KAAK,CAAC,KAAK,GAAG,KAAK,CAAC,QAAQ,CAAC;QAC7B,KAAK,CAAC,MAAM,GAAG,GAAG,CAAC;QACnB,KAAK,CAAC,OAAO,GAAG,KAAK,CAAC,CAAC,CAAC;QACxB,KAAK,CAAC,OAAO,GAAG,KAAK,CAAC,CAAC,CAAC;QACxB,KAAK,CAAC,EAAE,GAAG,KAAK,CAAC,CAAC,CAAC;QACnB,KAAK,CAAC,EAAE,GAAG,KAAK,CAAC,CAAC,CAAC;QACnB,KAAK,CAAC,aAAa,GAAG,CAAC,CAAC;QACxB,KAAK,CAAC,aAAa,GAAG,CAAC,CAAC;QACxB,KAAK,CAAC,oBAAoB,GAAG,IAAI,CAAC;QAClC,MAAM,CAAC,IAAI,CAAC,eAAe,CAAC,EAAE,EAAE,KAAK,EAAE,MAAM,EAAE,MAAM,CAAC,CAAC;IACzD,CAAC;IAED;;;;;;;;;;;;MAYE;IAEF,gBAAgB,CAAC,CAAC,EAAE,CAAC;QAEnB,0BAA0B;QAC1B,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,oBAAoB,CAAC;YAAC,IAAI,CAAC,sBAAsB,CAAC,CAAC,CAAC,CAAC;QAE5D,IAAI,GAAG,EAAE,GAAG,EACV,EAAE,GAAG,EAAC,EAAE,EAAE,SAAS,EAAE,EAAE,EAAE,SAAS,EAAC,EACnC,EAAE,GAAG,EAAC,EAAE,EAAE,SAAS,EAAE,EAAE,EAAE,SAAS,EAAC,EACnC,MAAM,GAAG,EAAC,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,SAAS,EAAC,EACrC,IAAI,GAAG,CAAC,CAAC,IAAI,IAAI,CAAC,CAAC;QAErB,iDAAiD;QACjD,uCAAuC;QACvC,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC;QACX,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;QAEZ,oBAAoB;QACpB,CAAC,CAAC,SAAS,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;QAE/C,4BAA4B;QAC5B,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,SAAS,CAAC;QACzB,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,SAAS,CAAC;QAEzB,8CAA8C;QAE9C,yDAAyD;QACzD,GAAG,GAAG,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE,CAAC;QAEhC,0DAA0D;QAC1D,EAAE,CAAC,EAAE,GAAG,GAAG,GAAG,CAAC,CAAC,EAAE,CAAC;QACnB,EAAE,CAAC,EAAE,GAAG,GAAG,GAAG,CAAC,CAAC,EAAE,CAAC;QAEnB,kFAAkF;QAClF,GAAG,GAAG,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,SAAS,CAAC,CAAC;QAEhE,8DAA8D;QAC9D,EAAE,CAAC,EAAE,GAAG,GAAG,GAAG,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,SAAS,CAAC,CAAC;QACnC,EAAE,CAAC,EAAE,GAAG,GAAG,GAAG,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,SAAS,CAAC,CAAC;QAEnC,qDAAqD;QACrD,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC;QACZ,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC;QAEZ,sDAAsD;QACtD,MAAM,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC;QACzB,MAAM,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC;QAEzB,mDAAmD;QACnD,yCAAyC;QACzC,CAAC,CAAC,EAAE,GAAG,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC;QACvB,CAAC,CAAC,EAAE,GAAG,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC;IACzB,CAAC;IAED;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MA2CE;IAEF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;OAsFG;IACH,OAAO,CAAC,MAAM,EAAE,SAAS,EAAE,MAAM,GAAG,KAAK,EAAE,KAAK,GAAG,SAAS;QAE1D,0BAA0B;QAC1B,EAAE,CAAC,CAAC,CAAC,MAAM,CAAC,oBAAoB,CAAC;YAAC,IAAI,CAAC,sBAAsB,CAAC,MAAM,CAAC,CAAC;QAEtE,gEAAgE;QAChE,UAAU;QACV,EAAE,CAAC,CAAC,SAAS,CAAC,aAAa,KAAK,SAAS,CAAC;YAAC,SAAS,CAAC,aAAa,GAAG,CAAC,CAAC;QACvE,EAAE,CAAC,CAAC,SAAS,CAAC,aAAa,KAAK,SAAS,CAAC;YAAC,SAAS,CAAC,aAAa,GAAG,CAAC,CAAC;QACvE,EAAE,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,KAAK,SAAS,CAAC;YAAC,MAAM,CAAC,MAAM,CAAC,EAAE,GAAG,CAAC,CAAC;QACzD,EAAE,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,KAAK,SAAS,CAAC;YAAC,MAAM,CAAC,MAAM,CAAC,EAAE,GAAG,CAAC,CAAC;QAEzD,sDAAsD;QACtD,+CAA+C;QAC/C,IAAI,SAAS,GAAG,IAAI,GAAG,EAAE,CAAC;QAE1B,MAAM;QACN,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,aAAa,GAAG,SAAS,CAAC,CAAC,GAAG,MAAM,CAAC,MAAM,CAAC,EAAE,GAAG,SAAS,CAAC,aAAa,CAAC,CAAC,CAAC;YAE/F,uCAAuC;YACvC,EAAE,CAAC,CAAC,MAAM,CAAC;gBAAC,MAAM,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC;YAE5B,wCAAwC;YACxC,8BAA8B;YAC9B,EAAE,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC;gBAAC,MAAM,CAAC,EAAE,IAAI,MAAM,CAAC,IAAI,CAAC;YAE1C,4CAA4C;YAC5C,MAAM,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,GAAG,MAAM,CAAC,MAAM,CAAC,EAAE,GAAG,SAAS,CAAC,aAAa,GAAG,MAAM,CAAC,aAAa,CAAC;YAE3F,mDAAmD;YACnD,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;QACxB,CAAC;QAED,KAAK;QACL,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,aAAa,GAAG,SAAS,CAAC,CAAC,GAAG,MAAM,CAAC,MAAM,CAAC,EAAE,GAAG,SAAS,CAAC,aAAa,CAAC,CAAC,CAAC;YAC/F,EAAE,CAAC,CAAC,MAAM,CAAC;gBAAC,MAAM,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC;YAC5B,EAAE,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC;gBAAC,MAAM,CAAC,EAAE,IAAI,MAAM,CAAC,IAAI,CAAC;YAC1C,MAAM,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,GAAG,MAAM,CAAC,MAAM,CAAC,EAAE,GAAG,SAAS,CAAC,aAAa,GAAG,MAAM,CAAC,aAAa,CAAC;YAC3F,CAAC;YACD,SAAS,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;QACvB,CAAC;QAED,OAAO;QACP,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,aAAa,GAAG,MAAM,CAAC,KAAK,GAAG,SAAS,CAAC,KAAK,GAAG,SAAS,CAAC,aAAa,CAAC,CAAC,CAAC;YAC/F,EAAE,CAAC,CAAC,MAAM,CAAC;gBAAC,MAAM,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC;YAC5B,EAAE,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC;gBAAC,MAAM,CAAC,EAAE,IAAI,MAAM,CAAC,IAAI,CAAC;YAC1C,MAAM,CAAC,CAAC,GAAG,SAAS,CAAC,KAAK,GAAG,MAAM,CAAC,KAAK,GAAG,SAAS,CAAC,aAAa,GAAG,MAAM,CAAC,aAAa,CAAC;YAC3F,SAAS,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;QACzB,CAAC;QAED,QAAQ;QACR,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,aAAa,GAAG,MAAM,CAAC,MAAM,GAAG,SAAS,CAAC,MAAM,GAAG,SAAS,CAAC,aAAa,CAAC,CAAC,CAAC;YACjG,EAAE,CAAC,CAAC,MAAM,CAAC;gBAAC,MAAM,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC;YAC5B,EAAE,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC;gBAAC,MAAM,CAAC,EAAE,IAAI,MAAM,CAAC,IAAI,CAAC;YAC1C,MAAM,CAAC,CAAC,GAAG,SAAS,CAAC,MAAM,GAAG,MAAM,CAAC,MAAM,GAAG,SAAS,CAAC,aAAa,GAAG,MAAM,CAAC,aAAa,CAAC;YAC7F,SAAS,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;QAC1B,CAAC;QAED,6DAA6D;QAC7D,EAAE,CAAC,CAAC,SAAS,CAAC,IAAI,KAAK,CAAC,CAAC;YAAC,SAAS,GAAG,SAAS,CAAC;QAEhD,oDAAoD;QACpD,8BAA8B;QAC9B,EAAE,CAAC,CAAC,SAAS,IAAI,KAAK,CAAC;YAAC,KAAK,CAAC,SAAS,CAAC,CAAC;QAEzC,8BAA8B;QAC9B,MAAM,CAAC,SAAS,CAAC;IACnB,CAAC;IAED,mEAAmE;IACnE,wGAAwG;IACxG,6DAA6D;IAC7D,iEAAiE;IACjE,sDAAsD;IACtD,aAAa,CAAC,CAAC,EAAE,MAAM,EAAE,KAAK;QAE5B,IAAI,CAAC,GAAG,MAAM,CAAC,CAAC,EACd,CAAC,GAAG,MAAM,CAAC,CAAC,EACZ,KAAK,GAAG,MAAM,CAAC,KAAK,EACpB,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC;QAEzB,+CAA+C;QAC/C,kDAAkD;QAClD,IAAI,SAAS,GAAG,IAAI,GAAG,EAAE,CAAC;QAE1B,MAAM;QACN,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;YACtB,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;QACxB,CAAC;QACD,KAAK;QACL,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;YACvB,SAAS,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;QACvB,CAAC;QACD,OAAO;QACP,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,KAAK,GAAG,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;YAC1B,SAAS,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;QACzB,CAAC;QACD,QAAQ;QACR,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,MAAM,GAAG,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;YAC5B,SAAS,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;QAC1B,CAAC;QAED,6DAA6D;QAC7D,EAAE,CAAC,CAAC,SAAS,CAAC,IAAI,KAAK,CAAC,CAAC;YAAC,SAAS,GAAG,SAAS,CAAC;QAEhD,oDAAoD;QACpD,8BAA8B;QAC9B,EAAE,CAAC,CAAC,SAAS,IAAI,KAAK,CAAC;YAAC,KAAK,CAAC,SAAS,CAAC,CAAC;QAEzC,+BAA+B;QAC/B,MAAM,CAAC,SAAS,CAAC;IACnB,CAAC;IAED;;;;;;;MAOE;IAEF,UAAU,CAAC,CAAC,EAAE,SAAS,EAAE,IAAI;QAC3B,EAAE,CAAC,CAAC,CAAC,CAAC,MAAM,KAAK,SAAS,CAAC,CAAC,CAAC;YAC3B,EAAE,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;gBACzB,MAAM,CAAC,CAAC,CAAC;YACX,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,6BAA6B;gBAC7B,MAAM,CAAC,SAAS,GAAG,CAAC,CAAC;YACvB,CAAC;QACH,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,MAAM,CAAC,SAAS,CAAC;QACnB,CAAC;IACH,CAAC;IAGD;;;;;MAKE;IAEF,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,KAAK,GAAG,KAAK,EAAE,MAAM,GAAG,KAAK,EAAE,MAAM,EAAE,KAAK,GAAG,SAAS;QAEhE,8CAA8C;QAC9C,IAAI,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,EAC7C,gBAAgB,GAAG,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,EACnD,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,EAC7C,qBAAqB,GAAG,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,IAAI,CAAC,EAC7D,eAAe,GAAG,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,EACjD,sBAAsB,GAAG,IAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC,IAAI,CAAC,EAC/D,kBAAkB,GAAG,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,IAAI,CAAC,EACvD,wBAAwB,GAAG,IAAI,CAAC,wBAAwB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAEtE,IAAI,SAAS,EACX,UAAU,GAAG,CAAC,CAAC,MAAM,KAAK,SAAS,EACnC,UAAU,GAAG,CAAC,CAAC,MAAM,KAAK,SAAS,CAAC;QAEtC,wDAAwD;QACxD,EAAE,CAAC,CAAC,UAAU,IAAI,CAAC,YAAY,KAAK,IAAI,UAAU,IAAI,CAAC,YAAY,KAAK,CAAC,CAAC,CAAC;YACzE,+DAA+D;YAC/D,aAAa,EAAE,CAAC;QAClB,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,+DAA+D;YAC/D,wBAAwB;YACxB,SAAS,GAAG,iBAAiB,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;YACpC,EAAE,CAAC,CAAC,SAAS,IAAI,KAAK,CAAC;gBAAC,KAAK,CAAC,SAAS,CAAC,CAAC;QAC3C,CAAC;QAED,qCAAqC;QACrC,8DAA8D;QAC9D,iEAAiE;QACjE,iEAAiE;QACjE,0BAA0B;QAC1B,MAAM,CAAC,SAAS,CAAC;QAEjB,2BAA2B,CAAC,EAAE,CAAC;YAC7B,+BAA+B;YAC/B,0DAA0D;YAC1D,kBAAkB;YAClB,IAAI,UAAU,GAAG,CAAC,CAAC,MAAM,KAAK,SAAS,CAAC;YACxC,IAAI,UAAU,GAAG,CAAC,CAAC,MAAM,KAAK,SAAS,CAAC;YAExC,EAAE,CAAC,CAAC,UAAU,IAAI,UAAU,CAAC,CAAC,CAAC;gBAC7B,gCAAgC;gBAChC,EAAE,CAAC,CAAC,CAAC,CAAC,QAAQ,IAAI,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;oBAC7B,iBAAiB;oBACjB,MAAM,CAAC,cAAc,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;gBAC9B,CAAC;gBAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,QAAQ,IAAI,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;oBACrC,yDAAyD;oBACzD,MAAM,CAAC,iBAAiB,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;gBACjC,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,oBAAoB;oBACpB,MAAM,CAAC,oBAAoB,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;gBACpC,CAAC;YACH,CAAC;YAGD,IAAI,CAAC,EAAE,CAAC,CAAC,UAAU,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,SAAS,CAAC,CAAC,CAAC,CAAC;gBACpE,mDAAmD;gBACnD,MAAM,CAAC,YAAY,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;YAC5B,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,sDAAsD;gBACtD,MAAM,IAAI,KAAK,CAAC,cAAc,CAAC,QAAQ,CAAC,+CAA+C,CAAC,CAAC;YAC3F,CAAC;QACH,CAAC;QAED;YACE,uEAAuE;YACvE,IAAI,CAAC,CAAC;YACN,EAAE,CAAC,CAAC,CAAC,YAAY,KAAK,CAAC,CAAC,CAAC;gBACvB,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;YAClB,CAAC;YACD,mCAAmC;YACnC,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC;gBACvC,IAAI,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;gBAClB,SAAS,GAAG,iBAAiB,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC;gBACzC,EAAE,CAAC,CAAC,SAAS,IAAI,KAAK,CAAC;oBAAC,KAAK,CAAC,SAAS,EAAE,MAAM,CAAC,CAAC;YACnD,CAAC;QACH,CAAC;QAED,wBAAwB,CAAC,EAAE,CAAC;YAC1B,kDAAkD;YAClD,sCAAsC;YACtC,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;gBACX,MAAM,CAAC,aAAa,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;YAC7B,CAAC;YAED,IAAI,CAAC,CAAC;gBACJ,uBAAuB;gBACvB,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE,KAAK,CAAC,IAAI,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;oBAC3C,2BAA2B;oBAC3B,0DAA0D;oBAC1D,4CAA4C;oBAC5C,MAAM,CAAC,qBAAqB,CAAC,CAAC,EAAE,CAAC,EAAE,MAAM,CAAC,CAAC;gBAC7C,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,6BAA6B;oBAC7B,MAAM,CAAC,eAAe,CAAC,CAAC,EAAE,CAAC,EAAE,MAAM,EAAE,MAAM,CAAC,CAAC;gBAC/C,CAAC;YACH,CAAC;QACH,CAAC;QAED,8BAA8B,CAAC,EAAE,CAAC;YAChC,0DAA0D;YAC1D,iCAAiC;YACjC,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;gBACX,MAAM,CAAC,gBAAgB,CAAC,CAAC,EAAE,CAAC,EAAE,MAAM,CAAC,CAAC;YACxC,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,MAAM,CAAC,kBAAkB,CAAC,CAAC,EAAE,CAAC,EAAE,MAAM,EAAE,MAAM,CAAC,CAAC;YAClD,CAAC;QACH,CAAC;QAED,2BAA2B,CAAC,EAAE,CAAC;YAC7B,0DAA0D;YAC1D,iCAAiC;YACjC,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;gBACX,MAAM,CAAC,sBAAsB,CAAC,CAAC,EAAE,CAAC,EAAE,MAAM,CAAC,CAAC;YAC9C,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,MAAM,CAAC,wBAAwB,CAAC,CAAC,EAAE,CAAC,EAAE,MAAM,EAAE,MAAM,CAAC,CAAC;YACxD,CAAC;QACH,CAAC;IACH,CAAC;CACF;AAr9CD,oBAq9CC;;;;;;;;;;;ACr9CD;IAME,YAAmB,EAAU,EACV,IAAY,EACZ,IAAY;QAFZ,OAAE,GAAF,EAAE,CAAQ;QACV,SAAI,GAAJ,IAAI,CAAQ;QACZ,SAAI,GAAJ,IAAI,CAAQ;QAP/B,gBAAW,GAAY,IAAI,CAAC;QAC5B,aAAQ,GAAwB,EAAE,CAAC;IAOnC,CAAC;CACF;AAVD,4CAUC;;;;;;;;;;;;;;;;;ACVD,yEAAyC;AACzC,+EAAuD;AACvD,oIAA0F;AAC1F,0IAAgG;AAChG,iIAAuF;AAEvF,MAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,+CAAqB;QAChC,QAAQ,EAAE,EAAE;KACb;IACD;QACE,IAAI,EAAE,YAAY;QAClB,SAAS,EAAE,mDAAuB;QAClC,QAAQ,EAAE,EAAE;KACb;IACD;QACE,IAAI,EAAE,cAAc;QACpB,SAAS,EAAE,6CAAoB;QAC/B,QAAQ,EAAE,EAAE;KACb;CACF,CAAC;AAMF,IAAa,gBAAgB,GAA7B;CAAiC;AAApB,gBAAgB;IAJ5B,eAAQ,CAAC;QACR,OAAO,EAAE,CAAC,qBAAY,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;QACvC,OAAO,EAAE,CAAC,qBAAY,CAAC;KACxB,CAAC;GACW,gBAAgB,CAAI;AAApB,4CAAgB;;;;;;;;;;;;;;;;;AC5B7B,yEAAyC;AACzC,+EAA+C;AAC/C,iFAK2B;AAoC3B,IAAa,cAAc,GAA3B;CAA+B;AAAlB,cAAc;IAlC1B,eAAQ,CAAC;QACR,OAAO,EAAE;YACP,qBAAY;YACZ,0BAAe;YACf,wBAAa;YACb,0BAAe;YACf,wBAAa;YACb,6BAAkB;YAClB,wBAAa;YACb,yBAAc;YACd,4BAAiB;YACjB,0BAAe;YACf,wBAAa;YACb,yBAAc;YACd,wBAAa;SACd;QACD,OAAO,EAAE;YACP,0BAAe;YACf,wBAAa;YACb,0BAAe;YACf,6BAAkB;YAClB,2BAAgB;YAChB,wBAAa;YACb,6BAAkB;YAClB,wBAAa;YACb,yBAAc;YACd,4BAAiB;YACjB,0BAAe;YACf,wBAAa;YACb,yBAAc;YACd,wBAAa;SACd;QACD,YAAY,EAAE,EAAE;KACjB,CAAC;GACW,cAAc,CAAI;AAAlB,wCAAc;;;;;;;;;;;AC1C3B,2EAA2C;AAI3C;IACS,MAAM,CAAC,MAAM,CAAI,YAA8B,EAAE,KAAQ;QAC9D,MAAM,CAAC,uBAAU,CAAC,MAAM,CAAC,CAAC,QAA8B;YACtD,MAAM,QAAQ,GAAG,CAAC,CAAa,KAAK,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;YACrD,YAAY,CAAC,WAAW,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;YAC1C,MAAM,CAAC,MAAM,YAAY,CAAC,cAAc,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;QAC5D,CAAC,CAAC,CAAC;IACL,CAAC;CACF;AARD,gDAQC;;;;;;;;;;;;;;;;;;;;ACbD,yEAAyC;AACzC,wFAA2D;AAI3D,IAAa,aAAa,GAA1B;IAGE;QACE,IAAI,CAAC,GAAG,GAAG,2BAAc,EAAE,CAAC;IAC9B,CAAC;CACF;AANY,aAAa;IADzB,iBAAU,EAAE;;GACA,aAAa,CAMzB;AANY,sCAAa;;;;;;;;;;;;;;;;;;;;ACL1B,yEAAyC;AACzC,oGAAgD;AAEhD,gGAA6C;AAG7C,4FAA2D;AAE3D,2EAA2C;AAC3C,gEAAmC;AACnC,6DAAgC;AAChC,gEAAmC;AAKnC,4GAA2E;AAC3E,qEAAqC;AAGrC,IAAa,WAAW,GAAxB;IAGE,YAAoB,UAAyB,EAAU,YAA0B;QAA7D,eAAU,GAAV,UAAU,CAAe;QAAU,iBAAY,GAAZ,YAAY,CAAc;QAFzE,kBAAa,GAAG,IAAI,iBAAO,EAAE,CAAC;QAGpC,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,MAAM,uBAAU,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,EAAC,QAAQ,EAAE,KAAK,EAAC,KAAK,IAAI,CAAC,cAAc,CAAC,QAAQ,EAAE,KAAK,CAAC,CAAC,CAAC;IAClI,CAAC;IAEM,UAAU,CAAC,GAAc,EAAE,QAAgB;QAChD,MAAM,WAAW,GAAG,GAAG,CAAC,iBAAiB,EAAE,CAAC;QAC5C,WAAW,CAAC,KAAK,EAAE,CAAC;QACpB,MAAM,OAAO,GAAG,GAAG,CAAC,UAAU,EAAE,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC;QACxD,MAAM,OAAO,GAAG,OAAO,CAAC,IAAI,EAAE,CAAC;QAC/B,EAAE,CAAC,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC;YACpB,IAAI,MAAM,GAAG,GAAG,CAAC,WAAW,CAAC,OAAO,CAAC,gBAAgB,CAAC,GAAG,EAAE,MAAM,EAAE,KAAK,CAAC,CAAC;YAC1E,MAAM,MAAM,GAAG,GAAG,CAAC,UAAU,EAAE,CAAC,cAAc,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC;YACjE,EAAE,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC;gBACnB,WAAW,CAAC,MAAM,EAAE,CAAC;gBACrB,MAAM,CAAC,uBAAU,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC;YAC/B,CAAC;YACD,IAAI,CAAC,CAAC;gBACJ,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,MAAM,CAAC,YAAY,EAAE,sBAAsB,CAAC,CAAC;gBACrE,WAAW,CAAC,QAAQ,EAAE,CAAC;gBACvB,MAAM,CAAC,uBAAU,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;YAClC,CAAC;QACH,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,OAAO,CAAC,YAAY,EAAE,mBAAmB,CAAC,CAAC;YACnE,WAAW,CAAC,QAAQ,EAAE,CAAC;YACvB,MAAM,CAAC,uBAAU,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;QACnC,CAAC;IACH,CAAC;IAEM,eAAe,CAAC,GAAc,EAAE,QAAgB;QACrD,MAAM,CAAC,GAAG,GAAG,CAAC,iBAAiB,EAAE,CAAC;QAClC,CAAC,CAAC,KAAK,EAAE,CAAC;QACV,MAAM,OAAO,GAAG,GAAG,CAAC,UAAU,EAAE,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC;QACxD,MAAM,OAAO,GAAG,OAAO,CAAC,IAAI,EAAE,CAAC;QAC/B,EAAE,CAAC,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC;YACpB,IAAI,SAAS,GAAG,GAAG,CAAC,WAAW,CAAC,OAAO,CAAC,gBAAgB,CAAC,GAAG,EAAE,MAAM,EAAE,KAAK,CAAC,CAAC;YAC7E,MAAM,MAAM,GAAG,GAAG,CAAC,UAAU,EAAE,CAAC,cAAc,CAAC,QAAQ,EAAE,SAAS,CAAC,CAAC;YACpE,EAAE,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC;gBACnB,MAAM,QAAQ,GAAG,GAAG,CAAC,UAAU,EAAE,CAAC,UAAU,CAAC,SAAS,CAAC,EAAE,EAAE,WAAW,CAAC,CAAC;gBACxE,MAAM,QAAQ,GAAG,GAAG,CAAC,UAAU,EAAE,CAAC,UAAU,CAAC,SAAS,CAAC,EAAE,EAAE,WAAW,CAAC,CAAC;gBACxE,EAAE,CAAC,CAAC,QAAQ,KAAK,IAAI,IAAI,QAAQ,KAAK,IAAI,CAAC,CAAC,CAAC;oBAC3C,CAAC,CAAC,MAAM,EAAE,CAAC;gBACb,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,2BAA2B,EAAE,yBAAyB,CAAC,CAAC;oBAChF,CAAC,CAAC,QAAQ,EAAE,CAAC;oBACb,MAAM,CAAC,uBAAU,CAAC,KAAK,CAAC,2BAA2B,CAAC,CAAC;gBACvD,CAAC;gBACD,MAAM,CAAC,uBAAU,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC;YAClC,CAAC;YACD,IAAI,CAAC,CAAC;gBACJ,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,OAAO,CAAC,YAAY,EAAE,yBAAyB,CAAC,CAAC;gBACzE,CAAC,CAAC,QAAQ,EAAE,CAAC;gBACb,MAAM,CAAC,uBAAU,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;YAClC,CAAC;QACH,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,OAAO,CAAC,YAAY,EAAE,mBAAmB,CAAC,CAAC;YACnE,CAAC,CAAC,QAAQ,EAAE,CAAC;YACb,MAAM,CAAC,uBAAU,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;QACnC,CAAC;IACH,CAAC;IAEM,YAAY,CAAC,GAAc,EAAE,YAAsB,EAAE,IAAY;QACtE,IAAI,MAAM,GAAe,EAAE,CAAC;QAC5B,MAAM,CAAC,GAAG,GAAG,CAAC,iBAAiB,EAAE,CAAC;QAClC,CAAC,CAAC,KAAK,EAAE,CAAC;QACV,YAAY,CAAC,OAAO,CAAC,WAAW;YAC9B,MAAM,SAAS,GAAG,GAAG,CAAC,UAAU,EAAE,CAAC,YAAY,CAAC,WAAW,CAAC,CAAC;YAC7D,MAAM,OAAO,GAAG,SAAS,CAAC,IAAI,EAAE,CAAC;YACjC,EAAE,CAAC,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC;gBACpB,IAAI,OAAO,GAAG,GAAG,CAAC,UAAU,EAAE,CAAC,UAAU,CAAC,SAAS,CAAC,EAAE,EAAE,eAAe,CAAC,CAAC;gBACzE,EAAE,CAAC,CAAC,OAAO,KAAK,IAAI,CAAC,CAAC,CAAC;oBACrB,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,4BAA4B,EAAE,0BAA0B,CAAC,CAAC;oBAClF,CAAC,CAAC,QAAQ,EAAE,CAAC;oBACb,MAAM,CAAC,uBAAU,CAAC,KAAK,CAAC,4BAA4B,CAAC,CAAC;gBACxD,CAAC;YACH,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,OAAO,CAAC,YAAY,EAAE,mBAAmB,CAAC,CAAC;gBACnE,CAAC,CAAC,QAAQ,EAAE,CAAC;gBACb,MAAM,CAAC,uBAAU,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;YACnC,CAAC;QACH,CAAC,CAAC,CAAC;QACH,CAAC,CAAC,MAAM,EAAE,CAAC;QACX,MAAM,CAAC,uBAAU,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC;IAC/B,CAAC;IAEM,gBAAgB,CAAC,GAAc,EAAE,aAAqB,EAAE,aAAqB;QAClF,MAAM,CAAC,GAAG,GAAG,CAAC,iBAAiB,EAAE,CAAC;QAClC,CAAC,CAAC,KAAK,EAAE,CAAC;QAEV,MAAM,SAAS,GAAG,GAAG,CAAC,UAAU,EAAE,CAAC,YAAY,CAAC,aAAa,CAAC,CAAC;QAC/D,MAAM,QAAQ,GAAG,GAAG,CAAC,UAAU,EAAE,CAAC,YAAY,CAAC,aAAa,CAAC,CAAC;QAC9D,MAAM,QAAQ,GAAG,SAAS,CAAC,IAAI,EAAE,CAAC;QAClC,MAAM,OAAO,GAAG,QAAQ,CAAC,IAAI,EAAE,CAAC;QAChC,EAAE,CAAC,CAAC,QAAQ,CAAC,OAAO,IAAI,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC;YACxC,IAAI,UAAU,GAAG,GAAG,CAAC,UAAU,EAAE,CAAC,aAAa,CAAC,aAAa,EAAE,aAAa,EAAE,KAAK,CAAC,CAAC;YACrF,EAAE,CAAC,CAAC,UAAU,IAAI,IAAI,CAAC,CAAC,CAAC;gBACvB,CAAC,CAAC,MAAM,EAAE,CAAC;YACb,CAAC;YACD,IAAI,CAAC,CAAC;gBACJ,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,+BAA+B,EAAE,4BAA4B,CAAC,CAAC;gBACvF,CAAC,CAAC,QAAQ,EAAE,CAAC;YACf,CAAC;QACH,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,MAAM,KAAK,GAAG,4BAA4B,CAAC;YAC3C,EAAE,CAAC,CAAC,CAAC,QAAQ,CAAC,OAAO,CAAC;gBAAC,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,QAAQ,CAAC,YAAY,EAAE,KAAK,CAAC,CAAC;YAC7E,IAAI;gBAAC,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,OAAO,CAAC,YAAY,EAAE,KAAK,CAAC,CAAC;YAC1D,CAAC,CAAC,QAAQ,EAAE,CAAC;QACf,CAAC;IACH,CAAC;IAEM,cAAc,CAAC,QAAmB,EAAE,IAAS;QAClD,EAAE,CAAC,CAAC,IAAI,KAAK,IAAI,IAAI,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;YAE3C,MAAM,CAAC,GAAG,QAAQ,CAAC,iBAAiB,EAAE,CAAC;YACvC,CAAC,CAAC,KAAK,EAAE,CAAC;YAEV,MAAM,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,EAAE,IAAI,QAAQ,CAAC,UAAU,EAAE,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC,CAAC;YACzE,IAAI,UAAmB,CAAC;YACxB,GAAG,CAAC,CAAC,IAAI,KAAK,IAAI,MAAM,CAAC,CAAC,CAAC;gBACzB,MAAM,CAAC,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC;oBACvB,KAAK,qBAAS,CAAC,SAAS;wBACtB,IAAI,SAAS,GAAG,KAAmB,CAAC;wBACpC,UAAU,GAAG,SAAS,CAAC,IAAI,EAAE,CAAC;wBAC9B,EAAE,CAAC,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC,CAAC;4BACvB,SAAS,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;4BAC3B,SAAS,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;4BAC3B,SAAS,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC;4BACvC,SAAS,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC;4BACzC,8CAA8C;wBAChD,CAAC;wBACD,IAAI,CAAC,CAAC;4BACJ,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,UAAU,CAAC,YAAY,EAAE,mBAAmB,CAAC,CAAC;4BACtE,CAAC,CAAC,QAAQ,EAAE,CAAC;4BACb,KAAK,CAAC;wBACR,CAAC;wBACD,KAAK,CAAC;oBACR,KAAK,qBAAS,CAAC,SAAS;wBACtB,IAAI,UAAU,GAAG,KAAmB,CAAC;wBACrC,UAAU,GAAG,UAAU,CAAC,IAAI,EAAE,CAAC;wBAC/B,EAAE,CAAC,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC,CAAC;4BACvB,UAAU,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;4BAC5B,UAAU,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;4BAC5B,UAAU,CAAC,WAAW,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC;gCACpC,CAAC,CAAC,IAAI,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;4BACjC,CAAC,CAAC,CAAC;wBACL,CAAC;wBACD,IAAI,CAAC,CAAC;4BACJ,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,UAAU,CAAC,YAAY,EAAE,mBAAmB,CAAC,CAAC;4BACtE,CAAC,CAAC,QAAQ,EAAE,CAAC;4BACb,KAAK,CAAC;wBACR,CAAC;wBACD,KAAK,CAAC;gBACV,CAAC;YACH,CAAC;YACD,EAAE,CAAC,CAAC,CAAC,CAAC,MAAM,KAAK,qCAAiB,CAAC,OAAO,CAAC;gBAAC,CAAC,CAAC,MAAM,EAAE,CAAC;QACzD,CAAC;IACH,CAAC;IAEM,aAAa,CAAC,QAAmB,EAAE,OAAkC;QAC1E,MAAM,WAAW,GAAG,QAAQ,CAAC,iBAAiB,EAAE,CAAC;QACjD,MAAM,UAAU,GAAS,OAAQ,CAAC,GAAG,CAAC,CAAC,CAAwB;YAC7D,MAAM,EAAE,GAAW,OAAO,CAAC,KAAK,QAAQ,GAAG,CAAC,GAAkB,CAAE,CAAC,EAAE,CAAC;YACpE,MAAM,CAAC,QAAQ,CAAC,UAAU,EAAE,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC;QAC7C,CAAC,CAAC,CAAC;QACH,WAAW,CAAC,KAAK,EAAE,CAAC;QACpB,IAAI,CAAC;YACH,UAAU,CAAC,OAAO,CAAC,CAAC,SAAc;gBAChC,EAAE,CAAC,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC;oBACnB,MAAM,UAAU,GAAG,SAAS,CAAC,IAAI,EAAE,CAAC;oBACpC,EAAE,CAAC,CAAC,CAAC,UAAU,CAAC,OAAO,CAAC;wBAAC,MAAM,EAAC,OAAO,EAAE,UAAU,CAAC,YAAY,EAAE,MAAM,EAAE,SAAS,EAAC,CAAC;gBACvF,CAAC;YACH,CAAC,CAAC,CAAC;QACL,CAAC;QAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACX,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC,CAAC,OAAO,EAAE,mBAAmB,CAAC,CAAC;QAC1D,CAAC;QACD,UAAU,CAAC,OAAO,CAAC,SAAS;YAC1B,MAAM,CAAC,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC,CAAC;gBAC3B,KAAK,qBAAS,CAAC,SAAS;oBACtB,QAAQ,CAAC,UAAU,EAAE,CAAC,iBAAiB,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC;oBACzC,SAAU,CAAC,oBAAoB,EAAE,CAAC,MAAM,CAAc,SAAU,CAAC,mBAAmB,EAAE,CAAC,CAAC,OAAO,CAAC,UAAU;wBACrH,QAAQ,CAAC,UAAU,EAAE,CAAC,gBAAgB,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC;oBACxD,CAAC,CAAC,CAAC;oBACH,KAAK,CAAC;gBACR,KAAK,qBAAS,CAAC,SAAS;oBACtB,MAAM,OAAO,CAAC;gBAChB,KAAK,qBAAS,CAAC,UAAU;oBACvB,QAAQ,CAAC,UAAU,EAAE,CAAC,gBAAgB,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC;oBACrD,KAAK,CAAC;gBACR,KAAK,qBAAS,CAAC,OAAO;oBACT,SAAU,CAAC,oBAAoB,EAAE,CAAC,OAAO,CAAC,UAAU;wBAC7D,QAAQ,CAAC,UAAU,EAAE,CAAC,gBAAgB,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC;oBACxD,CAAC,CAAC,CAAC;oBACH,QAAQ,CAAC,UAAU,EAAE,CAAC,aAAa,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC;YACtD,CAAC;QACH,CAAC,CAAC,CAAC;QACH,WAAW,CAAC,MAAM,EAAE,CAAC;IACvB,CAAC;IAEM,cAAc,CAAC,IAAY,EAAE,IAAY,EAAE,MAAkB;QAClE,MAAM,QAAQ,GAAG,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,eAAe,CAAC,MAAM,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;QACxE,EAAE,CAAC,CAAC,CAAC,QAAQ,CAAC;YAAC,MAAM,CAAC,uBAAU,CAAC,KAAK,CAAC,6BAA6B,CAAC,CAAC;QACtE,MAAM,WAAW,GAAG,QAAQ,CAAC,iBAAiB,EAAE,CAAC;QACjD,WAAW,CAAC,KAAK,EAAE,CAAC;QACpB,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC;YAClB,MAAM,KAAK,GAAG,QAAQ,CAAC,UAAU,EAAE,CAAC,SAAS,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,KAAK,EAAE,CAAC,CAAC,aAAa,CAAC,CAAC;YACxF,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;gBACX,WAAW,CAAC,QAAQ,EAAE,CAAC;gBACvB,MAAM,CAAC,uBAAU,CAAC,KAAK,CAAC,8BAA8B,CAAC,CAAC,IAAI,IAAI,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC;YAC5E,CAAC;QACH,CAAC,CAAC,CAAC;QACH,MAAM,WAAW,GAAG,QAAQ,CAAC,WAAW,CAAC,OAAO,CAAC,gBAAgB,CAAC,QAAQ,EAAE,eAAe,EAAE,MAAM,CAAC,CAAC;QACrG,MAAM,aAAa,GAAG,QAAQ,CAAC,UAAU,EAAE,CAAC,cAAc,CAAC,IAAI,EAAE,WAAW,CAAC,CAAC;QAC9E,EAAE,CAAC,CAAC,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC,CAAC;YAC3B,WAAW,CAAC,QAAQ,EAAE,CAAC;YACvB,MAAM,CAAC,uBAAU,CAAC,KAAK,CAAC,aAAa,CAAC,YAAY,CAAC,CAAC;QACtD,CAAC;QACD,WAAW,CAAC,MAAM,EAAE,CAAC;QACrB,MAAM,CAAC,uBAAU,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC;IACjC,CAAC;IAEM,IAAI,CAAC,QAAmB;QAC7B,IAAI,UAAmB,CAAC;QACxB,IAAI,CAAC;YACH,UAAU,GAAG,QAAQ,CAAC,IAAI,EAAE,CAAC;QAC/B,CAAC;QAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACX,MAAM,CAAC,uBAAU,CAAC,KAAK,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC;QACrC,CAAC;QACD,EAAE,CAAC,CAAC,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC,CAAC;YACxB,MAAM,CAAC,uBAAU,CAAC,KAAK,CAAC,UAAU,CAAC,YAAY,CAAC,CAAC;QACnD,CAAC;QACD,MAAM,CAAC,uBAAU,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC;IAC7B,CAAC;IAEM,sBAAsB,CAAC,QAAmB,EAAE,KAAU;QACzD,GAAG,CAAC,CAAC,IAAI,CAAC,IAAI,KAAK,CAAC,CAAC,CAAC;YACpB,EAAE,CAAC,CAAC,KAAK,CAAC,cAAc,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,KAAK,aAAa,IAAI,KAAK,CAAC,CAAC,KAAK,IAAI,CAAC,CAAC;gBAAC,OAAO,KAAK,CAAC,CAAC,CAAC;QAClG,CAAC;QACD,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,EAAC,QAAQ,EAAE,QAAQ,EAAE,KAAK,EAAE,KAAK,EAAC,CAAC,CAAC;IAChE,CAAC;CACF;AAjPY,WAAW;IADvB,iBAAU,EAAE;yDAIqB,+BAAa,oBAAb,+BAAa,sDAAwB,4BAAY,oBAAZ,4BAAY;GAHtE,WAAW,CAiPvB;AAjPY,kCAAW;;;;;;;;;;;;;;;;;;;;;ACpBxB,yEAAiD;AACjD,qGAAqD;AAGrD,IAAa,cAAc,GAA3B;IAGE,YAAoB,MAAc;QAAd,WAAM,GAAN,MAAM,CAAQ;QAChC,MAAM,KAAK,GAAG,6SAA6S,CAAC;QAC5T,MAAM,UAAU,GAAI,IAAI,CAAC,UAAU,GAAG,IAAI,8BAAa,CAAC,iBAAiB,GAAC,KAAK,CAAC,CAAC;QACjF,UAAU,CAAC,EAAE,CAAC,iBAAiB,EAAE,IAAI;YACnC,OAAO,CAAC,GAAG,CAAC,kBAAkB,EAAE,IAAI,CAAC,CAAC;QACxC,CAAC,CAAC,CAAC;QACH,UAAU,CAAC,EAAE,CAAC,iBAAiB,EAAE,IAAI;YACnC,OAAO,CAAC,GAAG,CAAC,kBAAkB,EAAE,IAAI,CAAC,CAAC;QACxC,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,MAAM,CAAC,iBAAiB,CAAC,MAAM,UAAU,CAAC,KAAK,EAAE,CAAC,IAAI,CAAC,MAAM,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;IAClF,CAAC;IAEM,IAAI;QACT,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC;IAC1C,CAAC;CACF;AAnBY,cAAc;IAD1B,iBAAU,EAAE;yDAIiB,aAAM,oBAAN,aAAM;GAHvB,cAAc,CAmB1B;AAnBY,wCAAc;;;;;;;;;;;;;;;;;;;;;ACJ3B,yEAAyC;AACzC,qEAAqC;AAIrC,IAAa,YAAY,GAAzB;IAKE;QAJQ,YAAO,GAAuB,IAAI,iBAAO,EAAa,CAAC;QAExD,oBAAe,GAA0B,IAAI,CAAC,OAAO,CAAC,YAAY,EAAE,CAAC;IAG5E,CAAC;IAEM,IAAI,CAAC,OAAe,EAAE,KAAc;QACzC,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,OAAO,EAAE,KAAK,CAAC,CAAC;IACzC,CAAC;IAEM,KAAK,CAAC,OAAe,EAAE,KAAc;QAC1C,IAAI,CAAC,SAAS,CAAC,OAAO,EAAE,OAAO,EAAE,KAAK,CAAC,CAAC;IAC1C,CAAC;IAEM,OAAO,CAAC,OAAe,EAAE,KAAc;QAC5C,IAAI,CAAC,SAAS,CAAC,SAAS,EAAE,OAAO,EAAE,KAAK,CAAC,CAAC;IAC5C,CAAC;IAEM,OAAO,CAAC,OAAe,EAAE,KAAc;QAC5C,IAAI,CAAC,SAAS,CAAC,SAAS,EAAE,OAAO,EAAE,KAAK,CAAC,CAAC;IAC5C,CAAC;IAEO,SAAS,CAAC,IAAI,EAAE,OAAO,EAAE,KAAK;QACpC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,EAAC,IAAI,EAAE,IAAI,EAAE,OAAO,EAAE,OAAO,EAAE,KAAK,EAAE,KAAK,EAAc,CAAC,CAAC;IAC/E,CAAC;CACF;AA3BY,YAAY;IADxB,iBAAU,EAAE;;GACA,YAAY,CA2BxB;AA3BY,oCAAY;;;;;;;;;;;ACLzB,iFAAwC;AAExC,wBAAgC,SAAQ,yBAAY;IAApD;;QACE,cAAS,GAAG,IAAI,CAAC;QACjB,YAAO,GAAG,UAAU,CAAC;QACrB,oBAAe,GAAG,KAAK,CAAC;IAC1B,CAAC;CAAA;AAJD,gDAIC;;;;;;;;;;ACND,mFAAmF;AACnF,8FAA8F;AAC9F,yEAAyE;AACzE,gFAAgF;;AAEnE,mBAAW,GAAG;IACzB,UAAU,EAAE,KAAK;CAClB,CAAC;;;;;;;;;;;ACPF,yEAA+C;AAC/C,qIAA2E;AAE3E,iFAA6C;AAC7C,4FAAyD;AAEzD,EAAE,CAAC,CAAC,yBAAW,CAAC,UAAU,CAAC,CAAC,CAAC;IAC3B,qBAAc,EAAE,CAAC;AACnB,CAAC;AAED,iDAAsB,EAAE,CAAC,eAAe,CAAC,sBAAS,CAAC,CAAC;;;;;;;;;;;;;;;;ACVpD,e;;;;;;;ACAA,e","file":"main.bundle.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\treturn new Promise(function(resolve, reject) { reject(new Error(\"Cannot find module '\" + req + \"'.\")); });\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"../../../../../src/$$_gendir lazy recursive\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// G:/Projects/ТхПр/thpr2/src/$$_gendir lazy\n// module id = ../../../../../src/$$_gendir lazy recursive\n// module chunks = main","var v1 = require('./v1');\nvar v4 = require('./v4');\n\nvar uuid = v4;\nuuid.v1 = v1;\nuuid.v4 = v4;\n\nmodule.exports = uuid;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// G:/Projects/ТхПр/thpr2/src/api/node_modules/uuid/index.js\n// module id = ../../../../../src/api/node_modules/uuid/index.js\n// module chunks = main","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex;\n  return bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]];\n}\n\nmodule.exports = bytesToUuid;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// G:/Projects/ТхПр/thpr2/src/api/node_modules/uuid/lib/bytesToUuid.js\n// module id = ../../../../../src/api/node_modules/uuid/lib/bytesToUuid.js\n// module chunks = main","// Unique ID creation requires a high quality random # generator.  In the\n// browser this is a little complicated due to unknown quality of Math.random()\n// and inconsistent support for the `crypto` API.  We do the best we can via\n// feature-detection\nvar rng;\n\nvar crypto = global.crypto || global.msCrypto; // for IE 11\nif (crypto && crypto.getRandomValues) {\n  // WHATWG crypto RNG - http://wiki.whatwg.org/wiki/Crypto\n  var rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n  rng = function whatwgRNG() {\n    crypto.getRandomValues(rnds8);\n    return rnds8;\n  };\n}\n\nif (!rng) {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var rnds = new Array(16);\n  rng = function() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return rnds;\n  };\n}\n\nmodule.exports = rng;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// G:/Projects/ТхПр/thpr2/src/api/node_modules/uuid/lib/rng-browser.js\n// module id = ../../../../../src/api/node_modules/uuid/lib/rng-browser.js\n// module chunks = main","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\n// **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\n// random #'s we need to init node and clockseq\nvar _seedBytes = rng();\n\n// Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\nvar _nodeId = [\n  _seedBytes[0] | 0x01,\n  _seedBytes[1], _seedBytes[2], _seedBytes[3], _seedBytes[4], _seedBytes[5]\n];\n\n// Per 4.2.2, randomize (14 bit) clockseq\nvar _clockseq = (_seedBytes[6] << 8 | _seedBytes[7]) & 0x3fff;\n\n// Previous uuid creation time\nvar _lastMSecs = 0, _lastNSecs = 0;\n\n// See https://github.com/broofa/node-uuid for API details\nfunction v1(options, buf, offset) {\n  var i = buf && offset || 0;\n  var b = buf || [];\n\n  options = options || {};\n\n  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq;\n\n  // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n  var msecs = options.msecs !== undefined ? options.msecs : new Date().getTime();\n\n  // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1;\n\n  // Time since last uuid creation (in msecs)\n  var dt = (msecs - _lastMSecs) + (nsecs - _lastNSecs)/10000;\n\n  // Per 4.2.1.2, Bump clockseq on clock regression\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  }\n\n  // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  }\n\n  // Per 4.2.1.2 Throw error if too many uuids are requested\n  if (nsecs >= 10000) {\n    throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq;\n\n  // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n  msecs += 12219292800000;\n\n  // `time_low`\n  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff;\n\n  // `time_mid`\n  var tmh = (msecs / 0x100000000 * 10000) & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff;\n\n  // `time_high_and_version`\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n  b[i++] = tmh >>> 16 & 0xff;\n\n  // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n  b[i++] = clockseq >>> 8 | 0x80;\n\n  // `clock_seq_low`\n  b[i++] = clockseq & 0xff;\n\n  // `node`\n  var node = options.node || _nodeId;\n  for (var n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n\n  return buf ? buf : bytesToUuid(b);\n}\n\nmodule.exports = v1;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// G:/Projects/ТхПр/thpr2/src/api/node_modules/uuid/v1.js\n// module id = ../../../../../src/api/node_modules/uuid/v1.js\n// module chunks = main","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options == 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nmodule.exports = v4;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// G:/Projects/ТхПр/thpr2/src/api/node_modules/uuid/v4.js\n// module id = ../../../../../src/api/node_modules/uuid/v4.js\n// module chunks = main","import {IResourceManager} from \"../interfaces/IResourceManager\";\r\nimport {IFactory} from \"../interfaces/IFactory\";\r\nimport {EventEmitter} from \"./EventEmitter\";\r\nimport {IDocumentManager} from \"../interfaces/IDocumentManager\";\r\nimport {Factory} from \"./Factory\";\r\nimport {IDataProvider} from \"../interfaces/IDataProvider\";\r\nimport {IDatabase} from \"../interfaces/IDatabase\";\r\nimport {ApplicationEventNames} from \"../enums/event_names/ApplicationEventNames\";\r\nimport {_IDocumentManager} from \"../_internal_interfaces/_IDocumentManager\";\r\nimport {_IDataProvider} from \"../_internal_interfaces/_IDataProvider\";\r\nimport {_IResourceManager} from \"../_internal_interfaces/_IResourceManager\";\r\nimport {_IFactory} from \"../_internal_interfaces/_IFactory\";\r\nimport {_IDatabase} from \"../_internal_interfaces/_IDatabase\";\r\nimport {_IApplication} from \"../_internal_interfaces/_IApplication\";\r\n\r\ntype UserID = string;\r\n\r\n/**\r\n * Приложение. Текущий объект приложения можно получить вызвав функцию `GetApplication()`.\r\n * Экземпляр `IApplication` содержит в себе менеджер открытых документов, менеджер локализованных ресурсов\r\n * и фабрику классов. Кроме того, приложение содержит экземпляр `IEventsPublisher`, посредством\r\n * которого можно получать уведомления о различных событиях, происходящих в процессе работы приложения.\r\n */\r\nexport class Application extends EventEmitter<ApplicationEventNames> implements _IApplication{\r\n\r\n    // *** Методы для внутреннего использования ****\r\n\r\n    public _setDocumentManager(value : _IDocumentManager) : void{\r\n        const tmp = this._documentManager;\r\n        this._documentManager = value;\r\n        this.emit(ApplicationEventNames.DocumentManagerSwitched, this.factory.createIEventArgs(\r\n            {source : this, data : {newValue : value, oldValue : tmp}}));\r\n    }\r\n\r\n    public _setDataProvider(value : _IDataProvider) : void{\r\n        const tmp = this._dataProvider;\r\n        this._dataProvider = value;\r\n        this.emit(ApplicationEventNames.DataProviderSwitched, this.factory.createIEventArgs(\r\n            {source : this, data : {newValue : value, oldValue : tmp}}));\r\n    }\r\n\r\n    public _setResourceManager(value : _IResourceManager) : void{\r\n        const tmp = this._resourceManager;\r\n        this._resourceManager = value;\r\n        this.emit(ApplicationEventNames.ResourceManagerSwitched, this.factory.createIEventArgs(\r\n            {source : this, data : {newValue : value, oldValue : tmp}}));\r\n    }\r\n\r\n    public _setFactory(value : _IFactory) : void{\r\n        const tmp = this._factory;\r\n        this._factory = value;\r\n        this.emit(ApplicationEventNames.FactorySwitched, this.factory.createIEventArgs(\r\n            {source : this, data : {newValue : value, oldValue : tmp}}));\r\n    }\r\n\r\n    public _setDatabase(db : _IDatabase) : void{\r\n        this._commonDatabase = db;\r\n    }\r\n\r\n    public _getDocumentManager() : _IDocumentManager{\r\n        return this._documentManager;\r\n    }\r\n\r\n    public _getDataProvider() : _IDataProvider{\r\n        return this._dataProvider;\r\n    }\r\n\r\n    public _getResourceManager() : _IResourceManager{\r\n        return this._resourceManager;\r\n    }\r\n\r\n    public _getFactory() : _IFactory{\r\n        return this._factory;\r\n    }\r\n\r\n    public _getDatabase() : _IDatabase{\r\n        return this._commonDatabase;\r\n    }\r\n    // *********************************************\r\n\r\n    private _commonDatabase : IDatabase;\r\n\r\n    /**\r\n     * База данных компаний.\r\n     */\r\n    public get commonDatabase() : IDatabase{\r\n        return this._commonDatabase;\r\n    }\r\n\r\n    private _dataProvider : IDataProvider;\r\n    /**\r\n     * Провайдер данных, предназначенный для взаимодействия с сервером.\r\n     */\r\n    public get dataProvider() : IDataProvider{\r\n        return this._dataProvider;\r\n    }\r\n\r\n    /**\r\n     * Получить идентификатор текущего пользователя.\r\n     * @returns {string}\r\n     */\r\n    getCurrentUserId() : UserID{\r\n        return this.dataProvider.getCurrentUserId();\r\n    }\r\n\r\n    private _documentManager : IDocumentManager;\r\n\r\n    /**\r\n     * Менеджер документов. Позволяет открывать, сохранять и закрывать документы.\r\n     * Так же позволяет устанавливать нужный открытый вам документ в качестве текущего.\r\n     */\r\n    public get documentManager() : IDocumentManager{\r\n        return this._documentManager;\r\n    }\r\n\r\n    /**\r\n     * Конструктор класса.\r\n     */\r\n    constructor(){\r\n        super();\r\n\r\n        this._factory = new Factory(this);\r\n        this._resourceManager = this.factory.createIResourceManager('ru');\r\n        this._documentManager = this.factory.createIDocumentManager();\r\n\r\n        this._dataProvider = this._factory.createIDataProvider();\r\n        this._commonDatabase = this._factory.createIDatabase(this);\r\n        this._dataProvider = this._factory.createIDataProvider();\r\n    }\r\n\r\n    private _resourceManager : IResourceManager;\r\n\r\n    /**\r\n     * Менеждер локализованных ресурсов.\r\n     * @returns {IResourceManager}\r\n     */\r\n    public get resourceManager(): IResourceManager {\r\n        return this._resourceManager;\r\n    }\r\n\r\n    private _factory : IFactory;\r\n\r\n    /**\r\n     * Фабрика классов.\r\n     */\r\n    public get factory(): IFactory {\r\n        return this._factory;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/api/src/ts/classes/Application.ts","\r\nimport {ICommandFactory} from \"../interfaces/ICommandFactory\";\r\nimport {IApplication} from \"../interfaces/IApplication\";\r\nimport {IDocumentContext} from \"../interfaces/IDocumentContext\";\r\nimport {ICommand} from \"../interfaces/ICommand\";\r\n\r\n/**\r\n * Фабрика команд.\r\n */\r\nexport class CommandFactory implements ICommandFactory{\r\n\r\n    private _application : IApplication;\r\n\r\n    /**\r\n     * Конструктор класса.\r\n     * @param {IApplication} app Приложение, в составе которого используется фабрика команд.\r\n     */\r\n    constructor(app : IApplication){\r\n        this._application = app;\r\n    }\r\n\r\n    /**\r\n     * Приложение, в составе которого используется фабрика команд.\r\n     */\r\n    public get application() : IApplication{\r\n        return this._application;\r\n    }\r\n\r\n    public hasCommand(cmdName : string) : boolean{\r\n        throw new Error('Is not implemented.');\r\n    }\r\n\r\n    public createICommand(context : IDocumentContext, cmdName : string, cmdArgs : any) : ICommand{\r\n        throw new Error('Is not implemented.');\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/api/src/ts/classes/CommandFactory.ts","/**\r\n * CommandOutput.ts\r\n */\r\n\r\nimport {ICommandOutput} from \"../interfaces/ICommandOutput\";\r\nimport {IResult} from \"../interfaces/IResult\";\r\n\r\n/**\r\n * Этот класс содержит в себе информацию о результатах выполнения команды.\r\n */\r\nexport class CommandOutput implements ICommandOutput{\r\n    private _data : any;\r\n    private _result : IResult;\r\n\r\n    /**\r\n     * Конструктор класса.\r\n     * @param {any} data Объект, в котором размещаются данные,\r\n     * возвращаемые командой (если такие данные имеются).\r\n     * @param {Result} result Краткая информация об успешности выполнения команды.\r\n     */\r\n    constructor({data, result} : {data : any, result : IResult}){\r\n        this._data = data;\r\n        this._result = result;\r\n    }\r\n\r\n    /**\r\n     * Объект, в котором размещаются данные, возвращаемые командой (если такие данные имеются).\r\n     * @returns {any}\r\n     */\r\n    public get data() : any{\r\n        return this._data;\r\n    }\r\n\r\n    /**\r\n     * Краткая информация об успешности выполнения команды.\r\n     * @returns {Result}\r\n     */\r\n    public get report() : IResult{\r\n        return this._result;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/api/src/ts/classes/CommandOutput.ts","import {ICommandStack} from \"../interfaces/ICommandStack\";\r\nimport {ICommand} from \"../interfaces/ICommand\";\r\nimport {IResult} from \"../interfaces/IResult\";\r\nimport {IDocumentContext} from \"../interfaces/IDocumentContext\";\r\n\r\n/**\r\n * Стек вызова команд. Этот стек определяется в составе документа,\r\n * в контексте которого выполнялись команды, помещаемые в данный стек.\r\n */\r\nexport class CommandStack implements ICommandStack{\r\n\r\n    // Стек, использующийся в методе `redo()` для отмены выполненной отмены.\r\n    private _redoStack : Array<ICommand>;\r\n\r\n    private _commandStack : Array<ICommand>;\r\n\r\n    /**\r\n     * Конструктор класса.\r\n     * @param {IDocumentContext} context Контекст использования документа.\r\n     * Стек вызова команд находится в составе контекста.\r\n     */\r\n    constructor(context : IDocumentContext){\r\n        this._redoStack = new Array<ICommand>();\r\n        this._commandStack = new Array<ICommand>();\r\n        this._context = context;\r\n    }\r\n\r\n    private _context : IDocumentContext;\r\n\r\n    /**\r\n     * Контекст использования документа.\r\n     * @returns {IDocumentContext}\r\n     */\r\n    public get context() : IDocumentContext{\r\n        return this._context;\r\n    }\r\n\r\n    public set context(value : IDocumentContext){\r\n        this._context = value;\r\n    }\r\n\r\n    /**\r\n     * Количество команд, находящихся в стеке вызовов.\r\n     */\r\n    public get length() : number{\r\n        return this._commandStack.length;\r\n    }\r\n\r\n    /**\r\n     * Добавить команду на верширу стека вызовов команд.\r\n     *\r\n     * **ВНИМАНИЕ!** Данный метод предназначен для\r\n     * внутреннего использования, не вызывайте его самостоятельно!\r\n     * В случае успешного выполнения, команда сама себя добавит в стек\r\n     * вызова команд (эта логика заложена в базовом классе `Command`,\r\n     * от которого должны наследоваться все команды приложения).\r\n     *\r\n     * @param {ICommand} command Команда, которую следует добавить на\r\n     * вершину стека вызовов команд.\r\n     * @returns {IResult} Возвращается отчёт об успешности операции.\r\n     */\r\n    push(command: ICommand): IResult {\r\n        const factory = this.context.document.application.factory;\r\n\r\n        if(command){\r\n            this._commandStack.push(command);\r\n            // поскольку цепочка вызовов `undo()` прервана новой поступившей\r\n            // командой, то очищаем стек, предназначенный для использования\r\n            // методом `redo()`.\r\n            this._redoStack = new Array<ICommand>();\r\n            return factory.createIResult(true, '');\r\n        }\r\n        else{\r\n            return factory.createIResult(false,\r\n                'В стек команд можно добавлять только команды.');\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Отменить действие команды, находящейся на вершине стека вызова команд.\r\n     * Отменённая команда автоматически выталкивается из стека, тем самым позволяя\r\n     * выполнять отмену для предыдущей команды и т.д.\r\n     * @returns {IResult} Возвращается отчёт об успешности операции.\r\n     */\r\n    undo(): IResult {\r\n\r\n        const factory = this.context.document.application.factory;\r\n\r\n        if(this._commandStack.length){\r\n            const cmd = this._commandStack.pop();\r\n            this._redoStack.push(cmd);\r\n\r\n            return cmd.undo();\r\n        }\r\n        else{\r\n            return factory.createIResult(false,\r\n                'В стеке выполненных команд отсутствуют команды.');\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Вернуть обратно результаты выполнения команды (т.е. отменить отмену). В этом случае\r\n     * на вершину стека вызова команд возвращается та команда, действия которой ранее\r\n     * были отменены при помощи вызова `undo()`.\r\n     * @returns {IResult} Возвращается отчёт об успешности операции.\r\n     */\r\n    redo(): IResult {\r\n\r\n        const factory = this.context.document.application.factory;\r\n\r\n        if(this._redoStack.length){\r\n            const cmd = this._redoStack.pop();\r\n            this._commandStack.push(cmd);\r\n\r\n            return cmd.execute().report;\r\n        }\r\n        else{\r\n            return factory.createIResult(false,\r\n                'В стеке восстановления команд отсутствуют команды.');\r\n        }\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/api/src/ts/classes/CommandStack.ts","\r\nimport {EventEmitter} from \"./EventEmitter\";\r\nimport {ICondition} from \"../interfaces/ICondition\";\r\nimport {ILevel} from \"../interfaces/ILevel\";\r\nimport {IDocument} from \"../interfaces/IDocument\";\r\nimport {IConnection} from \"../interfaces/IConnection\";\r\nimport {ILevelNode} from \"../interfaces/ILevelNode\";\r\nimport {IVariant} from \"../interfaces/IVariant\";\r\nimport {LevelEntityEventNames} from \"../enums/event_names/LevelEntityEventNames\";\r\nimport {_ICondition} from \"../_internal_interfaces/_ICondition\";\r\nimport {_IDocumentContext} from \"../_internal_interfaces/_IDocumentContext\";\r\nimport {IResult} from \"../interfaces/IResult\";\r\nimport {_ILevelNode} from \"../_internal_interfaces/_ILevelNode\";\r\nimport {TypeNames} from \"../enums/TypeNames\";\r\nimport {TransactionStatus} from \"../enums/TransactionStatus\";\r\nimport {_ITransaction} from \"../_internal_interfaces/_ITransaction\";\r\n\r\ntype ID = string;\r\n\r\n/**\r\n * Условие, размещаемое на уровне.\r\n */\r\nexport class Condition extends EventEmitter<LevelEntityEventNames> implements _ICondition{\r\n\r\n    _setID(value : ID) : void{\r\n        this._id = value;\r\n    }\r\n\r\n    private isInsideOfTransaction() : boolean{\r\n        let transaction = this._document.getCurrentTransaction();\r\n        if(!transaction || transaction.status != TransactionStatus.Started) return false;\r\n        else return true;\r\n    }\r\n\r\n    private _document : IDocument;\r\n\r\n    public get document() : IDocument{\r\n        return this._document;\r\n    }\r\n\r\n    constructor(doc : IDocument, code : string, text : string){\r\n        super();\r\n        this._document = doc;\r\n        this._typeName = TypeNames.Condition;\r\n        this._code = code;\r\n        this._name = text;\r\n        this._node = null;\r\n        this._inputConnections = [];\r\n        this._variants = [];\r\n    }\r\n\r\n    /**\r\n     * Проверка на то, был ли удалён данный объект опосредованно - через удаление одного из его\r\n     * предков.\r\n     * @returns {boolean}\r\n     */\r\n    isDeletedByForefather(){\r\n        let parent = this.getParent() as _ILevelNode;\r\n        let context = this.document.getContext() as _IDocumentContext;\r\n        let treeNode = context.treeNodes.get(parent.nodeId);\r\n        return treeNode.isDeleted();\r\n    }\r\n\r\n    /**\r\n     * Проверка на то, был ли объект удалён каким-либо образом: напрямую, через установку\r\n     * свойства `isDeletedDirectly`, или же опосредованно, через удаление родителя\r\n     * (см. метод `isDeletedByForefather()`).\r\n     * @returns {boolean}\r\n     */\r\n    isDeleted(){\r\n        let context = this.document.getContext() as _IDocumentContext;\r\n        let treeNode = context.treeNodes.get(this.nodeId);\r\n        return treeNode.isDeleted();\r\n    }\r\n\r\n    /**\r\n     * Удалить узел или условие.\r\n     * @returns {IResult} Отчёт о результате выполнения операции.\r\n     */\r\n    delete() : IResult{\r\n\r\n        if(!this.isInsideOfTransaction()){\r\n            throw new Error('Редактировать объект можно только в предварительно открытой транзакции.');\r\n        }\r\n\r\n        let context = this.document.getContext() as _IDocumentContext;\r\n        let treeNode = context.treeNodes.get(this.nodeId);\r\n\r\n        let result = treeNode.delete();\r\n        if(result.success) (this.document.getCurrentTransaction() as _ITransaction).editedItems.set(this.id,this);\r\n\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * Заблокировать узел или условие.\r\n     * @returns {IResult} Отчёт о результате выполнения операции.\r\n     */\r\n    lock() : IResult{\r\n        if(!this.isInsideOfTransaction()){\r\n            throw new Error('Редактировать объект можно только в предварительно открытой транзакции.');\r\n        }\r\n        let context = this.document.getContext() as _IDocumentContext;\r\n        let treeNode = context.treeNodes.get(this.nodeId);\r\n\r\n        return treeNode.lock();\r\n    }\r\n\r\n    /**\r\n     * Разблокировать узел или условие.\r\n     * @returns {IResult} Отчёт о результате выполнения операции.\r\n     */\r\n    unlock() : IResult{\r\n        if(!this.isInsideOfTransaction()){\r\n            throw new Error('Редактировать объект можно только в предварительно открытой транзакции.');\r\n        }\r\n        let context = this.document.getContext() as _IDocumentContext;\r\n        let treeNode = context.treeNodes.get(this.nodeId);\r\n\r\n        return treeNode.unlock();\r\n    }\r\n\r\n    /**\r\n     * Получить идентификатор пользователя, заблокировавшего данный объект.\r\n     * Объект может быть заблокирован опосредованно, через одного из своих предков.\r\n     * @returns {string}\r\n     */\r\n    getLockerID() : string{\r\n        let context = this.document.getContext() as _IDocumentContext;\r\n        let treeNode = context.treeNodes.get(this.nodeId);\r\n        return treeNode.getLockerID();\r\n    }\r\n\r\n    _node: string;\r\n    _code: string;\r\n    _name: string;\r\n\r\n    _lockerId: string;\r\n    _isChanged: boolean;\r\n\r\n    public get lockerId(): string{\r\n        return this._lockerId;\r\n    }\r\n\r\n    public set lockerId(value: string){\r\n        if(!this.isInsideOfTransaction()){\r\n            throw new Error('Редактировать объект можно только в предварительно открытой транзакции.');\r\n        }\r\n        if(this.getLockerID() != this.document.application.getCurrentUserId()){\r\n            throw new Error('Редактировать можно только объекты, предварительно заблокированые вами.');\r\n        }\r\n        this._lockerId = value;\r\n        (this.document.getCurrentTransaction() as _ITransaction).editedItems.set(this.id,this);\r\n    }\r\n\r\n    public get isChanged(): boolean{\r\n        return this._isChanged;\r\n    }\r\n\r\n    public set isChanged(value : boolean){\r\n        if(!this.isInsideOfTransaction()){\r\n            throw new Error('Редактировать объект можно только в предварительно открытой транзакции.');\r\n        }\r\n        if(this.getLockerID() != this.document.application.getCurrentUserId()){\r\n            throw new Error('Редактировать можно только объекты, предварительно заблокированые вами.');\r\n        }\r\n        this._isChanged = value;\r\n        (this.document.getCurrentTransaction() as _ITransaction).editedItems.set(this.id,this);\r\n    }\r\n\r\n    public get nodeId(): string{\r\n        return this._node;\r\n    }\r\n\r\n    public set nodeId(value : string){\r\n        if(!this.isInsideOfTransaction()){\r\n            throw new Error('Редактировать объект можно только в предварительно открытой транзакции.');\r\n        }\r\n        this._node = value;\r\n        (this.document.getCurrentTransaction() as _ITransaction).editedItems.set(this.id,this);\r\n    }\r\n\r\n    public get code(): string{\r\n        return this._code;\r\n    }\r\n\r\n    public set code(value : string){\r\n        if(!this.isInsideOfTransaction()){\r\n            throw new Error('Редактировать объект можно только в предварительно открытой транзакции.');\r\n        }\r\n        if(this.getLockerID() != this.document.application.getCurrentUserId()){\r\n            throw new Error('Редактировать можно только объекты, предварительно заблокированые вами.');\r\n        }\r\n        this._code = value;\r\n        (this.document.getCurrentTransaction() as _ITransaction).editedItems.set(this.id,this);\r\n    }\r\n\r\n    public get name(): string{\r\n        return this._name;\r\n    }\r\n\r\n    public set name(value : string){\r\n        if(!this.isInsideOfTransaction()){\r\n            throw new Error('Редактировать объект можно только в предварительно открытой транзакции.');\r\n        }\r\n        if(this.getLockerID() != this.document.application.getCurrentUserId()){\r\n            throw new Error('Редактировать можно только объекты, предварительно заблокированые вами.');\r\n        }\r\n        this._name = value;\r\n        (this.document.getCurrentTransaction() as _ITransaction).editedItems.set(this.id,this);\r\n    }\r\n\r\n    getLevel(): ILevel {\r\n\r\n        let index = 0; // индекс уровня\r\n        let node = (this.document.getContext() as _IDocumentContext).treeNodes.get(this.nodeId);\r\n\r\n        while(node.getParent()){\r\n            ++index;\r\n            node = (this.document.getContext() as _IDocumentContext).treeNodes.get(node.getParent());\r\n        }\r\n\r\n        // теперь выбираем уровень с нужным индексом.\r\n        let level = this.document.getContext().getTopLevel();\r\n\r\n        if(!level) {\r\n            console.log('Верхний уровень не найден.');\r\n            return null;\r\n        }\r\n\r\n        while(index > 0){\r\n            if(!level.nextId) {\r\n                return null;\r\n            }\r\n            else{\r\n                level = (this.document.getContext() as _IDocumentContext).levels.get(level.nextId);\r\n                --index;\r\n            }\r\n        }\r\n        return level;\r\n    }\r\n\r\n    private _inputConnections: string[];\r\n    private _variants: string[];\r\n    private _typeName: TypeNames;\r\n\r\n    public get inputConnections(): string[]{\r\n        return this._inputConnections;\r\n    }\r\n\r\n    public get variants(): string[]{\r\n        return this._variants;\r\n    }\r\n\r\n    public get typeName(): TypeNames{\r\n        return this._typeName;\r\n    }\r\n\r\n    /**\r\n     * Получить объекты входящих подключений.\r\n     * @returns {Array<IConnection>}\r\n     */\r\n    getInputConnections() : Array<IConnection>{\r\n        let arr = [];\r\n        for(let n of this.inputConnections){\r\n            let connection = (this.document.getContext() as _IDocumentContext).connections.get(n);\r\n            if(!connection.isDeletedDirectly) arr.push(connection);\r\n        }\r\n        return arr;\r\n    }\r\n\r\n    /**\r\n     * Получить родительский узел, находящийся на одном уровне выше.\r\n     * @returns {ILevelEntity}\r\n     */\r\n    getParent() : ILevelNode{\r\n        let node = (this.document.getContext() as _IDocumentContext).treeNodes.get(this.nodeId);\r\n        let parentId = node.getParent();\r\n\r\n        if(parentId){\r\n            let _node = (this.document.getContext() as _IDocumentContext).treeNodes.get(parentId);\r\n            return (this.document.getContext() as _IDocumentContext).levelEntities.get(_node.valueId) as ILevelNode;\r\n        }\r\n        else{\r\n            return null;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Получить варианты, определённые в составе данного условия.\r\n     * @returns {Array<IVariant>}\r\n     */\r\n    getVariants() : Array<IVariant>{\r\n        let arr = [];\r\n        for(let n of this.variants){\r\n            let variant = (this.document.getContext() as _IDocumentContext).variants.get(n);\r\n            if(!variant.isDeletedDirectly) arr.push(variant);\r\n        }\r\n        return arr;\r\n    }\r\n\r\n    clone() : ICondition{\r\n\r\n        let item = this.document.application.factory.createICondition(this.document,this.code,\r\n            this.name) as _ICondition;\r\n\r\n        item._setID(this.id);\r\n\r\n        for(let n of this.inputConnections){\r\n            item.inputConnections.push(n);\r\n        }\r\n\r\n        for(let n of this.variants){\r\n            item.variants.push(n);\r\n        }\r\n\r\n        item._node = this.nodeId;\r\n\r\n        return item;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/api/src/ts/classes/Condition.ts","\r\nimport {EventEmitter} from \"./EventEmitter\";\r\nimport {IConnection} from \"../interfaces/IConnection\";\r\nimport {IDocument} from \"../interfaces/IDocument\";\r\nimport {ConnectionEventNames} from \"../enums/event_names/ConnectionEventNames\";\r\nimport {_ILevelNode} from \"../_internal_interfaces/_ILevelNode\";\r\nimport {_IDocumentContext} from \"../_internal_interfaces/_IDocumentContext\";\r\nimport {IResult} from \"../interfaces/IResult\";\r\nimport {ILevelNode} from \"../interfaces/ILevelNode\";\r\nimport {TypeNames} from \"../enums/TypeNames\";\r\nimport {TransactionStatus} from \"../enums/TransactionStatus\";\r\nimport {_IConnection} from \"../_internal_interfaces/_IConnection\";\r\ntype ID = string;\r\n\r\n/**\r\n * Связь, устанавливаемая между узлами, условиями и вариантами условий.\r\n */\r\nexport class Connection extends EventEmitter<ConnectionEventNames> implements  _IConnection{\r\n\r\n    _setID(value : ID) : void{\r\n        this._id = value;\r\n    }\r\n\r\n    private isInsideOfTransaction() : boolean{\r\n        let transaction = this._document.getCurrentTransaction();\r\n        if(!transaction || transaction.status != TransactionStatus.Started) return false\r\n        else return true;\r\n    }\r\n\r\n    /**\r\n     * Проверка на то, был ли удалён данный объект опосредованно - через удаление одного из его\r\n     * предков.\r\n     * @returns {boolean}\r\n     */\r\n    isDeletedByForefather(){\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * Проверка на то, был ли объект удалён каким-либо образом: напрямую, через установку\r\n     * свойства `isDeletedDirectly`, или же опосредованно, через удаление родителя\r\n     * (см. метод `isDeletedByForefather()`).\r\n     * @returns {boolean}\r\n     */\r\n    isDeleted(){\r\n        return this.isDeletedDirectly;\r\n    }\r\n\r\n    /**\r\n     * Удалить узел или условие.\r\n     * @returns {IResult} Отчёт о результате выполнения операции.\r\n     */\r\n    delete() : IResult{\r\n        if(!this.isInsideOfTransaction()){\r\n            throw new Error('Редактировать объект можно только в предварительно открытой транзакции.');\r\n        }\r\n        this.isDeletedDirectly = true;\r\n        return this.document.application.factory.createIResult(true,'');\r\n    }\r\n\r\n    id: string;\r\n\r\n    /**\r\n     * Конструктор класса.\r\n     * @param {IDocument} document Документ, в составе которого определяется подключение.\r\n     * @param {ID} sourceId Источник подключения.\r\n     * @param {ID} targetId Приемник подключения.\r\n     * @param {string} text Текст, отображаемый пользователю над линией подключения.\r\n     */\r\n    constructor(document : IDocument, sourceId : ID, targetId : ID, text : string){\r\n        super();\r\n        this._document = document;\r\n        this._typeName = TypeNames.Connection;\r\n        this._sourceId = sourceId;\r\n        this._targetId = targetId;\r\n        this._text = text;\r\n        this._lockerId = null;\r\n        this._isChanged = false;\r\n    }\r\n\r\n    private _document : IDocument;\r\n\r\n    public get document() : IDocument{\r\n        return this._document;\r\n    }\r\n\r\n    private _text : string;\r\n    private _sourceId : string;\r\n    private _targetId : string;\r\n\r\n    _isDeletedDirectly : boolean;\r\n\r\n    _lockerId : string;\r\n    _isChanged : boolean;\r\n    private _typeName : TypeNames;\r\n\r\n    public get text() : string{\r\n        return this._text;\r\n    }\r\n\r\n    public get sourceId() : string{\r\n        return this._sourceId;\r\n    }\r\n\r\n    public get targetId() : string{\r\n        return this._targetId;\r\n    }\r\n\r\n    public set lockerId(value: string){\r\n        this._lockerId = value;\r\n    }\r\n\r\n    public get isChanged(): boolean{\r\n        return this._isChanged;\r\n    }\r\n\r\n    public get isDeletedDirectly(): boolean{\r\n        return this._isDeletedDirectly;\r\n    }\r\n\r\n    public set isDeletedDirectly(value: boolean){\r\n        if(!this.isInsideOfTransaction()){\r\n            throw new Error('Редактировать объект можно только в предварительно открытой транзакции.');\r\n        }\r\n        this._isDeletedDirectly = value;\r\n    }\r\n\r\n    public get typeName(): TypeNames{\r\n        return this._typeName;\r\n    }\r\n\r\n    clone() : IConnection{\r\n        let item = this.document.application.factory.createIConnection(\r\n            this.document,this.sourceId,this.targetId,\r\n            this.text) as _IConnection;\r\n\r\n        item._setID(this.id);\r\n        item._lockerId = this.lockerId;\r\n        item._isChanged = this.isChanged;\r\n        item._isDeletedDirectly = this.isDeletedDirectly;\r\n        return item;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/api/src/ts/classes/Connection.ts","\r\nimport {EventEmitter} from \"./EventEmitter\";\r\nimport {IDataProvider} from \"../interfaces/IDataProvider\";\r\nimport {IApplication} from \"../interfaces/IApplication\";\r\nimport {IDatabase} from \"../interfaces/IDatabase\";\r\nimport {IResult} from \"../interfaces/IResult\";\r\nimport {IDocument} from \"../interfaces/IDocument\";\r\nimport {IStatus} from \"../interfaces/IStatus\";\r\nimport {IDocumentInfo} from \"../interfaces/IDocumentInfo\";\r\nimport {DataProviderEventNames} from \"../enums/event_names/DataProviderEventNames\";\r\nimport {_IDocumentContext} from \"../_internal_interfaces/_IDocumentContext\";\r\n\r\ntype ID = string;\r\ntype UserID = string;\r\n\r\n/**\r\n * Реализация интерфейса для взаимодействия с сервером.\r\n */\r\nexport class DataProvider extends EventEmitter<DataProviderEventNames> implements IDataProvider{\r\n\r\n    /**\r\n     * Конструктор класса.\r\n     * @param {IApplication} app Приложение, в составе которого используется провайдер данных.\r\n     */\r\n    constructor(app : IApplication){\r\n        super();\r\n\r\n        if(!app) throw new Error('Провайдеру данных не указан объект приложения.');\r\n\r\n        this._application = app;\r\n    }\r\n\r\n    private _application : IApplication;\r\n\r\n    /**\r\n     * Приложение, в составе которого используется провайдер данных.\r\n     */\r\n    public get application() : IApplication{\r\n        return this._application;\r\n    }\r\n\r\n    /**\r\n     * Получить с сервера копию общей базы данных компаний.\r\n     * @param {ID} databaseId Идентификатор искомой базы данных.\r\n     * @returns {IDatabase} Копия общей базы данных компаний или `null`, если для указанного\r\n     * идентификатора ничего не было найдено.\r\n     */\r\n    openDb(databaseId: ID): IDatabase {\r\n        throw new Error('Method is not implemented.');\r\n    }\r\n\r\n    protected _lockDbObject(databaseId: ID, objectId: ID): IResult{\r\n        // TODO: здесь нужно добавить код, отправляющий на сервер запрос о блокировке\r\n        // и получающий логическое значение, сообщающее об успешности или отказе операции.\r\n\r\n        throw new Error('Method is not implemented.');\r\n    }\r\n\r\n    protected _unlockDbObject(databaseId: ID, objectId: ID): IResult{\r\n\r\n        // TODO: здесь нужно добавить код, отправляющий на сервер запрос о разблокировке\r\n        // и получающий логическое значение, сообщающее об успешности или отказе операции.\r\n\r\n        throw new Error('Method is not implemented.');\r\n    }\r\n\r\n    /**\r\n     * Заблокировать объект в общей базе данных компаний.\r\n     * @param {ID} databaseId Идентификатор базы данных компаний.\r\n     * @param {ID} objectId Идентификатор объекта, подлежащего блокировке.\r\n     * @returns {IResult} Отчёт о результатах выполнения операции.\r\n     */\r\n    lockDbObject(databaseId: ID, objectId: ID): IResult {\r\n\r\n        const result  = this._lockDbObject(databaseId,objectId);\r\n\r\n        if(result.success){\r\n            let obj = this.application.commonDatabase.getContext().getObject(objectId);\r\n            if(obj) {\r\n                let m : any = obj;\r\n                m = m as IStatus;\r\n                m.lockerId = this.application.getCurrentUserId();\r\n                return this.application.factory.createIResult(true,'');\r\n            }\r\n            else{\r\n                return this.application.factory.createIResult(false,\r\n                    `Объект с ID = '${objectId}' не найден. Блокировка отклонена.`);\r\n            }\r\n        }\r\n        else{\r\n            return result;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Разблокировать объект в общей базе данных компаний.\r\n     * @param {ID} databaseId Идентификатор базы данных компаний.\r\n     * @param {ID} objectId Идентификатор объекта, подлежащего разблокировке.\r\n     * @returns {IResult} Отчёт о результатах выполнения операции.\r\n     */\r\n    unlockDbObject(databaseId: ID, objectId: ID): IResult {\r\n\r\n        const result  = this._unlockDbObject(databaseId,objectId);\r\n\r\n        if(result.success){\r\n            let obj = this.application.commonDatabase.getContext().getObject(objectId);\r\n            if(obj) {\r\n                let m : any = obj;\r\n                m = m as IStatus;\r\n                m.lockerId = null;\r\n                return this.application.factory.createIResult(true,'');\r\n            }\r\n            else{\r\n                return this.application.factory.createIResult(false,\r\n                    `Объект с ID = '${objectId}' не найден. Разблокировка отклонена.`);\r\n            }\r\n        }\r\n        else{\r\n            return result;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Синхронизировать локальную копию общей базы данных компаний с её серверной копией.\r\n     * @param {IDatabase} database Локальная копия общей базы данных компаний.\r\n     * @returns {IResult} Отчёт о результатах выполнения операции.\r\n     */\r\n    syncDb(database: IDatabase): IResult {\r\n        throw new Error('Method is not implemented.');\r\n    }\r\n\r\n    /**\r\n     * Получить документ (технологию) с сервера.\r\n     * @param {ID} docId Идентификатор искомого документа.\r\n     * @returns {IDocument} Возвращается запрошенный документ или `null`, если документ с\r\n     * указанным идентификатором не был найден.\r\n     */\r\n    openDocument(docId: ID): IDocument {\r\n        throw new Error('Method is not implemented.');\r\n    }\r\n\r\n    protected _lockDocumentObject(docId: ID, objectId: ID): IResult{\r\n\r\n        // TODO: здесь нужно добавить код, отправляющий на сервер запрос о блокировке\r\n        // и получающий логическое значение, сообщающее об успешности или отказе операции.\r\n\r\n        throw new Error('Method is not implemented.');\r\n    }\r\n\r\n    protected _unlockDocumentObject(docId: ID, objectId: ID): IResult{\r\n\r\n        // TODO: здесь нужно добавить код, отправляющий на сервер запрос о разблокировке\r\n        // и получающий логическое значение, сообщающее об успешности или отказе операции.\r\n\r\n        throw new Error('Method is not implemented.');\r\n    }\r\n\r\n    /**\r\n     * Заблокировать объект в документе.\r\n     * @param {ID} docId Идентификатор целевого документа.\r\n     * @param {ID} objectId Идентификатор целевого объекта.\r\n     * @returns {IResult} Отчёт о результатах выполнения операции.\r\n     */\r\n    lockDocumentObject(docId: ID, objectId: ID): IResult {\r\n\r\n        const result  = this._lockDocumentObject(docId,objectId);\r\n\r\n        if(result.success){\r\n\r\n            let obj : IStatus = null;\r\n            const context = this.application.documentManager.get(docId).getContext() as _IDocumentContext;\r\n            if(context.levels.has(objectId)){\r\n                obj = context.levels.get(objectId);\r\n            }\r\n            if(context.treeNodes.has(objectId)){\r\n                obj = context.treeNodes.get(objectId);\r\n            }\r\n            else if(context.connections.has(objectId)){\r\n                obj = context.connections.get(objectId);\r\n            }\r\n            else if(context.variants.has(objectId)){\r\n                obj = context.variants.get(objectId);\r\n            }\r\n            else if(context.references.has(objectId)){\r\n                obj = context.references.get(objectId);\r\n            }\r\n\r\n            if(obj) {\r\n                obj.lockerId = this.application.getCurrentUserId();\r\n                return this.application.factory.createIResult(true,'');\r\n            }\r\n            else{\r\n                return this.application.factory.createIResult(false,\r\n                    `Объект с ID = '${objectId}' не найден. Блокировка отклонена.`);\r\n            }\r\n        }\r\n        else{\r\n            return result;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Разблокировать объект в документе.\r\n     * @param {ID} docId Идентификатор целевого документа.\r\n     * @param {ID} objectId Идентификатор целевого объекта.\r\n     * @returns {IResult} Отчёт о результатах выполнения операции.\r\n     */\r\n    unlockDocumentObject(docId: ID, objectId: ID): IResult {\r\n\r\n        const result  = this._unlockDocumentObject(docId,objectId);\r\n\r\n        if(result.success){\r\n            const context = this.application.documentManager.get(docId)\r\n                .getContext() as _IDocumentContext;\r\n\r\n            let obj : IStatus = null;\r\n\r\n            if(context.levels.has(objectId)){\r\n                obj = context.levels.get(objectId);\r\n            }\r\n            if(context.treeNodes.has(objectId)){\r\n                obj = context.treeNodes.get(objectId);\r\n            }\r\n            else if(context.connections.has(objectId)){\r\n                obj = context.connections.get(objectId);\r\n            }\r\n            else if(context.variants.has(objectId)){\r\n                obj = context.variants.get(objectId);\r\n            }\r\n            else if(context.references.has(objectId)){\r\n                obj = context.references.get(objectId);\r\n            }\r\n\r\n            if(obj) {\r\n                obj.lockerId = null;\r\n                return this.application.factory.createIResult(true,'');\r\n            }\r\n            else{\r\n                return this.application.factory.createIResult(false,\r\n                    `Объект с ID = '${objectId}' не найден. Разблокировка отклонена.`);\r\n            }\r\n        }\r\n        else{\r\n            return result;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Синхронизировать локальную копию документа (технологии) с его серверной копией.\r\n     * @param {IDocument} doc Локальная копия документа (технологии)\r\n     * @returns {IResult} Отчёт о результатах выполнения операции.\r\n     */\r\n    syncDocument(doc: IDocument): IResult {\r\n        throw new Error('Method is not implemented.');\r\n    }\r\n\r\n    /**\r\n     * Получить перечень документов, имеющихся на сервере.\r\n     * @returns {Array<IDocumentInfo>}\r\n     */\r\n    getDocumentList() : Array<IDocumentInfo>{\r\n        throw new Error('Method is not implemented.');\r\n    }\r\n\r\n    /**\r\n     * Получить идентификатор текущего пользователя.\r\n     * @returns {string}\r\n     */\r\n    getCurrentUserId() : UserID{\r\n        throw new Error('Method is not implemented.');\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/api/src/ts/classes/DataProvider.ts","\r\nimport {IDatabase} from \"../interfaces/IDatabase\";\r\nimport {EventEmitter} from \"./EventEmitter\";\r\nimport {IApplication} from \"../interfaces/IApplication\";\r\nimport {IResult} from \"../interfaces/IResult\";\r\nimport {IDbTransaction} from \"../interfaces/IDbTransaction\";\r\nimport {IDatabaseContext} from \"../interfaces/IDatabaseContext\";\r\nimport {TransactionStatus} from \"../enums/TransactionStatus\";\r\nimport {IDbRole} from \"../interfaces/IDbRole\";\r\nimport {IDbUser} from \"../interfaces/IDbUser\";\r\nimport {IDepartment} from \"../interfaces/IDepartment\";\r\nimport {DataBaseEventNames} from \"../enums/event_names/DataBaseEventNames\";\r\n\r\ntype RoleID = string;\r\ntype UserID = string;\r\ntype DepartmentID = string;\r\ntype ID = string;\r\n\r\nexport class Database extends EventEmitter<DataBaseEventNames> implements IDatabase{\r\n\r\n    /**\r\n     * Заблокировать объект с указанным идентификатором.\r\n     * @param {ID} objId Идентификатор объекта, подлежащего блокировке.\r\n     * @returns {IResult} Отчёт о результатах операции.\r\n     */\r\n    lock(objId: ID): IResult {\r\n        return this.application.dataProvider.lockDbObject(this.id, objId);\r\n    }\r\n\r\n    /**\r\n     * Разблокировать объект с указанным идентификатором.\r\n     * @param {ID} objId Идентификатор объекта, подлежащего разблокировке.\r\n     * @returns {IResult} Отчёт о результатах операции.\r\n     */\r\n    unlock(objId: ID): IResult {\r\n        return this.application.dataProvider.unlockDbObject(this.id, objId);\r\n    }\r\n\r\n    constructor(app : IApplication){\r\n        super();\r\n        this._application = app;\r\n\r\n        this._contexts = new Array<IDatabaseContext>();\r\n        this._transactionStack = new Array<IDbTransaction>();\r\n\r\n        const departments = new Map<DepartmentID, IDepartment>();\r\n\r\n        const commandStack = this.application.factory.createIDbCommandStack(null);\r\n        const roles = new Map<RoleID, IDbRole>();\r\n        const users = new Map<UserID, IDbUser>();\r\n\r\n        const context = this.application.factory.createIDatabaseContext(this, departments, roles, users);\r\n\r\n        commandStack.context = context;\r\n\r\n        this._contexts.push(context);\r\n    }\r\n\r\n    // Стек активных транзакций\r\n    private _transactionStack : Array<IDbTransaction>;\r\n    private _contexts : Array<IDatabaseContext>;\r\n    private _application: IApplication;\r\n    private _code: string;\r\n    private _name: string;\r\n\r\n    public get application(): IApplication{\r\n        return this._application;\r\n    }\r\n\r\n    public set application(value : IApplication){\r\n        this._application = value;\r\n    }\r\n\r\n    public get code(): string{\r\n        return this._code;\r\n    }\r\n\r\n    public set code(value : string){\r\n        this._code = value;\r\n    }\r\n\r\n    public get name(): string{\r\n        return this._name;\r\n    }\r\n\r\n    public set name(value : string){\r\n        this._name = value;\r\n    }\r\n\r\n    sync(): IResult {\r\n        return undefined;\r\n    }\r\n\r\n    close(): void {\r\n    }\r\n\r\n    _pushTransaction(tr: IDbTransaction): void {\r\n        if(!tr) throw new Error('_pushTransaction: В качестве параметра должен передаваться объек транзакции.');\r\n        else if(tr.database !== this) {\r\n            throw new Error('_popTransaction: Указанная транзакция не принадлежит данному документу.');\r\n        }\r\n        else if(tr.status !== TransactionStatus.Started){\r\n            throw new Error('_pushTransaction: В стек транзакций можно помещать только открытую транзакцию.');\r\n        }\r\n        else if(this._transactionStack.indexOf(tr) >= 0){\r\n            throw new Error('_pushTransaction: Эта транзакция уже присутствует в стеке транзакций.');\r\n        }\r\n        else{\r\n            // Заталкиваем транзакцию в стек и создаём для неё полную копию\r\n            // текущего состояния документа.\r\n            this._transactionStack.push(tr);\r\n            const context = this.getContext().clone();\r\n            this._contexts.push(context);\r\n        }\r\n    }\r\n\r\n    _popTransaction(tr: IDbTransaction): void {\r\n        if(!tr) throw new Error('_popTransaction: В качестве параметра должен передаваться объек транзакции.');\r\n        else if(tr.database !== this) {\r\n            throw new Error('_popTransaction: Указанная транзакция не принадлежит данному документу.');\r\n        }\r\n        else if(tr.status !== TransactionStatus.Commited && tr.status !== TransactionStatus.RolledBack){\r\n            throw new Error('_popTransaction: Нельзя удалить из стека не закрытую транзакцию.');\r\n        }\r\n        else if(this._transactionStack.indexOf(tr) < 0){\r\n            throw new Error('_popTransaction: Эта транзакция отсутствует в стеке транзакций.');\r\n        }\r\n        else if(this._transactionStack.length && this._transactionStack[this._transactionStack.length - 1] != tr){\r\n            throw new Error('_popTransaction: Транзакции должны закрываться в порядке, обратном их открытию!');\r\n        }\r\n        else{\r\n\r\n            // Если транзакция отклонена, то уничтожаем изменения, выполненные в рамках этой транзакции.\r\n            if(tr.status === TransactionStatus.RolledBack){\r\n\r\n                this._contexts.pop();\r\n                this._transactionStack.pop();\r\n            }\r\n            else if(tr.status === TransactionStatus.Commited){\r\n                this._transactionStack.pop();\r\n            }\r\n            else{\r\n                throw new Error('_popTransaction: Непредвиденная ошибка при попытке вытолкнуть транзакцию из стека!');\r\n            }\r\n        }\r\n\r\n        // Если все транзакции закрыты, то удаляем все состояния документа,\r\n        // кроме самого последнего, имеющегося в стеке состояний, т.к. оно содержит\r\n        // все актуальные изменения.\r\n        if(0 === this._transactionStack.length){\r\n\r\n            const last = this._contexts.pop();\r\n\r\n            this._contexts = new Array<IDatabaseContext>();\r\n            this._contexts.push(last);\r\n        }\r\n    }\r\n\r\n    createTransaction(): IDbTransaction {\r\n        return this.application.factory.createIDbTransaction(this);\r\n    }\r\n\r\n    getContext(): IDatabaseContext {\r\n        return this._contexts[this._contexts.length - 1];\r\n    }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/api/src/ts/classes/Database.ts","\r\nimport {EventEmitter} from \"./EventEmitter\";\r\nimport {IDatabaseContext} from \"../interfaces/IDatabaseContext\";\r\nimport {IDatabase} from \"../interfaces/IDatabase\";\r\nimport {IDepartment} from \"../interfaces/IDepartment\";\r\nimport {IDbRole} from \"../interfaces/IDbRole\";\r\nimport {IType} from \"../interfaces/IType\";\r\nimport {IDbCommandStack} from \"../interfaces/IDbCommandStack\";\r\nimport {IDbUser} from \"../interfaces/IDbUser\";\r\nimport {DataBaseContextEventNames} from \"../enums/event_names/DataBaseContextEventNames\";\r\n\r\ntype DepartmentID = string;\r\ntype RoleID = string;\r\ntype UserID = string;\r\n\r\nexport class DatabaseContext extends  EventEmitter<DataBaseContextEventNames> implements IDatabaseContext{\r\n\r\n    constructor(database: IDatabase, departments: Map<DepartmentID, IDepartment>,\r\n                roles: Map<RoleID, IDbRole>, users: Map<UserID, IDbUser>){\r\n        super();\r\n\r\n        this._database = database;\r\n        this._departments = departments;\r\n        this._roles = roles;\r\n        this._users = users;\r\n    }\r\n\r\n    private _database: IDatabase;\r\n    private _commandStack: IDbCommandStack;\r\n    private _departments: Map<DepartmentID, IDepartment>;\r\n    private _roles: Map<RoleID, IDbRole>;\r\n    private _users: Map<UserID, IDbUser>;\r\n\r\n    public get database() : IDatabase{\r\n        return this._database;\r\n    }\r\n\r\n    public get commandStack() : IDbCommandStack{\r\n        return this._commandStack;\r\n    }\r\n\r\n    public get departments() : Map<DepartmentID, IDepartment>{\r\n        return this._departments;\r\n    }\r\n\r\n    public get roles() : Map<RoleID, IDbRole>{\r\n        return this._roles;\r\n    }\r\n\r\n    public get users() : Map<UserID, IDbUser>{\r\n        return this._users;\r\n    }\r\n\r\n    getObject(id: string): IType {\r\n        if(this._roles.has(id)) return this._roles.get(id);\r\n        else if(this._departments.has(id)) return this._departments.get(id);\r\n        else if(this._roles.has(id)) return this._roles.get(id);\r\n        else if(this._users.has(id)) return this._users.get(id);\r\n    }\r\n\r\n    clone(): IDatabaseContext {\r\n        return undefined;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/api/src/ts/classes/DatabaseContext.ts","/**\r\n * Стек вызова команд. Этот стек определяется в составе документа,\r\n * в контексте которого выполнялись команды, помещаемые в данный стек.\r\n */\r\n\r\nimport {IDbCommandStack} from \"../interfaces/IDbCommandStack\";\r\nimport {IDbCommand} from \"../interfaces/IDbCommand\";\r\nimport {IDatabaseContext} from \"../interfaces/IDatabaseContext\";\r\nimport {IResult} from \"../interfaces/IResult\";\r\n\r\nexport class DbCommandStack implements IDbCommandStack{\r\n\r\n    // Стек, использующийся в методе `redo()` для отмены выполненной отмены.\r\n    private _redoStack : Array<IDbCommand>;\r\n\r\n    private _commandStack : Array<IDbCommand>;\r\n\r\n    /**\r\n     * Конструктор класса.\r\n     * @param {IDocumentContext} context Контекст использования документа.\r\n     * Стек вызова команд находится в составе контекста.\r\n     */\r\n    constructor(context : IDatabaseContext){\r\n        this._redoStack = new Array<IDbCommand>();\r\n        this._commandStack = new Array<IDbCommand>();\r\n        this._context = context;\r\n    }\r\n\r\n    private _context : IDatabaseContext;\r\n\r\n    /**\r\n     * Контекст использования документа.\r\n     * @returns {IDocumentContext}\r\n     */\r\n    public get context() : IDatabaseContext{\r\n        return this._context;\r\n    }\r\n\r\n    public set context(value : IDatabaseContext){\r\n        this._context = value;\r\n    }\r\n\r\n    /**\r\n     * Количество команд, находящихся в стеке вызовов.\r\n     */\r\n    public get length() : number{\r\n        return this._commandStack.length;\r\n    }\r\n\r\n    /**\r\n     * Добавить команду на верширу стека вызовов команд.\r\n     *\r\n     * **ВНИМАНИЕ!** Данный метод предназначен для\r\n     * внутреннего использования, не вызывайте его самостоятельно!\r\n     * В случае успешного выполнения, команда сама себя добавит в стек\r\n     * вызова команд (эта логика заложена в базовом классе `Command`,\r\n     * от которого должны наследоваться все команды приложения).\r\n     *\r\n     * @param {ICommand} command Команда, которую следует добавить на\r\n     * вершину стека вызовов команд.\r\n     * @returns {IResult} Возвращается отчёт об успешности операции.\r\n     */\r\n    push(command: IDbCommand): IResult {\r\n        const factory = this.context.database.application.factory;\r\n\r\n        if(command){\r\n            this._commandStack.push(command);\r\n            // поскольку цепочка вызовов `undo()` прервана новой поступившей\r\n            // командой, то очищаем стек, предназначенный для использования\r\n            // методом `redo()`.\r\n            this._redoStack = new Array<IDbCommand>();\r\n            return factory.createIResult(true, '');\r\n        }\r\n        else{\r\n            return factory.createIResult(false,\r\n                'В стек команд можно добавлять только команды.');\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Отменить действие команды, находящейся на вершине стека вызова команд.\r\n     * Отменённая команда автоматически выталкивается из стека, тем самым позволяя\r\n     * выполнять отмену для предыдущей команды и т.д.\r\n     * @returns {IResult} Возвращается отчёт об успешности операции.\r\n     */\r\n    undo(): IResult {\r\n\r\n        const factory = this.context.database.application.factory;\r\n\r\n        if(this._commandStack.length){\r\n            const cmd = this._commandStack.pop();\r\n            this._redoStack.push(cmd);\r\n\r\n            return cmd.undo();\r\n        }\r\n        else{\r\n            return factory.createIResult(false,\r\n                'В стеке выполненных команд отсутствуют команды.');\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Вернуть обратно результаты выполнения команды (т.е. отменить отмену). В этом случае\r\n     * на вершину стека вызова команд возвращается та команда, действия которой ранее\r\n     * были отменены при помощи вызова `undo()`.\r\n     * @returns {IResult} Возвращается отчёт об успешности операции.\r\n     */\r\n    redo(): IResult {\r\n\r\n        const factory = this.context.database.application.factory;\r\n\r\n        if(this._redoStack.length){\r\n            const cmd = this._redoStack.pop();\r\n            this._commandStack.push(cmd);\r\n\r\n            return cmd.execute().report;\r\n        }\r\n        else{\r\n            return factory.createIResult(false,\r\n                'В стеке восстановления команд отсутствуют команды.');\r\n        }\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/api/src/ts/classes/DbCommandStack.ts","\r\nimport {EventEmitter} from \"./EventEmitter\";\r\nimport {IDbRole} from \"../interfaces/IDbRole\";\r\nimport {IDatabase} from \"../interfaces/IDatabase\";\r\nimport {DbRoleEventNames} from \"../enums/event_names/DbRoleEventNames\";\r\nimport {TypeNames} from \"../enums/TypeNames\";\r\n\r\ntype RoleID = string;\r\n\r\n/**\r\n * Роль, определённая в составе компании.\r\n */\r\nexport class DbRole extends EventEmitter<DbRoleEventNames> implements IDbRole{\r\n\r\n    constructor(database : IDatabase, code: string, name : string, site : string, parent : RoleID){\r\n        super();\r\n        this._database = database;\r\n        this._typeName = TypeNames.DbRole;\r\n        this._code = code;\r\n        this._name = name;\r\n        this._site = site;\r\n        this._parent = parent;\r\n    }\r\n\r\n    private _database: IDatabase;\r\n    private _code: string;\r\n    private _name: string;\r\n    private _site: string;\r\n    private _parent: RoleID;\r\n    private _children: Array<RoleID>;\r\n    private _typeName: TypeNames;\r\n\r\n    public get database() : IDatabase{\r\n        return this._database;\r\n    }\r\n\r\n    public get code() : string{\r\n        return this._code;\r\n    }\r\n\r\n    public set code(value : string){\r\n        this._code = value;\r\n    }\r\n\r\n    public get name() : string{\r\n        return this._name;\r\n    }\r\n\r\n    public set name(value : string){\r\n        this._name = value;\r\n    }\r\n\r\n    public get site() : string{\r\n        return this._site;\r\n    }\r\n\r\n    public set site(value : string){\r\n        this._site = value;\r\n    }\r\n\r\n    public get parent() : RoleID{\r\n        return this._parent;\r\n    }\r\n\r\n    public set parent(value : RoleID){\r\n        this._parent = value;\r\n    }\r\n\r\n    public get children() : Array<RoleID>{\r\n        return this._children;\r\n    }\r\n\r\n    public get typeName() : TypeNames{\r\n        return this._typeName;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/api/src/ts/classes/DbRole.ts","\r\nimport {EventEmitter} from \"./EventEmitter\";\r\nimport {IDbTransaction} from \"../interfaces/IDbTransaction\";\r\nimport {IDatabase} from \"../interfaces/IDatabase\";\r\nimport {TransactionStatus} from \"../enums/TransactionStatus\";\r\nimport {DbTransactionEventNames} from \"../enums/event_names/DbTransactionEventNames\";\r\n\r\n/**\r\n * Транзакция. Транзакция позволяет выполнять над базой данных компаний\r\n * произвольный набор действий с тем, чтобы иметь возможность\r\n * в любой момент выполнить полный откат этих изменений обратно.\r\n *\r\n * Работать с базой данных компаний можно и без транзакций, т.к. каждая команда (`IDbCommand`) имеет\r\n * методы `undo()` и `redo()`, позволяющие отменять изменения, и снова восстанавливать их.\r\n * Однако, в том случае, если в процессе работы команды возникнет непредвиденная ошибка, в\r\n * виду которой команда будет выполнена не до конца, то\r\n * `undo()` и `redo()` могут не справиться с проблемой, т.к. они не знают о том, какие из\r\n * данных были успешно изменены, а какие - нет (в виду возникновения ошибки). Транзакции позволяют\r\n * избежать подобных ситуаций, однако их использование накладывает некоторые дополнительные\r\n * издержки (в плане производительности), т.к. на время своей работы каждая транзакция, при старте,\r\n * создаёт полную копию базы данных (так называемый *контекст*, представленный в виде\r\n * объекта `IDatabaseContext`).\r\n *\r\n * Транзакции следует создавать при помощи метода `IDatabase.createTransaction()`.\r\n *\r\n * **Открытые транзакции обязательно должны закрываться!** *Если транзакция\r\n * не будет закрыта, то все изменения, выполненные в рамках этой транзакции,\r\n * а так же в рамках всех вложенных транзакций, не будут применены к базе\r\n * данных.*\r\n *\r\n * Транзакции могут быть вложенными. Вложенность транзакций\r\n * определяется порядком их открытия и закрытия:\r\n *\r\n * Если была создана транзакция `A` и для неё был вызван метод `A.start()`,\r\n * после чего была создана транзакция `B` и для неё был вызван метод `B.start()`,\r\n * то транзакция `B` является вложенной по отношению к транзакции `A`.\r\n *\r\n * Транзакции должны закрываться *обязательно* в порядке противоположном\r\n * тому, в котором они открывались - в противном случае будет генерироваться\r\n * исключение.\r\n *\r\n * Если была создана транзакция `A` после чего была создана транзакция `B`,\r\n * а затем были вызваны методы `A.start()`, и `B.start()`, то\r\n * транзакция `B` является вложенной по отношению к транзакции `A`.\r\n *\r\n * Если была создана транзакция `A` после чего была создана транзакция `B`,\r\n * а затем были вызваны методы `B.start()`, и `A.start()`, то\r\n * транзакция `A` является вложенной по отношению к транзакции `B`.\r\n *\r\n * Если была создана транзакция `A`, затем вызваны методы `A.start()`, и\r\n * `A.commit()` (или `A.rollback()`), то все последующие стартуемые транзакции\r\n * не будут являться вложенными по отношению к транзакции `A`.\r\n */\r\nexport class DbTransaction extends EventEmitter<DbTransactionEventNames> implements IDbTransaction{\r\n\r\n    /**\r\n     * Конструктор класса.\r\n     * @param {IDatabase} db База данных компаний, владеющая данной транзакцией.\r\n     */\r\n    constructor(db : IDatabase){\r\n\r\n        super();\r\n        this._database = db;\r\n        this._status = TransactionStatus.Created;\r\n    }\r\n\r\n    private _database : IDatabase;\r\n\r\n    /**\r\n     * База данных компаний, владеющая данной транзакцией.\r\n     */\r\n    public get database() : IDatabase{\r\n        return this._database;\r\n    }\r\n\r\n    /**\r\n     * Открыть транзакцию для выполнения. В этот момент создаётся *полная копия*\r\n     * базы данных и все изменения будут выполняться с этой копией.\r\n     * *Вложенные* транзакции будут получать копии этой копии. Причём копии базы,\r\n     * получаемые во вложенных транзакциях, будут содержать все те изменения,\r\n     * которые на момент открытия вложенной транзакции уже были выполнены *родительской\r\n     * транзакцией*.\r\n     *\r\n     * Если транзакция откатывается, то изменения, выполненные в ней и\r\n     * во всех вложенных транзакциях, не будут применяться к базе данных документа.\r\n     *\r\n     * Если транзакция применяется, то все изменения, выполненные в ней и во всех\r\n     * вложенных транзакциях (для которых не был выполнен откат), будут применены\r\n     * к базе данных документа.\r\n     */\r\n    start() : void{\r\n\r\n        if(this._status !== TransactionStatus.Created){\r\n            throw new Error('start: Нельзя повторно открывать транзакцию.')\r\n        }\r\n\r\n        this._status = TransactionStatus.Started;\r\n        this.database._pushTransaction(this);\r\n    }\r\n\r\n    /**\r\n     * Сохранение изменений, выполненных в рамках данной транзакции, а так же во\r\n     * всех вложенных в неё транзакций, для которых был выполнен `commit()`.\r\n     */\r\n    commit(): void {\r\n        if(this._status !== TransactionStatus.Started){\r\n            throw new Error('commit: Нельзя применять `commit()` для незапущенной транзакции.')\r\n        }\r\n\r\n        this._status = TransactionStatus.Commited;\r\n        this.database._popTransaction(this);\r\n    }\r\n\r\n    /**\r\n     * Откат всех изменений, выполненных в рамках данной транзакции, а так же во всех\r\n     * вложенных в неё транзакциях.\r\n     */\r\n    rollback(): void {\r\n        if(this._status !== TransactionStatus.Started){\r\n            throw new Error('rollback: Нельзя применять `rollback()` для незапущенной транзакции.')\r\n        }\r\n\r\n        this._status = TransactionStatus.RolledBack;\r\n        this.database._popTransaction(this);\r\n    }\r\n\r\n    private _status : TransactionStatus;\r\n\r\n    /**\r\n     * Состояние, в котором находится транзакция.\r\n     */\r\n    public get status() : TransactionStatus{\r\n        return this._status;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/api/src/ts/classes/DbTransaction.ts","\r\nimport {EventEmitter} from \"./EventEmitter\";\r\nimport {IDbUser} from \"../interfaces/IDbUser\";\r\nimport {IDatabase} from \"../interfaces/IDatabase\";\r\nimport {DbUserEventNames} from \"../enums/event_names/DbUserEventNames\";\r\nimport {TypeNames} from \"../enums/TypeNames\";\r\n\r\ntype RoleID = string;\r\ntype UserID = string;\r\n\r\n/**\r\n * Сотрудник компании.\r\n */\r\nexport class DbUser extends EventEmitter<DbUserEventNames> implements IDbUser{\r\n\r\n    isDeletedByForefather(): boolean {\r\n        return false;\r\n    }\r\n\r\n    isDeleted(): boolean {\r\n        return this.isDeletedDirectly || this.isDeletedByForefather();\r\n    }\r\n\r\n    constructor(database : IDatabase, firstName : string, middleName :string,\r\n                lastName : string, site : string){\r\n        super();\r\n        this._database = database;\r\n        this._typeName = TypeNames.DbUser;\r\n        this._firstName = firstName;\r\n        this._middleName = middleName;\r\n        this._lastName = lastName;\r\n        this._site = site;\r\n        this._lockerId = null;\r\n        this._isChanged = false;\r\n        this._isDeleted = false;\r\n    }\r\n\r\n    private _database : IDatabase;\r\n\r\n    /**\r\n     * Общая база данных, в составе которой находится данный объект.\r\n     */\r\n    public get database() : IDatabase{\r\n        return this._database;\r\n    }\r\n\r\n    private _roleIds: Array<RoleID>;\r\n    private _firstName: string;\r\n    private _middleName: string;\r\n    private _lastName: string;\r\n    private _site: string;\r\n    private _lockerId: UserID;\r\n    private _isChanged: boolean;\r\n    private _isDeleted: boolean;\r\n    private _typeName: TypeNames;\r\n\r\n    /**\r\n     * Идентификаторы ролей, назначенных данному сотруднику.\r\n     * @returns {Array<RoleID>}\r\n     */\r\n    public get roleIds(): Array<RoleID>{\r\n        return this._roleIds;\r\n    }\r\n\r\n    /**\r\n     * Имя\r\n     * @returns {string}\r\n     */\r\n    public get firstName(): string{\r\n        return this._firstName;\r\n    }\r\n\r\n    public set firstName(value: string){\r\n        this._firstName = value;\r\n    }\r\n\r\n    /**\r\n     * Отчество\r\n     * @returns {string}\r\n     */\r\n    public get middleName(): string{\r\n        return this._middleName;\r\n    }\r\n\r\n    public set middleName(value : string){\r\n        this._middleName = value;\r\n    }\r\n\r\n    /**\r\n     * Фамилия\r\n     * @returns {string}\r\n     */\r\n    public get lastName(): string{\r\n        return this._lastName;\r\n    }\r\n\r\n    public set lastName(value : string){\r\n        this._lastName = value;\r\n    }\r\n\r\n    /**\r\n     * Сайт\r\n     * @returns {string}\r\n     */\r\n    public get site(): string{\r\n        return this._site;\r\n    }\r\n\r\n    public set site(value : string){\r\n        this._site = value;\r\n    }\r\n\r\n    /**\r\n     * Информация о блокировке данного объекта.\r\n     * @returns {UserID}\r\n     */\r\n    public get lockerId(): UserID{\r\n        return this._lockerId;\r\n    }\r\n\r\n    public set lockerId(value: UserID){\r\n        this._lockerId = value;\r\n    }\r\n\r\n    public get isChanged(): boolean{\r\n        return this._isChanged;\r\n    }\r\n\r\n    public set isChanged(value: boolean){\r\n        this._isChanged = value;\r\n    }\r\n\r\n    public get isDeletedDirectly(): boolean{\r\n        return this._isDeleted;\r\n    }\r\n\r\n    public set isDeletedDirectly(value : boolean){\r\n        this._isDeleted = value;\r\n    }\r\n\r\n    public get typeName(): TypeNames{\r\n        return this._typeName;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/api/src/ts/classes/DbUser.ts","\r\nimport {EventEmitter} from \"./EventEmitter\";\r\nimport {IDepartment} from \"../interfaces/IDepartment\";\r\nimport {IDatabase} from \"../interfaces/IDatabase\";\r\nimport {DepartmentEventNames} from \"../enums/event_names/DepartmentEventNames\";\r\nimport {TypeNames} from \"../enums/TypeNames\";\r\n\r\ntype DepartmentID = string;\r\ntype RoleID = string;\r\n\r\n/**\r\n * Компания или отдел.\r\n */\r\nexport class Department extends EventEmitter<DepartmentEventNames> implements IDepartment{\r\n\r\n    constructor(database: IDatabase, code: string, name: string, site: string, parent: DepartmentID, role: RoleID){\r\n        super();\r\n        this._typeName = TypeNames.Department;\r\n        this._database = database;\r\n        this._code = code;\r\n        this._name = name;\r\n        this._site = site;\r\n        this._parent = parent;\r\n        this._role = role;\r\n    }\r\n\r\n    private _database: IDatabase;\r\n    private _code: string;\r\n    private _name: string;\r\n    private _site: string;\r\n    private _parent: DepartmentID;\r\n    private _children: Array<DepartmentID>;\r\n    private _role: RoleID;\r\n    private _typeName: TypeNames;\r\n\r\n    public get database(): IDatabase{\r\n        return this._database;\r\n    }\r\n\r\n    public get code(): string{\r\n        return this._code;\r\n    }\r\n\r\n    public set code(value : string){\r\n        this._code = value;\r\n    }\r\n\r\n    public get name(): string{\r\n        return this._name;\r\n    }\r\n\r\n    public set name(value : string){\r\n        this._name = value;\r\n    }\r\n\r\n    public get site(): string{\r\n        return this._site;\r\n    }\r\n\r\n    public set site(value: string){\r\n        this._site = value;\r\n    }\r\n\r\n    public get parent(): DepartmentID{\r\n        return this._parent;\r\n    }\r\n\r\n    public set parent(value: DepartmentID){\r\n        this._parent = value;\r\n    }\r\n\r\n    public get children(): Array<DepartmentID>{\r\n        return this._children;\r\n    }\r\n\r\n    public set children(value : Array<DepartmentID>){\r\n        this._children = value;\r\n    }\r\n\r\n    public get role(): RoleID{\r\n        return this._role;\r\n    }\r\n\r\n    public set role(value: RoleID){\r\n        this._role = value;\r\n    }\r\n\r\n    public get typeName(): TypeNames{\r\n        return this._typeName;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/api/src/ts/classes/Department.ts","\r\nimport {IResult} from \"../interfaces/IResult\";\r\nimport {EventEmitter} from \"./EventEmitter\";\r\nimport {IApplication} from \"../interfaces/IApplication\";\r\nimport {ITransaction} from \"../interfaces/ITransaction\";\r\nimport {TransactionStatus} from \"../enums/TransactionStatus\";\r\nimport {IDocumentContext} from \"../interfaces/IDocumentContext\";\r\nimport {ITreeNode} from \"../interfaces/ITreeNode\";\r\nimport {ILevel} from \"../interfaces/ILevel\";\r\nimport {ILevelEntity} from \"../interfaces/ILevelEntity\";\r\nimport {IConnection} from \"../interfaces/IConnection\";\r\nimport {IVariant} from \"../interfaces/IVariant\";\r\nimport {IReference} from \"../interfaces/IReference\";\r\nimport {DocumentEventNames} from \"../enums/event_names/DocumentEventNames\";\r\nimport {_IDocument} from \"../_internal_interfaces/_IDocument\";\r\nimport {_IApplication} from \"../_internal_interfaces/_IApplication\";\r\nimport {TypeNames} from \"../enums/TypeNames\";\r\nimport {_ILevelNode} from \"../_internal_interfaces/_ILevelNode\";\r\nimport {_IDocumentContext} from \"../_internal_interfaces/_IDocumentContext\";\r\nimport {_ICondition} from \"../_internal_interfaces/_ICondition\";\r\nimport {_ILevel} from \"../_internal_interfaces/_ILevel\";\r\nimport {_ITransaction} from \"../_internal_interfaces/_ITransaction\";\r\n\r\ntype NodeID = string;\r\ntype NodeValueID = string;\r\ntype ID = string;\r\n\r\n/**\r\n * Документ (технология).\r\n */\r\nexport class Document extends EventEmitter<DocumentEventNames> implements _IDocument{\r\n\r\n    _setID(id : ID) : void{\r\n\r\n        this._id = id;\r\n    }\r\n\r\n    currentContextIndex : number;\r\n\r\n    /**\r\n     * Заблокировать объект с указанным идентификатором.\r\n     * @param {ID} objId Идентификатор объекта, подлежащего блокировке.\r\n     * @returns {IResult} Отчёт о результатах операции.\r\n     */\r\n    lock(objId: ID): IResult {\r\n        let result = this.application.dataProvider.lockDocumentObject(this.id, objId);\r\n\r\n        if(result.success){\r\n            let transaction = this.createTransaction();\r\n            transaction.start();\r\n\r\n            let obj = this.getContext().getObject(objId);\r\n            result = null;\r\n\r\n            switch(obj.typeName){\r\n                case TypeNames.LevelNode : {\r\n                    let item = obj as _ILevelNode;\r\n                    let treeNode = (this.getContext() as _IDocumentContext).treeNodes.get(item.nodeId);\r\n                    treeNode.lockerId = this.application.getCurrentUserId();\r\n                    result = this.application.factory.createIResult(true,'');\r\n                    transaction.commit();\r\n                    break;\r\n                }\r\n                case TypeNames.Condition : {\r\n                    let item = obj as _ICondition;\r\n                    let treeNode = (this.getContext() as _IDocumentContext).treeNodes.get(item.nodeId);\r\n                    treeNode.lockerId = this.application.getCurrentUserId();\r\n                    result = this.application.factory.createIResult(true,'');\r\n                    transaction.commit();\r\n                    break;\r\n                }\r\n                case TypeNames.Level : {\r\n                    let item = obj as _ILevel;\r\n                    item.lockerId = this.application.getCurrentUserId();\r\n                    result = this.application.factory.createIResult(true,'');\r\n                    transaction.commit();\r\n                    break;\r\n                }\r\n                default : {\r\n                    result = this.application.factory.createIResult(false,\r\n                        'Указанный объект не предназначен для блокировки.');\r\n                    transaction.rollback();\r\n                    break;\r\n                }\r\n            }\r\n            return result;\r\n        }\r\n        else{\r\n            return result;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Разблокировать объект с указанным идентификатором.\r\n     * @param {ID} objId Идентификатор объекта, подлежащего разблокировке.\r\n     * @returns {IResult} Отчёт о результатах операции.\r\n     */\r\n    unlock(objId: ID): IResult {\r\n        let result = this.application.dataProvider.unlockDocumentObject(this.id, objId);\r\n\r\n        if(result.success){\r\n            let transaction = this.createTransaction();\r\n            transaction.start();\r\n\r\n            let obj = this.getContext().getObject(objId);\r\n            result = null;\r\n\r\n            switch(obj.typeName){\r\n                case TypeNames.LevelNode : {\r\n                    let item = obj as _ILevelNode;\r\n                    let treeNode = (this.getContext() as _IDocumentContext).treeNodes.get(item.nodeId);\r\n                    treeNode.lockerId = null;\r\n                    result = this.application.factory.createIResult(true,'');\r\n                    transaction.commit();\r\n                    break;\r\n                }\r\n                case TypeNames.Condition : {\r\n                    let item = obj as _ICondition;\r\n                    let treeNode = (this.getContext() as _IDocumentContext).treeNodes.get(item.nodeId);\r\n                    treeNode.lockerId = null;\r\n                    result = this.application.factory.createIResult(true,'');\r\n                    transaction.commit();\r\n                    break;\r\n                }\r\n                case TypeNames.Level : {\r\n                    let item = obj as _ILevel;\r\n                    item.lockerId = null;\r\n                    result = this.application.factory.createIResult(true,'');\r\n                    transaction.commit();\r\n                    break;\r\n                }\r\n                default : {\r\n                    result = this.application.factory.createIResult(false,\r\n                        'Указанный объект не предназначен для разблокировки.');\r\n                    transaction.rollback();\r\n                    break;\r\n                }\r\n            }\r\n            return result;\r\n        }\r\n        else{\r\n            return result;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Конструктор класса.\r\n     * @param {IApplication} app Приложение, в котором используется документ.\r\n     * @param {string} name Наименование документа.\r\n     * @param {string} code Код документа.\r\n     */\r\n    constructor(app : IApplication, name : string, code : string){\r\n        super();\r\n\r\n        if(!app) throw new Error('Экземпляр `IApplication` не должен быть `null` или `undefined`.');\r\n        if(!name || !name.trim()) throw new Error('Имя документа не должно быть пустым.');\r\n        if(!code || !code.trim()) throw new Error('Код документа не должен быть пустым.');\r\n\r\n        this._application = app;\r\n        this.docContexts = new Array<IDocumentContext>();\r\n        this._transactionStack = new Array<ITransaction>();\r\n\r\n        const context = this.application.factory.createIDocumentContext(\r\n            this, new Map<ID, ILevel>(), new Map<NodeID, ITreeNode<NodeValueID>>(),\r\n             new Map<ID, ILevelEntity>(), new Map<ID,IConnection>(),\r\n            new Map<ID,IVariant>(), new Map<ID,IReference>(), name, code);\r\n\r\n        this.docContexts.push(context);\r\n        this.currentContextIndex = 0;\r\n    }\r\n\r\n    // Стек активных транзакций\r\n    _transactionStack : Array<ITransaction>;\r\n\r\n    /**\r\n     * Получить текущую транзакцию.\r\n     * @returns {ITransaction} Возвращается объект текущей транзакции или `null`, если\r\n     * транзакции нет.\r\n     */\r\n    getCurrentTransaction() : ITransaction{\r\n        if(this._transactionStack.length) return this._transactionStack[this._transactionStack.length - 1];\r\n        else return null;\r\n    }\r\n\r\n    /**\r\n     * Поместить транзакцию на вершину стека открытых транзакций документа.\r\n     *\r\n     * **ВНИМАНИЕ!** *Этот метод предназначен только для внутреннего\r\n     * использования механизмом транзакций: он используется в коде метода `ITransaction.start()`.\r\n     * Не вызывайте его самостоятельно!*\r\n     * @param {ITransaction} tr Транзакция, которую следует поместить на вершину стека.\r\n     * Если транзакция уже имеется в стеке транзакций, или если статус транзакции не равен\r\n     * `TransactionStatus.Started`, то генерируется исключение.\r\n     */\r\n    public _pushTransaction(tr : ITransaction) : void{\r\n\r\n        //console.log('Beep 1...');\r\n\r\n        if(!tr) throw new Error('_pushTransaction: В качестве параметра должен передаваться объек транзакции.');\r\n        else if(tr.document !== this) {\r\n            throw new Error('_popTransaction: Указанная транзакция не принадлежит данному документу.');\r\n        }\r\n        else if(tr.status !== TransactionStatus.Started){\r\n            throw new Error('_pushTransaction: В стек транзакций можно помещать только открытую транзакцию.');\r\n        }\r\n        else if(this._transactionStack.indexOf(tr) >= 0){\r\n            throw new Error('_pushTransaction: Эта транзакция уже присутствует в стеке транзакций.');\r\n        }\r\n        else{\r\n            // Заталкиваем транзакцию в стек и создаём для неё полную копию\r\n            // текущего состояния документа.\r\n            this._transactionStack.push(tr);\r\n\r\n\r\n            let context = this.getContext();\r\n\r\n            //console.log('Beep 2...');\r\n            let old = this.getContext();\r\n            if(!old) throw new Error('Не удалось получить контекст.');\r\n            context = context.clone();\r\n\r\n            //console.log('Beep 2.5 ...');\r\n\r\n            // Если перед этим выполнялись операции undo, то удаляем все контексты, имеющиеся\r\n            // в стеке контекстов выше текущего.\r\n            if(this.currentContextIndex != this.docContexts.length - 1){\r\n                this.docContexts.splice((this.currentContextIndex + 1),\r\n                    this.docContexts.length - (this.currentContextIndex + 1));\r\n            }\r\n\r\n            this.docContexts.push(context);\r\n            ++this.currentContextIndex;\r\n        }\r\n        //console.log('Beep 3...');\r\n    }\r\n\r\n    /**\r\n     * Вытолкнуть транзакцию с вершины стека открытых транзакций документа.\r\n     *\r\n     * **ВНИМАНИЕ!** *Этот метод предназначен только для внутреннего\r\n     * использования механизмом транзакций: он используется в коде методов\r\n     * `ITransaction.commit()` и `ITransaction.rollback()`. * Не вызывайте его самостоятельно!*\r\n     * @param {ITransaction} tr Транзакция, которую следует вытолкнуть из стека.\r\n     * Этот параметр используется для проверки того, что выталкиваемая транзакция\r\n     * действительно находится на вершине стека.\r\n     */\r\n    public _popTransaction(tr : ITransaction) : void{\r\n\r\n        if(!tr) throw new Error('_popTransaction: В качестве параметра должен передаваться объек транзакции.');\r\n        else if(tr.document !== this) {\r\n            throw new Error('_popTransaction: Указанная транзакция не принадлежит данному документу.');\r\n        }\r\n        else if(tr.status !== TransactionStatus.Commited && tr.status !== TransactionStatus.RolledBack){\r\n            throw new Error('_popTransaction: Нельзя удалить из стека не закрытую транзакцию.');\r\n        }\r\n        else if(this._transactionStack.indexOf(tr) < 0){\r\n            throw new Error('_popTransaction: Эта транзакция отсутствует в стеке транзакций.');\r\n        }\r\n        else if(this._transactionStack.length && this._transactionStack[this._transactionStack.length - 1] != tr){\r\n            throw new Error('_popTransaction: Транзакции должны закрываться в порядке, обратном их открытию!');\r\n        }\r\n        else{\r\n\r\n            if(tr !== this.getCurrentTransaction()) throw new Error(\r\n                'Выталкиваемая из стека транзакция не является текущей.');\r\n\r\n            // Если транзакция отклонена, то уничтожаем изменения, выполненные в рамках этой транзакции.\r\n            if(tr.status === TransactionStatus.RolledBack){\r\n\r\n                // Получаем идентификаторы модифицированных объектов\r\n                let src = tr as _ITransaction;\r\n                src.addedItems.clear();\r\n                src.editedItems.clear();\r\n                src.deletedItems.clear();\r\n\r\n                this.docContexts.pop();\r\n                this._transactionStack.pop();\r\n                --this.currentContextIndex;\r\n            }\r\n            else if(tr.status === TransactionStatus.Commited){\r\n\r\n                // Получаем идентификаторы модифицированных объектов\r\n                let src = tr as _ITransaction;\r\n\r\n                let added = [];\r\n                let edited = [];\r\n                let deleted = [];\r\n\r\n                // удаляем ненужные записи\r\n                for(let n of src.deletedItems.keys()){\r\n                    if(src.addedItems.has(n)) src.addedItems.delete(n);\r\n                    if(src.editedItems.has(n)) src.editedItems.delete(n);\r\n                }\r\n\r\n                for(let n of src.addedItems.keys()){\r\n                    if(src.editedItems.has(n)) src.editedItems.delete(n);\r\n                }\r\n\r\n                // используем оставшиеся записи\r\n\r\n                for(let n of src.addedItems.keys()){\r\n                    added.push(n);\r\n                }\r\n\r\n                for(let n of src.editedItems.keys()){\r\n                    edited.push(n);\r\n                }\r\n\r\n                for(let n of src.deletedItems.keys()){\r\n                    deleted.push(n);\r\n                }\r\n\r\n                let obj = {added : added, edited : edited, deleted : deleted};\r\n\r\n                this._transactionStack.pop();\r\n\r\n                src.addedItems.clear();\r\n                src.editedItems.clear();\r\n                src.deletedItems.clear();\r\n\r\n                // Сообщаем об изменении документа\r\n                this.emit(DocumentEventNames.DocumentChanged,\r\n                    this.application.factory.createIEventArgs({source: this, data: obj}));\r\n            }\r\n            else{\r\n                throw new Error('_popTransaction: Непредвиденная ошибка при попытке вытолкнуть транзакцию из стека!');\r\n            }\r\n        }\r\n\r\n        // Если все транзакции закрыты, то удаляем все состояния документа,\r\n        // кроме самого последнего, имеющегося в стеке состояний, т.к. оно содержит\r\n        // все актуальные изменения.\r\n        /*if(0 === this._transactionStack.length){\r\n\r\n            const last = this.docContexts.pop();\r\n\r\n            this.docContexts = new Array<IDocumentContext>();\r\n            this.docContexts.push(last);\r\n        }*/\r\n    }\r\n\r\n    /**\r\n     * Стек контекстов документа. Этот стек не должен быть пустым: первой записью в стеке\r\n     * является состояние только что открытого документа. Вызов метода `ITransaction.start()`\r\n     * приводит к созданию *полного* клона текущего контекста документа. Этот клон получается\r\n     * за счёт вызова метода `IDocumentContext.clone()` исходного контекста. Затем транзакция\r\n     * добавляет склонированный контекст в общий стек контекстов документа, в виду чего клон\r\n     * становится текущим контекстом документа до тех пор, пока не будет запущена вложенная\r\n     * транзакция или пока не будет выполнен откат текущей транзакции.\r\n     */\r\n    docContexts : Array<IDocumentContext>;\r\n\r\n    /**\r\n     * Создать новую транзакцию для работы с данным документом.\r\n     * @returns {ITransaction}\r\n     */\r\n    createTransaction(): ITransaction {\r\n        return this.application.factory.createITransaction(this);\r\n    }\r\n\r\n    private _application : IApplication;\r\n\r\n    /**\r\n     * Приложение, в составе которого открыт документ.\r\n     */\r\n    public get application() : IApplication{\r\n        return this._application;\r\n    }\r\n\r\n    _setApplication (value : _IApplication) : void{\r\n        this._application = value;\r\n    }\r\n\r\n    /**\r\n     * Синхронизировать документ с сервером. Во время синхронизации с сервера получается текущее состояние документа,\r\n     * к нему применяются изменения, выполненные в локальной версии документа, после чего результат отправляется на\r\n     * сервер.\r\n     * @returns {IResult} Возвращается отчёт об успешности операции.\r\n     */\r\n    sync() : IResult{\r\n        throw new Error('Not implemented.');\r\n    }\r\n\r\n    /**\r\n     * Закрыть документ.\r\n     */\r\n    close(): void {\r\n        this.application.documentManager.closeDocument(this.id);\r\n    }\r\n\r\n    /**\r\n     * Получить текущий контекст документа.\r\n     * @returns {IDocumentContext}\r\n     */\r\n    public getContext() : IDocumentContext{\r\n        return this.docContexts[this.currentContextIndex];\r\n    }\r\n\r\n    /**\r\n     * Установить текущим предыдущий контекст документа в стеке контекстов. Т.е. это отмена изменений, выполненных\r\n     * в рамках текущего контекста документа.\r\n     * @returns {IResult}\r\n     */\r\n    undo() : IResult{\r\n        if(this.currentContextIndex > 0){\r\n            --this.currentContextIndex;\r\n            this.emit(DocumentEventNames.DocumentChanged, this.application.factory\r\n                .createIEventArgs({source : this, data : null}));\r\n            return this.application.factory.createIResult(true,'');\r\n        }\r\n        else{\r\n            return this.application.factory.createIResult(false,'Операция отмены невозможна.');\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Установить текущим следующий контекст документа в стеке контекстов. Т.е. это отмена ранее\r\n     * выполненной отмены изменений, выполненных в рамках текущего контекста документа (т.е.\r\n     * восстановление ранее отменённых изменений).\r\n     * @returns {IResult}\r\n     */\r\n    redo() : IResult{\r\n        if(this.currentContextIndex < this.docContexts.length - 1){\r\n            ++this.currentContextIndex;\r\n            this.emit(DocumentEventNames.DocumentChanged, this.application.factory\r\n                .createIEventArgs({source : this, data : null}));\r\n            return this.application.factory.createIResult(true,'');\r\n        }\r\n        else{\r\n            return this.application.factory.createIResult(false,\r\n                'Операция восстановления невозможна.');\r\n        }\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/api/src/ts/classes/Document.ts","\r\nimport {IDocumentContext} from \"../interfaces/IDocumentContext\";\r\nimport {IDocument} from \"../interfaces/IDocument\";\r\nimport {EventEmitter} from \"./EventEmitter\";\r\nimport {ITreeNode} from \"../interfaces/ITreeNode\";\r\nimport {ILevel} from \"../interfaces/ILevel\";\r\nimport {IResult} from \"../interfaces/IResult\";\r\nimport {ILevelNode} from \"../interfaces/ILevelNode\";\r\nimport {IConnection} from \"../interfaces/IConnection\";\r\nimport {ILevelEntity} from \"../interfaces/ILevelEntity\";\r\nimport {IVariant} from \"../interfaces/IVariant\";\r\nimport {IReference} from \"../interfaces/IReference\";\r\nimport {ICondition} from \"../interfaces/ICondition\";\r\nimport {DocumentContextEventNames} from \"../enums/event_names/DocumentContextEventNames\";\r\nimport {_IDocumentContext} from \"../_internal_interfaces/_IDocumentContext\";\r\nimport {_ILevelEntity} from \"../_internal_interfaces/_ILevelEntity\";\r\nimport {_ILevelNode} from \"../_internal_interfaces/_ILevelNode\";\r\nimport {_ICondition} from \"../_internal_interfaces/_ICondition\";\r\nimport {IType} from \"../interfaces/IType\";\r\nimport {_ILevel} from \"../_internal_interfaces/_ILevel\";\r\nimport {TypeNames} from \"../enums/TypeNames\";\r\nimport {_IVariant} from \"../_internal_interfaces/_IVariant\";\r\nimport {_IReference} from \"../_internal_interfaces/_IReference\";\r\nimport {_ITransaction} from \"../_internal_interfaces/_ITransaction\";\r\n\r\ntype NodeID = string;\r\ntype EntityID = string;\r\ntype ID = string;\r\n\r\n/**\r\n * Контекст работы с документом. Контекст представляет собой\r\n * полную копию содержимого документа и используется механизмом\r\n * транзакций.\r\n *\r\n * **ВНИМАНИЕ!**\r\n * *Контекст документа предназначен исключительно для внутреннего использования.\r\n * Не редактируйте его самостоятельно!*\r\n */\r\nexport class DocumentContext extends EventEmitter<DocumentContextEventNames> implements _IDocumentContext{\r\n\r\n    private _nodes : Map<NodeID, ITreeNode<EntityID>>;\r\n    private _nodeValues: Map<ID, ILevelEntity>;\r\n    private _levels : Map<ID,ILevel>;\r\n\r\n    private _name : string;\r\n\r\n    public get documentName(): string{\r\n        return this._name;\r\n    }\r\n\r\n    public set documentName(value : string){\r\n        if(!value || !value.trim()) throw new Error('Имя документа не должно быть пустым.');\r\n        this._name = value;\r\n    }\r\n\r\n    private _code : string;\r\n\r\n    /**\r\n     * Код документа.\r\n     */\r\n    public get documentCode(): string{\r\n        return this._code;\r\n    }\r\n\r\n    public set documentCode(value : string){\r\n        if(!value || !value.trim()) throw new Error('Код документа не должен быть пустым.');\r\n        this._code = value;\r\n    }\r\n\r\n    /**\r\n     * Уровни, определённые в составе проекта (технологии).\r\n     */\r\n    public get levels() : Map<ID,ILevel>{\r\n        return this._levels;\r\n    }\r\n\r\n    /**\r\n     * Описание иерархических структур.\r\n     */\r\n    public get treeNodes(): Map<NodeID, ITreeNode<EntityID>>{\r\n        return this._nodes;\r\n    }\r\n\r\n    /**\r\n     * Объекты бизнес-модели, хранящиеся в нодах иерархических структур:\r\n     * узлы, условия, варианты условий и связи.\r\n     */\r\n    public get levelEntities(): Map<ID, ILevelEntity>{\r\n        return this._nodeValues;\r\n    }\r\n\r\n    /**\r\n     * Конструктор контекста использования документа.\r\n     * @param {IDocument} doc Документ, для которого следует создать контекст.\r\n     * @param {Map<ID,ILevel>} levels Уровни, определённые в составе документа (технологии).\r\n     * @param {Map<NodeID, ITreeNode<EntityID>>} treeNodes Описания иерархических структур, ссылающихся\r\n     * на объекты бизнес-модели.\r\n     * @param {Map<ID, ILevelEntity>} levelEntities Узлы и условия.\r\n     * @param {Map<ID,IConnection>} connections Связи между узлами и условиями.\r\n     * @param {Map<ID,IVariant>} variants Варианты, используемые в условиях.\r\n     * @param {Map<ID,IReference>} references Ссылки на web-странички, используемые в узлах.\r\n     * @param {string} name Наименование документа.\r\n     * @param {string} name Код документа.\r\n     * @returns {IDocumentContext}\r\n     */\r\n    constructor(doc : IDocument, levels : Map<ID,ILevel>, treeNodes: Map<ID, ITreeNode<ID>>,\r\n                levelEntities: Map<ID, ILevelEntity>, connections : Map<ID,IConnection>,\r\n                variants : Map<ID,IVariant>, references : Map<ID,IReference>,\r\n                name : string, code :string){\r\n\r\n        super();\r\n\r\n        if(!doc || !levels || !treeNodes || !levelEntities || !connections || !variants || !references) {\r\n            throw new Error('Недопустимое значение параметра в конструкторе: `null` и `undefined` запрещены.')\r\n        };\r\n\r\n        this._document = doc;\r\n        this._nodes = treeNodes;\r\n        this._nodeValues = levelEntities;\r\n        this._connections = connections;\r\n        this._variants = variants;\r\n        this._references = references;\r\n        this._levels = levels;\r\n        this._name = name;\r\n        this._code = code;\r\n        this.rootNodeId = null; // идентификатор корневого `ILevelNode`.\r\n\r\n        let tmp = null;\r\n        let count = 0;\r\n        for(let n of this._nodes.values()){\r\n            if(!n.getParent()) {\r\n                ++count;\r\n                tmp = n;\r\n            }\r\n        }\r\n\r\n        if(count > 1){\r\n            throw new Error('На верхнем уровне допускается наличие только одного узла.');\r\n        }\r\n        else if(count == 1){\r\n            this.rootNodeId = tmp.valueId;\r\n        }\r\n    }\r\n\r\n    private rootNodeId : ID;\r\n\r\n    /**\r\n     * Получить корневой узел (экземпляр `ILevelNode`), находящийся на самом верхнем уровне.\r\n     */\r\n    getRootNode() :  ILevelNode{\r\n\r\n        if(!this.rootNodeId) return null;\r\n\r\n        let levelNode = this.levelEntities.get(this.rootNodeId);\r\n\r\n        return levelNode.isDeleted() ? null : levelNode as ILevelNode;\r\n    }\r\n\r\n    /**\r\n     * Получить уровень по его идентификатору.\r\n     * @param {ID} id Идентификатор искомого уровня.\r\n     * @returns {ILevel} Возвращается уровень или `null` если уровень с указанным ID не был найден.\r\n     */\r\n    getLevel(id : ID) : ILevel{\r\n        if(!id || !this.levels.has(id)) return null;\r\n        else {\r\n            let level = this.levels.get(id);\r\n\r\n            return level.isDeleted() ? null : level;\r\n        }\r\n    }\r\n\r\n    private _document : IDocument;\r\n\r\n    /**\r\n     * Документ, к которому относится данный контекст.\r\n     */\r\n    public get document(): IDocument{\r\n        return this._document;\r\n    }\r\n\r\n    /**\r\n     * Создать полную копию данного контекста. Метод используется вложенными транзакциями.\r\n     * @returns {IDocumentContext}\r\n     */\r\n    clone() : IDocumentContext{\r\n        let doc = this.document;\r\n        let levels = new Map<ID,ILevel>();\r\n        let treeNodes = new Map<NodeID, ITreeNode<EntityID>>();\r\n        let levelEntities = new Map<ID, ILevelEntity>();\r\n        let connections = new Map<ID,IConnection>();\r\n        let variants = new Map<ID,IVariant>();\r\n        let references = new Map<ID,IReference>();\r\n\r\n        //console.log(\"this.levels...\");\r\n        for(let n of this.levels.values()){\r\n            let item = n.clone();\r\n            levels.set(item.id,item);\r\n        }\r\n\r\n        //console.log(\"this.treeNodes...\");\r\n        for(let n of this.treeNodes.values()){\r\n            let item = n.clone();\r\n            treeNodes.set(item.id,item);\r\n        }\r\n\r\n        //console.log(\"this.levelEntities...\");\r\n        for(let n of this.levelEntities.values()){\r\n            if(n.typeName == TypeNames.LevelNode){\r\n                let item = (n as ILevelNode).clone();\r\n                levelEntities.set(item.id, item);\r\n            }\r\n            else if(n.typeName == TypeNames.Condition){\r\n                let item = (n as ICondition).clone();\r\n                levelEntities.set(item.id, item);\r\n            }\r\n            else{\r\n                throw new Error('Неожиданный тип объекта: ' + n.typeName);\r\n            }\r\n        }\r\n\r\n        //console.log(\"this.connections...\");\r\n        for(let n of this.connections.values()){\r\n            let item = n.clone();\r\n            connections.set(item.id, item);\r\n        }\r\n\r\n        //console.log(\"this.variants...\");\r\n        for(let n of this.variants.values()){\r\n            let m = n as _IVariant;\r\n            let item = m.clone(levelEntities.get(m.conditionId) as ICondition);\r\n            variants.set(item.id, item);\r\n        }\r\n\r\n        //console.log(\"this.references...\");\r\n        for(let n of this.references.values()){\r\n            let m = n as _IReference;\r\n            let owner = levelEntities.get(m._levelNodeID) as ILevelNode;\r\n            let item = n.clone(owner);\r\n            references.set(item.id, item);\r\n        }\r\n\r\n        let context = this.document.application.factory.createIDocumentContext(\r\n            doc, levels, treeNodes, levelEntities, connections, variants, references,\r\n            this._name, this._code);\r\n\r\n        return context;\r\n    }\r\n\r\n    /**\r\n     * Получить самый верхний не удалённый уровень.\r\n     * @returns {ILevel}\r\n     */\r\n    getTopLevel() : ILevel{\r\n        // Находим самый верхний уровень среди неудалённых. Самым верхним\r\n        // считаем тот уровень, у которого свойство `prevId` возвращает `null`.\r\n        for(let n of this.levels.keys()){\r\n            let level = this.levels.get(n);\r\n            if(!level.isDeleted() && level.prevId == null) return level;\r\n        }\r\n        return null;\r\n    }\r\n\r\n    getBottomLevel() : ILevel{\r\n\r\n        // Находим самый нижний уровень среди неудалённых. Самым нижним\r\n        // считаем тот уровень, у которого свойство `nextId` возвращает `null`.\r\n        for(let n of this.levels.keys()){\r\n            let level = this.levels.get(n);\r\n            if(!level.isDeleted() && level.nextId == null) return level;\r\n        }\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * Добавить нижний уровень. Добавляемый уровень автоматически блокируется.\r\n     * @param {string} name Имя нового уровня.\r\n     * @param {string} code Код уровня.\r\n     * @param {string} color Цвет узлов уровня.\r\n     * @param {boolean} autoNum Метка о необходимости использования автоматической\r\n     * нумерации для узлов уровня.\r\n     * @returns {ILevel} Возвращается созданный уровень или `null` если уровень не был создан.\r\n     */\r\n    pushLevel(name : string, code: string, color : string, autoNum : boolean) : ILevel{\r\n\r\n        let level = this.document.application.factory.createILevel(this.document, name,\r\n            code, color, autoNum) as _ILevel;\r\n\r\n        if(this.getTopLevel()){\r\n\r\n            // Находим самый нижний уровень среди неудалённых.\r\n            let last = this.getBottomLevel();\r\n\r\n            // Если уровни не найдены, значит мы создаём самый верхний уровень\r\n            if(!last) {\r\n                throw new Error('Обнаружен верхний уровень, но не удалось найти нижний.');\r\n            }\r\n\r\n            // Если уровни уже имеются, то самый нижний из них должен быть предварительно заблокирован.\r\n            if(last.lockerId != this.document.application.getCurrentUserId()){\r\n                return null;\r\n            }\r\n             else{\r\n                this.levels.set(level.id, level);\r\n                level._setDocument(this.document);\r\n                level.lockerId = this.document.application.getCurrentUserId();\r\n                last.nextId = level.id;\r\n                level.prevId = last.id;\r\n                return level;\r\n            }\r\n        }\r\n        else{\r\n            this.levels.set(level.id, level);\r\n            level.lockerId = this.document.application.getCurrentUserId();\r\n            return level;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Удалить нижний уровень.\r\n     * @returns {IResult}\r\n     */\r\n    popLevel() : IResult{\r\n\r\n        if(this.getTopLevel()){\r\n            // Находим самый нижний уровень среди неудалённых.\r\n            let last = this.getBottomLevel();\r\n\r\n            if(!last) return this.document.application.factory.createIResult(false,\r\n                'Уровни не найдены.');\r\n\r\n            // Если уровни уже имеются, то самый нижний из них должен быть предварительно заблокирован.\r\n            if(last.lockerId != this.document.application.getCurrentUserId()){\r\n                return this.document.application.factory.createIResult(false,\r\n                    'Удаляемый уровень должен быть предварительно заблокирован вами.');\r\n            }\r\n            else{\r\n                last.isDeletedDirectly = true;\r\n                return this.document.application.factory.createIResult(true,'');\r\n            }\r\n        }\r\n        else{\r\n            return this.document.application.factory.createIResult(false,\r\n                'Уровни не найдены.');\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Добавить узел или условие в документ (технологию).\r\n     * @param {ID} parentId Идентификатор родительского `ILevelEntity`. Если узел или условие\r\n     * размещается на самом верхнем уровне, то в качестве значения указывается `null`.\r\n     * @param {ILevelEntity} levelEntity Добавляемый узел или условие.\r\n     * @returns {IResult} Отчёт о результате выполнения операции.\r\n     */\r\n    addLevelEntity(parentId : ID, levelEntity : ILevelEntity) : IResult{\r\n\r\n        if(!levelEntity) return this.document.application.factory.createIResult(false,\r\n            'Нельзя вместо узла добавлять `null` или `undefined`.');\r\n\r\n        levelEntity = levelEntity as _ILevelEntity;\r\n\r\n        if(this.levelEntities.has(levelEntity.id)) return this.document.application.factory.createIResult(false,\r\n            `Объект с ID = '${levelEntity.id}' уже принадлежит данному документу.`);\r\n\r\n        if(!this.getTopLevel()) return this.document.application.factory.createIResult(false,\r\n            'Нельзя добавлять узлы и условия при отсутствии уровней в документе.');\r\n\r\n        // Если объект добавляется не на самый верхний уровень...\r\n        if(parentId){\r\n\r\n            // Если родительский узел найден...\r\n            if(this.levelEntities.has(parentId)){\r\n\r\n                let parent = this.levelEntities.get(parentId) as _ILevelEntity;\r\n                let parentNode = this.treeNodes.get(parent.nodeId);\r\n\r\n                if(parentNode){\r\n\r\n                    if(parentNode.getLockerID() !== this.document.application.getCurrentUserId()){\r\n                        return this.document.application.factory.createIResult(false,\r\n                            'Добавление объекта отклонено, т.к. родитель ' +\r\n                            'не был предварительно заблокирован вами.');\r\n                    }\r\n\r\n                    if(parentNode.isDeleted()) return this.document.application.factory.createIResult(false,\r\n                        'Указанный родительский объект был ранее вами удалён.');\r\n\r\n                    if(!parentNode.getLevel().nextId) return this.document.application.factory.createIResult(false,\r\n                        'Для добавляемого дочернего узла нет соотвествующего уровня.');\r\n\r\n                    let subNode = this.document.application.factory.createITreeNode(this.document);\r\n                    this.treeNodes.set(subNode.id, subNode);\r\n                    this.levelEntities.set(levelEntity.id, levelEntity);\r\n                    subNode.lockerId = this.document.application.getCurrentUserId();\r\n                    parentNode.childrenIDs.push(subNode.id);\r\n                    subNode.setParent(parentNode.id);\r\n                    subNode.valueId = levelEntity.id;\r\n                    (levelEntity as _ILevelEntity).nodeId = subNode.id;\r\n\r\n                    (this.document.getCurrentTransaction() as _ITransaction).addedItems.set(\r\n                        levelEntity.id, levelEntity);\r\n\r\n                    let pval = this.levelEntities.get(parentNode.valueId);\r\n\r\n                    (this.document.getCurrentTransaction() as _ITransaction).editedItems.set(\r\n                        parentNode.valueId, pval);\r\n\r\n                    return this.document.application.factory.createIResult(true, '');\r\n                }\r\n                else{\r\n                    return this.document.application.factory.createIResult(false,\r\n                        `Контейнер с ID = '${parent.nodeId}' не найден.`);\r\n                }\r\n            }\r\n            // Если родительский узел не найден\r\n            else{\r\n                return this.document.application.factory.createIResult(false,\r\n                    `Объект с ID = ${parentId} не найден.`);\r\n            }\r\n        }\r\n        else{ // Если объект добавляется на самый верхний уровень.\r\n\r\n            for(let n of this.treeNodes.values()){\r\n                if(!n.isDeleted()) return this.document.application.factory.createIResult(false,\r\n                    'На верхнем уровне должен размещаться только один узел.');\r\n            }\r\n\r\n            let node = this.document.application.factory.createITreeNode(this.document);\r\n            this.treeNodes.set(node.id, node);\r\n            this.levelEntities.set(levelEntity.id, levelEntity);\r\n            node.lockerId = this.document.application.getCurrentUserId();\r\n            node.setParent(null);\r\n            node.valueId = levelEntity.id;\r\n            (levelEntity as _ILevelEntity).nodeId = node.id;\r\n            this.rootNodeId = levelEntity.id;\r\n\r\n            (this.document.getCurrentTransaction() as _ITransaction).addedItems.set(\r\n                levelEntity.id,levelEntity);\r\n\r\n            return this.document.application.factory.createIResult(true, '');\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Удалить узел или условие из документа (технологии).\r\n     * @param {ID} id Идентификатор удаляемого узла или условия.\r\n     * @returns {IResult} Отчёт о результате выполнения операции.\r\n     */\r\n    deleteLevelEntity(id : ID) : IResult{\r\n\r\n        if(!id) return this.document.application.factory.createIResult(false,\r\n            'Нельзя в качестве ID указывать `null` или `undefined`.');\r\n        else if(!this.levelEntities.has(id)) return this.document.application.factory.createIResult(false,\r\n            `Объект с ID = '${id}' не найден.`);\r\n        else{\r\n            let nodeValue = this.levelEntities.get(id) as _ILevelEntity;\r\n            let node = this.treeNodes.get(nodeValue.nodeId);\r\n            if(node.isDeleted()) return this.document.application.factory.createIResult(false,\r\n                `Нод с ID = '${id}' уже удалён вами ранее.`);\r\n            else if(node.getLockerID() !== this.document.application.getCurrentUserId())\r\n                return this.document.application.factory.createIResult(false,\r\n                `Операция удаления отклонена, т.к. нод с ID = '${id}' не был вами предварительно заблокирован.`);\r\n            else {\r\n                node.isDeletedDirectly = true;\r\n                (this.document.getCurrentTransaction() as _ITransaction).deletedItems.set(\r\n                    nodeValue.id,nodeValue.id);\r\n                return this.document.application.factory.createIResult(true, '');\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Получить узел по его идентификатору.\r\n     * @param {ID} id Идентификатор искомого узла.\r\n     * @returns {ILevelNode} Искомый узел или `null`, если ничего не найдено.\r\n     */\r\n    getLevelNode(id : ID) : ILevelNode{\r\n\r\n        if(!id || !this.levelEntities.has(id)) return null;\r\n\r\n        let nodeValue = this.levelEntities.get(id);\r\n\r\n        if(nodeValue.isDeleted()) return null;\r\n        else return nodeValue as ILevelNode;\r\n    }\r\n\r\n    /**\r\n     * Получить условие по его идентификатору.\r\n     * @param {ID} id Идентификатор искомого условия.\r\n     * @returns {ILevelEntity} Искомое условие или `null`, если ничего не найдено.\r\n     */\r\n    getCondition(id : ID) : ICondition{\r\n        if(!id || !this.levelEntities.has(id)) return null;\r\n\r\n        let item = this.levelEntities.get(id);\r\n\r\n        if(!item.isDeleted()){\r\n            return item as ICondition;\r\n        }\r\n        else{\r\n            return null;\r\n        }\r\n    }\r\n\r\n    private _connections : Map<ID,IConnection>;\r\n\r\n    /**\r\n     * Связи, устанавливаемые между узлами и условиями.\r\n     */\r\n    public get connections() : Map<ID,IConnection>{\r\n        return this._connections;\r\n    }\r\n\r\n    private _variants : Map<ID,IVariant>;\r\n\r\n    /**\r\n     * Варианты, используемые в условиях.\r\n     */\r\n    public get variants() : Map<ID,IVariant>{\r\n        return this._variants;\r\n    }\r\n\r\n    private _references : Map<ID,IReference>;\r\n\r\n    /**\r\n     * Ссылки на web-странички (используются узлами).\r\n     */\r\n    public get references() : Map<ID,IReference>{\r\n        return this._references;\r\n    }\r\n\r\n    /**\r\n     * Добавить связь.\r\n     * @param {ID} sourceId Идентификатор источника соединения: узла или варианта,\r\n     * используемого в составе некоторого условия.\r\n     * @param {ID} targetID Идентификатор приемника соединения: узла или условия.\r\n     * @param {string} text Текстая информация, отображаемая пользователю для этой связи.\r\n     * @returns {IConnection} В случае успеха возвращается экземпляр IConnection,\r\n     * в противном случае возвращается `null`.\r\n     */\r\n    addConnection(sourceId : ID, targetID : ID, text : string ) : IConnection{\r\n\r\n        if(!sourceId || !targetID) {\r\n            //console.log('Beeep #1');\r\n            return null;\r\n        }\r\n\r\n        // Проверяем, что такой связи (не удалённой) ещё нет в документе\r\n        for(let n of this.connections.values()){\r\n            if(n.sourceId === sourceId && n.targetId === targetID && !n.isDeleted()) {\r\n                //console.log('Beeep #2');\r\n                return null;\r\n            }\r\n        }\r\n\r\n        let source = null;\r\n\r\n        // Сначала проверяем источник подключения...\r\n\r\n        // Если источником является узел.\r\n        if(this.levelEntities.has(sourceId) && this.levelEntities.get(sourceId)\r\n                .typeName === TypeNames.LevelNode){\r\n\r\n            source = this.levelEntities.get(sourceId);\r\n\r\n            // Если в качестве источника указан ранее удалённый объект\r\n            if(source.isDeleted()) {\r\n                //console.log('Beeep #3');\r\n                return null;\r\n            }\r\n\r\n            // Если источник не был предварительно заблокирован\r\n            if(source.getLockerID() !== this.document.application.getCurrentUserId()){\r\n                //console.log('Beeep #4');\r\n                return null;\r\n            }\r\n        }\r\n        // Если источником является вариант условия\r\n        else if(this.variants.has(sourceId)){\r\n\r\n            source = this.variants.get(sourceId) as _IVariant;\r\n\r\n            // Если в качестве источника указан ранее удалённый объект\r\n            if(source.isDeleted()) {\r\n                //console.log('Beeep #5');\r\n                return null;\r\n            }\r\n\r\n            // Если условие, владеющее данным вариантом было удалено или же не было\r\n            // предварительно заблокировано\r\n            let condition = this.getCondition(source.conditionId);\r\n\r\n            if(condition.isDeleted() || condition.getLockerID() !== this.document\r\n                    .application.getCurrentUserId()){\r\n                //console.log('Beeep #6');\r\n                return null;\r\n            }\r\n        }\r\n        else{\r\n            //console.log('Beeep #7');\r\n            return null;\r\n        }\r\n\r\n        // Теперь проверяем приемник подключения...\r\n\r\n        let target : ILevelEntity = null;\r\n\r\n        // Целью может являться только узел или условие.\r\n        if(this.levelEntities.has(targetID)){\r\n            target = this.levelEntities.get(targetID);\r\n            // Если приемник был удалён или же не был предварительно заблокирован\r\n            if(target.isDeleted() || target.getLockerID() !== this.document\r\n                    .application.getCurrentUserId()) {\r\n                //console.log('Beeep #8');\r\n                return null;\r\n            }\r\n        }\r\n        else{\r\n            //console.log('Beeep #9');\r\n            return null;\r\n        }\r\n\r\n        // Если источник и цель найдены и заблокированы текущим юзером, то\r\n        // создаём связь и добавляем её в документ.\r\n\r\n        let connection = this.document.application.factory.createIConnection(\r\n            this.document, sourceId, targetID, text);\r\n\r\n        this.connections.set(connection.id, connection);\r\n\r\n        // редактируем источник подключения\r\n        if(source.typeName === TypeNames.LevelNode){\r\n            (source as _ILevelNode).outputConnectionIDs.push(connection.id);\r\n        }\r\n        else if(source.typeName === TypeNames.Variant){\r\n            (source as _IVariant).outputConnections.push(connection.id);\r\n        }\r\n        else{\r\n            //console.log('Beeep #10');\r\n            return null;\r\n        }\r\n\r\n        // редактируем приемник подключения\r\n        if(target.typeName === TypeNames.LevelNode){\r\n            (target as _ILevelNode).inputConnectionIDs.push(connection.id);\r\n        }\r\n        else if(target.typeName === TypeNames.Condition){\r\n            (target as _ICondition).inputConnections.push(connection.id);\r\n        }\r\n        else{\r\n            //console.log('Beeep #11');\r\n            return null;\r\n        }\r\n        //console.log('Beeep #12');\r\n\r\n        (this.document.getCurrentTransaction() as _ITransaction).addedItems.set(\r\n            connection.id,connection);\r\n        (this.document.getCurrentTransaction() as _ITransaction).editedItems.set(\r\n            connection.sourceId,source);\r\n        (this.document.getCurrentTransaction() as _ITransaction).editedItems.set(\r\n            connection.targetId,target);\r\n\r\n        return connection;\r\n    }\r\n\r\n    /**\r\n     * Удалить связь по её идентификатору.\r\n     * @param {ID} id Идентификатор удаляемой связи.\r\n     * @returns {IResult} Отчёт о результате выполнения операции.\r\n     */\r\n    deleteConnection(id : ID) : IResult{\r\n\r\n        if(!id) return this.document.application.factory.createIResult(false,\r\n            'В качестве идентификатора нельзя указывать `null` или `undefined`.');\r\n\r\n        if(!this.connections.has(id)) return this.document.application.factory.createIResult(false,\r\n            `Связь с ID = '${id}' не найдена.`);\r\n\r\n        let connection =this.connections.get(id);\r\n\r\n        if(connection.isDeleted()) return this.document.application.factory.createIResult(false,\r\n            `Связь с ID = '${id}' уже была ранее удалена вами.`);\r\n\r\n        connection.isDeletedDirectly = true;\r\n\r\n        (this.document.getCurrentTransaction() as _ITransaction).deletedItems.set(\r\n            connection.id,connection);\r\n    }\r\n\r\n    /**\r\n     * Получить связь по её идентификатору.\r\n     * @param {ID} id Идентификатор искомой связи.\r\n     * @returns {IConnection} Возвращается искомый объект связи или `null`, если ничего не найдено.\r\n     */\r\n    getConnection(id : ID) : IConnection{\r\n        if(!id || !this.connections.has(id) || this.connections.get(id).isDeletedDirectly) return null;\r\n        else return this.connections.get(id);\r\n    }\r\n\r\n    /**\r\n     * Добавить вариант в условие.\r\n     * @param {ID} conditionId Идентификатор целевого условия.\r\n     * @param {string} text Текст варианта, отображаемый пользователю.\r\n     * @returns {IVariant} Возвращается созданный объект или `null` если создать объект не удалось.\r\n     */\r\n    addVariant(conditionId : ID, text : string) : IVariant{\r\n\r\n        if(!conditionId) return null;\r\n\r\n        if(this.levelEntities.has(conditionId)){\r\n\r\n            let condition = this.levelEntities.get(conditionId) as _ICondition;\r\n\r\n            if(condition.isDeleted()) return null;\r\n            else if(condition.getLockerID() !== this.document.application.getCurrentUserId()){\r\n                return null;\r\n            }\r\n            else{\r\n                let condition = this.getCondition(conditionId) as _ICondition;\r\n                let variant = this.document.application.factory.createIVariant(condition, text) as _IVariant;\r\n                this.variants.set(variant.id,variant);\r\n                condition.variants.push(variant.id);\r\n                variant.conditionId = condition.id;\r\n\r\n                (this.document.getCurrentTransaction() as _ITransaction).addedItems.set(\r\n                    variant.id,variant);\r\n                (this.document.getCurrentTransaction() as _ITransaction).editedItems.set(\r\n                    condition.id,condition);\r\n\r\n                return variant;\r\n            }\r\n        }\r\n        else{\r\n            return null;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Получить вариант, используемый в условии, по его ID.\r\n     * @param {ID} id Идентификатор искомого варианта.\r\n     * @returns {IVariant} Возвращается искомый объект или `null` если ничего не найдено.\r\n     */\r\n    getVariant(id : ID) : IVariant{\r\n        if(!id || !this.variants.has(id)) return null;\r\n        let variant = this.variants.get(id);\r\n\r\n        if(variant.isDeleted()) return null;\r\n        else return variant;\r\n    }\r\n\r\n    /**\r\n     * Удалить вариант, используемый в условии.\r\n     * @param {ID} id Идентификатор варианта, подлежащего удалению.\r\n     * @returns {IResult} Отчёт о результате выполнения операции.\r\n     */\r\n    deleteVariant(id : ID) : IResult{\r\n\r\n        if(!id) return this.document.application.factory.createIResult(false,\r\n            'В качестве идентификатора нельзя указывать `null` или `undefined`.');\r\n\r\n        if(!this.variants.has(id)) return this.document.application.factory.createIResult(false,\r\n            `Вариант с ID = '${id}' не найдена.`);\r\n\r\n        let variant =this.variants.get(id);\r\n\r\n        if(variant.isDeleted()) return this.document.application.factory.createIResult(false,\r\n            `Вариант с ID = '${id}' уже был ранее удалён вами.`);\r\n\r\n        const condition = variant.getCondition();\r\n        (this.document.getCurrentTransaction() as _ITransaction).editedItems.set(\r\n            condition.id,condition);\r\n\r\n        variant.isDeletedDirectly = true;\r\n\r\n        (this.document.getCurrentTransaction() as _ITransaction).deletedItems.set(\r\n            variant.id,variant);\r\n    }\r\n\r\n    /**\r\n     * Получить объект по его ID. Полученный объект затем нужно будет явно приводить к нужному интерфейсу.\r\n     * @param {ID} id Идентификатор искомого объекта.\r\n     * @returns {IType}\r\n     */\r\n    getObject(id : ID) : IType{\r\n        if(!id) return null;\r\n\r\n        if(this.levels.has(id)){\r\n            let level = this.levels.get(id);\r\n            return level.isDeleted() ? null : level;\r\n        }\r\n        else if(this.levelEntities.has(id)){\r\n            let item = this.levelEntities.get(id) as _ILevelEntity;\r\n            let treeNode = this.treeNodes.get(item.nodeId);\r\n            return treeNode.isDeleted() ? null : item;\r\n        }\r\n        else if(this.treeNodes.has(id)){\r\n            let treeNode = this.treeNodes.get(id);\r\n            return treeNode.isDeleted() ? null : treeNode;\r\n        }\r\n        else if(this.connections.has(id)){\r\n            let item = this.connections.get(id);\r\n            return item.isDeleted() ? null : item;\r\n        }\r\n        else if(this.variants.has(id)){\r\n            let item = this.variants.get(id);\r\n            return item.isDeleted() ? null : item;\r\n        }\r\n        else if(this.references.has(id)){\r\n            let item = this.references.get(id);\r\n            return item.isDeleted() ? null : item;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Добавить ссылку в узел.\r\n     * @param {ID} entityID Идентификатор целевого узла.\r\n     * @param {string} text Текст, отображаемый пользователю.\r\n     * @param {string} path  URL-адрес ссылки.\r\n     * @param {string} tooltip Текст всплывающей подсказки.\r\n     * @param {string} iconName Имя файла изображения.\r\n     * @returns {IReference} Возвращается созданный объект или `null` если создать объект не удалось.\r\n     */\r\n    addReference(entityID : ID, text : string, path : string, tooltip : string,\r\n                 iconName : string) : IReference{\r\n\r\n        if(!entityID || !this.levelEntities.has(entityID)) return null;\r\n\r\n        let levelNode = this.levelEntities.get(entityID) as _ILevelNode;\r\n\r\n        if(!levelNode) throw new Error('Узел не найден. ID = ' + entityID);\r\n\r\n        if(levelNode.isDeleted() || levelNode.getLockerID() != this.document\r\n                .application.getCurrentUserId()){\r\n            return null;\r\n        }\r\n\r\n        let reference = this.document.application.factory.createIReference(\r\n            levelNode, text, path, tooltip, iconName) as _IReference;\r\n\r\n        this.references.set(reference.id, reference);\r\n        levelNode.references.push(reference.id);\r\n        reference._levelNodeID = levelNode.id;\r\n\r\n        (this.document.getCurrentTransaction() as _ITransaction).addedItems.set(\r\n            reference.id,reference);\r\n        (this.document.getCurrentTransaction() as _ITransaction).addedItems.set(\r\n            reference._levelNodeID,levelNode);\r\n\r\n        return reference;\r\n    }\r\n\r\n    /**\r\n     * Получить ссылку по её ID.\r\n     * @param {ID} id Идентификатор искомой ссылки.\r\n     * @returns {IReference} Возвращается искомый объект или `null` если ничего не найдено.\r\n     */\r\n    getReference(id : ID) : IReference{\r\n\r\n        if((this.document.getContext() as _IDocumentContext).references.has(id)){\r\n\r\n            let item = (this.document.getContext() as _IDocumentContext).references.get(id);\r\n\r\n            if(item.isDeleted()) return null;\r\n            else return item;\r\n        }\r\n        else return null;\r\n    }\r\n\r\n    /**\r\n     * Удалить ссылку.\r\n     * @param {ID} id Идентификатор ссылки, подлежащей удалению.\r\n     * @returns {IResult} Отчёт о результате выполнения операции.\r\n     */\r\n    deleteReference(id : ID) : IResult{\r\n\r\n        if(!id || !(this.document.getContext() as _IDocumentContext).references.has(id)){\r\n            return this.document.application.factory.createIResult(\r\n                false,'Ссылка с указанным ID не найдена.');\r\n        }\r\n\r\n        let reference = (this.document.getContext() as _IDocumentContext).references\r\n            .get(id);\r\n\r\n        if(reference.getlevelNode().getLockerID() != this.document.application\r\n                .getCurrentUserId()){\r\n            return this.document.application.factory.createIResult(\r\n                false,'Прежде чем удалить ссылку, вы должны заблокировать её узел.');\r\n        }\r\n        (reference as _IReference)._isDeleted = true;\r\n        (this.document.getCurrentTransaction() as _ITransaction).deletedItems.set(\r\n            reference.id,reference);\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/api/src/ts/classes/DocumentContext.ts","\r\nimport {IDocumentInfo} from \"../interfaces/IDocumentInfo\";\r\ntype ID = string;\r\n\r\n/**\r\n * Краткая информация о документе. Используется для получения перечней документов,\r\n * хранящихся на сервере.\r\n */\r\nexport class DocumentInfo implements IDocumentInfo{\r\n\r\n    /**\r\n     * Конструктор класса.\r\n     * @param {ID} id Идентификатор документа.\r\n     * @param {string} code Код документа.\r\n     * @param {string} name Наименование документа.\r\n     */\r\n    constructor(id : ID, code : string, name : string){\r\n        this._id = id;\r\n        this._code = code;\r\n        this._name = name;\r\n    }\r\n\r\n    private _id: ID;\r\n    private _code: string;\r\n    private _name: string;\r\n\r\n    /**\r\n     * Идентификатор документа.\r\n     * @returns {ID}\r\n     */\r\n    public get id(): ID{\r\n        return this._id;\r\n    }\r\n\r\n    /**\r\n     * Код документа.\r\n     * @returns {string}\r\n     */\r\n    public get code(): string{\r\n        return this._code;\r\n    }\r\n\r\n    /**\r\n     * Наименование документа.\r\n     * @returns {string}\r\n     */\r\n    public get name(): string{\r\n        return this._name;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/api/src/ts/classes/DocumentInfo.ts","\r\nimport {EventEmitter} from \"./EventEmitter\";\r\nimport {IDocument} from \"../interfaces/IDocument\";\r\nimport {IApplication} from \"../interfaces/IApplication\";\r\nimport {IDocumentInfo} from \"../interfaces/IDocumentInfo\";\r\nimport {DocumentManagerEventNames} from \"../enums/event_names/DocumentManagerEventNames\";\r\nimport {_IDocumentManager} from \"../_internal_interfaces/_IDocumentManager\";\r\nimport {_IDocument} from \"../_internal_interfaces/_IDocument\";\r\n\r\ntype ID = string;\r\n/**\r\n * Менеджер документов.\r\n */\r\nexport class DocumentManager extends EventEmitter<DocumentManagerEventNames> implements _IDocumentManager{\r\n\r\n    /**\r\n     * Конструктор класса.\r\n     * @param {IApplication} app Приложение, в составе которого используется менеджер документов.\r\n     */\r\n    constructor(app : IApplication){\r\n        super();\r\n        this._documents = new Map<ID, IDocument>();\r\n        this._application = app;\r\n        this.current = null;\r\n    }\r\n\r\n    private _documents : Map<ID, IDocument>;\r\n    private _application : IApplication;\r\n\r\n    /**\r\n     * Перечень открытых документов.\r\n     */\r\n    public get documents() : IterableIterator<IDocument>{\r\n        return this._documents.values();\r\n    }\r\n\r\n    /**\r\n     * Приложение, в составе которого работает менеджер документов.\r\n     */\r\n    public get application(): IApplication{\r\n        return this._application;\r\n    }\r\n\r\n    /**\r\n     * Создать новый документ. Созданный документ автоматически будет установлен в качестве текущего.\r\n     * @param {string} name Наименование документа.\r\n     * @param {string} code Код документа.\r\n     * @returns {IDocument} Возвращается новый документ.\r\n     */\r\n    create(name: string, code: string): IDocument {\r\n        const doc = this.application.factory.createIDocument(name, code);\r\n        this._documents.set(doc.id, doc);\r\n\r\n        this.emit(DocumentManagerEventNames.DocumentCreated,\r\n            this.application.factory.createIEventArgs({source:this, data: {document: doc}}));\r\n        this.current = doc;\r\n        return doc;\r\n    }\r\n\r\n    /**\r\n     * Получить с сервера документ по его идентификатору.\r\n     * @param {ID} id Идентификатор искомого объекта.\r\n     * @returns {IDocument}\r\n     */\r\n    open(id: ID): IDocument {\r\n\r\n        if(this._documents.has(id)){\r\n            let doc = this._documents.get(id);\r\n            return doc;\r\n        }\r\n        else{\r\n            let doc = this.application.dataProvider.openDocument(id);\r\n\r\n            if(!doc) return null;\r\n\r\n            let _doc = doc as _IDocument;\r\n\r\n            if (_doc.docContexts.length){\r\n                let context = _doc.docContexts[_doc.docContexts.length - 1];\r\n                _doc.docContexts = [];\r\n                _doc.docContexts.push(context);\r\n                _doc.currentContextIndex = 0;\r\n            }\r\n\r\n            _doc._transactionStack = [];\r\n\r\n            this._documents.set(doc.id, doc);\r\n\r\n            this.emit(DocumentManagerEventNames.DocumentOpened,\r\n                this.application.factory.createIEventArgs({source : this, data : {document: doc}}));\r\n            this.current = doc;\r\n            return doc;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Получить открытый документ по его ID. Результат может использоваться для\r\n     * смены текущего документа.\r\n     * @param {ID} id\r\n     * @returns {IDocument}\r\n     */\r\n    get(id: ID): IDocument {\r\n        return this._documents.has(id) ? this._documents.get(id) : null;\r\n    }\r\n\r\n    private _current : IDocument;\r\n\r\n    /**\r\n     * Текущий документ\r\n     */\r\n    public get current() : IDocument{\r\n        return this._current;\r\n    }\r\n\r\n    public set current(value : IDocument){\r\n\r\n        if(null == value || this._documents.has(value.id)){\r\n            this._current = value;\r\n            this.emit(DocumentManagerEventNames.CurrentDocumentSwitched,\r\n                this.application.factory.createIEventArgs({source:this, data: {document: value}}));\r\n        }\r\n        else{\r\n            throw new Error('current: Указано недопустимое значение в качестве текущего документа.')\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Закрыть документ с указанным идентификатором. Если документ с указанным\r\n     * идентификатором не будет найден, то никаких изменений произведено не будет.\r\n     *\r\n     * Если документ с указанным идентификатором будет найден, то он будет закрыт. При этом,\r\n     * если закрываемый документ был текущим, то свойство `current` устанавливается в `null`,\r\n     * если нет других открытых документов. В противном случае - в качестве текущего устанавливается\r\n     * первый найденный документ среди открытых в приложении.\r\n     * @param {ID} id Идентификатор документа, подлежащего закрытию.\r\n     */\r\n    closeDocument(id : ID): void{\r\n\r\n        if(this._documents.has(id)){\r\n\r\n            this._documents.delete(id);\r\n\r\n            // Если закрывается текущий документ, то устанавливаем текущим любой др. открытый документ.\r\n            // Если других открытых документов нет, то текущим документом устанавливаем `null`.\r\n            if(this.current.id === id){\r\n\r\n                if(this._documents.size){\r\n                    this.current = this._documents.get(this._documents.keys().next().value);\r\n                }\r\n                else{\r\n                    this.current = null;\r\n                }\r\n            }\r\n        }\r\n        this.emit(DocumentManagerEventNames.DocumentClosed,\r\n            this.application.factory.createIEventArgs({source:this, data: {documentID: id}}));\r\n    }\r\n\r\n    /**\r\n     * Получить перечень документов, имеющихся на сервере.\r\n     * @returns {Array<IDocumentInfo>}\r\n     */\r\n    getServerDocumentsList() : Array<IDocumentInfo>{\r\n        return this.application.dataProvider.getDocumentList();\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/api/src/ts/classes/DocumentManager.ts","import {IEventArgs} from \"../interfaces/IEventArgs\";\r\n\r\n/**\r\n * Класс, используемый в качестве параметра генерируемых событий.\r\n */\r\nexport class EventArgs implements IEventArgs{\r\n\r\n    private _source : any;\r\n    private _data : any;\r\n\r\n    /**\r\n     * Конструктор класса.\r\n     * @param {any} source Объект, являющийся источником события.\r\n     * @param {any} data Дополнительная информация, зависящая от контекста событий.\r\n     */\r\n    constructor({source, data} : {source : any, data : any}){\r\n        this._source = source;\r\n        this._data = data;\r\n    }\r\n\r\n    /**\r\n     * Идентификатор объекта, подвергшегося изменению.\r\n     * @returns {any}\r\n     */\r\n    public get source() : any {\r\n        return this._source;\r\n    }\r\n\r\n    /**\r\n     * Дополнительная информация, зависящая от контекста событий.\r\n     */\r\n    public get data() : any{\r\n        return this._data;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/api/src/ts/classes/EventArgs.ts","/* EventEmitter.ts\r\n * Механизм генерации событий.\r\n */\r\n\r\nimport {IEventEmitter} from \"../interfaces/IEventEmitter\";\r\nimport {IEventArgs} from \"../interfaces/IEventArgs\";\r\nimport v4 = require(\"uuid/v4\");\r\n\r\n/**\r\n * Данный класс предоставляет механизм генерации событий, подписки на них\r\n * и оповещения подписчиков. Класс является абстрактным и предназначен\r\n * для наследования от него.\r\n */\r\nexport abstract class EventEmitter<T> implements IEventEmitter<T>{\r\n\r\n    protected _id : any;\r\n\r\n    /**\r\n     * Источник события\r\n     */\r\n    get id(): string {\r\n        return this._id;\r\n    }\r\n\r\n    protected setSource(value : any) : void {\r\n        this._id = value;\r\n    }\r\n\r\n    private _subscriptions = new Map<T, ((arg:IEventArgs) => void)[]>();\r\n\r\n    /**\r\n\t * Конструктор класса.\r\n     */\r\n\tconstructor(){\r\n\t\tthis._id = v4();\r\n\t}\r\n\r\n    /**\r\n\t * Регистрация функции обратного вызова для прослушивания определённого события.\r\n     * @param {T} eventName Наименование события.\r\n     * @param {(arg: IEventArgs) => void} listener Функция обратного вызова, регистрируемая\r\n\t * в качестве подписчика.\r\n     * @returns {boolean} Возвращается логическое значение, сообщающее\r\n     * об успешности выполнения операции.\r\n     */\r\n\tpublic addListener(eventName : T, listener : (arg:IEventArgs) => void) : boolean{\r\n\r\n\t\tif(!listener) return false;\r\n\t\telse{\r\n            let arr : ((arg:IEventArgs) => void)[] = null;\r\n\r\n\t\t\tif(this._subscriptions.has(eventName)){\r\n\t\t\t\tarr = this._subscriptions.get(eventName);\r\n\t\t\t\tarr.push(listener);\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tarr = [listener];\r\n\t\t\t\tthis._subscriptions.set(eventName, arr);\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\r\n    /**\r\n\t * Отмена регистрации функции обратного вызова, ранее зарегистрированной для\r\n     * указанного события.\r\n     * @param {T} eventName Наименование события.\r\n     * @param {(arg: any) => void} listener Функция обратного вызова, чью\r\n\t * подписку следует аннулировать.\r\n     * @returns {boolean} Возвращается логическое значение, сообщающее\r\n\t * об успешности выполнения операции.\r\n     */\r\n\tpublic deleteListener(eventName : T, listener : (arg:any) => void) : boolean{\r\n\t\tif(!listener) return false;\r\n\t\telse{\r\n\t\t\tif(this._subscriptions.has(eventName)){\r\n\t\t\t\tconst arr = this._subscriptions.get(eventName);\r\n\t\t\t\tlet index = arr.indexOf(listener);\r\n\r\n\t\t\t\tif(index >= 0){\r\n\t\t\t\t\tarr.splice(index, 1);\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n    /**\r\n\t * Генерация указанного события\r\n     * @param {T} eventName Наименование события.\r\n     * @param {IEventArgs} info Параметр события, передаваемый всем подписчикам.\r\n     */\r\n\tprotected emit(eventName : T, info : IEventArgs) : void{\r\n        if (this._subscriptions.has(eventName)){\r\n            for(let fn of this._subscriptions.get(eventName)){\r\n                if(fn) fn(info);\r\n            }\r\n        }\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/api/src/ts/classes/EventEmitter.ts","/* IFactory.ts\r\n * The factory creates the instances of the necessary interfaces.\r\n * It allows you know nothing about the implementation of the interfaces.\r\n *\r\n * You can dynamically replace the factory with the implementation you need.\r\n * For example, this may be required for unit testing: it allows you to\r\n * create stubs, mocks, and fakes.\r\n *\r\n * Company: PIK-PROJECT.\r\n * Site: https://www.pik.ru/\r\n *\r\n * Developer: Andrey Bushman, 2017\r\n * email: bushman.andrey@gmail.com\r\n */\r\n\r\nimport {IFactory} from \"../interfaces/IFactory\";\r\nimport {ICommandOutput} from \"../interfaces/ICommandOutput\";\r\nimport {IResult} from \"../interfaces/IResult\";\r\nimport  {IResourceManager} from \"../interfaces/IResourceManager\";\r\n\r\nimport {CommandOutput} from \"./CommandOutput\";\r\nimport {Result} from \"./Result\";\r\nimport {ResourceManager} from \"./ResourceManager\";\r\n\r\nimport { v4 } from \"uuid\";\r\nimport {EventEmitter} from \"./EventEmitter\";\r\nimport {IEventArgs} from \"../interfaces/IEventArgs\";\r\nimport {EventArgs} from \"./EventArgs\";\r\nimport {IApplication} from \"../interfaces/IApplication\";\r\nimport {IDocumentManager} from \"../interfaces/IDocumentManager\";\r\nimport {DocumentManager} from \"./DocumentManager\";\r\nimport {ICommandFactory} from \"../interfaces/ICommandFactory\";\r\nimport {CommandFactory} from \"./CommandFactory\";\r\nimport {IDocument} from \"../interfaces/IDocument\";\r\nimport {ICommandStack} from \"../interfaces/ICommandStack\";\r\nimport {CommandStack} from \"./CommandStack\";\r\nimport {ITransaction} from \"../interfaces/ITransaction\";\r\nimport {Transaction} from \"./Transaction\";\r\nimport {IDocumentContext} from \"../interfaces/IDocumentContext\";\r\nimport {DocumentContext} from \"./DocumentContext\";\r\nimport {Document} from \"./Document\";\r\nimport {ITreeNode} from \"../interfaces/ITreeNode\";\r\nimport {ILevel} from \"../interfaces/ILevel\";\r\nimport {IConnection} from \"../interfaces/IConnection\";\r\nimport {ILevelEntity} from \"../interfaces/ILevelEntity\";\r\nimport {IVariant} from \"../interfaces/IVariant\";\r\nimport {IReference} from \"../interfaces/IReference\";\r\nimport {FactoryEventNames} from \"../enums/event_names/FactoryEventNames\";\r\nimport {IDatabase} from \"../interfaces/IDatabase\";\r\nimport {IDbTransaction} from \"../interfaces/IDbTransaction\";\r\nimport {IDbCommandStack} from \"../interfaces/IDbCommandStack\";\r\nimport {IDatabaseContext} from \"../interfaces/IDatabaseContext\";\r\nimport {DbCommandStack} from \"./DbCommandStack\";\r\nimport {IDbRole} from \"../interfaces/IDbRole\";\r\nimport {IDepartment} from \"../interfaces/IDepartment\";\r\nimport {IDbUser} from \"../interfaces/IDbUser\";\r\nimport {DatabaseContext} from \"./DatabaseContext\";\r\nimport {DbUser} from \"./DbUser\";\r\nimport {DbRole} from \"./DbRole\";\r\nimport {Department} from \"./Department\";\r\nimport {Database} from \"./Database\";\r\nimport {DbTransaction} from \"./DbTransaction\";\r\nimport {Reference} from \"./Reference\";\r\nimport {Variant} from \"./Variant\";\r\nimport {IDataProvider} from \"../interfaces/IDataProvider\";\r\nimport {DataProvider} from \"./DataProvider\";\r\nimport {Level} from \"./Level\";\r\nimport {ILevelNode} from \"../interfaces/ILevelNode\";\r\nimport {LevelNode} from \"./LevelNode\";\r\nimport {Connection} from \"./Connection\";\r\nimport {Condition} from \"./Condition\";\r\nimport {ICondition} from \"../interfaces/ICondition\";\r\nimport {IDocumentInfo} from \"../interfaces/IDocumentInfo\";\r\nimport {DocumentInfo} from \"./DocumentInfo\";\r\nimport {TreeNode} from \"./TreeNode\";\r\n\r\ndeclare let uuid : any;\r\n\r\ntype EntityID = string;\r\ntype NodeID = string;\r\ntype ID = string;\r\n\r\n /**\r\n  * Этот класс реализует интерфейс `IFactory`, предназначенный для реализации\r\n  * паттерна \"Фабрика\". Экземпляры всех интерфейсов, кроме `IFactory` и\r\n  * `IApplication`, следует создавать только при\r\n  * помощи фабрики. Текущая фабрика доступна через метод `IApplication.factory`.\r\n  * Экземпляр `IApplication` доступен через самостоятельную функцию\r\n  * `getApplication()`. Присваивая свойству `IApplication.factory` новое\r\n  * значение можно динамически менять реализацию интерфейсов, наследуемых\r\n  * конкретными классами. Подмена фабрики может использоваться, например, в\r\n  * модульных тестах проекта.\r\n  */\r\nexport class Factory extends EventEmitter<FactoryEventNames> implements IFactory{\r\n\r\n     /**\r\n      * Конструктор класса фабрики.\r\n      * @param {IApplication} app Приложение, в составе которого используется фабрика.\r\n      */\r\n    constructor(app : IApplication){\r\n        super();\r\n         this._application = app;\r\n    }\r\n\r\n    private _application : IApplication;\r\n\r\n     /**\r\n      * Приложение, в составе которого используется данная фабрика.\r\n      */\r\n     public get application() : IApplication {\r\n         return this._application;\r\n     }\r\n\r\n     /**\r\n      * Создать объект, содержащий информацию об успешности проделанной операции.\r\n      * @param {boolean} Метка об успешности операции.\r\n      * @param {string} Сообщение об ошибке (используется в случае отказа).\r\n      */\r\n     createIResult(success: boolean, errorMessage: string): IResult {\r\n         let item = new Result(success, errorMessage);\r\n         return item;\r\n     }\r\n\r\n     /**\r\n      * Создать объект, содержащий в себе подробную информацию о результате работы команды.\r\n      * @param {any} data Объект, в котором размещаются данные,\r\n      * возвращаемые командой (если такие данные имеются).\r\n      * @param {Result} result Перечисление, указывающее на успешность выполнения команды.\r\n      * @return {ICommandOutput} Возвращается экземпляр `ICommandOutput`.\r\n      */\r\n     createICommandOutput({data, result} : {data : any, result : IResult}) : ICommandOutput{\r\n\r\n         const item = new CommandOutput({data, result});\r\n         return item;\r\n     }\r\n\r\n    /** Создать новый ID. */\r\n    public createId(): ID{\r\n        const id : ID = v4();\r\n        return id;\r\n    }\r\n\r\n     /**\r\n      * Создать менеджер локализованных ресурсов.\r\n      * @param {string} localizationName Имя локализации, используемой по умолчанию. Эта же локализация\r\n      * будет установлена и в качестве текущей.\r\n      */\r\n     createIResourceManager(localizationName : string) : IResourceManager{\r\n         const item = new ResourceManager(this.application, localizationName);\r\n         return item;\r\n     }\r\n\r\n     /**\r\n      * Создать параметр события.\r\n      * @param {any} source\r\n      * @param data\r\n      * @returns {IEventArgs}\r\n      */\r\n     createIEventArgs({source, data} : {source : any, data : any}) : IEventArgs{\r\n         const item = new EventArgs({source, data});\r\n         return item;\r\n     }\r\n\r\n     /**\r\n      * Создать менеджер документов.\r\n      * @returns {IDocumentManager}\r\n      */\r\n     createIDocumentManager() : IDocumentManager{\r\n         const item = new DocumentManager(this.application);\r\n         return item;\r\n     }\r\n\r\n     /**\r\n      * Создать конструктор команд.\r\n      * @returns {ICommandFactory}\r\n      */\r\n     createICommandFactory() : ICommandFactory{\r\n         const item = new CommandFactory(this.application);\r\n         return item;\r\n     }\r\n\r\n     /**\r\n      * Создать объект стека вызова команд.\r\n      * @param {IDocumentContext} context Контекст, в составе которого будет\r\n      * размещаться создаваемый стек команд.\r\n      * @returns {ICommandStack}\r\n      */\r\n     createICommandStack(context : IDocumentContext) : ICommandStack{\r\n         const item = new CommandStack(context);\r\n         return item;\r\n     }\r\n\r\n     /**\r\n      * Создать новую транзакцию для заданного документа.\r\n      * @param {IDocument} doc Документ, владеющий транзакцией.\r\n      * @returns {ITransaction}\r\n      */\r\n     createITransaction(doc : IDocument) : ITransaction{\r\n         const item = new Transaction(doc);\r\n         return item;\r\n     }\r\n\r\n     /**\r\n      * Создать контекст использования документа.\r\n      * @param {IDocument} doc Документ, для которого следует создать контекст.\r\n      * @param {Map<ID,ILevel>} levels Уровни, определённые в составе документа (технологии).\r\n      * @param {Map<NodeID, ITreeNode<EntityID>>} treeNodes Описания иерархических структур, ссылающихся\r\n      * на объекты бизнес-модели.\r\n      * @param {Map<ID, ILevelEntity>} levelEntities Узлы и условия.\r\n      * @param {Map<ID,IConnection>} connections Связи между узлами и условиями.\r\n      * @param {Map<ID,IVariant>} variants Варианты, используемые в условиях.\r\n      * @param {Map<ID,IReference>} references Ссылки на web-странички, используемые в узлах.\r\n      * @param {string} name Наименование документа.\r\n      * @param {string} name Код документа.\r\n      * @returns {IDocumentContext}\r\n      */\r\n     createIDocumentContext(doc : IDocument, levels : Map<ID,ILevel>, treeNodes: Map<NodeID,\r\n                                ITreeNode<EntityID>>, levelEntities: Map<ID, ILevelEntity>,\r\n                            connections : Map<ID,IConnection>, variants : Map<ID,IVariant>,\r\n                            references : Map<ID,IReference>, name : string, code :string) : IDocumentContext{\r\n\r\n         const item = new DocumentContext(doc, levels, treeNodes, levelEntities, connections,\r\n             variants, references, name, code);\r\n         return item;\r\n     }\r\n\r\n     /**\r\n      * Создать новый документ (технологию).\r\n      * @param {string} name Наименование документа.\r\n      * @param {string} code Код документа.\r\n      * @returns {IDocument}\r\n      */\r\n     createIDocument(name : string, code : string) : IDocument{\r\n         const item = new Document(this.application, name, code);\r\n         return item;\r\n     }\r\n\r\n     createIDbTransaction(db: IDatabase): IDbTransaction {\r\n         return new DbTransaction(db);\r\n     }\r\n\r\n     createIDbCommandStack(context: IDatabaseContext): IDbCommandStack {\r\n         return new DbCommandStack(context);\r\n     }\r\n\r\n     createIDatabaseContext(database: IDatabase, departments: Map<string, IDepartment>,\r\n                            roles: Map<string, IDbRole>, users: Map<string, IDbUser>): IDatabaseContext {\r\n         return new DatabaseContext(database,departments,roles,users);\r\n     }\r\n\r\n     createIDbUser(database : IDatabase, firstName: string, middleName: string, lastName: string, site: string): IDbUser {\r\n         return new DbUser(database, firstName, middleName, lastName, site);\r\n     }\r\n\r\n     createIDbRole(database: IDatabase, code: string, name: string, site: string, parent: string): IDbRole {\r\n         return new DbRole(database, code, name, site, parent);\r\n     }\r\n\r\n     createDepartment(database: IDatabase, code: string, name: string, site: string,\r\n                      parent: string, role: string): IDepartment {\r\n         return new Department(database, code, name, site, parent, role);\r\n     }\r\n\r\n     createIDatabase(app: IApplication): IDatabase {\r\n         return new Database(app);\r\n     }\r\n\r\n     createITreeNode(doc : IDocument) : ITreeNode<EntityID>{\r\n         return new TreeNode(doc);\r\n     }\r\n\r\n     createIReference(levelNode : ILevelNode, text: string, path : string, tooltip : string, iconName : string) : IReference{\r\n         return new Reference(levelNode, text, path, tooltip, iconName);\r\n     }\r\n\r\n     createIVariant(condition : ICondition, text: string) : IVariant{\r\n         return new Variant(condition, text);\r\n     }\r\n\r\n     createIDataProvider() : IDataProvider{\r\n         return new DataProvider(this.application);\r\n     }\r\n\r\n     createILevel(doc : IDocument, name : string, code: string, color : string, autoNum : boolean) : ILevel{\r\n         return new Level(doc,name,code,color,autoNum);\r\n     }\r\n\r\n     createILevelNode(doc : IDocument, name: string, code: string) : ILevelNode{\r\n         return new LevelNode(doc, name, code);\r\n     }\r\n\r\n     createIConnection(document : IDocument, source : ID, target : ID, text : string) : IConnection{\r\n         return new Connection(document, source, target, text);\r\n     }\r\n\r\n     createICondition(doc : IDocument, code : string, text : string) : ICondition{\r\n         return new Condition(doc,code,text);\r\n     }\r\n\r\n     createIDocumentInfo(id : ID, code : string, name : string) : IDocumentInfo{\r\n         return new DocumentInfo(id, code, name);\r\n     }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/api/src/ts/classes/Factory.ts","\r\nimport {EventEmitter} from \"./EventEmitter\";\r\nimport {IDocument} from \"../interfaces/IDocument\";\r\nimport {LevelEventNames} from \"../enums/event_names/LevelEventNames\";\r\nimport {_ILevel} from \"../_internal_interfaces/_ILevel\";\r\nimport {_IDocumentContext} from \"../_internal_interfaces/_IDocumentContext\";\r\nimport {TypeNames} from \"../enums/TypeNames\";\r\nimport {TransactionStatus} from \"../enums/TransactionStatus\";\r\nimport {ILevel} from \"../interfaces/ILevel\";\r\nimport {_ITransaction} from \"../_internal_interfaces/_ITransaction\";\r\n\r\ntype UserID = string;\r\ntype ID = string;\r\n\r\n/**\r\n * Уровень.\r\n */\r\nexport class Level extends EventEmitter<LevelEventNames> implements _ILevel{\r\n\r\n    isDeletedByForefather(): boolean {\r\n\r\n        if (!this.prevId) return false;\r\n\r\n        let prev = (this.document.getContext() as _IDocumentContext).levels.get(this.prevId);\r\n        return prev.isDeleted();\r\n    }\r\n\r\n    isDeleted(): boolean {\r\n        return this.isDeletedDirectly || this.isDeletedByForefather();\r\n    }\r\n\r\n    _setDocument(doc : IDocument) : void{\r\n        this._document = doc;\r\n    }\r\n\r\n    public get prevId(): string{\r\n        return this._prevId;\r\n    }\r\n\r\n    private isInsideOfTransaction() : boolean{\r\n        let transaction = this._document.getCurrentTransaction();\r\n        if(!transaction || transaction.status != TransactionStatus.Started) return false\r\n        else return true;\r\n    }\r\n\r\n    public set prevId(value : string){\r\n\r\n        if(!this.isInsideOfTransaction()){\r\n            throw new Error('Редактировать объект можно только в предварительно открытой транзакции.');\r\n        }\r\n\r\n        if(this.document.application.getCurrentUserId() !== this.lockerId){\r\n            throw new Error('Попытка отредактировать свойство незаблокированного вами объекта.');\r\n        }\r\n        this._prevId = value;\r\n        this.isChanged = true;\r\n        (this.document.getCurrentTransaction() as _ITransaction).editedItems.set(this.id,this);\r\n    }\r\n\r\n    public get nextId(): string{\r\n        return this._nextId;\r\n    }\r\n\r\n    public set nextId(value : string){\r\n\r\n        if(!this.isInsideOfTransaction()){\r\n            throw new Error('Редактировать объект можно только в предварительно открытой транзакции.');\r\n        }\r\n\r\n        if(this.document.application.getCurrentUserId() !== this.lockerId){\r\n            throw new Error('Попытка отредактировать свойство незаблокированного вами объекта.');\r\n        }\r\n        this._nextId = value;\r\n        this.isChanged = true;\r\n        (this.document.getCurrentTransaction() as _ITransaction).editedItems.set(this.id,this);\r\n    }\r\n\r\n    public get typeName(): TypeNames{\r\n        return this._typeName;\r\n    }\r\n\r\n    constructor(doc : IDocument, name : string, code: string, color : string, autoNum : boolean){\r\n        super();\r\n        this._document = doc;\r\n        this._typeName = TypeNames.Level;\r\n        this._code = code;\r\n        this._name = name;\r\n        this._color = color;\r\n        this._autoNum = autoNum;\r\n        this._isChanged = false;\r\n        this._isDeleted = false;\r\n        this._lockerId = null;\r\n        this._prevId = null;\r\n        this._nextId = null;\r\n    }\r\n\r\n    _document: IDocument;\r\n    _code: string;\r\n    _name: string;\r\n    _autoNum: boolean;\r\n    _color: string;\r\n    _isDeleted: boolean;\r\n    _lockerId: UserID;\r\n    _isChanged: boolean;\r\n    _prevId: string;\r\n    _nextId: string;\r\n    _typeName: TypeNames;\r\n\r\n    public get document(): IDocument{\r\n        return this._document;\r\n    }\r\n\r\n    public get code(): string{\r\n        return this._code;\r\n    }\r\n\r\n    public set code(value : string){\r\n\r\n        if(!this.isInsideOfTransaction()){\r\n            throw new Error('Редактировать объект можно только в предварительно открытой транзакции.');\r\n        }\r\n\r\n        if(this.document.application.getCurrentUserId() !== this.lockerId){\r\n            throw new Error('Попытка отредактировать свойство незаблокированного вами объекта.');\r\n        }\r\n        this._code = value;\r\n        (this.document.getCurrentTransaction() as _ITransaction).editedItems.set(this.id,this);\r\n    }\r\n\r\n    public get name(): string{\r\n        return this._name;\r\n    }\r\n\r\n    public set name(value : string){\r\n\r\n        if(!this.isInsideOfTransaction()){\r\n            throw new Error('Редактировать объект можно только в предварительно открытой транзакции.');\r\n        }\r\n\r\n        if(this.document.application.getCurrentUserId() !== this.lockerId){\r\n            throw new Error('Попытка отредактировать свойство незаблокированного вами объекта.');\r\n        }\r\n        this._name = value;\r\n        this.isChanged = true;\r\n        (this.document.getCurrentTransaction() as _ITransaction).editedItems.set(this.id,this);\r\n    }\r\n\r\n    public get autoNum(): boolean{\r\n        return this._autoNum;\r\n    }\r\n\r\n    public set autoNum(value : boolean){\r\n\r\n        if(!this.isInsideOfTransaction()){\r\n            throw new Error('Редактировать объект можно только в предварительно открытой транзакции.');\r\n        }\r\n\r\n        if(this.document.application.getCurrentUserId() !== this.lockerId){\r\n            throw new Error('Попытка отредактировать свойство незаблокированного вами объекта.');\r\n        }\r\n        this._autoNum = value;\r\n        this.isChanged = true;\r\n        (this.document.getCurrentTransaction() as _ITransaction).editedItems.set(this.id,this);\r\n    }\r\n\r\n    public get color(): string{\r\n        return this._color;\r\n    }\r\n\r\n    public set color(value : string){\r\n\r\n        if(!this.isInsideOfTransaction()){\r\n            throw new Error('Редактировать объект можно только в предварительно открытой транзакции.');\r\n        }\r\n\r\n        if(this.document.application.getCurrentUserId() !== this.lockerId){\r\n            throw new Error('Попытка отредактировать свойство незаблокированного вами объекта.');\r\n        }\r\n        this._color = value;\r\n        this.isChanged = true;\r\n        (this.document.getCurrentTransaction() as _ITransaction).editedItems.set(this.id,this);\r\n    }\r\n\r\n    public get isDeletedDirectly(): boolean{\r\n        return this._isDeleted;\r\n    }\r\n\r\n    public set isDeletedDirectly(value: boolean){\r\n\r\n        if(!this.isInsideOfTransaction()){\r\n            throw new Error('Редактировать объект можно только в предварительно открытой транзакции.');\r\n        }\r\n\r\n        if(this.document.application.getCurrentUserId() !== this.lockerId){\r\n            throw new Error('Попытка отредактировать свойство незаблокированного вами объекта.');\r\n        }\r\n        this._isDeleted = value;\r\n        this.isChanged = true;\r\n        (this.document.getCurrentTransaction() as _ITransaction).deletedItems.set(this.id,this);\r\n    }\r\n\r\n    public get lockerId(): UserID{\r\n        return this._lockerId;\r\n    }\r\n\r\n    public set lockerId(value: UserID){\r\n\r\n        if(!this.isInsideOfTransaction()){\r\n            throw new Error('Редактировать объект можно только в предварительно открытой транзакции.');\r\n        }\r\n\r\n        this._lockerId = value;\r\n        this._isChanged = true;\r\n        (this.document.getCurrentTransaction() as _ITransaction).editedItems.set(this.id,this);\r\n    }\r\n\r\n    public get isChanged(): boolean{\r\n        return this._isChanged;\r\n    }\r\n\r\n    public set isChanged(value: boolean){\r\n\r\n        if(!this.isInsideOfTransaction()){\r\n            throw new Error('Редактировать объект можно только в предварительно открытой транзакции.');\r\n        }\r\n\r\n        if(this.document.application.getCurrentUserId() !== this.lockerId){\r\n            throw new Error('Попытка отредактировать свойство незаблокированного вами объекта.');\r\n        }\r\n        this._isChanged = value;\r\n        (this.document.getCurrentTransaction() as _ITransaction).editedItems.set(this.id,this);\r\n    }\r\n\r\n    _setID(value : ID) : void{\r\n        this._id = value;\r\n    }\r\n\r\n    /**\r\n     * Создать полную копию уровня, с тем же самым ID.\r\n     * @returns {ILevel}\r\n     */\r\n    clone() : ILevel{\r\n        let item = this.document.application.factory.createILevel(this.document, this.name,\r\n            this.code, this.color, this.autoNum) as _ILevel;\r\n\r\n        item._setID(this.id);\r\n        item._lockerId = this.lockerId;\r\n\r\n        item._isChanged = this.isChanged;\r\n        item._isDeleted = this.isDeletedDirectly;\r\n        item._prevId = this.prevId;\r\n        item._nextId = this.nextId;\r\n\r\n        return item;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/api/src/ts/classes/Level.ts","\r\nimport {EventEmitter} from \"./EventEmitter\";\r\nimport {ILevelNode} from \"../interfaces/ILevelNode\";\r\nimport {IReference} from \"../interfaces/IReference\";\r\nimport {ILevel} from \"../interfaces/ILevel\";\r\nimport {IDocument} from \"../interfaces/IDocument\";\r\nimport {ILevelEntity} from \"../interfaces/ILevelEntity\";\r\nimport {IConnection} from \"../interfaces/IConnection\";\r\nimport {ICondition} from \"../interfaces/ICondition\";\r\nimport {LevelEntityEventNames} from \"../enums/event_names/LevelEntityEventNames\";\r\nimport {_ILevelNode} from \"../_internal_interfaces/_ILevelNode\";\r\nimport {_IDocumentContext} from \"../_internal_interfaces/_IDocumentContext\";\r\nimport {IResult} from \"../interfaces/IResult\";\r\nimport {TypeNames} from \"../enums/TypeNames\";\r\nimport {TransactionStatus} from \"../enums/TransactionStatus\";\r\nimport {_IReference} from \"../_internal_interfaces/_IReference\";\r\nimport {_ITransaction} from \"../_internal_interfaces/_ITransaction\";\r\n\r\ntype NodeID = string;\r\ntype ConnectionID = string;\r\ntype ID = string;\r\n\r\nexport class LevelNode extends EventEmitter<LevelEntityEventNames> implements _ILevelNode{\r\n\r\n    constructor(doc : IDocument, name: string, code: string){\r\n        super();\r\n        this._document = doc;\r\n        this._typeName = TypeNames.LevelNode;\r\n        this._treeNodeID = null;\r\n        this._code = code;\r\n        this._name = name;\r\n        this._roleID = null;\r\n        this._references = [];\r\n        this._inputConnections = [];\r\n        this._outputConnections = [];\r\n        this._laborCosts = 0;\r\n    }\r\n\r\n    /**\r\n     * Получить все ссылки узла.\r\n     * @returns {Array<IReference>}\r\n     */\r\n    getReferences() : Array<IReference>{\r\n        let arr = [];\r\n        for(let n of this.references){\r\n            let reference = (this.document.getContext() as _IDocumentContext)\r\n                .references.get(n) as _IReference;\r\n            if(!reference.isDeleted()) arr.push(reference);\r\n        }\r\n        return arr;\r\n    }\r\n\r\n    private isInsideOfTransaction() : boolean{\r\n        let transaction = this._document.getCurrentTransaction();\r\n        if(!transaction || transaction.status != TransactionStatus.Started) return false\r\n        else return true;\r\n    }\r\n\r\n    /**\r\n     * Проверка на то, был ли удалён данный объект опосредованно - через удаление одного из его\r\n     * предков.\r\n     * @returns {boolean}\r\n     */\r\n    isDeletedByForefather(){\r\n        let parent = this.getParent() as _ILevelNode;\r\n        let context = this.document.getContext() as _IDocumentContext;\r\n        let treeNode = context.treeNodes.get(parent.nodeId);\r\n        return treeNode.isDeleted();\r\n    }\r\n\r\n    /**\r\n     * Проверка на то, был ли объект удалён каким-либо образом: напрямую, через установку\r\n     * свойства `isDeletedDirectly`, или же опосредованно, через удаление родителя\r\n     * (см. метод `isDeletedByForefather()`).\r\n     * @returns {boolean}\r\n     */\r\n    isDeleted(){\r\n        let context = this.document.getContext() as _IDocumentContext;\r\n        let treeNode = context.treeNodes.get(this.nodeId);\r\n        return treeNode.isDeleted();\r\n    }\r\n\r\n    /**\r\n     * Удалить узел или условие.\r\n     * @returns {IResult} Отчёт о результате выполнения операции.\r\n     */\r\n    delete() : IResult{\r\n\r\n        if(!this.isInsideOfTransaction()){\r\n            throw new Error('Редактировать объект можно только в предварительно открытой транзакции.');\r\n        }\r\n\r\n        let context = this.document.getContext() as _IDocumentContext;\r\n        let treeNode = context.treeNodes.get(this.nodeId);\r\n\r\n        let result = treeNode.delete();\r\n        if(result.success) (this.document.getCurrentTransaction() as _ITransaction).editedItems.set(this.id,this);\r\n\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * Заблокировать узел или условие.\r\n     * @returns {IResult} Отчёт о результате выполнения операции.\r\n     */\r\n    lock() : IResult{\r\n\r\n        if(!this.isInsideOfTransaction()){\r\n            throw new Error('Редактировать объект можно только в предварительно открытой транзакции.');\r\n        }\r\n\r\n        let context = this.document.getContext() as _IDocumentContext;\r\n        let treeNode = context.treeNodes.get(this.nodeId);\r\n\r\n        return treeNode.lock();\r\n    }\r\n\r\n    /**\r\n     * Разблокировать узел или условие.\r\n     * @returns {IResult} Отчёт о результате выполнения операции.\r\n     */\r\n    unlock() : IResult{\r\n\r\n        if(!this.isInsideOfTransaction()){\r\n            throw new Error('Редактировать объект можно только в предварительно открытой транзакции.');\r\n        }\r\n\r\n        let context = this.document.getContext() as _IDocumentContext;\r\n        let treeNode = context.treeNodes.get(this.nodeId);\r\n\r\n        return treeNode.unlock();\r\n    }\r\n\r\n    /**\r\n     * Получить идентификатор пользователя, заблокировавшего данный объект.\r\n     * Объект может быть заблокирован опосредованно, через одного из своих предков.\r\n     * @returns {string}\r\n     */\r\n    getLockerID() : string{\r\n        let context = this.document.getContext() as _IDocumentContext;\r\n        let treeNode = context.treeNodes.get(this.nodeId);\r\n        return treeNode.getLockerID();\r\n    }\r\n\r\n    private _document : IDocument;\r\n    _author: ID;\r\n    _autoSum: boolean;\r\n    _laborCosts: number;\r\n    _description: string;\r\n    _inputConnections: Array<ConnectionID>;\r\n    _outputConnections: Array<ConnectionID>;\r\n\r\n    public get document() : IDocument{\r\n        return this._document;\r\n    }\r\n\r\n    public get authorId() : ID{\r\n        return this._author;\r\n    }\r\n\r\n    public set authorId(value : ID){\r\n        if(!this.isInsideOfTransaction()){\r\n            throw new Error('Редактировать объект можно только в предварительно открытой транзакции.');\r\n        }\r\n        if(this.getLockerID() != this.document.application.getCurrentUserId()){\r\n            throw new Error('Редактировать можно только объекты, предварительно заблокированые вами.');\r\n        }\r\n        this._author = value;\r\n        (this.document.getCurrentTransaction() as _ITransaction).editedItems.set(this.id,this);\r\n    }\r\n\r\n    private _references : Array<ID>;\r\n\r\n    public get references() : Array<ID>{\r\n        return this._references;\r\n    }\r\n\r\n    public set references(value : Array<ID>){\r\n        if(!this.isInsideOfTransaction()){\r\n            throw new Error('Редактировать объект можно только в предварительно открытой транзакции.');\r\n        }\r\n        if(this.getLockerID() != this.document.application.getCurrentUserId()){\r\n            throw new Error('Редактировать можно только объекты, предварительно заблокированые вами.');\r\n        }\r\n        this._references = value;\r\n        (this.document.getCurrentTransaction() as _ITransaction).editedItems.set(this.id,this);\r\n    }\r\n\r\n    public get autoSum() : boolean{\r\n        return this._autoSum;\r\n    }\r\n\r\n    public set autoSum(value : boolean){\r\n\r\n        if(!this.isInsideOfTransaction()){\r\n            throw new Error('Редактировать объект можно только в предварительно открытой транзакции.');\r\n        }\r\n        if(this.getLockerID() != this.document.application.getCurrentUserId()){\r\n            throw new Error('Редактировать можно только объекты, предварительно заблокированые вами.');\r\n        }\r\n\r\n        this._autoSum = value;\r\n        (this.document.getCurrentTransaction() as _ITransaction).editedItems.set(this.id,this);\r\n    }\r\n\r\n    public get laborCosts() : number{\r\n        return this._laborCosts;\r\n    }\r\n\r\n    public set laborCosts(value : number){\r\n        if(!this.isInsideOfTransaction()){\r\n            throw new Error('Редактировать объект можно только в предварительно открытой транзакции.');\r\n        }\r\n        if(this.getLockerID() != this.document.application.getCurrentUserId()){\r\n            throw new Error('Редактировать можно только объекты, предварительно заблокированые вами.');\r\n        }\r\n        this._laborCosts = value;\r\n        (this.document.getCurrentTransaction() as _ITransaction).editedItems.set(this.id,this);\r\n    }\r\n\r\n    public get description() : string{\r\n        return this._description;\r\n    }\r\n\r\n    public set description(value : string){\r\n        if(!this.isInsideOfTransaction()){\r\n            throw new Error('Редактировать объект можно только в предварительно открытой транзакции.');\r\n        }\r\n        if(this.getLockerID() != this.document.application.getCurrentUserId()){\r\n            throw new Error('Редактировать можно только объекты, предварительно заблокированые вами.');\r\n        }\r\n        this._description = value;\r\n        (this.document.getCurrentTransaction() as _ITransaction).editedItems.set(this.id,this);\r\n    }\r\n\r\n    public get inputConnectionIDs() : Array<ConnectionID>{\r\n        return this._inputConnections;\r\n    }\r\n\r\n    public get outputConnectionIDs() : Array<ConnectionID>{\r\n        return this._outputConnections;\r\n    }\r\n\r\n    /**\r\n     * Получить уровень, на котором размещается узел.\r\n     * @returns {ILevel} Возвращается уровень. Если узел был удалён, то возвращается `null`.\r\n     */\r\n    getLevel(): ILevel {\r\n\r\n        let index = 0; // индекс уровня\r\n        let node = (this.document.getContext() as _IDocumentContext).treeNodes.get(this.nodeId);\r\n\r\n        while(node.getParent()){\r\n            ++index;\r\n            node = (this.document.getContext() as _IDocumentContext).treeNodes.get(node.getParent());\r\n        }\r\n\r\n        // теперь выбираем уровень с нужным индексом.\r\n        let level = this.document.getContext().getTopLevel();\r\n\r\n        if(!level) {\r\n            console.log('Верхний уровень не найден.');\r\n            return null;\r\n        }\r\n\r\n        while(index > 0){\r\n            if(!level.nextId) {\r\n                return null;\r\n            }\r\n            else{\r\n                level = (this.document.getContext() as _IDocumentContext).levels.get(level.nextId);\r\n                --index;\r\n            }\r\n        }\r\n        return level;\r\n    }\r\n\r\n    private _typeName: TypeNames;\r\n    _treeNodeID: NodeID;\r\n    _code: string;\r\n    _name: string;\r\n    _roleID: NodeID;\r\n\r\n    /**\r\n     * Наименование типа данного объекта.\r\n     */\r\n    public get typeName(): TypeNames{\r\n        return this._typeName;\r\n    }\r\n\r\n    /**\r\n     * Идентификатор нода в иерархической структуре, содержащего ссылку на данный объект.\r\n     */\r\n    public get nodeId(): NodeID{\r\n        return this._treeNodeID;\r\n    }\r\n\r\n    public set nodeId(id : NodeID){\r\n\r\n        if(!this.isInsideOfTransaction()){\r\n            throw new Error('Редактировать объект можно только в предварительно открытой транзакции.');\r\n        }\r\n\r\n        // Если свойство уже содержит присваиваемое значение, то нет смысла присваивать его повторно.\r\n        if(id && this.nodeId === id) return;\r\n        else if(id){\r\n            const obj = (this.document.getContext() as _IDocumentContext).treeNodes.get(id);\r\n            if(obj){\r\n                if(obj.valueId != this.id) obj.valueId = this.id;\r\n            }\r\n            // Изменяем значение даже если объект не был найден, т.к. если идёт инициализация\r\n            // проекта или общей базы данных, то вполне возможно, что объект к этому моменту\r\n            // ещё не был добавлен, но будет присутствовать к моменту завершения инициализации.\r\n            this._treeNodeID = id;\r\n            (this.document.getCurrentTransaction() as _ITransaction).editedItems.set(this.id,this);\r\n        }\r\n        else{\r\n            this._treeNodeID = null;\r\n            (this.document.getCurrentTransaction() as _ITransaction).editedItems.set(this.id,this);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Код объекта.\r\n     */\r\n    public get code(): string{\r\n        return this._code;\r\n    }\r\n\r\n    public set code(value : string){\r\n\r\n        if(!this.isInsideOfTransaction()){\r\n            throw new Error('Редактировать объект можно только в предварительно открытой транзакции.');\r\n        }\r\n        if(this.getLockerID() != this.document.application.getCurrentUserId()){\r\n            throw new Error('Редактировать можно только объекты, предварительно заблокированые вами.');\r\n        }\r\n\r\n        this._code = value;\r\n        (this.document.getCurrentTransaction() as _ITransaction).editedItems.set(this.id,this);\r\n    }\r\n\r\n    /**\r\n     * Наименование объекта.\r\n     */\r\n    public get name(): string{\r\n        return this._name;\r\n    }\r\n\r\n    public set name(value : string){\r\n        if(!this.isInsideOfTransaction()){\r\n            throw new Error('Редактировать объект можно только в предварительно открытой транзакции.');\r\n        }\r\n        if(this.getLockerID() != this.document.application.getCurrentUserId()){\r\n            throw new Error('Редактировать можно только объекты, предварительно заблокированые вами.');\r\n        }\r\n        this._name = value;\r\n        (this.document.getCurrentTransaction() as _ITransaction).editedItems.set(this.id,this);\r\n    }\r\n\r\n    /**\r\n     * Идентификатор роли, связанной в данным объектом.\r\n     */\r\n    public get roleId(): NodeID{\r\n        return this._roleID;\r\n    }\r\n\r\n    public set roleId(id : NodeID){\r\n        if(!this.isInsideOfTransaction()){\r\n            throw new Error('Редактировать объект можно только в предварительно открытой транзакции.');\r\n        }\r\n        if(this.getLockerID() != this.document.application.getCurrentUserId()){\r\n            throw new Error('Редактировать можно только объекты, предварительно заблокированые вами.');\r\n        }\r\n        this._roleID = id;\r\n        (this.document.getCurrentTransaction() as _ITransaction).editedItems.set(this.id,this);\r\n    }\r\n\r\n    /**\r\n     * Получить дочерние узлы, лежащие на один уровень ниже данного узла.\r\n     * @returns {Array<ILevelNode>}\r\n     */\r\n    getChildrenNodes() : Array<ILevelNode>{\r\n        let arr = [];\r\n\r\n        let node = (this.document.getContext() as _IDocumentContext).treeNodes.get(this.nodeId);\r\n\r\n        for(let n of node.childrenIDs){\r\n            let _node = (this.document.getContext() as _IDocumentContext).treeNodes.get(n);\r\n            if(!_node.isDeletedDirectly) {\r\n                let item = (this.document.getContext() as _IDocumentContext).levelEntities.get(_node.valueId);\r\n                if(item.typeName === TypeNames.LevelNode) arr.push(item as ILevelNode);\r\n            }\r\n        }\r\n        return arr;\r\n    }\r\n\r\n    /**\r\n     * Получить дочерние условия, лежащие на один уровень ниже данного узла.\r\n     * @returns {Array<ILevelEntity>}\r\n     */\r\n    getChildrenConditions() : Array<ICondition>{\r\n        let arr = [];\r\n\r\n        let node = (this.document.getContext() as _IDocumentContext).treeNodes.get(this.nodeId);\r\n\r\n        for(let n of node.childrenIDs){\r\n            let _node = (this.document.getContext() as _IDocumentContext).treeNodes.get(n);\r\n            if(!_node.isDeletedDirectly) {\r\n                let item = (this.document.getContext() as _IDocumentContext).levelEntities.get(_node.valueId);\r\n                if(item.typeName === TypeNames.Condition) arr.push(item as ICondition);\r\n            }\r\n        }\r\n        return arr;\r\n    }\r\n\r\n    /**\r\n     * Получить объекты входящих подключений.\r\n     * @returns {Array<IConnection>}\r\n     */\r\n    getInputConnections() : Array<IConnection>{\r\n        let arr = [];\r\n        for(let n of this.inputConnectionIDs){\r\n            let connection = (this.document.getContext() as _IDocumentContext).connections.get(n);\r\n            if(!connection.isDeletedDirectly) arr.push(connection);\r\n        }\r\n        return arr;\r\n    }\r\n\r\n    /**\r\n     * Получить объекты исходящих подключений.\r\n     * @returns {Array<IConnection>}\r\n     */\r\n    getOutputConnections() : Array<IConnection>{\r\n        let arr = [];\r\n        for(let n of this.outputConnectionIDs){\r\n            let connection =(this.document.getContext() as _IDocumentContext).connections.get(n);\r\n            if(!connection.isDeletedDirectly) arr.push(connection);\r\n        }\r\n        return arr;\r\n    }\r\n\r\n    /**\r\n     * Получить родительский узел, находящийся на одном уровне выше.\r\n     * @returns {ILevelEntity}\r\n     */\r\n    getParent() : ILevelNode{\r\n        let node = (this.document.getContext() as _IDocumentContext).treeNodes.get(this.nodeId);\r\n        let parentId = node.getParent();\r\n\r\n        if(parentId){\r\n            let _node = (this.document.getContext() as _IDocumentContext).treeNodes.get(parentId);\r\n            return (this.document.getContext() as _IDocumentContext).levelEntities.get(\r\n                _node.valueId) as ILevelNode;\r\n        }\r\n        else{\r\n            return null;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Проверка на то, может ли нод содержать дочерние ноды. Это определяется\r\n     * структурой уровней: если для дочерних объектов предоставлен уровень, то\r\n     * их можно создавать для данного нода.\r\n     * @returns {boolean}\r\n     */\r\n    canHaveChildren() : boolean{\r\n        return (this.document.getContext() as _IDocumentContext)\r\n            .treeNodes.get(this.nodeId).canHaveChildren();\r\n    }\r\n\r\n    /**\r\n     * Создать полную копию узла с тем же самым ID.\r\n     * @returns {ILevelNode}\r\n     */\r\n    clone() : ILevelNode{\r\n\r\n        let item = this.document.application.factory.createILevelNode(\r\n            this.document, this.name, this.code) as _ILevelNode;\r\n\r\n        item._setID(this.id);\r\n        item._treeNodeID = this.nodeId;\r\n        item._roleID = this.roleId;\r\n        item._author = this.authorId;\r\n        item._autoSum = this.autoSum;\r\n        item._laborCosts = this.laborCosts;\r\n        item._description = this.description;\r\n\r\n        for (let n of this.references){\r\n            item.references.push(n);\r\n        }\r\n\r\n        for (let n of this.inputConnectionIDs){\r\n            item.inputConnectionIDs.push(n);\r\n        }\r\n\r\n        for (let n of this.outputConnectionIDs){\r\n            item.outputConnectionIDs.push(n);\r\n        }\r\n\r\n        return item;\r\n    }\r\n\r\n    _setID(value: ID) : void{\r\n        this._id = value;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/api/src/ts/classes/LevelNode.ts","\r\nimport {EventEmitter} from \"./EventEmitter\";\r\nimport {IReference} from \"../interfaces/IReference\";\r\nimport {IDocument} from \"../interfaces/IDocument\";\r\nimport {ReferenceEventNames} from \"../enums/event_names/ReferenceEventNames\";\r\nimport {ILevelNode} from \"../interfaces/ILevelNode\";\r\nimport {TypeNames} from \"../enums/TypeNames\";\r\nimport {TransactionStatus} from \"../enums/TransactionStatus\";\r\nimport {_IReference} from \"../_internal_interfaces/_IReference\";\r\nimport {_IDocumentContext} from \"../_internal_interfaces/_IDocumentContext\";\r\nimport {_ITransaction} from \"../_internal_interfaces/_ITransaction\";\r\n\r\ntype ID = string;\r\n/**\r\n * Ссылка на web-страничку.\r\n */\r\nexport class Reference extends EventEmitter<ReferenceEventNames> implements _IReference{\r\n\r\n    private isInsideOfTransaction() : boolean{\r\n        let transaction = this.document.getCurrentTransaction();\r\n        if(!transaction || transaction.status != TransactionStatus.Started) return false\r\n        else return true;\r\n    }\r\n\r\n    /**\r\n     * Конструктор класса.\r\n     * @param {ILevelNode} levelNode Идентификатор узла, в составе которого определена ссылка.\r\n     * @param {string} text Наименование ссылки (для отображения пользователю).\r\n     * @param {string} path URL-адрес ссылки.\r\n     * @param {string} tooltip Текст всплывающей подсказки.\r\n     * @param {string} iconName Наименование иконки, используемой для ссылки.\r\n     */\r\n    constructor(levelNode : ILevelNode, text: string, path : string, tooltip : string, iconName : string){\r\n        super();\r\n        this._levelNodeID = levelNode.id;\r\n        this._document = levelNode.document;\r\n        this._text = text;\r\n        this._path = path;\r\n        this._tooltip = tooltip;\r\n        this._iconName = iconName;\r\n        this._typeName = TypeNames.Reference;\r\n    }\r\n\r\n    /**\r\n     * Проверка на то, был ли удалён данный объект опосредованно - через удаление одного из его\r\n     * предков.\r\n     * @returns {boolean}\r\n     */\r\n    isDeletedByForefather() : boolean{\r\n        return (this._document.getContext() as _IDocumentContext).levelEntities\r\n            .get(this.levelNodeID).isDeleted();\r\n    }\r\n\r\n    /**\r\n     * Проверка на то, был ли объект удалён каким-либо образом: напрямую, через установку\r\n     * свойства `isDeletedDirectly`, или же опосредованно, через удаление родителя\r\n     * (см. метод `isDeletedByForefather()`).\r\n     * @returns {boolean}\r\n     */\r\n    isDeleted() : boolean{\r\n        return this.isDeletedDirectly || this.isDeletedByForefather();\r\n    }\r\n\r\n    private _document : IDocument;\r\n    _levelNodeID : ID;\r\n\r\n    public get document() : IDocument{\r\n        return this._document;\r\n    }\r\n\r\n    /**\r\n     * Документ (технология), в составе которого определена ссылка.\r\n     * @returns {IDocument}\r\n     */\r\n    public get levelNodeID() : ID{\r\n        return this._levelNodeID;\r\n    }\r\n\r\n    _lockerId: string;\r\n    _isChanged: boolean;\r\n    _isDeleted: boolean;\r\n\r\n    _tooltip: string;\r\n    _path: string;\r\n    _text: string;\r\n    _iconName: string;\r\n    _typeName: TypeNames;\r\n\r\n    /**\r\n     * Идентификатор пользователя, заблокировавшего ссылку.\r\n     * @returns {string}\r\n     */\r\n    public get lockerId(): string{\r\n        return this._lockerId;\r\n    }\r\n\r\n    public set lockerId(value : string){\r\n        if(!this.isInsideOfTransaction()){\r\n            throw new Error('Редактировать объект можно только в предварительно открытой транзакции.');\r\n        }\r\n        this._lockerId = value;\r\n        (this.document.getCurrentTransaction() as _ITransaction).editedItems.set(this.id,this);\r\n    }\r\n\r\n    /**\r\n     * Метка о том, была ли ссылка изменена вами.\r\n     * @returns {boolean}\r\n     */\r\n    public get isChanged(): boolean{\r\n        return this._isChanged;\r\n    }\r\n\r\n    public set isChanged(value: boolean){\r\n        if(!this.isInsideOfTransaction()){\r\n            throw new Error('Редактировать объект можно только в предварительно открытой транзакции.');\r\n        }\r\n        this._isChanged = value;\r\n        (this.document.getCurrentTransaction() as _ITransaction).editedItems.set(this.id,this);\r\n    }\r\n\r\n    /**\r\n     * Метка о том, была ли ссылка удалена вами.\r\n     * @returns {boolean}\r\n     */\r\n    public get isDeletedDirectly(): boolean{\r\n        return this._isDeleted;\r\n    }\r\n\r\n    public set isDeletedDirectly(value: boolean){\r\n        if(!this.isInsideOfTransaction()){\r\n            throw new Error('Редактировать объект можно только в предварительно открытой транзакции.');\r\n        }\r\n        this._isDeleted = value;\r\n        (this.document.getCurrentTransaction() as _ITransaction).editedItems.set(this.id,this);\r\n        if(this._isDeleted) (this.document.getCurrentTransaction() as _ITransaction).deletedItems.set(this.id,this);\r\n    }\r\n\r\n    /**\r\n     * Всплывающая подсказка для ссылки.\r\n     * @returns {string}\r\n     */\r\n    public get tooltip() : string{\r\n        return this.tooltip;\r\n    }\r\n\r\n    public set tooltip(value : string){\r\n        if(!this.isInsideOfTransaction()){\r\n            throw new Error('Редактировать объект можно только в предварительно открытой транзакции.');\r\n        }\r\n        this.tooltip = value;\r\n        (this.document.getCurrentTransaction() as _ITransaction).editedItems.set(this.id,this);\r\n    }\r\n\r\n    /**\r\n     * URL-адрес ссылки.\r\n     * @returns {string}\r\n     */\r\n    public get path() : string{\r\n        return this._path;\r\n    }\r\n\r\n    public set path(value : string){\r\n        if(!this.isInsideOfTransaction()){\r\n            throw new Error('Редактировать объект можно только в предварительно открытой транзакции.');\r\n        }\r\n        this._path = value;\r\n        (this.document.getCurrentTransaction() as _ITransaction).editedItems.set(this.id,this);\r\n    }\r\n\r\n    /**\r\n     * Наименование ссылки (для отображения пользователю).\r\n     * @returns {string}\r\n     */\r\n    public get text() : string{\r\n        return this._text;\r\n    }\r\n\r\n    public set text(value : string){\r\n        if(!this.isInsideOfTransaction()){\r\n            throw new Error('Редактировать объект можно только в предварительно открытой транзакции.');\r\n        }\r\n        this._text = value;\r\n        (this.document.getCurrentTransaction() as _ITransaction).editedItems.set(this.id,this);\r\n    }\r\n\r\n    /**\r\n     * Наименование иконки, отображаемой для ссылки.\r\n     * @returns {string}\r\n     */\r\n    public get iconName() : string{\r\n        return this._iconName;\r\n    }\r\n\r\n    public set iconName(value : string){\r\n        if(!this.isInsideOfTransaction()){\r\n            throw new Error('Редактировать объект можно только в предварительно открытой транзакции.');\r\n        }\r\n        this._iconName = value;\r\n        (this.document.getCurrentTransaction() as _ITransaction).editedItems.set(this.id,this);\r\n    }\r\n\r\n    public get typeName() : TypeNames{\r\n        return this._typeName;\r\n    }\r\n\r\n    _setID(value : ID) : void{\r\n        this._id = value;\r\n    }\r\n\r\n    clone(owner : ILevelNode) : IReference{\r\n        let item = this._document.application.factory.createIReference(\r\n            owner,this._text, this._path,this._tooltip,\r\n            this._iconName) as _IReference;\r\n        item._setID(this.id);\r\n        item._lockerId = this._lockerId;\r\n        item._isChanged = this._isChanged;\r\n        item._isDeleted = this.isDeletedDirectly;\r\n\r\n        return item;\r\n    }\r\n\r\n    getlevelNode() : ILevelNode{\r\n        return (this.document.getContext() as _IDocumentContext).levelEntities\r\n            .get(this.levelNodeID) as ILevelNode;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/api/src/ts/classes/Reference.ts","\r\nimport {IResourceManager} from \"../interfaces/IResourceManager\";\r\nimport  {IResult} from \"../interfaces/IResult\";\r\nimport {EventEmitter} from \"./EventEmitter\";\r\nimport {IApplication} from \"../interfaces/IApplication\";\r\nimport {ResourceManagerEventNames} from \"../enums/event_names/ResourceManagerEventNames\";\r\n\r\n/**\r\n * Менеджер локализованных ресурсов. Он позволяет добавлять и удалять локализации, а\r\n * так же сохранять в них локализованные текстовые сообщения, используемые в программе. Менеджер\r\n * так же следит за тем, чтовы во всех локализациях был одинаковый набор ключей.\r\n */\r\nexport class ResourceManager extends EventEmitter<ResourceManagerEventNames> implements IResourceManager{\r\n\r\n    /**\r\n     * Конструктор класса.\r\n     * @param {IApplication} app Приложение, в составе которого используется менеджер ресурсов.\r\n     * @param {string} localizationName Имя локализации, используемой по умолчанию. Эта же локализация\r\n     * будет установлена и в качестве текущей.\r\n     */\r\n    constructor(app : IApplication, localizationName : string){\r\n\r\n        super();\r\n        this._application = app;\r\n\r\n        localizationName = localizationName.toUpperCase();\r\n\r\n        // Словарь локализаций. Ключ - имя локализации, значение - словарь локализованных записей.\r\n        this._localizedMaps = new Map<string, Map<string, string>>();\r\n        this._localizedMaps.set(localizationName, new Map<string, string>());\r\n\r\n        this.defaultLocalizationName = localizationName;\r\n        this.currentLocalizationName = localizationName;\r\n\r\n        this.addRecord('COMMAND-NOT-FOUND', \"Команда '{0}' не найдена.\",\r\n            \"Command '{0}' not found.\");\r\n    }\r\n\r\n    /**\r\n     * Упрощённое форматирование строк: заменить все числовые значения, вида `{число}` в строке,\r\n     * указанной в параметре `format`, на строки с соответствующим индексом, перечисленные в\r\n     * параметре `args`.\r\n     * @param {string} format Строка форматирования.\r\n     * @param {any[]} args Параметры, используемые в процессе форматирования.\r\n     * @returns {string} Возвращается отформатированное значение.\r\n     */\r\n    public printf(format : string, ...args : any[]) : string{\r\n\r\n        if(!format) return null;\r\n\r\n        return format.replace(/{(\\d+)}/g, function(match, number) {\r\n            return typeof args[number] != 'undefined' ? (null == args[number] ? 'null' : args[number].toString()) : match;\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Получить отформатированное значение локализованного ресурса.\r\n     * @param {string} key Ключ локализованного ресурса.\r\n     * @param {any[]} args Параметры, участвующие в процессе форматирования.\r\n     * @returns {string} Возвращается результат форматирования.\r\n     */\r\n    public getValue(key : string, ...args : any[]) : string{\r\n        const format = this._getValue(key);\r\n        return this.printf(format, ...args);\r\n    }\r\n\r\n    /**\r\n     * Для указанной локализации получить отформатированное значение локализованного\r\n     * ресурса.\r\n     * @param {string} localization Локализация, для которой следует получить значение.\r\n     * @param {string} key Ключ локализованного ресурса.\r\n     * @param {any[]} args Параметры, участвующие в процессе форматирования.\r\n     * @returns {string} Возвращается результат форматирования.\r\n     */\r\n    getValue2(localization : string, key : string, ...args : any[]) : string{\r\n        const format = this._getValue2(localization, key);\r\n        return this.printf(format, ...args);\r\n    }\r\n\r\n    /**\r\n     * Проверка наличия локализации с указанным именем.\r\n     * @param {string} key Наименование искомой локализации.\r\n     * @returns {boolean}\r\n     */\r\n    public hasLocalization(key : string) : boolean{\r\n\r\n        return (!key || !key.trim() || !this._localizedMaps.has(key.toUpperCase())) ? false : true;\r\n    }\r\n\r\n    private _application : IApplication;\r\n\r\n    /**\r\n     * Приложение, в составе которого используется данный менеджер ресурсов.\r\n     */\r\n    public get application() : IApplication{\r\n        return this._application;\r\n    }\r\n\r\n    private _defaultLocalizationName : string;\r\n    private _currentLocalizationName : string;\r\n    private _localizedMaps : Map<string, Map<string, string>>;\r\n\r\n    public get defaultLocalizationName() : string{\r\n        return this._defaultLocalizationName;\r\n    }\r\n\r\n    /**\r\n     * Имя локализации, используемой по умолчанию. Эта локализация будет использоваться командой\r\n     * `addLocalization()` если его параметру `sourceId` в качестве значения будет передан `null`.\r\n     * @param {string} value Новое значение будет присвоено только в том случае,\r\n     * если указанное имя было предварительно зарегистрировано. В противном случае\r\n     * будет сгенерировано исключение\r\n     */\r\n    public set defaultLocalizationName(value : string){\r\n\r\n        if(value && value.trim() && this._localizedMaps.has(value.toUpperCase())){\r\n            this._defaultLocalizationName = value.toUpperCase();\r\n        }\r\n        else{\r\n            throw new Error(\"Незарегистрированное имя локализации: '\" + value + \"'\");\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Имя локализации, используемой на данный момент времени.\r\n     * @returns {string}\r\n     */\r\n    public get currentLocalizationName() : string{\r\n        return this._currentLocalizationName;\r\n    }\r\n\r\n    /**\r\n     * Новое значение будет присвоено только в том случае, если указанное имя было\r\n     * предварительно зарегистрировано. В противном случае будет сгенерировано исключение.\r\n     * @param {string} value\r\n     */\r\n    public set currentLocalizationName(value : string){\r\n\r\n        if(value && value.trim() && this._localizedMaps.has(value.toUpperCase())){\r\n            this._currentLocalizationName = value.toUpperCase();\r\n        }\r\n        else{\r\n            throw new Error(\"Незарегистрированное имя локализации: '\" + value + \"'\");\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Зарегистрировать новую локализацию. При этом в новую локализацию будут скопированы все\r\n     * локализованные записи из локализации, указанной в параметре `sourceId`. Если в `sourceId`\r\n     * в качестве значения был указан `null`, то записи будут копироваться из локализации,\r\n     * используемой по умолчанию.\r\n     *\r\n     * **ВНИМАНИЕ!** *Затем вам нужно будет не забыть **локализовать** записи зарегистрированной\r\n     * вами новой локализации.*\r\n     *\r\n     * Если в качестве значения параметра `sourceId` будет передано ранее незагеристрированное\r\n     * имя локализации, то операция будет отклонена.\r\n     *\r\n     * @param {string} name Имя новой локализации. Если в качестве имени новой локализации\r\n     * указано уже зарегистрированное имя, то операция будет отклонена.\r\n     * @param {string} source Имя заранее зарегистрированой локализации, взятой за основу для\r\n     * создания новой.\r\n     * @returns {IResult} Отчёт об успешности проделанной операции.\r\n     */\r\n    addLocalization(name: string, source: string = null): IResult {\r\n\r\n        if(!name || !name.trim()){\r\n            const result = this._application.factory.createIResult(false,\r\n                `addLocalization: Указано недопустимое имя локализации.`);\r\n            return result;\r\n        }\r\n\r\n        name = name.toUpperCase();\r\n\r\n        if(this._localizedMaps.has(name)){\r\n            const result = this._application.factory.createIResult(false,\r\n                `Локализация с именем '${name}' уже зарегистрирована.`);\r\n            return result;\r\n        }\r\n\r\n        if(source && !this._localizedMaps.has(source.toUpperCase())){\r\n            const result = this._application.factory.createIResult(false,\r\n                `Локализация с именем '${name}' не найдена среди ранее зарегистрированных.`);\r\n            return result;\r\n        }\r\n\r\n        let sourceName : string;\r\n\r\n        if(!source){\r\n            sourceName = this.defaultLocalizationName;\r\n        }\r\n        else{\r\n            sourceName = source;\r\n        }\r\n\r\n        let map = new Map<string, string>();\r\n        sourceName = sourceName.toUpperCase();\r\n\r\n        for(let n of this._localizedMaps.get(sourceName)){\r\n            map.set(n[0], n[1]);\r\n        }\r\n\r\n        this._localizedMaps.set(name, map);\r\n\r\n        const result = this._application.factory.createIResult(true, '');\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * Удалить локализацию. Попытка удалить локализацию, используемую по умолчанию,\r\n     * будет отклонена. Так же будет отклонена попытка удалить текущую локализацию.\r\n     * @param {string} name Имя удаляемой локализации.\r\n     * @returns {IResult}\r\n     */\r\n    deleteLocalization(name: string): IResult {\r\n\r\n        if(!name || !name.trim()){\r\n            const result = this._application.factory.createIResult(false,\r\n                `deleteLocalization: Указано недопустимое имя локализации.`);\r\n            return result;\r\n        }\r\n\r\n        name = name.toUpperCase();\r\n\r\n        if(this.defaultLocalizationName === name){\r\n            const result = this._application.factory.createIResult(false,\r\n                'Отклонена попытка удаления локализации, используемой по умолчанию.');\r\n            return result;\r\n        }\r\n        else if(this.currentLocalizationName === name){\r\n            const result = this._application.factory.createIResult(false,\r\n                'Отклонена попытка удаления текущей локализации.');\r\n            return result;\r\n        }\r\n        else if(!this._localizedMaps.has(name)) {\r\n            const result = this._application.factory.createIResult(false,\r\n                `Локализация с именем '${name}' не зарегистрирована.`);\r\n            return result;\r\n        }\r\n        else{\r\n            this._localizedMaps.delete(name);\r\n            const result = this._application.factory.createIResult(true, '');\r\n            return result;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Количество зарегистрированных локализаций.\r\n     * @returns {number}\r\n     */\r\n    public getLocalizationsCount() : number{\r\n        return this._localizedMaps.size;\r\n    }\r\n\r\n\r\n    /**\r\n     * Получить имена зарегистрированных локализаций.\r\n     * @returns {IterableIterator<string>}\r\n     */\r\n    getLocalizationNames(): IterableIterator<string> {\r\n        return this._localizedMaps.keys();\r\n    }\r\n\r\n    /**\r\n     * Проверить в текущей локализации наличие записи с указанным ключом.\r\n     * @param {string} key Ключ искомой записи.\r\n     * @returns {boolean}\r\n     */\r\n    hasKey(key: string): boolean {\r\n        if(!key || !key.trim()) return false;\r\n        return this._localizedMaps.get(this.currentLocalizationName).has(key.toUpperCase());\r\n    }\r\n\r\n    /**\r\n     * Добавить локализованную запись.\r\n     * @param {string} key Ключ новой записи.\r\n     * @param {string} localizedValue Текстовое значение, которое должно быть\r\n     * сохранено для текущей локализации.\r\n     * @param {string} defaultValue Текстовое значение, которое должно быть\r\n     * сохранено для всех локализаций кроме текущей.\r\n     * @returns {IResult}\r\n     */\r\n    addRecord(key: string, localizedValue: string, defaultValue: string): IResult {\r\n\r\n        if(!key || !key.trim()){\r\n            const result = this._application.factory.createIResult(false,\r\n                'addRecord: Новая запись имеет недопустимый ключ.');\r\n            return result;\r\n        }\r\n\r\n        if(!localizedValue || !localizedValue.trim() || !defaultValue || !defaultValue.trim()){\r\n            const result = this._application.factory.createIResult(false,\r\n                'addRecord: Запрещено использовать `null` и `undefined` в качестве значений.');\r\n            return result;\r\n        }\r\n\r\n        key = key.toUpperCase();\r\n\r\n        if(this.hasKey(key)){\r\n            const result = this._application.factory.createIResult(false,\r\n                `Запись с ключом '${key}' уже существует в локализованных ресурсах.`);\r\n            return result;\r\n        }\r\n        else{\r\n            for(let lang of this.getLocalizationNames()){\r\n                const map : Map<string, string> = this._localizedMaps.get(lang);\r\n                const text = this.currentLocalizationName === lang ? localizedValue : defaultValue;\r\n                map.set(key.toUpperCase(), text);\r\n            }\r\n            const result = this._application.factory.createIResult(true, '');\r\n            return result;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Удалить во всех локализациях запись с указанным ключом.\r\n     * @param {string} key Ключ записей, подлежащих удалению во всех локализациях.\r\n     * @returns {IResult}\r\n     */\r\n    deleteRecord(key: string): IResult {\r\n\r\n        if(!key || !key.trim()){\r\n            const result = this._application.factory.createIResult(false,\r\n                'deleteRecord: Указан недопустимый ключ записи.');\r\n            return result;\r\n        }\r\n\r\n        key = key.toUpperCase();\r\n\r\n        if(!this.hasKey(key)){\r\n            const result = this._application.factory.createIResult(false,\r\n                `Запись с ключом '${key}' не найдена в ресурсах текущей локализации.`);\r\n            return result;\r\n        }\r\n        else{\r\n            key = key.toUpperCase();\r\n            for(let lang of this.getLocalizationNames()){\r\n                const map : Map<string, string> = this._localizedMaps.get(lang);\r\n                if(map.has(key)) map.delete(key);\r\n            }\r\n            const result = this._application.factory.createIResult(true, '');\r\n            return result;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Назначить новое значение для уже существующей записи.\r\n     * @param {string} localization Локализация, для которой требуется отредактировать значение.\r\n     * @param {string} key Ключ записи, подлежащей редактированию.\r\n     * @param {string} value Новое значение записи.\r\n     * @returns {IResult} Возвращается отчёт о проделанной операции.\r\n     */\r\n    editValue(localization: string, key: string, value: string): IResult {\r\n\r\n        if(!key || !key.trim()){\r\n            const result = this._application.factory.createIResult(false,\r\n                'editValue: Указан недопустимый ключ записи.');\r\n            return result;\r\n        }\r\n\r\n        if(!value){\r\n            const result = this._application.factory.createIResult(false,\r\n                'editValue: Значение не должно быть `null` или `undefined`.');\r\n            return result;\r\n        }\r\n\r\n        key = key.toUpperCase();\r\n\r\n        if(!this.hasLocalization(localization)){\r\n            const result = this._application.factory.createIResult(false,\r\n                `Локализация '${localization}' не найдена.`);\r\n            return result;\r\n        }\r\n        if(!this.hasKey(key)){\r\n            const result = this._application.factory.createIResult(false,\r\n                `Запись с ключом '${key}' не найдена в ресурсах текущей локализации.`);\r\n            return result;\r\n        }\r\n        else{\r\n            localization = localization.toUpperCase();\r\n            key = key.toUpperCase();\r\n            const map : Map<string, string> = this._localizedMaps.get(localization);\r\n            if(map.has(key)) map.set(key, value);\r\n\r\n            const result = this._application.factory.createIResult(true, '');\r\n            return result;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Получить ресурс текущей локализации по его ключу.\r\n     * @param {string} key Ключ локализованного ресурса.\r\n     * @returns {string}\r\n     */\r\n    private _getValue(key: string): string {\r\n\r\n        if(!key || !key.trim()) return null;\r\n\r\n        key = key.toUpperCase();\r\n\r\n        const map = this._localizedMaps.get(this.currentLocalizationName);\r\n        if(map.has(key)){\r\n            return map.get(key);\r\n        }\r\n        else{\r\n            return null;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Для указанной локализации получить значение по ключу. Если указанная локализация\r\n     * не зарегистрирована или запрашиваемый ключ не существует, то будет возвращён `null`.\r\n     * @param {string} localization Локализация, для которой следует получить значение.\r\n     * @param {string} key Ключ запрашиваемой записи.\r\n     * @returns {string}\r\n     */\r\n    private _getValue2(localization : string, key : string) : string{\r\n\r\n        if(!localization || !localization.trim()) return null;\r\n\r\n        localization = localization.toUpperCase();\r\n\r\n        if(!key || !key.trim()) return null;\r\n\r\n        key = key.toUpperCase();\r\n\r\n        if(!this._localizedMaps.has(localization) || !this._localizedMaps.get(localization).has(key)){\r\n            return null;\r\n        }\r\n        else{\r\n            return this._localizedMaps.get(localization).get(key);\r\n        }\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/api/src/ts/classes/ResourceManager.ts","\r\nimport  {IResult} from \"../interfaces/IResult\";\r\n\r\n/**\r\n * Отчёт о выполнении операции.\r\n */\r\nexport class Result implements IResult{\r\n\r\n    private  _success: boolean;\r\n    private  _errorMessage: string;\r\n\r\n    /**\r\n     * Конструктор класса\r\n     * @param {boolean} Метка об успешности операции.\r\n     * @param {string} Сообщение об ошибке (используется в случае отказа).\r\n     */\r\n    constructor(success : boolean, errorMessage : string){\r\n        this._success = success;\r\n        this._errorMessage = errorMessage;\r\n    }\r\n\r\n    /**\r\n     * Если это свойство равно `true`, значит операция выполнена успешно. В этом случае\r\n     * значение свойства `errorMessage` должно быть пустой строкой. Если же значение\r\n     * свойства `success` равно `false`, то это означает, что операция не выполнена. В\r\n     * этом случае в свойстве `errorMessage` должно находится описание причины отказа.\r\n     */\r\n    public get success() : boolean{\r\n        return this._success;\r\n    }\r\n\r\n    /**\r\n     * Если запрошенная операция не была выполнена, то в данном свойстве должно находится\r\n     * описание причины отказа. Если же операция выполнена успешно, то данное свойство\r\n     * должно содержать пустую строку.\r\n     */\r\n    public get errorMessage() : string{\r\n        return this._errorMessage;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/api/src/ts/classes/Result.ts","\r\nimport {TransactionStatus} from \"../enums/TransactionStatus\";\r\nimport {EventEmitter} from \"./EventEmitter\";\r\nimport {IDocument} from \"../interfaces/IDocument\";\r\nimport {TransactionEventNames} from \"../enums/event_names/TransactionEventNames\";\r\nimport {_IDocument} from \"../_internal_interfaces/_IDocument\";\r\nimport {_ITransaction} from \"../_internal_interfaces/_ITransaction\";\r\n\r\ntype ID = string;\r\n\r\n/**\r\n * Транзакция. Транзакция позволяет выполнять над документом\r\n * произвольный набор действий с тем, чтобы иметь возможность\r\n * в любой момент выполнить полный откат этих изменений обратно.\r\n *\r\n * Работать с документом можно и без транзакций, т.к. каждая команда (`ICommand`) имеет\r\n * методы `undo()` и `redo()`, позволяющие отменять изменения, и снова восстанавливать их.\r\n * Однако, в том случае, если в процессе работы команды возникнет непредвиденная ошибка, в\r\n * виду которой команда будет выполнена не до конца, то\r\n * `undo()` и `redo()` могут не справиться с проблемой, т.к. они не знают о том, какие из\r\n * данных были успешно изменены, а какие - нет (в виду возникновения ошибки). Транзакции позволяют\r\n * избежать подобных ситуаций, однако их использование накладывает некоторые дополнительные\r\n * издержки (в плане производительности), т.к. на время своей работы каждая транзакция, при старте,\r\n * создаёт полную копию данных документа (так называемый *контекст*, представленный в виде\r\n * объекта `IDocumentContext`).\r\n *\r\n * Транзакции следует создавать при помощи метода `IDocument.createTransaction()`.\r\n *\r\n * **Открытые транзакции обязательно должны закрываться!** *Если транзакция\r\n * не будет закрыта, то все изменения, выполненные в рамках этой транзакции,\r\n * а так же в рамках всех вложенных транзакций, не будут применены к базе\r\n * данных документа.*\r\n *\r\n * Транзакции могут быть вложенными. Вложенность транзакций\r\n * определяется порядком их открытия и закрытия:\r\n *\r\n * Если была создана транзакция `A` и для неё был вызван метод `A.start()`,\r\n * после чего была создана транзакция `B` и для неё был вызван метод `B.start()`,\r\n * то транзакция `B` является вложенной по отношению к транзакции `A`.\r\n *\r\n * Транзакции должны закрываться *обязательно* в порядке противоположном\r\n * тому, в котором они открывались - в противном случае будет генерироваться\r\n * исключение.\r\n *\r\n * Если была создана транзакция `A` после чего была создана транзакция `B`,\r\n * а затем были вызваны методы `A.start()`, и `B.start()`, то\r\n * транзакция `B` является вложенной по отношению к транзакции `A`.\r\n *\r\n * Если была создана транзакция `A` после чего была создана транзакция `B`,\r\n * а затем были вызваны методы `B.start()`, и `A.start()`, то\r\n * транзакция `A` является вложенной по отношению к транзакции `B`.\r\n *\r\n * Если была создана транзакция `A`, затем вызваны методы `A.start()`, и\r\n * `A.commit()` (или `A.rollback()`), то все последующие стартуемые транзакции\r\n * не будут являться вложенными по отношению к транзакции `A`.\r\n */\r\nexport class Transaction extends EventEmitter<TransactionEventNames> implements _ITransaction{\r\n\r\n    /**\r\n     * Конструктор класса.\r\n     * @param {IDocument} docStage Документ, владеющий данной транзакцией.\r\n     */\r\n    constructor(doc : IDocument){\r\n\r\n        super();\r\n        this._document = doc;\r\n        this._status = TransactionStatus.Created;\r\n\r\n        this.addedItems = new Map<ID,any>();\r\n        this.editedItems = new Map<ID,any>();\r\n        this.deletedItems = new Map<ID,any>();\r\n    }\r\n\r\n    addedItems : Map<ID,ID>;\r\n    editedItems : Map<ID,ID>;\r\n    deletedItems : Map<ID,ID>;\r\n\r\n    private _document : IDocument;\r\n\r\n    /**\r\n     * Документ, владеющий данной транзакцией.\r\n     */\r\n    public get document() : IDocument{\r\n        return this._document;\r\n    }\r\n\r\n    /**\r\n     * Открыть транзакцию для выполнения. В этот момент создаётся *полная копия*\r\n     * базы данных документа и все изменения будут выполняться с этой копией.\r\n     * *Вложенные* транзакции будут получать копии этой копии. Причём копии базы,\r\n     * получаемые во вложенных транзакциях, будут содержать все те изменения,\r\n     * которые на момент открытия вложенной транзакции уже были выполнены *родительской\r\n     * транзакцией*.\r\n     *\r\n     * Если транзакция откатывается, то изменения, выполненные в ней и\r\n     * во всех вложенных транзакциях, не будут применяться к базе данных документа.\r\n     *\r\n     * Если транзакция применяется, то все изменения, выполненные в ней и во всех\r\n     * вложенных транзакциях (для которых не был выполнен откат), будут применены\r\n     * к базе данных документа.\r\n     */\r\n    start() : void{\r\n\r\n        if(this._status !== TransactionStatus.Created){\r\n            throw new Error('start: Нельзя повторно открывать транзакцию.')\r\n        }\r\n\r\n        this._status = TransactionStatus.Started;\r\n        (this.document as _IDocument)._pushTransaction(this);\r\n    }\r\n\r\n    /**\r\n     * Сохранение изменений, выполненных в рамках данной транзакции, а так же во\r\n     * всех вложенных в неё транзакций, для которых был выполнен `commit()`.\r\n     */\r\n    commit(): void {\r\n        if(this._status !== TransactionStatus.Started){\r\n            throw new Error('commit: Нельзя применять `commit()` для незапущенной транзакции.')\r\n        }\r\n\r\n        this._status = TransactionStatus.Commited;\r\n        (this.document as _IDocument)._popTransaction(this);\r\n    }\r\n\r\n    /**\r\n     * Откат всех изменений, выполненных в рамках данной транзакции, а так же во всех\r\n     * вложенных в неё транзакциях.\r\n     */\r\n    rollback(): void {\r\n        if(this._status !== TransactionStatus.Started){\r\n            throw new Error('rollback: Нельзя применять `rollback()` для незапущенной транзакции.')\r\n        }\r\n\r\n        this._status = TransactionStatus.RolledBack;\r\n        (this.document as _IDocument)._popTransaction(this);\r\n    }\r\n\r\n    private _status : TransactionStatus;\r\n\r\n    /**\r\n     * Состояние, в котором находится транзакция.\r\n     */\r\n    public get status() : TransactionStatus{\r\n        return this._status;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/api/src/ts/classes/Transaction.ts","\r\nimport {EventEmitter} from \"./EventEmitter\";\r\nimport {ITreeNode} from \"../interfaces/ITreeNode\";\r\nimport {ILevel} from \"../interfaces/ILevel\";\r\nimport {IDocument} from \"../interfaces/IDocument\";\r\nimport {IResult} from \"../interfaces/IResult\";\r\nimport {TreeNodeEventNames} from \"../enums/event_names/TreeNodeEventNames\";\r\nimport {_ITreeNode} from \"../_internal_interfaces/_ITreeNode\";\r\nimport {_IDocumentContext} from \"../_internal_interfaces/_IDocumentContext\";\r\nimport {_ILevelEntity} from \"../_internal_interfaces/_ILevelEntity\";\r\nimport {TypeNames} from \"../enums/TypeNames\";\r\nimport {_ITransaction} from \"../_internal_interfaces/_ITransaction\";\r\n\r\ntype NodeID = string;\r\ntype EntityID = string;\r\ntype UserID = string;\r\ntype ID = string;\r\n\r\n/**\r\n * Нод, используемый для построения иерархической структуры (используется\r\n * в качестве контейнера, содержимое которого указано в свойстве `valueId`).\r\n * В качестве значения нода должны использоваться идентификаторы объектов `ILevelNode` и `ICondition`.\r\n * Родительский нод всегда находится на один уровень выше своих детей.\r\n */\r\nexport class TreeNode extends EventEmitter<TreeNodeEventNames> implements _ITreeNode<EntityID>{\r\n\r\n    /**\r\n     * Конструктор класса.\r\n     */\r\n    constructor(document : IDocument){\r\n        super();\r\n        this._document = document;\r\n        this._isDeleted = false;\r\n        this._typeName = TypeNames.TreeNode;\r\n        this._parentID = null;\r\n        this._valueID = null;\r\n        this._childrenIDs = new Array<NodeID>();\r\n\r\n        this._isChanged = false;\r\n        this._isDeleted = false;\r\n    }\r\n\r\n    _valueID : ID;\r\n\r\n    /**\r\n     * Проверка на то, был ли удалён данный объект опосредованно - через удаление одного из его\r\n     * предков.\r\n     * @returns {boolean}\r\n     */\r\n    isDeletedByForefather() : boolean{\r\n        if(this._parentID){\r\n            let parent = (this.document.getContext() as _IDocumentContext).treeNodes.get(this._parentID);\r\n            if(parent.isDeletedDirectly) return true;\r\n            else return parent.isDeletedByForefather();\r\n        }\r\n        else return false;\r\n    }\r\n\r\n    /**\r\n     * Проверка на то, был ли объект удалён каким-либо образом: напрямую, через установку\r\n     * свойства `isDeletedDirectly`, или же опосредованно, через удаление родителя\r\n     * (см. метод `isDeletedByForefather()`).\r\n     * @returns {boolean}\r\n     */\r\n    isDeleted() : boolean{\r\n        return this.isDeletedDirectly || this.isDeletedByForefather();\r\n    }\r\n\r\n    /**\r\n     * Удалить нод.\r\n     * @returns {IResult} Отчёт о результате выполнения операции.\r\n     */\r\n    delete() : IResult{\r\n        if(this.getLockerID() === this.document.application.getCurrentUserId()){\r\n            this.isDeletedDirectly = true;\r\n            return this.document.application.factory.createIResult(true,'');\r\n        }\r\n        else{\r\n            return this.document.application.factory.createIResult(false,\r\n                'Нельзя удалить объект, предварительно не заблокированный вами.');\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Заблокировать нод.\r\n     * @returns {IResult} Отчёт о результате выполнения операции.\r\n     */\r\n    lock() : IResult{\r\n        // если уже заблокирован, сообщаем о положительном результате\r\n        if(this.getLockerID() === this.document.application.getCurrentUserId()){\r\n            return this.document.application.factory.createIResult(true,'');\r\n        }\r\n        // если не заблокирован\r\n        else if(this.getLockerID() === null){\r\n\r\n            // спрашиваем у сервера, можно ли блокировать документ\r\n            let result = this.document.application.dataProvider.lockDocumentObject(\r\n                this.document.id, this.id);\r\n\r\n            // если сервер разрешил, то блокируем объект и всех его детей\r\n            if(result.success) {\r\n                this.lockerId = this.document.application.getCurrentUserId();\r\n                for(let n of this.childrenIDs){\r\n                    let node = (this.document.getContext() as _IDocumentContext).treeNodes.get(n) as _ITreeNode<string>;\r\n                    node.lock();\r\n                }\r\n            }\r\n\r\n            return result; // возвращаем ответ сервера\r\n        }\r\n        // если заблокирован др. пользователем\r\n        else {\r\n            return this.document.application.factory.createIResult(false,\r\n                'Попытка заблокировать объект, ранее заблокированный другим пользователем.');\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Разблокировать нод.\r\n     * @returns {IResult} Отчёт о результате выполнения операции.\r\n     */\r\n    unlock() : IResult{\r\n        // запрашиваем у сервера разрешение на разблокировку\r\n        let result = this.document.application.dataProvider.unlockDocumentObject(\r\n            this.document.id, this.id);\r\n\r\n        // если сервер разрешил, то снимаем блокировку у объекта и всех его детей\r\n        if(result.success) {\r\n            this.lockerId = null;\r\n            for(let n of this.childrenIDs){\r\n                let node = (this.document.getContext() as _IDocumentContext).treeNodes.get(n) as _ITreeNode<string>;\r\n                node.unlock();\r\n            }\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * Получить идентификатор пользователя, заблокировавшего данный нод.\r\n     * Нод может быть заблокирован опосредованно, через одного из предков.\r\n     * @returns {string}\r\n     */\r\n    getLockerID() : string{\r\n        // нод может быть заблокирован опосредованно, через одного из его предков\r\n        if(this.lockerId) return this.lockerId;\r\n        else{\r\n            let parentID = this.getParent();\r\n            if(parentID){\r\n                let parent =(this.document.getContext() as _IDocumentContext).treeNodes.get(parentID);\r\n                return parent.getLockerID();\r\n            }\r\n            else return null;\r\n        }\r\n    }\r\n\r\n    private _document : IDocument;\r\n    /**\r\n     * Документ, в составе которого находится данный нод.\r\n     */\r\n    public get document() : IDocument{\r\n        return this._document;\r\n    }\r\n\r\n    private getLevelIndex() : number {\r\n        let index = 0;\r\n        let _node = this as ITreeNode<EntityID>;\r\n        let nodeId = _node.getParent();\r\n\r\n        while(nodeId){\r\n            _node = (this.document.getContext() as _IDocumentContext).treeNodes.get(nodeId);\r\n            if(!_node.isDeletedDirectly) ++index;\r\n            nodeId = _node.getParent();\r\n        }\r\n        return index;\r\n    }\r\n\r\n    /**\r\n     * Проверка на то, может ли нод содержать дочерние ноды. Это определяется\r\n     * структурой уровней: если для дочерних объектов предоставлен уровень, то\r\n     * их можно создавать для данного нода.\r\n     * @returns {boolean}\r\n     */\r\n    public canHaveChildren() : boolean{\r\n\r\n        let levelIndex = this.getLevelIndex();\r\n        let context = this.document.getContext() as _IDocumentContext;\r\n\r\n        let levelsCount = 0;\r\n\r\n        for(let key of context.levels.keys()){\r\n            if (!context.levels.get(key).isDeletedDirectly) ++levelsCount;\r\n        }\r\n        // console.log('Index: ' + levelIndex);\r\n        // console.log('levelsCount: ' + levelsCount);\r\n        return levelIndex >= 0 && levelIndex < levelsCount - 1;\r\n    }\r\n\r\n    /**\r\n     * Наименование типа объекта.\r\n     */\r\n    public get typeName() : TypeNames{\r\n        return this._typeName;\r\n    }\r\n\r\n    public _parentID : NodeID;\r\n\r\n    /**\r\n     * Идентификатор родительского нода.\r\n     */\r\n    public getParent(): NodeID{\r\n        return this._parentID;\r\n    }\r\n\r\n    public setParent(id : NodeID) : IResult{\r\n\r\n        if(this.lockerId != this.document.application.getCurrentUserId()){\r\n            return this.document.application.factory.createIResult(false,\r\n                'TreeNode.setParent: Нельзя редактировать объекты, предварительно не заблокированные вами.');\r\n        }\r\n\r\n        // Если свойство уже содержит указанное значение, то нет смысла менять его.\r\n        if(id && id === this._parentID) return;\r\n\r\n        // Нужно убедиться, что для целевого нода имеется подуровень для дочерних нодов.\r\n        const parentNode = (this.document.getContext() as _IDocumentContext).treeNodes.get(id);\r\n\r\n        if(parentNode && !parentNode.canHaveChildren()){\r\n            return this.document.application.factory.createIResult(false,\r\n                `Для 'INode' с ID = '${id}' не определён уровень для дочерних нодов.`);\r\n        }\r\n\r\n        // Сначала разрушаем существующую связь с родителем (если она есть)\r\n        if(this._parentID){\r\n            const _parentNode = (this.document.getContext() as _IDocumentContext).treeNodes.get(this._parentID);\r\n            if(_parentNode){\r\n                const index = _parentNode.childrenIDs.indexOf(this.id);\r\n                if(index >= 0) {\r\n                    _parentNode.childrenIDs.splice(index,1);\r\n                    let value = (this.document.getContext() as _IDocumentContext).levelEntities.get(_parentNode.valueId);\r\n                    (this.document.getCurrentTransaction() as _ITransaction).editedItems.set(\r\n                        _parentNode.valueId,value);\r\n                }\r\n            }\r\n        }\r\n\r\n        if(!id){\r\n            this._parentID = null;\r\n        }\r\n        else{\r\n            // Если у нового родителя не имеется ссылки на текущий нод в качестве\r\n            // дочернего, то добавляем такую ссылку.\r\n            const index = parentNode.childrenIDs.indexOf(this.id);\r\n            if(index < 0) parentNode.childrenIDs.push(this.id);\r\n\r\n            // Изменяем значение даже если объект не был найден, т.к. если идёт инициализация\r\n            // проекта или общей базы данных, то вполне возможно, что объект к этому моменту\r\n            // ещё не был добавлен, но будет присутствовать к моменту завершения инициализации.\r\n            this._parentID = id;\r\n        }\r\n\r\n        let value = (this.document.getContext() as _IDocumentContext).levelEntities.get(this.valueId);\r\n        (this.document.getCurrentTransaction() as _ITransaction).editedItems.set(this.valueId, value);\r\n\r\n        return this.document.application.factory.createIResult(true,'');\r\n    }\r\n\r\n    private _childrenIDs: Array<NodeID>;\r\n\r\n    /**\r\n     * Идентификаторы дочерних нодов.\r\n     * **ВНИМАНИЕ!**\r\n     * *Не изменяйте значение этого свойства самостоятельно! Оно автоматически будет\r\n     * изменяться у родителя при изменении свойства `prevId` дочернего нода.*.\r\n     */\r\n    public get childrenIDs(): Array<NodeID>{\r\n        // Если ранее, по какой-то причине, был удалён вложенный уровень, то скрываем\r\n        // и объекты, располагающиеся на нём. Если позднее вложенный уровень будет восстановлен,\r\n        // то и располагающиеся на нём объекты снова станут доступны для использования.\r\n        if(this.canHaveChildren()) return this._childrenIDs;\r\n        else return [];\r\n    }\r\n\r\n    /**\r\n     * Идентификатор объекта, хранящегося в данном нода в качестве значения.\r\n     */\r\n    public get valueId(): EntityID{\r\n        return this._valueID;\r\n    }\r\n\r\n    public set valueId(id: EntityID){\r\n\r\n        if(this.lockerId != this.document.application.getCurrentUserId()){\r\n            throw new Error('TreeNode.valueId: Нельзя редактировать объекты, предварительно не заблокированные вами.');\r\n        }\r\n\r\n        // Если свойство уже содержит указанное значение, то нет смысла менять его.\r\n        if(id && id === this.valueId) return;\r\n\r\n        // Сначала разрушаем существующую связь со значением (если она есть)\r\n        if(this._valueID){\r\n            const _value = (this.document.getContext() as _IDocumentContext).levelEntities.get(this._valueID);\r\n            if(_value){\r\n                (_value as _ILevelEntity).nodeId = null;\r\n                (this.document.getCurrentTransaction() as _ITransaction).editedItems.set(this._valueID,_value);\r\n            }\r\n        }\r\n\r\n        // теперь присваиваем новое значение\r\n        if(!id){\r\n            this._valueID = null;\r\n        }\r\n        else{\r\n            // у целевого объекта обновляем ссылку на нод.\r\n            const _value = (this.document.getContext() as _IDocumentContext)\r\n                .levelEntities.get(this._valueID) as _ILevelEntity;\r\n            if(_value){\r\n                _value.nodeId = this.id;\r\n            }\r\n            // Изменяем значение даже если объект не был найден, т.к. если идёт инициализация\r\n            // проекта или общей базы данных, то вполне возможно, что объект к этому моменту\r\n            // ещё не был добавлен, но будет присутствовать к моменту завершения инициализации.\r\n            this._valueID = id;\r\n            let value = (this.document.getContext() as _IDocumentContext).levelEntities.get(this.valueId);\r\n            (this.document.getCurrentTransaction() as _ITransaction).editedItems.set(this.valueId, value);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Если `true`, значит объект был удалён вами.\r\n     * ** Внимание!**\r\n     * *Не изменяйте это свойство самостоятельно!*\r\n     */\r\n    public get isDeletedDirectly(): boolean{\r\n        return this._isDeleted;\r\n    }\r\n\r\n    public set isDeletedDirectly(value : boolean){\r\n        this._isDeleted = value;\r\n        let item = (this.document.getContext() as _IDocumentContext).levelEntities.get(this.valueId);\r\n        (this.document.getCurrentTransaction() as _ITransaction).deletedItems.set(this.valueId,item);\r\n    }\r\n\r\n    private _typeName : TypeNames;\r\n    _isDeleted: boolean;\r\n    _lockerId : UserID;\r\n    _isChanged : boolean;\r\n\r\n    /**\r\n     * Идентификатор пользователя, заблокировавшего объект.\r\n     * Если объект не заблокирован, то это свойство равно `null`.\r\n     */\r\n    public get lockerId() : UserID{\r\n        return this._lockerId;\r\n    }\r\n\r\n    public set lockerId(value : UserID){\r\n        this._lockerId = value;\r\n        let item = (this.document.getContext() as _IDocumentContext).levelEntities.get(this.valueId);\r\n        (this.document.getCurrentTransaction() as _ITransaction).editedItems.set(this.valueId,item);\r\n    }\r\n\r\n    /**\r\n     * Метка о том, был ли объект изменён. Эта информация будет использоваться для определения того, какие\r\n     * записи следует отправлять на сервер при сохранении. После успешного сохранения это свойство должно\r\n     * возвращать `false`.\r\n     * @returns {boolean}\r\n     */\r\n    public get isChanged() : boolean{\r\n        return this._isChanged;\r\n    }\r\n\r\n    public set isChanged(value : boolean){\r\n        this._isChanged = value;\r\n        let item = (this.document.getContext() as _IDocumentContext).levelEntities.get(this.valueId);\r\n        (this.document.getCurrentTransaction() as _ITransaction).editedItems.set(this.valueId,item);\r\n    }\r\n\r\n    /**\r\n     * Получить уровень, на котором находится данный нод.\r\n     * @returns {ILevel}\r\n     */\r\n    getLevel() : ILevel{\r\n        let levelIndex = this.getLevelIndex();\r\n        let context = this.document.getContext() as _IDocumentContext;\r\n        let level = context.getTopLevel();\r\n\r\n        if(levelIndex == 0) return level;\r\n        else{\r\n            while(levelIndex){\r\n                level = context.levels.get(level.nextId);\r\n                --levelIndex;\r\n            }\r\n            return level;\r\n        }\r\n    }\r\n\r\n    clone() : ITreeNode<ID>{\r\n        let item = this.document.application.factory.createITreeNode(\r\n            this.document) as _ITreeNode<ID>;\r\n\r\n        item._setID(this.id);\r\n        item._valueID = this.valueId;\r\n        item._parentID = this._parentID;\r\n\r\n        item._lockerId = this._lockerId;\r\n        item._isChanged = this._isChanged;\r\n        item._isDeleted = this.isDeletedDirectly;\r\n\r\n        for(let n of this.childrenIDs){\r\n            item.childrenIDs.push(n);\r\n        }\r\n        return item;\r\n    }\r\n\r\n    _setID(value : ID) : void{\r\n        this._id = value;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/api/src/ts/classes/TreeNode.ts","\r\nimport {EventEmitter} from \"./EventEmitter\";\r\nimport {IVariant} from \"../interfaces/IVariant\";\r\nimport {IDocument} from \"../interfaces/IDocument\";\r\nimport {IConnection} from \"../interfaces/IConnection\";\r\nimport {ICondition} from \"../interfaces/ICondition\";\r\nimport {ILevelNode} from \"../interfaces/ILevelNode\";\r\nimport {VariantEventNames} from \"../enums/event_names/VariantEventNames\";\r\nimport {_IDocumentContext} from \"../_internal_interfaces/_IDocumentContext\";\r\nimport {_ICondition} from \"../_internal_interfaces/_ICondition\";\r\nimport {TypeNames} from \"../enums/TypeNames\";\r\nimport {TransactionStatus} from \"../enums/TransactionStatus\";\r\nimport {_IVariant} from \"../_internal_interfaces/_IVariant\";\r\nimport {_ITransaction} from \"../_internal_interfaces/_ITransaction\";\r\n\r\ntype ConditionID = string;\r\ntype ConnectionID = string;\r\ntype UserID = string;\r\ntype ID = string;\r\n\r\n/**\r\n * Вариант, используемый в условии.\r\n */\r\nexport class Variant extends EventEmitter<VariantEventNames> implements _IVariant{\r\n\r\n    private isInsideOfTransaction() : boolean{\r\n        let transaction = this._document.getCurrentTransaction();\r\n        if(!transaction || transaction.status != TransactionStatus.Started) return false\r\n        else return true;\r\n    }\r\n\r\n    constructor(condition : ICondition, text: string){\r\n        super();\r\n        this._document = condition.document;\r\n        this._typeName = TypeNames.Variant;\r\n        this._conditionID = condition.id;\r\n        this._text = text;\r\n        this._outputConnections = new Array<ConnectionID>();\r\n        this._lockerId = null;\r\n        this._isChanged = false;\r\n        this._isDeleted = false;\r\n\r\n        this._outputConnections = [];\r\n    }\r\n\r\n    /**\r\n     * Проверка на то, был ли удалён данный объект опосредованно - через удаление одного из его\r\n     * предков.\r\n     * @returns {boolean}\r\n     */\r\n    isDeletedByForefather() : boolean{\r\n        if(this.conditionId){\r\n            let condition = (this.document.getContext() as _IDocumentContext)\r\n                .levelEntities.get(this.conditionId) as _ICondition;\r\n            return condition.isDeleted();\r\n        }\r\n        else return false;\r\n    }\r\n\r\n    /**\r\n     * Проверка на то, был ли объект удалён каким-либо образом: напрямую, через установку\r\n     * свойства `isDeletedDirectly`, или же опосредованно, через удаление родителя\r\n     * (см. метод `isDeletedByForefather()`).\r\n     * @returns {boolean}\r\n     */\r\n    isDeleted() : boolean{\r\n        return this.isDeletedDirectly || this.isDeletedByForefather();\r\n    }\r\n\r\n\r\n\r\n    /**\r\n     * Ссылка на документ (технологию) в составе которого находится вариант.\r\n     * @returns {IDocument}\r\n     */\r\n    public get document() : IDocument{\r\n        return this._document;\r\n    }\r\n\r\n    _document : IDocument;\r\n    _conditionID: ConditionID;\r\n    _text: string;\r\n    _outputConnections: Array<ConnectionID>;\r\n    _lockerId: UserID;\r\n    _isChanged: boolean;\r\n    _isDeleted: boolean;\r\n    _typeName: TypeNames;\r\n\r\n    /**\r\n     * Условие, в составе которого используется данный вариант.\r\n     * @returns {ConditionID}\r\n     */\r\n    public get conditionId(): ConditionID{\r\n        return this._conditionID;\r\n    }\r\n\r\n    public set conditionId(value: ConditionID){\r\n        if(!this.isInsideOfTransaction()){\r\n            throw new Error('Редактировать объект можно только в предварительно открытой транзакции.');\r\n        }\r\n        this._conditionID = value;\r\n        (this.document.getCurrentTransaction() as _ITransaction).editedItems.set(this.id,this);\r\n    }\r\n\r\n    /**\r\n     * Текст варианта, отображаемый пользователю.\r\n     * @returns {string}\r\n     */\r\n    public get text() : string{\r\n        return this._text;\r\n    }\r\n\r\n    public set text(value: string){\r\n        if(!this.isInsideOfTransaction()){\r\n            throw new Error('Редактировать объект можно только в предварительно открытой транзакции.');\r\n        }\r\n        if(this.getCondition().getLockerID() != this.document.application.getCurrentUserId()){\r\n            throw new Error('Редактировать можно только объекты, предварительно заблокированые вами.');\r\n        }\r\n        this._text = value;\r\n        (this.document.getCurrentTransaction() as _ITransaction).editedItems.set(this.id,this);\r\n    }\r\n\r\n    /**\r\n     * Исходящие подключения данного варианта.\r\n     * @returns {Array<ConnectionID>}\r\n     */\r\n    public get outputConnections(): Array<ConnectionID>{\r\n        return this._outputConnections;\r\n    }\r\n\r\n    public set outputConnections(value : Array<ConnectionID>){\r\n        if(!this.isInsideOfTransaction()){\r\n            throw new Error('Редактировать объект можно только в предварительно открытой транзакции.');\r\n        }\r\n        if(this.getCondition().getLockerID() != this.document.application.getCurrentUserId()){\r\n            throw new Error('Редактировать можно только объекты, предварительно заблокированые вами.');\r\n        }\r\n        this._outputConnections = value;\r\n    }\r\n\r\n    /**\r\n     * Идентификатор пользователя, заблокировавшего данный вариант.\r\n     * @returns {UserID}\r\n     */\r\n    public get lockerId(): UserID{\r\n        return this._lockerId;\r\n    }\r\n\r\n    public set lockerId(value: UserID){\r\n        if(!this.isInsideOfTransaction()){\r\n            throw new Error('Редактировать объект можно только в предварительно открытой транзакции.');\r\n        }\r\n        if(this.getCondition().getLockerID() != this.document.application.getCurrentUserId()){\r\n            throw new Error('Редактировать можно только объекты, предварительно заблокированые вами.');\r\n        }\r\n        this._lockerId = value;\r\n        (this.document.getCurrentTransaction() as _ITransaction).editedItems.set(this.id,this);\r\n    }\r\n\r\n    /**\r\n     * Метка о том, был ли вариант изменён.\r\n     * @returns {boolean}\r\n     */\r\n    public get isChanged(): boolean{\r\n        return this._isChanged;\r\n    }\r\n\r\n    public set isChanged(value : boolean){\r\n        if(!this.isInsideOfTransaction()){\r\n            throw new Error('Редактировать объект можно только в предварительно открытой транзакции.');\r\n        }\r\n        if(this.getCondition().getLockerID() != this.document.application.getCurrentUserId()){\r\n            throw new Error('Редактировать можно только объекты, предварительно заблокированые вами.');\r\n        }\r\n        this._isChanged = value;\r\n    }\r\n\r\n    /**\r\n     * Метка о том, был ли вариант удалён.\r\n     * @returns {boolean}\r\n     */\r\n    public get isDeletedDirectly(): boolean{\r\n        return this._isDeleted;\r\n    }\r\n\r\n    public set isDeletedDirectly(value : boolean){\r\n        if(!this.isInsideOfTransaction()){\r\n            throw new Error('Редактировать объект можно только в предварительно открытой транзакции.');\r\n        }\r\n        if(this.getCondition().getLockerID() != this.document.application.getCurrentUserId()){\r\n            throw new Error('Редактировать можно только объекты, предварительно заблокированые вами.');\r\n        }\r\n        this._isDeleted = value;\r\n        (this.document.getCurrentTransaction() as _ITransaction).editedItems.set(this.id,this.id);\r\n        if(this._isDeleted) (this.document.getCurrentTransaction() as _ITransaction).deletedItems.set(this.id,this);\r\n    }\r\n\r\n    /**\r\n     * Наименование типа объекта.\r\n     * @returns {string}\r\n     */\r\n    public get typeName(): TypeNames{\r\n        return this._typeName;\r\n    }\r\n\r\n    /**\r\n     * Получить исходящие подключения данного варианта.\r\n     * @returns {Array<IConnection>}\r\n     */\r\n    getOutputConnections() : Array<IConnection>{\r\n        let arr = [];\r\n        for(let n of this.outputConnections){\r\n            let connection = (this.document.getContext() as _IDocumentContext).connections.get(n);\r\n            if(!connection.isDeletedDirectly) arr.push(connection);\r\n        }\r\n        return arr;\r\n    }\r\n\r\n    /**\r\n     * Получить объект условия, в составе которого находится данный вариант.\r\n     * @returns {ICondition}\r\n     */\r\n    getCondition() : ICondition{\r\n\r\n        let context = (this.document.getContext() as _IDocumentContext);\r\n        if(context.levelEntities.has(this.conditionId)){\r\n            let condition = context.levelEntities.get(this.conditionId) as ICondition;\r\n            return condition;\r\n        }\r\n        else{\r\n            return null;\r\n        }\r\n    }\r\n\r\n    _setID(value : ID) : void{\r\n        this._id = value;\r\n    }\r\n\r\n\r\n    clone(owner : ICondition) : IVariant{\r\n        let item = this.document.application.factory.createIVariant(owner,\r\n            this.text) as _IVariant;\r\n        item._setID(this.id);\r\n        item._text = this.text;\r\n        item._lockerId = this.lockerId;\r\n        item._isChanged = this.isChanged;\r\n        item._isDeleted = this.isDeletedDirectly;\r\n\r\n        for(let n of this.outputConnections){\r\n            item.outputConnections.push(n);\r\n        }\r\n\r\n        return item;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/api/src/ts/classes/Variant.ts","\r\nimport {IApplication} from \"./interfaces/IApplication\";\r\nimport {_IApplication} from \"./_internal_interfaces/_IApplication\";\r\nimport {Application} from \"./classes/Application\";\r\nimport {FakeApplication} from \"../../test/fakes/FakeApplication\";\r\n\r\nlet app : _IApplication = null;\r\nlet useFakeApp = true; // Переключатель использования фейковых реализаций (для тестирования и отладки)\r\nlet _createApp = () => useFakeApp ? new FakeApplication() : new Application();\r\n\r\n/**\r\n * Получить объект приложения в виде интерфейса, предназначенного для внешнего использования.\r\n * @returns {IApplication}\r\n */\r\nexport function getApplication() : IApplication{\r\n\r\n    if(!app){\r\n        app = _createApp();\r\n    }\r\n    return app;\r\n}\r\n\r\n/**\r\n * Получить объект приложения в виде интерфейса, предназначенного для внутреннего использования.\r\n * @returns {_IApplication}\r\n * @private\r\n */\r\nexport function _getApplication() : _IApplication{\r\n\r\n    if(!app){\r\n        app = _createApp();\r\n    }\r\n    return app;\r\n}\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/api/src/ts/entryPoint.ts","/**\r\n * Состояние, в котором находится транзакция.\r\n */\r\nexport enum TransactionStatus{\r\n    /**\r\n     * Транзакция создана, но не запущена.\r\n     */\r\n    Created,\r\n    /**\r\n     * Транзакция создана и запущена.\r\n     */\r\n    Started,\r\n    /**\r\n     * Изменения, выполненные в рамках транзакции, применены.\r\n     */\r\n    Commited,\r\n    /**\r\n     * Изменения, выполненные в рамках транзакции, отменены.\r\n     */\r\n    RolledBack\r\n}\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/api/src/ts/enums/TransactionStatus.ts","\r\nexport enum TypeNames{\r\n    Level,\r\n    LevelNode,\r\n    Condition,\r\n    Connection,\r\n    Reference,\r\n    Variant,\r\n    Department,\r\n    DbRole,\r\n    DbUser,\r\n    TreeNode\r\n}\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/api/src/ts/enums/TypeNames.ts","/**\r\n * Наименования событий, подписка на которые доступна в `IApplication`.\r\n */\r\nexport enum ApplicationEventNames{\r\n    /**\r\n     * Приложению назначен к использованию другой менеджер документов.\r\n     */\r\n    DocumentManagerSwitched,\r\n    /**\r\n     * Приложению назначен к использованию другой провайдер данных.\r\n     */\r\n    DataProviderSwitched,\r\n    /**\r\n     * Приложению назначен к использованию другой менеджер ресурсов.\r\n     */\r\n    ResourceManagerSwitched,\r\n    /**\r\n     * Приложению назначена к использованию другая фабрика классов.\r\n     */\r\n    FactorySwitched,\r\n    /**\r\n     * Приложению назначена к использованию другая внешняя база данных компаний.\r\n     */\r\n    DatabaseSwitched\r\n}\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/api/src/ts/enums/event_names/ApplicationEventNames.ts","\r\n/**\r\n * Наименования событий, подписка на которые доступна в `IDocument`.\r\n */\r\nexport enum DocumentEventNames{\r\n    /**\r\n     * Документ изменён.\r\n     */\r\n    DocumentChanged,\r\n    /**\r\n     * Документ синхронизирован с сервером.\r\n     */\r\n    DocumentSynchronized\r\n}\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/api/src/ts/enums/event_names/DocumentEventNames.ts","/**\r\n * Наименования событий, подписка на которые доступна в `IDocumentManager`.\r\n */\r\nexport enum DocumentManagerEventNames {\r\n    /**\r\n     * Произошло открытие документа.\r\n     */\r\n    DocumentOpened,\r\n    /**\r\n     * Произошло создание нового документа.\r\n     */\r\n    DocumentCreated,\r\n    /**\r\n     * Произошло закрытие документа.\r\n     */\r\n    DocumentClosed,\r\n    /**\r\n     * В качестве текущего был назначен другой документ.\r\n     */\r\n    CurrentDocumentSwitched\r\n}\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/api/src/ts/enums/event_names/DocumentManagerEventNames.ts","\r\nimport {EventEmitter} from \"../../src/ts/classes/EventEmitter\";\r\nimport {IDocumentManager} from \"../../src/ts/interfaces/IDocumentManager\";\r\nimport {IFactory} from \"../../src/ts/interfaces/IFactory\";\r\nimport {IResourceManager} from \"../../src/ts/interfaces/IResourceManager\";\r\nimport {Factory} from \"../../src/ts/classes/Factory\";\r\nimport {IDataProvider} from \"../../src/ts/interfaces/IDataProvider\";\r\nimport {FakeDataProvider} from \"./FakeDataProvider\";\r\nimport {IDatabase} from \"../../src/ts/interfaces/IDatabase\";\r\nimport {ApplicationEventNames} from \"../../src/ts/enums/event_names/ApplicationEventNames\";\r\nimport {_IApplication} from \"../../src/ts/_internal_interfaces/_IApplication\";\r\nimport {_IDocumentManager} from \"../../src/ts/_internal_interfaces/_IDocumentManager\";\r\nimport {_IDataProvider} from \"../../src/ts/_internal_interfaces/_IDataProvider\";\r\nimport {_IResourceManager} from \"../../src/ts/_internal_interfaces/_IResourceManager\";\r\nimport {_IFactory} from \"../../src/ts/_internal_interfaces/_IFactory\";\r\nimport {_IDatabase} from \"../../src/ts/_internal_interfaces/_IDatabase\";\r\nimport {IDocumentContext} from \"../../src/ts/interfaces/IDocumentContext\";\r\n\r\ntype UserID = string;\r\n\r\n/**\r\n * Фейковое приложение, предназначенное для использования в тестах.\r\n */\r\nexport class FakeApplication extends EventEmitter<ApplicationEventNames> implements _IApplication{\r\n\r\n    _setDocumentManager(docMng : _IDocumentManager) : void{\r\n        this._documentManager = docMng;\r\n    }\r\n    _setDataProvider(provider : _IDataProvider) : void{\r\n        this._dataProvider = provider;\r\n    }\r\n    _setResourceManager(resMng : _IResourceManager) : void{\r\n        this._resourceManager = resMng;\r\n    }\r\n    _setFactory(factory : _IFactory) : void{\r\n        this._factory = factory;\r\n    }\r\n    _setDatabase(db : _IDatabase) : void{\r\n        this._commonDatabase = db;\r\n    }\r\n\r\n    private _commonDatabase : IDatabase;\r\n\r\n    /**\r\n     * База данных компаний.\r\n     */\r\n    public get commonDatabase() : IDatabase{\r\n        return this._commonDatabase;\r\n    }\r\n\r\n    private _dataProvider : IDataProvider;\r\n    /**\r\n     * Провайдер данных, предназначенный для взаимодействия с сервером.\r\n     */\r\n    public get dataProvider() : IDataProvider{\r\n        return this._dataProvider;\r\n    }\r\n\r\n    private _documentManager : IDocumentManager;\r\n\r\n    /**\r\n     * Менеджер документов. Позволяет открывать, сохранять и закрывать документы.\r\n     * Так же позволяет устанавливать нужный открытый вам документ в качестве текущего.\r\n     */\r\n    public get documentManager() : IDocumentManager{\r\n        return this._documentManager;\r\n    }\r\n\r\n    /**\r\n     * Конструктор класса.\r\n     */\r\n    constructor(){\r\n        super();\r\n\r\n        this._factory = new Factory(this);\r\n        this._documentManager = this.factory.createIDocumentManager();\r\n\r\n        this._resourceManager = this.factory.createIResourceManager('ru');\r\n        this._commonDatabase = this._factory.createIDatabase(this);\r\n        this._dataProvider = new FakeDataProvider(this);\r\n        (this._dataProvider as FakeDataProvider).fillDocuments();\r\n    }\r\n\r\n    private _resourceManager : IResourceManager;\r\n\r\n    /**\r\n     * Менеждер локализованных ресурсов.\r\n     * @returns {IResourceManager}\r\n     */\r\n    public get resourceManager(): IResourceManager {\r\n        return this._resourceManager;\r\n    }\r\n\r\n    private _factory : IFactory;\r\n\r\n    /**\r\n     * Фабрика классов, использущихся для работы самого приложения. Фабрика классов, описывающих бизнес-модель\r\n     * представлена свойством `bmFactory`.\r\n     */\r\n    public get factory(): IFactory {\r\n        return this._factory;\r\n    }\r\n\r\n    /**\r\n     * Здесь ставим заглушку в виде возвращаемого фиксированного значения.\r\n     * @returns {UserID}\r\n     */\r\n    public getCurrentUserId(): UserID {\r\n        return this.dataProvider.getCurrentUserId();\r\n    }\r\n\r\n    public _getDocumentManager() : _IDocumentManager{\r\n        return this._documentManager;\r\n    }\r\n\r\n    public _getDataProvider() : _IDataProvider{\r\n        return this._dataProvider;\r\n    }\r\n\r\n    public _getResourceManager() : _IResourceManager{\r\n        return this._resourceManager;\r\n    }\r\n\r\n    public _getFactory() : _IFactory{\r\n        return this._factory;\r\n    }\r\n\r\n    public _getDatabase() : _IDatabase{\r\n        return this._commonDatabase;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/api/test/fakes/FakeApplication.ts","\r\nimport {IApplication} from \"../../src/ts/interfaces/IApplication\";\r\nimport {IResult} from \"../../src/ts/interfaces/IResult\";\r\nimport {DataProvider} from \"../../src/ts/classes/DataProvider\";\r\nimport {IDocument} from \"../../src/ts/interfaces/IDocument\";\r\nimport {ILevelEntity} from \"../../src/ts/interfaces/ILevelEntity\";\r\nimport {IDocumentInfo} from \"../../src/ts/interfaces/IDocumentInfo\";\r\nimport {_IDocument} from \"../../src/ts/_internal_interfaces/_IDocument\";\r\n\r\ntype ID = string;\r\ntype UserID = string;\r\n\r\n/**\r\n * Фейковый провайдер данных, наследуемый от класса `DataProvider`. Предоставляет\r\n * дополнительные свойства, позволяющие управлять ответами сервера. Предназначен для использования в\r\n * модульных тестах.\r\n */\r\nexport class FakeDataProvider extends DataProvider{\r\n\r\n    /**\r\n     * Конструктор класса.\r\n     * @param {IApplication} app Приложение, в составе которого используется провайдер данных.\r\n     */\r\n    constructor(app : IApplication){\r\n        super(app);\r\n\r\n        this.allowDbObjectLock = false;\r\n        this.allowDbObjectUnlock = false;\r\n\r\n        this.allowDocumentObjectLock = false;\r\n        this.allowDocumentObjectUnlock = false;\r\n\r\n        // Фейковый набор документов, имеющихся на сервере\r\n        this.documents = new Array<IDocument>();\r\n\r\n    }\r\n\r\n    public fillDocuments() : void{\r\n        this.documents = new Array<IDocument>();\r\n        let doc1 = this.createDocument_0();\r\n        this.documents.push(doc1);\r\n        let doc2 = this.createDocument_1();\r\n        this.documents.push(doc2);\r\n    }\r\n\r\n    /**\r\n     * Заглушка, посредством которой можно управлять доступностью блокировки для объектов базы данных компаний.\r\n     */\r\n    public allowDbObjectLock : boolean;\r\n\r\n    /**\r\n     * Заглушка, посредством которой можно управлять доступностью разблокировки для объектов базы данных компаний.\r\n     */\r\n    public allowDbObjectUnlock : boolean;\r\n\r\n    /**\r\n     * Заглушка, посредством которой можно управлять доступностью блокировки для объектов документа (технологии).\r\n     */\r\n    public allowDocumentObjectLock : boolean;\r\n\r\n    /**\r\n     * Заглушка, посредством которой можно управлять доступностью разблокировки для объектов документа (технологии).\r\n     */\r\n    public allowDocumentObjectUnlock : boolean;\r\n\r\n    /**\r\n     * Заблокировать объект в общей базе данных компаний.\r\n     * @param {ID} databaseId Идентификатор базы данных компаний.\r\n     * @param {ID} objectId Идентификатор объекта, подлежащего блокировке.\r\n     * @returns {IResult} Отчёт о результатах выполнения операции.\r\n     */\r\n    protected _lockDbObject(databaseId: ID, objectId: ID): IResult {\r\n        return this.application.factory.createIResult(this.allowDbObjectLock, '');\r\n    }\r\n\r\n    /**\r\n     * Разблокировать объект в общей базе данных компаний.\r\n     * @param {ID} databaseId Идентификатор базы данных компаний.\r\n     * @param {ID} objectId Идентификатор объекта, подлежащего разблокировке.\r\n     * @returns {IResult} Отчёт о результатах выполнения операции.\r\n     */\r\n    protected _unlockDbObject(databaseId: ID, objectId: ID): IResult {\r\n        return this.application.factory.createIResult(this.allowDbObjectUnlock, '');\r\n    }\r\n\r\n    /**\r\n     * Заблокировать объект в документе.\r\n     * @param {ID} docId Идентификатор целевого документа.\r\n     * @param {ID} objectId Идентификатор целевого объекта.\r\n     * @returns {IResult} Отчёт о результатах выполнения операции.\r\n     */\r\n    protected _lockDocumentObject(docId: ID, objectId: ID): IResult {\r\n        return this.application.factory.createIResult(this.allowDocumentObjectLock, '');\r\n    }\r\n\r\n    /**\r\n     * Разблокировать объект в документе.\r\n     * @param {ID} docId Идентификатор целевого документа.\r\n     * @param {ID} objectId Идентификатор целевого объекта.\r\n     * @returns {IResult} Отчёт о результатах выполнения операции.\r\n     */\r\n    protected _unlockDocumentObject(docId: ID, objectId: ID): IResult {\r\n        return this.application.factory.createIResult(this.allowDocumentObjectUnlock, '');\r\n    }\r\n\r\n    /**\r\n     * Получить документ (технологию) с сервера. В случае успешного открытия документ назначается в качестве текущего.\r\n     * @param {ID} docId Идентификатор искомого документа.\r\n     * @returns {IDocument} Возвращается запрошенный документ или `null`, если документ с\r\n     * указанным идентификатором не был найден.\r\n     */\r\n    public openDocument(docId : ID) : IDocument{\r\n\r\n        for(let n of this.documents){\r\n            if(n.id === docId) return n;\r\n        }\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * Создать новый тестовый документ с заполненным только первым уровнем\r\n     * @returns {IDocument}\r\n     */\r\n    private createDocument_0() : IDocument{\r\n\r\n        let doc = this.application.documentManager.create(\r\n            'Tech proc (filled the top level only)', '123');\r\n        if(!doc) throw new Error('Не удалось создать документ.');\r\n\r\n        let transaction = doc.createTransaction();\r\n        transaction.start();\r\n\r\n        (doc as _IDocument)._setID('84F73DB1-51B5-4DA2-BB55-7C9070400E18');\r\n\r\n        const colors = ['#ff4000', '#ffbf00', '#00ff80', '#00bfff', '#8000ff', '#ff00ff', '#00b3b3'];\r\n        const levelsCount = colors.length;\r\n        // Сначала нужно создать набор уровней, на которых будут размещаться узлы и условия.\r\n        for(let n = 0; n < levelsCount; ++n){\r\n            let name = 'Level ' + n;\r\n            let code = 'LEV-' + n;\r\n            let color = colors[n];\r\n            let autoNum = true;\r\n            doc.getContext().pushLevel(name,code, color, autoNum);\r\n        }\r\n        let parentId = null;\r\n\r\n        // корневой узел (на самом верхнем уровне)\r\n        let name = 'Root';\r\n        let code = 'ROOT';\r\n        let entity = this.application.factory.createILevelNode(doc, name, code);\r\n        doc.getContext().addLevelEntity(parentId, entity);\r\n        parentId = entity.id;\r\n\r\n        // первый  дочерний узел\r\n        name = 'Foo';\r\n        code = 'Bee';\r\n        entity = this.application.factory.createILevelNode(doc, name, code);\r\n        doc.getContext().addLevelEntity(parentId, entity);\r\n\r\n        // второй дочерний узел\r\n        name = 'Stuff';\r\n        code = 'Go';\r\n        let entity2 = this.application.factory.createILevelNode(doc, name, code);\r\n        doc.getContext().addLevelEntity(parentId, entity2);\r\n\r\n        // добавляем связь первого узла со вторым\r\n\r\n        doc.getContext().addConnection(entity.id, entity2.id, 'Связь первого узла со вторым.');\r\n\r\n        // Добавляем условие\r\n        let condition = this.application.factory.createICondition(doc, 'Q1','Куда пойдём?');\r\n        doc.getContext().addLevelEntity(parentId, condition);\r\n\r\n        // Связываем второй узел с условием\r\n        doc.getContext().addConnection(entity2.id,condition.id, 'Связь второго узла с условием.');\r\n\r\n        // Добавляем для условия три выходных варианта\r\n        let variant_1 =  doc.getContext().addVariant(condition.id, 'Налево');\r\n        if(!variant_1) throw new Error('Не удалось создать первый вариант.');\r\n\r\n        let variant_2 = doc.getContext().addVariant(condition.id, 'Прямо');\r\n        if(!variant_2) throw new Error('Не удалось создать второй вариант.');\r\n\r\n        let variant_3 = doc.getContext().addVariant(condition.id, 'Направо');\r\n        if(!variant_3) throw new Error('Не удалось создать третий вариант.');\r\n\r\n        // Для каждого варианта создаём по дополнительному узлу и связываем вариант с узлом\r\n        let leftEntity = this.application.factory.createILevelNode(doc,\r\n            'Left entity', 'LE');\r\n        doc.getContext().addLevelEntity(parentId, leftEntity);\r\n\r\n        let connection = doc.getContext().addConnection(variant_1.id,\r\n            leftEntity.id, 'Связь с первым вариантом.');\r\n\r\n        if(!connection) throw new Error('Не удалось создать связь для первого варианта.');\r\n\r\n\r\n        let rightEntity = this.application.factory.createILevelNode(doc,\r\n            'Right entity', 'RT');\r\n        doc.getContext().addLevelEntity(parentId, rightEntity);\r\n\r\n        connection = doc.getContext().addConnection(variant_2.id,\r\n            rightEntity.id, 'Связь со вторым вариантом.');\r\n\r\n        if(!connection) throw new Error('Не удалось создать связь для второго варианта.');\r\n\r\n        let frontEntity = this.application.factory.createILevelNode(doc,\r\n            'Front entity', 'FNT');\r\n        doc.getContext().addLevelEntity(parentId, frontEntity);\r\n\r\n        connection = doc.getContext().addConnection(variant_3.id,\r\n            frontEntity.id, 'Связь с третьим вариантом.');\r\n\r\n        if(!connection) throw new Error('Не удалось создать связь для третьего варианта.');\r\n\r\n        transaction.commit();\r\n\r\n        return doc;\r\n    }\r\n\r\n    /**\r\n     * Создать новый тестовый документ с заполненными тремя уровнями\r\n     * @returns {IDocument}\r\n     */\r\n    private createDocument_1() : IDocument{\r\n        // Поскольку это фейковый провайдер данных, предназначенный для тестирования,\r\n        // то для любого ID возвращаем один и тот же документ.\r\n\r\n        let doc = this.application.documentManager.create(\r\n            'Tech proc 2 (filled three levels)', '456');\r\n        if(!doc) throw new Error('Не удалось создать документ.');\r\n\r\n        let transaction = doc.createTransaction();\r\n        transaction.start();\r\n\r\n        (doc as _IDocument)._setID('DBC9A89B-B893-4D69-AF85-D296631BBE6C');\r\n\r\n        const colors = ['#ff4000', '#ffbf00', '#00ff80', '#00bfff', '#8000ff', '#ff00ff', '#00b3b3'];\r\n        const levelsCount = colors.length;\r\n        // Сначала нужно создать набор уровней, на которых будут размещаться узлы и условия.\r\n        for(let n = 0; n < levelsCount; ++n){\r\n            let name = 'Level ' + n;\r\n            let code = 'LEV-' + n;\r\n            let color = colors[n];\r\n            let autoNum = true;\r\n            doc.getContext().pushLevel(name,code, color, autoNum);\r\n        }\r\n\r\n        let topLevelEntities = new Array<ILevelEntity>();\r\n        let self = this;\r\n\r\n        let addEntities = function (\r\n            parent : ID, namePrefix : string, codePrefix : string, sitePrefix : string,\r\n            arr : Array<ILevelEntity>){\r\n\r\n            for(let n = 0; n < 3; ++n){\r\n                let name = namePrefix + n;\r\n                let code = codePrefix + n;\r\n                let entity = self.application.factory.createILevelNode(doc, name, code);\r\n                doc.getContext().addLevelEntity(parent, entity);\r\n\r\n                arr.push(entity);\r\n            }\r\n        };\r\n\r\n        // корневой узел (на самом верхнем уровне)\r\n        let name = 'Root';\r\n        let code = 'ROOT';\r\n        let entity = this.application.factory.createILevelNode(doc, name, code);\r\n        doc.getContext().addLevelEntity(null, entity);\r\n        let parentId = entity.id;\r\n\r\n        // На втором уровне создаём три не связанных друг с другом узла.\r\n        addEntities(parentId, 'Stuff ', 'STF-', 'stuff-', topLevelEntities);\r\n\r\n        // Для каждого узла второго уровня так же создаём на третьем уровне\r\n        // три не связанных друг с другом узла.\r\n\r\n        let secondLevelEntities = new Array<ILevelEntity>();\r\n\r\n        let data = [\r\n            {namePrefix : 'AAA', codePrefix : 'A-', sitePrefix : 'asdf'},\r\n            {namePrefix : 'BBB', codePrefix : 'B-', sitePrefix : 'qwerty'},\r\n            {namePrefix : 'CCC', codePrefix : 'C-', sitePrefix : 'zxcvb'}\r\n        ];\r\n\r\n        for(let n = 0; n < topLevelEntities.length; ++n){\r\n            addEntities(topLevelEntities[n].id, data[n].namePrefix,\r\n                data[n].codePrefix, data[n].sitePrefix,\r\n                secondLevelEntities);\r\n        }\r\n\r\n        // Теперь для каждого узла третьего уровня создаём дочерние элементы на четвёртом уровне. На\r\n        // этот раз это будет набор связанных друг с другом узлов и условий.\r\n\r\n        let addChildSchema = function(parent : ID){\r\n\r\n            // первый узел\r\n            let name = 'Foo ' + parent;\r\n            let code = 'Bee ' + parent;\r\n            let entity = self.application.factory.createILevelNode(doc, name, code);\r\n            doc.getContext().addLevelEntity(parent, entity);\r\n\r\n            // второй узел\r\n            name = 'Stuff ' + parent;\r\n            code = 'Go ' + parent;\r\n            let entity2 = self.application.factory.createILevelNode(doc, name, code);\r\n            doc.getContext().addLevelEntity(parent, entity2);\r\n\r\n            // добавляем связь первого узла со вторым\r\n            doc.getContext().addConnection(entity.id, entity2.id, 'Связь первого узла со вторым');\r\n\r\n            // Добавляем условие\r\n            let condition = self.application.factory.createICondition(doc, 'Q1','Куда пойдём?');\r\n            doc.getContext().addLevelEntity(parent, condition);\r\n\r\n            // Связываем второй узел с условием\r\n            doc.getContext().addConnection(entity2.id, condition.id, 'Связь второго узла с условием');\r\n\r\n            // Добавляем для условия три выходных варианта\r\n            let variant_1 = doc.getContext().addVariant(condition.id, 'Налево');\r\n\r\n            let variant_2 = doc.getContext().addVariant(condition.id, 'Прямо');\r\n\r\n            let variant_3 = doc.getContext().addVariant(condition.id, 'Направо');\r\n\r\n            // Для каждого варианта создаём по дополнительному узлу и связываем вариант с узлом\r\n\r\n            let leftEntity = self.application.factory.createILevelNode(doc,\r\n                'Left entity', 'LE');\r\n            doc.getContext().addLevelEntity(parent, leftEntity);\r\n\r\n            doc.getContext().addConnection(variant_1.id, leftEntity.id, 'Связь с первым вариантом.');\r\n\r\n            let rightEntity = self.application.factory.createILevelNode(doc,\r\n                'Right entity', 'RT');\r\n            doc.getContext().addLevelEntity(parent, rightEntity);\r\n\r\n            doc.getContext().addConnection(variant_2.id, rightEntity.id, 'Связь со вторым вариантом.');\r\n\r\n            let frontEntity = self.application.factory.createILevelNode(doc,\r\n                'Front entity', 'FNT');\r\n            doc.getContext().addLevelEntity(parent, frontEntity);\r\n\r\n            doc.getContext().addConnection(variant_3.id, frontEntity.id, 'Связь с третьим вариантом.');\r\n        };\r\n\r\n        for(let n of secondLevelEntities){\r\n            addChildSchema(n.id);\r\n        }\r\n\r\n        transaction.commit();\r\n        return doc;\r\n    }\r\n\r\n    // Документы, доступные на сервере\r\n    private documents : Array<IDocument>;\r\n\r\n    /**\r\n     * Получить перечень документов, имеющихся на сервере.\r\n     * @returns {Array<IDocumentInfo>}\r\n     */\r\n    getDocumentList() : Array<IDocumentInfo>{\r\n        let arr = [];\r\n\r\n        for(let n of this.documents){\r\n            let info = this.application.factory.createIDocumentInfo(\r\n                n.id,n.getContext().documentCode,n.getContext().documentName);\r\n            arr.push(info);\r\n        }\r\n        return arr;\r\n    }\r\n\r\n    /**\r\n     * Получить идентификатор текущего пользователя.\r\n     * @returns {string}\r\n     */\r\n    getCurrentUserId() : UserID{\r\n        return 'IVANOV-IVAN-ID';\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/api/test/fakes/FakeDataProvider.ts","import {BrowserModule} from '@angular/platform-browser';\r\nimport {NgModule} from '@angular/core';\r\nimport {AppRoutingModule} from './modules/app-routing.module';\r\nimport {AppComponent} from './components/app/app.component';\r\nimport {BrowserAnimationsModule} from \"@angular/platform-browser/animations\";\r\nimport {MaterialModule} from \"./modules/material.module\";\r\nimport {NavigationComponent} from './components/navigation/navigation.component';\r\nimport {EditorComponent} from './components/editor/editor.component';\r\nimport {SidebarComponent} from './components/sidebar/sidebar.component';\r\nimport {DocumentEditorComponent} from './components/document-editor/document-editor.component';\r\nimport {DocumentListComponent} from './components/document-list/document-list.component';\r\nimport {LevelEditorComponent} from './components/level-editor/level-editor.component';\r\nimport {ReactiveFormsModule} from \"@angular/forms\";\r\nimport {ColorPickerComponent} from \"./components/color-picker/color-picker.component\";\r\nimport {AppApiService} from \"./services/app-api.service\";\r\nimport {DataService} from \"./services/data.service\";\r\nimport {ToastModule, ToastOptions} from \"ng2-toastr\";\r\nimport {ToastService} from \"./services/toast.service\";\r\nimport {ToastCustomOptions} from \"./toast-custom-options\";\r\nimport {MainMenuComponent} from './components/main-menu/main-menu.component';\r\nimport {SignalRService} from \"./services/signal-r.service\";\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AppComponent,\r\n    NavigationComponent,\r\n    EditorComponent,\r\n    SidebarComponent,\r\n    DocumentEditorComponent,\r\n    DocumentListComponent,\r\n    LevelEditorComponent,\r\n    ColorPickerComponent,\r\n    MainMenuComponent\r\n  ],\r\n  imports: [\r\n    BrowserModule,\r\n    AppRoutingModule,\r\n    BrowserAnimationsModule,\r\n    MaterialModule,\r\n    ReactiveFormsModule,\r\n    ToastModule.forRoot()\r\n  ],\r\n  providers: [\r\n    {provide: AppApiService, useClass: AppApiService},\r\n    {provide: DataService, useClass: DataService},\r\n    {provide: ToastService, useClass: ToastService},\r\n    {provide: ToastOptions, useClass: ToastCustomOptions},\r\n    {provide: SignalRService, useClass: SignalRService},\r\n  ],\r\n  bootstrap: [AppComponent]\r\n})\r\nexport class AppModule {\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/app/app.module.ts","module.exports = \"<app-main-menu></app-main-menu>\\r\\n<router-outlet></router-outlet>\\r\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// G:/Projects/ТхПр/thpr2/src/app/components/app/app.component.html\n// module id = ../../../../../src/app/components/app/app.component.html\n// module chunks = main","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// G:/Projects/ТхПр/thpr2/src/app/components/app/app.component.scss\n// module id = ../../../../../src/app/components/app/app.component.scss\n// module chunks = main","import {Component, OnInit, ViewContainerRef} from '@angular/core';\r\nimport {ToastsManager} from \"ng2-toastr\";\r\nimport {ToastService} from \"../../services/toast.service\";\r\n\r\n@Component({\r\n  selector: 'app-root',\r\n  templateUrl: './app.component.html',\r\n  styleUrls: ['./app.component.scss']\r\n})\r\nexport class AppComponent implements OnInit {\r\n\r\n  constructor(public toastr: ToastsManager, vcr: ViewContainerRef, private toastsService: ToastService) {\r\n    this.toastr.setRootViewContainerRef(vcr);\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.toastsService.toastObservable.subscribe(toastInfo => this.toastr[toastInfo.type](toastInfo.message, toastInfo.title));\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/app/components/app/app.component.ts","import {\r\n  AfterViewInit,\r\n  ChangeDetectionStrategy,\r\n  ChangeDetectorRef,\r\n  Component,\r\n  ElementRef,\r\n  forwardRef,\r\n  HostListener,\r\n  Input,\r\n  NgZone,\r\n  ViewChild\r\n} from '@angular/core';\r\nimport {ControlValueAccessor, NG_VALUE_ACCESSOR} from '@angular/forms';\r\nimport {Observable} from 'rxjs/Observable';\r\nimport 'rxjs/add/observable/fromEvent';\r\nimport 'rxjs/add/operator/debounceTime';\r\n\r\n@Component({\r\n  selector: 'color-picker',\r\n  templateUrl: './color-picker.html',\r\n  styleUrls: ['./color-picker.css'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  providers: [{\r\n    provide: NG_VALUE_ACCESSOR,\r\n    useExisting: forwardRef(() => ColorPickerComponent),\r\n    multi: true,\r\n  }],\r\n})\r\nexport class ColorPickerComponent implements AfterViewInit, ControlValueAccessor {\r\n\r\n  // Value accessors\r\n  onChange: Function = () => null;\r\n  onTouched: Function;\r\n\r\n  @ViewChild('bar') barEl: ElementRef;\r\n  @ViewChild('sat') satEl: ElementRef;\r\n  @ViewChild('input') inputEl: ElementRef;\r\n\r\n  hexPattern = /^([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i;\r\n\r\n  extraColorsInner: string[] = [];\r\n  color = [0, 100, 50];\r\n\r\n  barHeight = 200;\r\n  barClicked = false;\r\n  barPickerTopPosition = 0;\r\n\r\n  satWidth = 270;\r\n  satHeight = 200;\r\n  satCliked = false;\r\n  satPickerTopPosition: string;\r\n  satPickerLeftPosition: string;\r\n\r\n  dropDownOpen = false;\r\n\r\n  constructor(private _ngZone: NgZone,\r\n              private elementRef: ElementRef,\r\n              private _cdr: ChangeDetectorRef) {\r\n  }\r\n\r\n  @HostListener('mousemove', ['$event'])\r\n  onMouseMove(event: MouseEvent) {\r\n    if (this.barClicked) {\r\n      this.setBarPickerValue(event);\r\n    } else if (this.satCliked) {\r\n      this.setSatPickerValue(event);\r\n    }\r\n  }\r\n\r\n  @HostListener('mouseup', ['$event'])\r\n  onMouseUp(event: MouseEvent) {\r\n    if (this.barClicked || this.satCliked) {\r\n      this.barClicked = false;\r\n      this.satCliked = false;\r\n    }\r\n  }\r\n\r\n  @HostListener('document:click', ['$event'])\r\n  handleBlurClick(e: MouseEvent) {\r\n    if (!this.dropDownOpen) return;\r\n    let target = e.srcElement || e.target;\r\n    if (this.elementRef.nativeElement.contains(target) || this.elementRef.nativeElement === target) {\r\n      return;\r\n    } else {\r\n      this.dropDownOpen = false;\r\n    }\r\n  }\r\n\r\n  // TODO: Add logic for formating color types\r\n  @Input()\r\n  set extraColors(colors: string[]) {\r\n    const final: string[] = [];\r\n    colors.forEach(color => {\r\n      const col = this._validHex(color);\r\n      if (col) {\r\n        final.push(col);\r\n      }\r\n    });\r\n\r\n    this.extraColorsInner = final;\r\n  };\r\n\r\n  get barPickerStyle() {\r\n    const toReturn: any = {\r\n      background: this.hslBackgroundColor\r\n    };\r\n\r\n    if (this.barPickerTopPosition) {\r\n      toReturn.top = `${this.barPickerTopPosition}%`;\r\n    }\r\n\r\n    return toReturn;\r\n  }\r\n\r\n  get satPickerStyle() {\r\n    const toReturn: any = {\r\n      background: this.hslFullColor\r\n    };\r\n\r\n    if (this.satPickerTopPosition) {\r\n      toReturn.top = this.satPickerTopPosition;\r\n    }\r\n\r\n    if (this.satPickerLeftPosition) {\r\n      toReturn.left = this.satPickerLeftPosition;\r\n    }\r\n\r\n    return toReturn;\r\n  }\r\n\r\n  get hslBackgroundColor() {\r\n    return `hsl(${this.color[0]}, 100%, 50%)`;\r\n  }\r\n\r\n  get hslFullColor() {\r\n    return `hsl(${this.color[0]}, ${this.color[1]}%, ${this.color[2]}%)`;\r\n  }\r\n\r\n  get hexColor() {\r\n    const rgbColor = this._hslToRgb(this.color[0], this.color[1], this.color[2]);\r\n    return Math.floor(((1 << 24) + (rgbColor[0] << 16) + (rgbColor[1] << 8) + rgbColor[2])).toString(16).slice(1).toUpperCase();\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    this.inputEl.nativeElement.value = this.hexColor;\r\n    this._registerInputListener();\r\n  }\r\n\r\n  toggle() {\r\n    this.dropDownOpen = !this.dropDownOpen;\r\n  }\r\n\r\n  barClick(event: MouseEvent) {\r\n    this.barClicked = true;\r\n    this.setBarPickerValue(event);\r\n  }\r\n\r\n  satClick(event: MouseEvent) {\r\n    this.satCliked = true;\r\n    this.setSatPickerValue(event);\r\n  }\r\n\r\n  setBarPickerValue(event: MouseEvent) {\r\n    const barPosition = this._offset(this.barEl.nativeElement).top;\r\n\r\n    this.barPickerTopPosition = this._segmentNumber(((event.pageY - barPosition) / this.barHeight) * 100, 0, this.barHeight / 2);\r\n    this.color[0] = this._segmentNumber(Math.floor((((event.pageY - barPosition) / this.barHeight) * 360)), 0, 360);\r\n    this.inputEl.nativeElement.value = this.hexColor;\r\n    this.onChange('#' + this.inputEl.nativeElement.value);\r\n  }\r\n\r\n  setSatPickerValue(event: MouseEvent) {\r\n    const satPosition = this._offset(this.satEl.nativeElement);\r\n    const leftPosition = this._segmentNumber(event.pageX - satPosition.left, 0, this.satWidth);\r\n\r\n    this.satPickerLeftPosition = leftPosition + 'px';\r\n    this.satPickerTopPosition = this._segmentNumber(event.pageY - satPosition.top, 0, this.satHeight) + 'px';\r\n\r\n    this.color[1] = Math.floor((leftPosition / this.satWidth) * 100);\r\n\r\n    let x = event.pageX - satPosition.left;\r\n    let y = event.pageY - satPosition.top;\r\n\r\n    if (x > this.satWidth) {\r\n      x = this.satWidth;\r\n    } else if (x < 0) {\r\n      x = 0;\r\n    }\r\n\r\n    if (y > this.satHeight) {\r\n      y = this.satHeight;\r\n    } else if (y < 0) {\r\n      y = 0;\r\n    }\r\n\r\n    // convert between hsv and hsl\r\n    const xRatio = x / this.satWidth * 100;\r\n    const yRatio = y / this.satHeight * 100;\r\n    const hsvValue = 1 - (yRatio / 100);\r\n    const hsvSaturation = xRatio / 100;\r\n    const lightness = (hsvValue / 2) * (2 - hsvSaturation);\r\n\r\n    this.color[2] = Math.floor(lightness * 100);\r\n    this.inputEl.nativeElement.value = this.hexColor;\r\n    this.onChange('#' + this.inputEl.nativeElement.value);\r\n  }\r\n\r\n  hexChange(color: string, change = true) {\r\n    const result = this.hexPattern.exec(color);\r\n    if (result) {\r\n      this.inputEl.nativeElement.value = color;\r\n      const r = parseInt(result[1], 16);\r\n      const g = parseInt(result[2], 16);\r\n      const b = parseInt(result[3], 16);\r\n\r\n      const hsl = this._rgbToHsl(r, g, b);\r\n      const hsv = this._rgbToHsv(r, g, b);\r\n\r\n      this.barPickerTopPosition = hsl[0] / 360 * 100;\r\n      this.satPickerLeftPosition = hsl[1] + '%';\r\n      this.satPickerTopPosition = 100 - ( hsv[2] * 100 ) + '%';\r\n\r\n      this.color[0] = hsl[0];\r\n      this.color[1] = hsl[1];\r\n      this.color[2] = hsl[2];\r\n\r\n      if (change) {\r\n        this.onChange('#' + this.inputEl.nativeElement.value);\r\n      }\r\n\r\n      this._cdr.detectChanges();\r\n    }\r\n  }\r\n\r\n  private _registerInputListener() {\r\n    this._ngZone.runOutsideAngular(() => {\r\n      Observable.fromEvent(this.inputEl.nativeElement, 'input')\r\n        .debounceTime(300)\r\n        .subscribe(_ => {\r\n          this.inputEl.nativeElement.value = this.inputEl.nativeElement.value.toUpperCase();\r\n          if (this.inputEl.nativeElement.value.length > 6) {\r\n            this.inputEl.nativeElement.value = this.inputEl.nativeElement.value.slice(0, 6);\r\n            this.hexChange(this.inputEl.nativeElement.value);\r\n          } else if (this.inputEl.nativeElement.value.length === 6) {\r\n            this.hexChange(this.inputEl.nativeElement.value);\r\n          }\r\n        });\r\n    });\r\n  }\r\n\r\n  // TODO: Add logic for formating color types\r\n  writeValue(value: any) {\r\n    const val = this._validHex(value);\r\n    if (val) {\r\n      this.hexChange(val, false);\r\n    } else {\r\n      this.hexChange('000000', false);\r\n    }\r\n  }\r\n\r\n  registerOnChange(fn: any) {\r\n    this.onChange = fn;\r\n  }\r\n\r\n  registerOnTouched(fn: any) {\r\n    this.onTouched = fn;\r\n  }\r\n\r\n  // Helpers\r\n  private _isWindow(obj: any) {\r\n    return obj !== null && obj === obj.window;\r\n  }\r\n\r\n  private _getWindow(element: any) {\r\n    return this._isWindow(element) ? element : element.nodeType === 9 && element.defaultView;\r\n  }\r\n\r\n  private _offset(element: any) {\r\n\r\n    const doc = element && element.ownerDocument;\r\n    const docElem = doc.documentElement;\r\n    const win = this._getWindow(doc);\r\n\r\n    let box = {\r\n      top: 0,\r\n      left: 0\r\n    };\r\n\r\n    if (typeof element.getBoundingClientRect !== typeof undefined) {\r\n      box = element.getBoundingClientRect();\r\n    }\r\n\r\n    return {\r\n      top: box.top + win.pageYOffset - docElem.clientTop,\r\n      left: box.left + win.pageXOffset - docElem.clientLeft\r\n    };\r\n  }\r\n\r\n  // Color Helpers\r\n  private _validHex(color: any) {\r\n    if (typeof color !== 'string') {\r\n      return;\r\n    }\r\n\r\n    if (color[0] === '#') {\r\n      color = color.slice(1);\r\n    }\r\n\r\n    if (this.hexPattern.test(color)) {\r\n      return color.toUpperCase();\r\n    }\r\n\r\n    return;\r\n  }\r\n\r\n  private _segmentNumber(num: number, min: number, max: number) {\r\n    return Math.max(min, Math.min(num, max));\r\n  }\r\n\r\n  private _isPercentage(n: any) {\r\n    return typeof n === 'string' && n.indexOf('%') !== -1;\r\n  }\r\n\r\n  private _isOnePointZero(n: any) {\r\n    return typeof n === 'string' && n.indexOf('.') !== -1 && parseFloat(n) === 1;\r\n  }\r\n\r\n  private _bound01(n: any, max: any) {\r\n    if (this._isOnePointZero(n)) {\r\n      n = '100%';\r\n    }\r\n\r\n    const processPercent = this._isPercentage(n);\r\n    n = Math.min(max, Math.max(0, parseFloat(n)));\r\n\r\n    // Automatically convert percentage into number\r\n    if (processPercent) {\r\n      n = (n * max) / 100;\r\n    }\r\n\r\n    // Handle floating point rounding errors\r\n    if ((Math.abs(n - max) < 0.000001)) {\r\n      return 1;\r\n    }\r\n\r\n    // Convert into [0, 1] range if it isn't already\r\n    return (n % max) / parseFloat(max);\r\n  }\r\n\r\n  private _hslToRgb(h: number, s: number, l: number) {\r\n    let r, g, b;\r\n\r\n    h = this._bound01(h, 360);\r\n    s = this._bound01(s, 100);\r\n    l = this._bound01(l, 100);\r\n\r\n    function hue2rgb(p: number, q: number, t: number) {\r\n      if (t < 0) {\r\n        t += 1;\r\n      } else if (t > 1) {\r\n        t -= 1;\r\n      } else if (t < 1 / 6) {\r\n        return p + (q - p) * 6 * t;\r\n      } else if (t < 1 / 2) {\r\n        return q;\r\n      } else if (t < 2 / 3) {\r\n        return p + (q - p) * (2 / 3 - t) * 6;\r\n      }\r\n      return p;\r\n    }\r\n\r\n    if (s === 0) {\r\n      r = g = b = l; // achromatic\r\n    } else {\r\n      const q = l < 0.5 ? l * (1 + s) : l + s - l * s;\r\n      const p = 2 * l - q;\r\n      r = hue2rgb(p, q, h + 1 / 3);\r\n      g = hue2rgb(p, q, h);\r\n      b = hue2rgb(p, q, h - 1 / 3);\r\n    }\r\n\r\n    return [r * 255, g * 255, b * 255];\r\n  }\r\n\r\n  private _rgbToHsv(r: number, g: number, b: number) {\r\n    const max = Math.max(r, g, b);\r\n    const min = Math.min(r, g, b);\r\n    const d = max - min;\r\n    const s = (max === 0 ? 0 : d / max);\r\n    const v = max / 255;\r\n\r\n    let h;\r\n\r\n    switch (max) {\r\n      case min:\r\n        h = 0;\r\n        break;\r\n      case r:\r\n        h = (g - b) + d * (g < b ? 6 : 0);\r\n        h /= 6 * d;\r\n        break;\r\n      case g:\r\n        h = (b - r) + d * 2;\r\n        h /= 6 * d;\r\n        break;\r\n      case b:\r\n        h = (r - g) + d * 4;\r\n        h /= 6 * d;\r\n        break;\r\n    }\r\n\r\n    return [h, s, v];\r\n  }\r\n\r\n  private _rgbToHsl(r: number, g: number, b: number) {\r\n    r = r / 255;\r\n    g = g / 255;\r\n    b = b / 255;\r\n\r\n    const maxColor = Math.max(r, g, b);\r\n    const minColor = Math.min(r, g, b);\r\n    // Calculate L:\r\n    let L = (maxColor + minColor) / 2;\r\n    let S = 0;\r\n    let H = 0;\r\n\r\n    if (maxColor !== minColor) {\r\n      // Calculate S:\r\n      if (L < 0.5) {\r\n        S = (maxColor - minColor) / (maxColor + minColor);\r\n      } else {\r\n        S = (maxColor - minColor) / (2.0 - maxColor - minColor);\r\n      }\r\n      // Calculate H:\r\n      if (r === maxColor) {\r\n        H = (g - b) / (maxColor - minColor);\r\n      } else if (g === maxColor) {\r\n        H = 2.0 + (b - r) / (maxColor - minColor);\r\n      } else {\r\n        H = 4.0 + (r - g) / (maxColor - minColor);\r\n      }\r\n    }\r\n\r\n    L = L * 100;\r\n    S = S * 100;\r\n    H = H * 60;\r\n\r\n    if (H < 0) {\r\n      H += 360;\r\n    }\r\n\r\n    return [H, S, L];\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/app/components/color-picker/color-picker.component.ts","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host {\\r\\n  display: block;\\r\\n  position: relative;\\r\\n}\\r\\n\\r\\n.jaspero__colorpicker-wrapper {\\r\\n  display: inline-block;\\r\\n  position: relative;\\r\\n  min-width: 100px;\\r\\n}\\r\\n\\r\\n.jaspero__colorpicker-preview {\\r\\n  width: 70px;\\r\\n  height: 35px;\\r\\n  position: absolute;\\r\\n  left: 0;\\r\\n  top: 0;\\r\\n  border-radius: 4px;\\r\\n}\\r\\n\\r\\n.jaspero__colorpicker-input {\\r\\n  font-family: sans-serif;\\r\\n  border: 0;\\r\\n  padding: 10px 10px 10px 50px;\\r\\n  outline: none;\\r\\n  width: 100%;\\r\\n  border-radius: 3px;\\r\\n  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, .2), 0 1px 1px 0 rgba(0, 0, 0, .14), 0 2px 1px -1px rgba(0, 0, 0, .12);\\r\\n}\\r\\n\\r\\n.jaspero__colorpicker-dropdown {\\r\\n  z-index: 1001;\\r\\n  position: absolute;\\r\\n  top: 110%;\\r\\n  left: 0;\\r\\n  opacity: 0;\\r\\n  pointer-events: none;\\r\\n  -webkit-transform: translateY(-10px);\\r\\n          transform: translateY(-10px);\\r\\n  transition: all .2s ease;\\r\\n  min-width: 300px;\\r\\n  padding: 10px;\\r\\n  background: white;\\r\\n  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, .2), 0 1px 1px 0 rgba(0, 0, 0, .14), 0 2px 1px -1px rgba(0, 0, 0, .12);\\r\\n}\\r\\n\\r\\n.jaspero__colorpicker-dropdown.active {\\r\\n  opacity: 1;\\r\\n  pointer-events: auto;\\r\\n  -webkit-transform: translateY(0px);\\r\\n          transform: translateY(0px);\\r\\n}\\r\\n\\r\\n.jaspero__colorpicker-dropdown__bar {\\r\\n  background: linear-gradient(to bottom, #ff0000 0%, #ffff00 17%, #00ff00 33%, #00ffff 50%, #0000ff 67%, #ff00ff 83%, #ff0000 100%);\\r\\n  width: 14px;\\r\\n  height: 200px;\\r\\n  position: relative;\\r\\n  display: inline-block;\\r\\n  cursor: pointer;\\r\\n  float: right;\\r\\n}\\r\\n\\r\\n.jaspero__colorpicker-dropdown__extra-color {\\r\\n  width: 20px;\\r\\n  height: 20px;\\r\\n}\\r\\n\\r\\n.jaspero__colorpicker-dropdown__bar_picker {\\r\\n  position: absolute;\\r\\n  left: 50%;\\r\\n  top: 0;\\r\\n  -webkit-transform: translate(-50%, -50%);\\r\\n  transform: translate(-50%, -50%);\\r\\n  height: 7px;\\r\\n  width: 14px;\\r\\n  border: 2px solid white;\\r\\n  cursor: pointer;\\r\\n  box-shadow: 2px 2px 6px 0 rgba(0, 0, 0, .3);\\r\\n  background: hsl(0, 100%, 50%);\\r\\n}\\r\\n\\r\\n.jaspero__colorpicker-dropdown__bar_picker.active {\\r\\n  width: 18px;\\r\\n  height: 18px;\\r\\n}\\r\\n\\r\\n.jaspero__colorpicker-dropdown__sat {\\r\\n  width: 90%;\\r\\n  height: 200px;\\r\\n  display: inline-block;\\r\\n  background: hsl(0, 100%, 50%);\\r\\n  position: relative;\\r\\n  cursor: pointer;\\r\\n  -webkit-user-select: none;\\r\\n  -moz-user-select: none;\\r\\n  -ms-user-select: none;\\r\\n  user-select: none;\\r\\n}\\r\\n\\r\\n.jaspero__colorpicker-dropdown__sat_sat_picker {\\r\\n  position: absolute;\\r\\n  -webkit-transform: translate(-50%, -50%);\\r\\n  transform: translate(-50%, -50%);\\r\\n  width: 12px;\\r\\n  height: 12px;\\r\\n  top: 0;\\r\\n  left: 100%;\\r\\n  border-radius: 50%;\\r\\n  border: 2px solid white;\\r\\n  z-index: 10;\\r\\n  transition: width .25s, height .25s;\\r\\n  background: hsl(0, 100%, 50%);\\r\\n  box-shadow: 2px 2px 6px 0 rgba(0, 0, 0, .3);\\r\\n}\\r\\n\\r\\n.jaspero__colorpicker-dropdown__sat_sat_picker.active {\\r\\n  width: 16px;\\r\\n  height: 16px;\\r\\n}\\r\\n\\r\\n.jaspero__colorpicker-dropdown__sat_white,\\r\\n.jaspero__colorpicker-dropdown__sat_black {\\r\\n  position: absolute;\\r\\n  top: 0;\\r\\n  right: 0;\\r\\n  bottom: 0;\\r\\n  left: 0;\\r\\n}\\r\\n\\r\\n.jaspero__colorpicker-dropdown__sat_white {\\r\\n  background: linear-gradient(to right, #fff, rgba(204, 154, 129, 0));\\r\\n}\\r\\n\\r\\n.jaspero__colorpicker-dropdown__sat_black {\\r\\n  background: linear-gradient(to top, #000, rgba(204, 154, 129, 0));\\r\\n}\\r\\n\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// G:/Projects/ТхПр/thpr2/src/app/components/color-picker/color-picker.css\n// module id = ../../../../../src/app/components/color-picker/color-picker.css\n// module chunks = main","module.exports = \"<div class=\\\"jaspero__colorpicker-wrapper\\\" (click)=\\\"toggle()\\\">\\r\\n  <div class=\\\"jaspero__colorpicker-preview\\\" [style.background]=\\\"hslFullColor\\\"></div>\\r\\n  <input class=\\\"jaspero__colorpicker-input\\\" type=\\\"text\\\" #input style=\\\"visibility: hidden;\\\"/>\\r\\n</div>\\r\\n<div class=\\\"jaspero__colorpicker-dropdown\\\" [class.active]=\\\"dropDownOpen\\\">\\r\\n\\r\\n  <div class=\\\"jaspero__colorpicker-dropdown__sat\\\" #sat [style.background]=\\\"hslBackgroundColor\\\"\\r\\n       (mousedown)=\\\"satClick($event)\\\">\\r\\n    <div class=\\\"jaspero__colorpicker-dropdown__sat_white\\\"></div>\\r\\n    <div class=\\\"jaspero__colorpicker-dropdown__sat_black\\\"></div>\\r\\n    <div class=\\\"jaspero__colorpicker-dropdown__sat_sat_picker\\\" [class.active]=\\\"satCliked\\\"\\r\\n         [ngStyle]=\\\"satPickerStyle\\\"></div>\\r\\n  </div>\\r\\n  <div class=\\\"jaspero__colorpicker-dropdown__bar\\\" #bar (mousedown)=\\\"barClick($event)\\\">\\r\\n    <div class=\\\"jaspero__colorpicker-dropdown__bar_picker\\\" [class.active]=\\\"barClicked\\\"\\r\\n         [ngStyle]=\\\"barPickerStyle\\\"></div>\\r\\n  </div>\\r\\n  <div class=\\\"jaspero__colorpicker-dropdown__extra\\\" *ngIf=\\\"extraColorsInner.length\\\">\\r\\n    <h5>Extra colors</h5>\\r\\n    <div class=\\\"jaspero__colorpicker-dropdown__extra-color\\\" *ngFor=\\\"let color of extraColorsInner\\\"\\r\\n         [style.background]=\\\"'#' + color\\\" (click)=\\\"hexChange(color)\\\"></div>\\r\\n  </div>\\r\\n</div>\\r\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// G:/Projects/ТхПр/thpr2/src/app/components/color-picker/color-picker.html\n// module id = ../../../../../src/app/components/color-picker/color-picker.html\n// module chunks = main","module.exports = \"<app-navigation (navigate)=\\\"onNavigate($event)\\\" [documentSource]=\\\"documentSource\\\"\\r\\n                [viewRootSource]=\\\"viewRootSource\\\"></app-navigation>\\r\\n<mat-sidenav-container class=\\\"example-container no-select\\\">\\r\\n  <mat-sidenav [opened]=\\\"true\\\" mode=\\\"side\\\" #sidenav class=\\\"example-sidenav\\\">\\r\\n    <app-sidebar tabindex=\\\"2\\\" [documentSource]=\\\"documentSource\\\"\\r\\n                 [selectionSource]=\\\"selectionSource.asObservable()\\\"></app-sidebar>\\r\\n  </mat-sidenav>\\r\\n  <div class=\\\"example-sidenav-content\\\">\\r\\n    <app-editor tabindex=\\\"1\\\" class=\\\"full-size\\\" (select)=\\\"onEditorSelection($event)\\\"\\r\\n                (viewRootChange)=\\\"editorViewRootChange($event)\\\"\\r\\n                [documentSource]=\\\"documentSource\\\"\\r\\n                [navigationSource]=\\\"navigationSource\\\"></app-editor>\\r\\n  </div>\\r\\n</mat-sidenav-container>\\r\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// G:/Projects/ТхПр/thpr2/src/app/components/document-editor/document-editor.component.html\n// module id = ../../../../../src/app/components/document-editor/document-editor.component.html\n// module chunks = main","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".example-container {\\n  width: 100vw;\\n  height: calc(100vh - 50px - 50px);\\n  border: 1px solid rgba(0, 0, 0, 0.5); }\\n\\n.example-sidenav-content {\\n  display: -webkit-box;\\n  display: -ms-flexbox;\\n  display: flex;\\n  height: 100%;\\n  -webkit-box-align: center;\\n      -ms-flex-align: center;\\n          align-items: center;\\n  -webkit-box-pack: center;\\n      -ms-flex-pack: center;\\n          justify-content: center;\\n  position: relative; }\\n\\n.example-sidenav {\\n  padding: 20px; }\\n\\n.full-size {\\n  width: 100%;\\n  height: 100%;\\n  overflow: hidden; }\\n\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// G:/Projects/ТхПр/thpr2/src/app/components/document-editor/document-editor.component.scss\n// module id = ../../../../../src/app/components/document-editor/document-editor.component.scss\n// module chunks = main","import {AfterViewInit, Component, NgZone, OnDestroy, OnInit} from '@angular/core';\nimport {Subject} from \"rxjs/Subject\";\nimport {NavigationRecord} from \"../../models/navigation-record\";\nimport {ActivatedRoute} from \"@angular/router\";\nimport {ToastService} from \"../../services/toast.service\";\nimport {AppApiService} from \"../../services/app-api.service\";\nimport {Subscription} from \"rxjs/Subscription\";\nimport {IDocument} from \"../../../api/src/ts/interfaces/IDocument\";\n\n@Component({\n  selector: 'app-tech-editor',\n  templateUrl: './document-editor.component.html',\n  styleUrls: ['./document-editor.component.scss']\n})\nexport class DocumentEditorComponent implements OnInit, AfterViewInit, OnDestroy {\n  public navigationSource: Subject<any> = new Subject();\n  public selectionSource: Subject<any[]> = new Subject();\n  public viewRootSource: Subject<string> = new Subject();\n  public documentSource: Subject<IDocument> = new Subject();\n\n  private subscriptions: Subscription[] = [];\n\n  constructor(private ngZone: NgZone,\n              private appApi: AppApiService,\n              private route: ActivatedRoute,\n              private toastService: ToastService) {\n  }\n\n  ngOnInit(): void {\n  }\n\n  ngOnDestroy(): void {\n    this.subscriptions.forEach(s => s.unsubscribe());\n  }\n\n  ngAfterViewInit(): void {\n    this.subscriptions.push(this.route.paramMap.subscribe(params => {\n      const document = this.appApi.app.documentManager.open(params.get('id'));\n      if (document) {\n        this.documentSource.next(document);\n      }\n      else {\n        this.toastService.error('Документ не найден', 'Ошибка открытия документа');\n      }\n    }));\n  }\n\n  onNavigate(r: NavigationRecord) {\n    this.navigationSource.next(r);\n  }\n\n  onEditorSelection(selection: any[]) {\n    this.selectionSource.next(selection);\n  }\n\n  editorViewRootChange(id: string) {\n    this.viewRootSource.next(id);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/app/components/document-editor/document-editor.component.ts","module.exports = \"<h1>Документы</h1>\\r\\n<mat-card style=\\\"width: 800px; margin-left: 36px;\\\">\\r\\n  <mat-card-title>Список документов</mat-card-title>\\r\\n  <mat-card-content>\\r\\n    <mat-nav-list>\\r\\n      <mat-list-item *ngFor=\\\"let document of documents\\\" [routerLink]=\\\"'editor/' + document.id\\\">\\r\\n        <a matLine>{{document.code}} {{ document.name }}</a>\\r\\n      </mat-list-item>\\r\\n    </mat-nav-list>\\r\\n    <button mat-mini-fab routerLink=\\\"level-editor\\\" type=\\\"button\\\" title=\\\"Новый документ\\\">\\r\\n      <mat-icon>add</mat-icon>\\r\\n    </button>\\r\\n  </mat-card-content>\\r\\n</mat-card>\\r\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// G:/Projects/ТхПр/thpr2/src/app/components/document-list/document-list.component.html\n// module id = ../../../../../src/app/components/document-list/document-list.component.html\n// module chunks = main","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// G:/Projects/ТхПр/thpr2/src/app/components/document-list/document-list.component.scss\n// module id = ../../../../../src/app/components/document-list/document-list.component.scss\n// module chunks = main","import {Component, OnInit} from '@angular/core';\nimport {AppApiService} from \"../../services/app-api.service\";\nimport {IDocumentInfo} from \"../../../api/src/ts/interfaces/IDocumentInfo\";\n\n@Component({\n  selector: 'app-document-list',\n  templateUrl: './document-list.component.html',\n  styleUrls: ['./document-list.component.scss']\n})\nexport class DocumentListComponent implements OnInit {\n  public documents: Array<IDocumentInfo>;\n\n  constructor(private _appApi: AppApiService) {\n  }\n\n  ngOnInit() {\n    this.documents = this._appApi.app.documentManager.getServerDocumentsList();\n  }\n\n  showInfo(document: IDocumentInfo) {\n    alert(`${document.code} ${document.name}`);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/app/components/document-list/document-list.component.ts","module.exports = \"<div style=\\\"width: 100%; user-select: none;\\\" class=\\\"buttons-panel\\\">\\r\\n  <button (click)=\\\"do('un')\\\" title=\\\"Отменить\\\"><i class=\\\"material-icons md-36\\\">undo</i></button>\\r\\n  <button (click)=\\\"do('re')\\\" title=\\\"Повторить\\\"><i class=\\\"material-icons md-36\\\">redo</i></button>\\r\\n  <button (click)=\\\"createBlock()\\\" title=\\\"Cоздать блок\\\"><i class=\\\"material-icons md-36\\\">label</i></button>\\r\\n  <button (click)=\\\"createCondition()\\\" title=\\\"Cоздать условие\\\"><i class=\\\"material-icons md-36\\\">label_outline</i></button>\\r\\n  <!--<button (click)=\\\"deleteSelected()\\\" title=\\\"Удалить выбранное\\\"><i class=\\\"material-icons md-36\\\">delete_forever</i></button>-->\\r\\n  <!--<button (click)=\\\"alignHorizontal()\\\" title=\\\"Выровнять горизонтально\\\"><i class=\\\"material-icons md-36\\\">vertical_align_top</i></button>-->\\r\\n  <!--<button (click)=\\\"distributeHorizontal()\\\" title=\\\"Распределить горизонтально\\\"><i class=\\\"material-icons md-36\\\">view_week</i></button>-->\\r\\n  <!--<button (click)=\\\"alignVertical()\\\" title=\\\"Выровнять вертикально\\\"><i class=\\\"material-icons md-36\\\">format_align_left</i></button>-->\\r\\n  <!--<button (click)=\\\"distributeVertical()\\\" title=\\\"Распределить вертикально\\\"><i class=\\\"material-icons md-36\\\">reorder</i></button>-->\\r\\n  <!--<button (click)=\\\"alignHorizontalCenter()\\\" title=\\\"Выровнять горизонтально по центру\\\"><i class=\\\"material-icons md-36\\\">vertical_align_center</i></button>-->\\r\\n  <!--<button (click)=\\\"alignVerticalCenter()\\\" title=\\\"Выровнять вертикально по центру\\\"><i class=\\\"material-icons md-36\\\">format_align_center</i></button>-->\\r\\n  <button (click)=\\\"autoLayout()\\\" title=\\\"Авторасстановка\\\"><i class=\\\"material-icons md-36\\\">flash_auto</i></button>\\r\\n  <button (click)=\\\"zoomToFit()\\\" title=\\\"Показать все\\\"><i class=\\\"material-icons md-36\\\">zoom_out_map</i></button>\\r\\n  <button (click)=\\\"syncDocument()\\\"><i class=\\\"material-icons md-36\\\" title=\\\"Синхронизировать документ\\\">sync</i></button>\\r\\n  <button (click)=\\\"exportImage()\\\"><i class=\\\"material-icons md-36\\\" title=\\\"Экспорт в PNG\\\">burst_mode</i></button>\\r\\n  <button [matMenuTriggerFor]=\\\"menu\\\"><i class=\\\"material-icons md-36\\\" title=\\\"Показать вложенные\\\">collections_bookmark</i></button>\\r\\n  <mat-menu #menu=\\\"matMenu\\\">\\r\\n    <button *ngFor=\\\"let level of levels;\\\" mat-menu-item (click)=\\\"showNested(level)\\\">{{level}}</button>\\r\\n  </mat-menu>\\r\\n  <button (click)=\\\"hideNested()\\\"><i class=\\\"material-icons md-36\\\" title=\\\"Свернуть все\\\">collections_bookmark</i></button>\\r\\n\\r\\n</div>\\r\\n<!--<div *ngIf=\\\"!document\\\">-->\\r\\n<!--<mat-card>Документ не загружен</mat-card>-->\\r\\n<!--</div>-->\\r\\n<canvas #pixi class=\\\"no-select\\\"></canvas>\\r\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// G:/Projects/ТхПр/thpr2/src/app/components/editor/editor.component.html\n// module id = ../../../../../src/app/components/editor/editor.component.html\n// module chunks = main","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".buttons-panel button {\\n  width: 48px;\\n  height: 48px;\\n  border: none; }\\n\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// G:/Projects/ТхПр/thpr2/src/app/components/editor/editor.component.scss\n// module id = ../../../../../src/app/components/editor/editor.component.scss\n// module chunks = main","import {\r\n  AfterViewInit,\r\n  Component, EventEmitter, HostListener, Input, NgZone, OnDestroy, OnInit, Output,\r\n  ViewChild\r\n} from '@angular/core';\r\nimport {Zoom} from \"./zoom\";\r\nimport {MyInput} from \"./input\";\r\nimport Matrix = PIXI.Matrix;\r\nimport {SimpleBlock} from \"./objects/simple-block\";\r\nimport {Port} from \"./objects/port\";\r\nimport {Connection} from \"./objects/connection\";\r\nimport {EditorObject} from \"./objects/editor-object\";\r\nimport {Condition} from \"./objects/condition\";\r\nimport {PhantomConnection} from \"./objects/phantom-connection\";\r\nimport {Aligner} from \"./objects/aligner\";\r\nimport {SelectionFrame} from \"./objects/selection-frame\";\r\nimport {SelectorFn} from \"./selector-fn\";\r\nimport {Bump} from \"../../ext/bump\";\r\nimport WebGLRenderer = PIXI.WebGLRenderer;\r\nimport InteractionEvent = PIXI.interaction.InteractionEvent;\r\nimport {getLoader} from \"./get-loader\";\r\nimport {extractImage} from \"./extract-image\";\r\nimport * as _ from \"lodash\";\r\nimport {Case} from \"./objects/case\";\r\nimport {IConnection} from \"../../../api/src/ts/interfaces/IConnection\";\r\nimport {IDocument} from \"../../../api/src/ts/interfaces/IDocument\";\r\nimport {ICondition} from \"../../../api/src/ts/interfaces/ICondition\";\r\nimport {Observable} from \"rxjs/Observable\";\r\nimport {ILevelEntity} from \"../../../api/src/ts/interfaces/ILevelEntity\";\r\nimport {ILevelNode} from \"../../../api/src/ts/interfaces/ILevelNode\";\r\nimport {TypeNames} from \"../../../api/src/ts/enums/TypeNames\";\r\nimport {ConnectionFactoryArgs} from \"./classes/connection-factory-args\";\r\nimport {DataService} from \"../../services/data.service\";\r\nimport {DocumentEventNames} from \"../../../api/src/ts/enums/event_names/DocumentEventNames\";\r\nimport {IEventArgs} from \"../../../api/src/ts/interfaces/IEventArgs\";\r\nimport {Subscription} from \"rxjs/Subscription\";\r\nimport {ToastService} from \"../../services/toast.service\";\r\nimport {LevelNode} from \"../../../api/src/ts/classes/LevelNode\";\r\nimport {ObservableListener} from \"../../observable-listener\";\r\nimport \"rxjs/add/operator/mergeMap\";\r\nimport {IVariant} from \"../../../api/src/ts/interfaces/IVariant\";\r\nimport {DeleteButton} from \"./objects/delete-button\";\r\nimport {_IDocumentContext} from \"../../../api/src/ts/_internal_interfaces/_IDocumentContext\";\r\nimport {forEach} from \"@angular/router/src/utils/collection\";\r\nimport Container = PIXI.Container;\r\nimport {SignalRService} from \"../../services/signal-r.service\";\r\n\r\n@Component({\r\n  selector: 'app-editor',\r\n  templateUrl: './editor.component.html',\r\n  styleUrls: ['./editor.component.scss']\r\n})\r\nexport class EditorComponent implements OnInit, OnDestroy, AfterViewInit {\r\n  @ViewChild('pixi') pixiContainer;\r\n  @Input() navigationSource: Observable<any>;\r\n  @Input() documentSource: Observable<IDocument>;\r\n  @Output() select: EventEmitter<any[]> = new EventEmitter(true);\r\n  @Output() viewRootChange: EventEmitter<string> = new EventEmitter(true);\r\n  public document: IDocument;\r\n  private aligner: Aligner = new Aligner();\r\n  private renderer: PIXI.WebGLRenderer;\r\n  private game: PIXI.Container;\r\n  private connectionContainer: PIXI.Container;\r\n  private zoomContainer: PIXI.Container;\r\n  private overlay: PIXI.Container;\r\n  private stage: PIXI.Container;\r\n  private phantomConnection: PhantomConnection;\r\n  private zoom: Zoom;\r\n  private selectedPort: Port;\r\n  private selectedObjects: EditorObject[] = [];\r\n  private selectionFrame: SelectionFrame;\r\n  private bump: Bump = new Bump(PIXI);\r\n  private dragObjects: { object: EditorObject; offset: PIXI.Point }[] = [];\r\n  private ticker: PIXI.ticker.Ticker = new PIXI.ticker.Ticker();\r\n  private loader: PIXI.loaders.Loader;\r\n  private currentViewRootNode: ILevelNode;\r\n  private subscriptions: Subscription[] = [];\r\n  private input: MyInput;\r\n\r\n  public levels: string[] = [];\r\n\r\n  constructor(private ngZone: NgZone,\r\n              private toastService: ToastService,\r\n              private sirnalr: SignalRService,\r\n              private dataService: DataService) {\r\n  }\r\n\r\n  public ngOnInit() {\r\n    this.subscriptions.push(this.navigationSource.subscribe((id: string) => {\r\n      if (id !== this.currentViewRootNode.id) {\r\n        this.navigate(id);\r\n\r\n      }\r\n    }));\r\n    this.subscriptions.push(this.documentSource.subscribe((document: IDocument) => {\r\n      this.document = document;\r\n\r\n      this.ngZone.runOutsideAngular(() => this.init(document));\r\n    }));\r\n    this.subscriptions.push(this.documentSource.flatMap(document => ObservableListener.create(document, DocumentEventNames.DocumentChanged)).subscribe(e => this.documentChanged(e)));\r\n  }\r\n\r\n  public ngAfterViewInit() {\r\n    this.renderer = PIXI.autoDetectRenderer({\r\n      view: this.pixiContainer.nativeElement,\r\n      width: this.pixiContainer.nativeElement.parentElement.clientWidth,\r\n      height: this.pixiContainer.nativeElement.parentElement.clientHeight,\r\n      transparent: true,\r\n      autoResize: true,\r\n      antialias: true,\r\n    }) as WebGLRenderer;\r\n  }\r\n\r\n  public ngOnDestroy(): void {\r\n    if (this.input) this.input.dispose();\r\n    this.subscriptions.forEach(s => s.unsubscribe());\r\n    if (this.ticker) this.ticker.stop();\r\n    this.resetGame();\r\n\r\n    // самодельный хак\r\n    /// TODO: создать ишучу\r\n    //  в фильтер менеджере создается фильтров очень больше, чем на самом деле\r\n    this.destroyFilterManager();\r\n    ///\r\n\r\n    if (this.ticker) this.ticker.destroy();\r\n    if (this.renderer) {\r\n      this.renderer.destroy();\r\n      this.renderer = null;\r\n    }\r\n  }\r\n\r\n  @HostListener('window:resize')\r\n  onResize(event) {\r\n    if (!this.renderer) return;\r\n    const el = this.pixiContainer.nativeElement.parentElement;\r\n    const w = el.clientWidth;\r\n    const h = el.clientHeight;\r\n    const renderer = this.renderer;\r\n    renderer.view.style.width = w + \"px\";\r\n    renderer.view.style.height = h + \"px\";\r\n    renderer.resize(w, h);\r\n  }\r\n\r\n  public createBlock(): Observable<ILevelNode> {\r\n    return this.dataService.createNode(this.document, this.currentViewRootNode.id);\r\n  }\r\n\r\n  public createCondition(): Observable<ICondition> {\r\n    return this.dataService.createCondition(this.document, this.currentViewRootNode.id);\r\n  }\r\n\r\n  public autoLayout() {\r\n    this.aligner.autoAlign(this.game.children.filter(x => x instanceof EditorObject) as EditorObject[]);\r\n    this.zoomToFit();\r\n  }\r\n\r\n  public exportImage() {\r\n    this.updateZoom(new PIXI.Matrix());\r\n    extractImage(this.renderer, this.zoomContainer).then(() => this.updateZoom());\r\n  }\r\n\r\n  public zoomToFit() {\r\n    const zoomOffset = 0.85;\r\n    const xOffset = -150;\r\n    const f = () => {\r\n      const bounds: PIXI.Rectangle = this.game.getLocalBounds();\r\n      const realBounds = {x: bounds.x, y: bounds.y, width: bounds.width, height: bounds.height};\r\n      const desiredScale = Math.min(this.renderer.width / realBounds.width, this.renderer.height / realBounds.height) * zoomOffset;\r\n      const bCenter = new PIXI.Point(bounds.x + bounds.width / 2, bounds.y + bounds.height / 2);\r\n      const zoomCenter = this.game.toGlobal(bCenter);\r\n      this.zoom.setScaleCenter(zoomCenter.x, zoomCenter.y);\r\n      this.zoom.currentScale = desiredScale;\r\n      this.zoom.translateBy(this.renderer.width / 2 - zoomCenter.x, this.renderer.height / 2 - zoomCenter.y);\r\n      this.updateZoom();\r\n    };\r\n    f();\r\n    f();\r\n    this.zoom.translateBy(xOffset, 0);\r\n    this.updateZoom();\r\n  }\r\n\r\n  public deleteSelected() {\r\n    this.dataService.deleteObjects(this.document, this.selectedObjects);\r\n  }\r\n\r\n  public do(action: 'un' | 're'): void {\r\n    const result = (<any>this.document)[action + 'do']();\r\n    if (!result.success) this.toastService.warning(result.errorMessage);\r\n  }\r\n\r\n  public syncDocument() {\r\n    this.dataService.sync(this.document)\r\n      .catch(e => {\r\n        this.toastService.error(e, 'Ошибка синхронизации документа');\r\n        return Observable.of(false);\r\n      })\r\n      .subscribe((result: boolean) => result && this.toastService.success('Документ синхронизирован'));\r\n  }\r\n\r\n  private navigate(rootViewNode: string) {\r\n    if (!this.document) return;\r\n    this.resetGame();\r\n    this.createGame(this.document, rootViewNode);\r\n    this.deselectAll();\r\n  }\r\n\r\n  private resetGame() {\r\n    const dispose = (container: PIXI.Container) => {\r\n      if (!container) return;\r\n      if ('children' in container) container.children.forEach(x => {\r\n        if (x instanceof PIXI.Container) {\r\n          dispose(x);\r\n        }\r\n        else if ('dispose' in x) {\r\n          (<any>x).dispose();\r\n        }\r\n      });\r\n    };\r\n    dispose(this.stage);\r\n    if (this.game) this.game.removeChildren();\r\n    if (this.overlay) this.overlay.removeChildren();\r\n    if (this.connectionContainer) this.connectionContainer.removeChildren();\r\n  }\r\n\r\n  private destroyFilterManager() {\r\n    if (!this.renderer || !this.renderer.filterManager) return;\r\n    const filters = (<any>this.renderer.filterManager).managedFilters;\r\n    for (let i = 0; i < filters.length; i++) {\r\n      if (filters[i].glShaders[this.renderer.CONTEXT_UID]) {\r\n        filters[i].glShaders[this.renderer.CONTEXT_UID].destroy();\r\n        delete filters[i].glShaders[this.renderer.CONTEXT_UID];\r\n      }\r\n    }\r\n    this.renderer.filterManager.shaderCache = {};\r\n    this.renderer.filterManager.emptyPool();\r\n    (<any>this.renderer.filterManager).managedFilters = [];\r\n  }\r\n\r\n  private init(document: IDocument) {\r\n    if (!this.renderer) {\r\n      this.toastService.error('Рендерер отсутствует');\r\n      return;\r\n    }\r\n    const ticker = this.ticker;\r\n    const renderer = this.renderer;\r\n    ticker.stop();\r\n    this.initContainers();\r\n    this.initLoader(document);\r\n    if (this.input) this.input.dispose();\r\n    const input = this.input = new MyInput(renderer.plugins.interaction, this.pixiContainer);\r\n    this.setupInput(document, input);\r\n    ticker.add((deltaTime) => {\r\n      const mousePoint = this.game.toLocal(input.getMousePoint(), this.overlay);\r\n      this.zoom.setScaleCenter(mousePoint.x, mousePoint.y);\r\n      renderer.render(this.stage);\r\n    });\r\n    ticker.start();\r\n  }\r\n\r\n  private initLoader(document: IDocument) {\r\n    const afterLoad = () => this.createGame(document, document.getContext().getRootNode().id);\r\n    const getLoaderResult = getLoader(afterLoad);\r\n    this.loader = getLoaderResult.loader;\r\n    if (!getLoaderResult.willOnComplete) afterLoad();\r\n  }\r\n\r\n  private startDrag(e: InteractionEvent) {\r\n    this.dragObjects = this.selectedObjects.filter(o => o.canDrag).map(o => {\r\n      const globalPos = o.getGlobalPosition();\r\n      // TODO: исправить искривление смещения при масштабирования\r\n      return {\r\n        object: o,\r\n        offset: new PIXI.Point(e.data.global.x - globalPos.x, e.data.global.y - globalPos.y)\r\n      };\r\n    });\r\n  }\r\n\r\n  private updateZoom(_t: Matrix = null) {\r\n    const t: Matrix = _t || this.zoom.Transform;\r\n    this.connectionContainer.transform.localTransform.set(t.a, t.b, t.c, t.d, t.tx, t.ty);\r\n    this.game.transform.localTransform.set(t.a, t.b, t.c, t.d, t.tx, t.ty);\r\n    this.zoomContainer.transform.updateTransform(this.game.transform);\r\n  }\r\n\r\n  private createConnection(doc: IDocument, p1: Port, p2: Port) {\r\n    if (p1.parentBlock === p2.parentBlock) return;\r\n    if (p1.isInput === p2.isInput) return;\r\n    let sourcePort = p1.isInput ? p2 : p1;\r\n    let targetPort = p1.isInput ? p1 : p2;\r\n    if (sourcePort.parentBlock instanceof Condition) {\r\n      const condition = sourcePort.parentBlock as Condition;\r\n      const _case = _.find(condition.cases, {port: sourcePort}) as Case;\r\n      this.dataService.createConnection(doc, _case.id, targetPort.parentBlock.id);\r\n    }\r\n    this.dataService.createConnection(doc, sourcePort.parentBlock.id, targetPort.parentBlock.id);\r\n  }\r\n\r\n  private factoryConnection(args: ConnectionFactoryArgs) {\r\n    const connection = new Connection(args.sourcePort, args.targetPort);\r\n    connection.id = args.connectionId;\r\n    connection.setLoader(this.loader);\r\n    connection.setTicker(this.ticker);\r\n    connection.start();\r\n    return connection;\r\n  }\r\n\r\n  private createGame(document: IDocument, rootNodeId: string) {\r\n    this.viewRootChange.emit(rootNodeId);\r\n    const rootNode = this.currentViewRootNode = document.getContext().getObject(rootNodeId) as ILevelNode;\r\n\r\n    let levels = [];\r\n    (this.document.getContext() as _IDocumentContext).levels.forEach((k, v) => levels.push(k.name));\r\n    const index = levels.indexOf(this.currentViewRootNode.getLevel().name);\r\n    this.levels = levels.splice(index + 1, levels.length - 1);\r\n\r\n    this.zoom = new Zoom();\r\n    this.updateZoom();\r\n    this.phantomConnection = new PhantomConnection();\r\n    const nodes: Map<string, any> = new Map();\r\n    const connections: Map<string, IConnection> = new Map();\r\n    const childNodes: ILevelEntity[] = (rootNode.getChildrenNodes() as ILevelEntity[]).concat(rootNode.getChildrenConditions() as ILevelEntity[]);\r\n    childNodes.forEach((nodeValue: ILevelEntity) => {\r\n      switch (nodeValue.typeName) {\r\n        case TypeNames.LevelNode:\r\n          const levelNode = nodeValue as ILevelNode;\r\n          const block = this.createBlockFromLevelNode(levelNode);\r\n          nodes.set(levelNode.id, block);\r\n          this.game.addChild(block);\r\n          levelNode.getInputConnections().concat(levelNode.getOutputConnections()).forEach(x => {\r\n            if (!connections.has(x.id)) connections.set(x.id, x);\r\n          });\r\n          break;\r\n        case TypeNames.Condition:\r\n          const iCondition = nodeValue as ICondition;\r\n          const condition = new Condition(iCondition.name);\r\n          condition.id = iCondition.id;\r\n          condition.setTicker(this.ticker);\r\n          condition.setLoader(this.loader);\r\n          iCondition.getVariants().forEach(variant => {\r\n            const _case = new Case(variant.id, variant.text, condition);\r\n            condition.addCase(_case);\r\n            nodes.set(variant.id, _case);\r\n          });\r\n          nodes.set(iCondition.id, condition);\r\n          this.game.addChild(condition);\r\n          iCondition.getInputConnections().concat(_.flatMap(iCondition.getVariants().map(v => v.getOutputConnections()))).forEach(x => {\r\n            if (!connections.has(x.id)) connections.set(x.id, x);\r\n          });\r\n          break;\r\n        default:\r\n          throw new Error(`Непонятный тип ${nodeValue.typeName}`);\r\n      }\r\n    });\r\n\r\n    connections.forEach((iconnection, id) => {\r\n      const source: EditorObject | Case = nodes.get(iconnection.sourceId);\r\n      const target: EditorObject = nodes.get(iconnection.targetId);\r\n      const connection = this.factoryConnection({\r\n        sourcePort: source.getOutputPorts()[0],\r\n        targetPort: target.getInputPort(),\r\n        connectionId: id\r\n      });\r\n      this.connectionContainer.addChild(connection);\r\n    });\r\n\r\n    this.connectionContainer.addChild(this.phantomConnection);\r\n    if (this.game.children.length > 0) this.autoLayout();\r\n  }\r\n\r\n  private createBlockFromLevelNode(levelNode: ILevelNode) {\r\n    const block = new SimpleBlock();\r\n    block.blockName = levelNode.name;\r\n    block.blockCode = levelNode.code;\r\n    block.blockHours = levelNode.laborCosts || 0;\r\n    block.id = levelNode.id;\r\n    block.color = levelNode.getLevel().color;\r\n    block.setTicker(this.ticker);\r\n    block.setLoader(this.loader);\r\n    block.start();\r\n    return block;\r\n  }\r\n\r\n  private notifySelect(selectedObjects: EditorObject[]) {\r\n    this.ngZone.run(() => {\r\n      this.select.emit(this.selectedObjects.map(selectedObject => selectedObject.id));\r\n    });\r\n  }\r\n\r\n  private notifySelectById(ids: string[]) {\r\n    this.ngZone.run(() => {\r\n      this.select.emit(ids);\r\n    });\r\n  }\r\n\r\n  private startSelectionFrame(mousePos: PIXI.Point) {\r\n    if (this.selectionFrame) this.stopSelectionFrame();\r\n    this.selectionFrame = new SelectionFrame(mousePos.clone());\r\n    this.overlay.addChild(this.selectionFrame);\r\n  }\r\n\r\n  private stopSelectionFrame() {\r\n    this.overlay.removeChild(this.selectionFrame);\r\n    this.selectionFrame = null;\r\n  }\r\n\r\n  private updateSelectionFrame(mousePos: PIXI.Point) {\r\n    if (!this.selectionFrame) return;\r\n    this.selectionFrame.update(mousePos);\r\n  }\r\n\r\n  private getFrameSelection(rect: PIXI.Rectangle, direction: { down: boolean; right: boolean }): EditorObject[] {\r\n    return this.game.children.filter(direction.right ?\r\n      SelectorFn.containsSelectorFn(this.bump, rect) : SelectorFn.intersectSelectorFn(this.bump, rect)) as EditorObject[];\r\n  }\r\n\r\n  private selectAll() {\r\n    this.setSelectedObjects(this.game.children.filter(x => x instanceof EditorObject) as EditorObject[], true);\r\n  }\r\n\r\n  private deselectAll() {\r\n    this.setSelectedObjects([], false);\r\n    this.notifySelectById(this.getParentBlockId());\r\n  }\r\n\r\n  private setSelectedObjects(_objects: EditorObject | EditorObject[], select = true, append = false) {\r\n    const objects = _objects instanceof Array ? _objects : [_objects];\r\n    if (append) {\r\n      this.selectedObjects = this.selectedObjects.concat(objects);\r\n    } else {\r\n      this.selectedObjects.forEach(o => o.setSelected(false));\r\n      this.selectedObjects = this.select ? objects : [];\r\n    }\r\n    objects.forEach(o => o.setSelected(select));\r\n    if (this.selectedObjects.length > 0) this.notifySelect(this.selectedObjects);\r\n    else {\r\n      this.notifySelectById(this.getParentBlockId());\r\n    }\r\n  }\r\n\r\n  private getParentBlockId(): string[] {\r\n    const rootNodeId = this.document.getContext().getRootNode().id;\r\n    if (this.currentViewRootNode.id !== rootNodeId) return [this.currentViewRootNode.id];\r\n    else return [];\r\n  }\r\n\r\n  private stopDrag() {\r\n    this.dragObjects = [];\r\n  }\r\n\r\n  private updateDrag(e: PIXI.interaction.InteractionEvent) {\r\n    this.dragObjects.forEach(dragObject => {\r\n      if (!dragObject.object.parent) return; // произошла навигация во время перетаскивания\r\n      const newPos = dragObject.object.parent.toLocal(new PIXI.Point(e.data.global.x - dragObject.offset.x, e.data.global.y - dragObject.offset.y));\r\n      dragObject.object.setPosition(newPos);\r\n    });\r\n  }\r\n\r\n  private setupInput(document: IDocument, input: MyInput) {\r\n    this.subscriptions.push(input.onZoom.subscribe(zoom => {\r\n      this.zoom.zoomBy(zoom, zoom);\r\n      this.updateZoom();\r\n    }));\r\n    this.subscriptions.push(input.onRightDrag.subscribe(d => {\r\n      this.zoom.translateBy(d.dx, d.dy);\r\n      this.updateZoom();\r\n    }));\r\n    this.subscriptions.push(input.onKeyDown.subscribe(e => {\r\n      switch (e.keyCode) {\r\n        case 8:\r\n          if (this.currentViewRootNode && this.currentViewRootNode.getParent()) this.navigate(this.currentViewRootNode.getParent().id);\r\n          break;\r\n        case 46:\r\n          this.deleteSelected();\r\n          break;\r\n        case 65:\r\n          if (input.isCtrlKeyDown()) {\r\n            this.selectAll();\r\n            e.preventDefault();\r\n          }\r\n          break;\r\n        case 90:\r\n          if (input.isCtrlKeyDown()) {\r\n            if (input.isShiftKeyDown()) {\r\n              this.do(\"re\");\r\n            } else {\r\n              this.do(\"un\");\r\n            }\r\n          }\r\n          break;\r\n      }\r\n    }));\r\n    this.subscriptions.push(input.onMouseMove.subscribe(e => {\r\n      if (this.selectedPort != null) {\r\n        const hitObject = this.renderer.plugins.interaction.hitTest(e.data.global, this.stage);\r\n        if (hitObject instanceof Port && hitObject.isInput === this.selectedPort.isInput) {\r\n          // нельзя так соединять порты!\r\n        }\r\n        const portSnap = this.snapToPort(e.data.global);\r\n        this.phantomConnection.update(portSnap.position);\r\n      }\r\n      if (input.isLeftMouseDown()) {\r\n        this.updateDrag(e);\r\n        this.updateSelectionFrame(e.data.global);\r\n      } else {\r\n        this.stopDrag();\r\n        this.stopSelectionFrame();\r\n      }\r\n    }));\r\n    this.subscriptions.push(input.onMouseOut.merge(input.onMouseUpOutside).subscribe(() => {\r\n      this.stopSelectionFrame();\r\n    }));\r\n    this.subscriptions.push(input.onMouseUp.subscribe(e => {\r\n      this.stopDrag();\r\n      if (this.selectionFrame) {\r\n        const rect = this.selectionFrame.getRect();\r\n        if (rect) this.setSelectedObjects(this.getFrameSelection(rect, this.selectionFrame.direction), true);\r\n        this.stopSelectionFrame();\r\n      }\r\n    }));\r\n    this.subscriptions.push(input.onMouseDown.subscribe(e => {\r\n      const hitObject = this.renderer.plugins.interaction.hitTest(e.data.global, this.stage);\r\n      if (input.isShiftKeyDown() && hitObject instanceof SimpleBlock && this.document.getContext().getLevelNode(hitObject.id).canHaveChildren()) this.navigate(hitObject.id);\r\n      if (this.phantomConnection.isActive()) {\r\n        const port = this.snapToPort(e.data.global).port;\r\n        if (port) {\r\n          if (this.selectedPort.isInput !== port.isInput && this.selectedPort.parentBlock !== port.parentBlock) this.createConnection(document, this.selectedPort, port);\r\n        } else {\r\n          this.createBlock().subscribe(levelNode => this.createUnrealBlock(levelNode.id, e.data.global, this.selectedPort.parentBlock.id));\r\n        }\r\n        this.selectedPort = null;\r\n        this.phantomConnection.hide();\r\n        return;\r\n      }\r\n      if (hitObject instanceof Port) {\r\n        this.deselectAll();\r\n        if (!this.selectedPort || this.selectedPort === hitObject) {\r\n          this.selectedPort = hitObject;\r\n          this.phantomConnection.setPort(this.selectedPort);\r\n          return;\r\n        }\r\n        this.createConnection(document, this.selectedPort, hitObject as Port);\r\n        this.selectedPort = null;\r\n        this.phantomConnection.hide();\r\n      } else if (hitObject instanceof EditorObject) {\r\n        if (!hitObject.selected) this.setSelectedObjects(hitObject, true, input.isCtrlKeyDown());\r\n        this.startDrag(e);\r\n      } else if (hitObject instanceof DeleteButton) {\r\n        this.dataService.deleteObjects(this.document, [(<DeleteButton>hitObject).connectionId]);\r\n      } else if (hitObject === null) {\r\n        this.deselectAll();\r\n        if (this.selectedPort !== null) {\r\n          this.selectedPort = null;\r\n          this.phantomConnection.hide();\r\n        }\r\n        this.startSelectionFrame(e.data.global);\r\n      }\r\n    }));\r\n    this.subscriptions.push(input.onMouseDoubleClick.subscribe(e => {\r\n      const hitObject = this.renderer.plugins.interaction.hitTest(e.data.global, this.stage);\r\n      if (hitObject instanceof SimpleBlock && this.document.getContext().getLevelNode(hitObject.id).canHaveChildren()) this.navigate(hitObject.id);\r\n      if (!hitObject && input.isCtrlKeyDown()) {\r\n        if (input.isShiftKeyDown()) {\r\n          this.createCondition().subscribe(condition => this.createUnrealBlock(condition.id, e.data.global));\r\n        } else {\r\n          this.createBlock().subscribe(levelNode => this.createUnrealBlock(levelNode.id, e.data.global));\r\n        }\r\n      }\r\n    }));\r\n  }\r\n\r\n  private snapToPort(mousePos: PIXI.Point): { position: PIXI.Point, port: Port } {\r\n    const distanceThreshold = 100;\r\n    const ports = _.sortBy(_.flatMap(this.game.children, o => o instanceof EditorObject ? o.getAllPorts() : [])\r\n      .map(p => {\r\n        const portPos = p.getGlobalPosition();\r\n        return {\r\n          port: p,\r\n          distance: Math.sqrt(Math.pow(portPos.x - mousePos.x, 2) + Math.pow(portPos.y - mousePos.y, 2))\r\n        };\r\n      }).filter(o => o.distance < distanceThreshold && o.port !== this.selectedPort && o.port.isInput !== this.selectedPort.isInput), 'distance');\r\n    return ports.length > 0 ? {position: ports[0].port.getGlobalPosition(), port: ports[0].port} : {\r\n      position: mousePos,\r\n      port: null\r\n    };\r\n  }\r\n\r\n  private initContainers() {\r\n    this.game = new PIXI.Container();\r\n    this.connectionContainer = new PIXI.Container();\r\n    this.zoomContainer = new PIXI.Container();\r\n    this.overlay = new PIXI.Container();\r\n    this.stage = new PIXI.Container();\r\n    this.phantomConnection = new PhantomConnection();\r\n    this.zoom = new Zoom();\r\n    this.zoomContainer.addChild(this.connectionContainer);\r\n    this.zoomContainer.addChild(this.game);\r\n    this.stage.addChild(this.zoomContainer);\r\n    this.stage.addChild(this.overlay);\r\n  }\r\n\r\n  private documentChanged(e: IEventArgs) {\r\n    if (e.source as IDocument !== this.document) {\r\n      this.toastService.error('Текущий документ не совпадает с документом в событии обновления', 'Ошибка');\r\n      return;\r\n    }\r\n    if (!e.data) {\r\n      this.resetGame();\r\n      this.createGame(this.document, this.currentViewRootNode.id);\r\n      return;\r\n    }\r\n    e.data.added.forEach(id => {\r\n      const obj = this.document.getContext().getObject(id);\r\n      switch (obj.typeName) {\r\n        case TypeNames.LevelNode:\r\n          const block = this.createBlockFromLevelNode(obj as LevelNode);\r\n          block.setPosition(new PIXI.Point(this.renderer.width / 2 - block.width, this.renderer.height / 2 - block.height));\r\n          this.game.addChild(block);\r\n          this.setSelectedObjects(block);\r\n          break;\r\n        case TypeNames.Condition:\r\n          const condition = this.createConditionFromICondition(obj as ICondition);\r\n          condition.setPosition(new PIXI.Point(this.renderer.width / 2 - condition.width, this.renderer.height / 2 - condition.height));\r\n          this.setSelectedObjects(condition);\r\n          break;\r\n        case TypeNames.Connection:\r\n          const iConnection = obj as IConnection;\r\n          let sourcePort: Port;\r\n          const sourceNode = this.document.getContext().getObject(iConnection.sourceId);\r\n          if (sourceNode.typeName === TypeNames.LevelNode) {\r\n            sourcePort = this.game.children.map(x => x as EditorObject)\r\n              .filter(x => x.id === iConnection.sourceId)[0].getOutputPorts()[0];\r\n          } else {\r\n            const variant = sourceNode as IVariant;\r\n            const condition = this.game.children.map(x => x as EditorObject)\r\n              .filter(x => x.id === variant.getCondition().id)[0] as Condition;\r\n            sourcePort = condition.cases.filter(c => c.id === iConnection.sourceId)[0].port;\r\n          }\r\n          const targetPort = this.game.children.map(x => x as EditorObject)\r\n            .filter(x => x.id === iConnection.targetId)[0].getInputPort();\r\n          this.connectionContainer.addChild(this.factoryConnection({\r\n            sourcePort: sourcePort,\r\n            targetPort: targetPort,\r\n            connectionId: iConnection.id\r\n          }));\r\n          break;\r\n      }\r\n    });\r\n\r\n    e.data.edited.forEach(id => {\r\n      if (id === null) return;\r\n      let ee = this.game.children.filter(obj => obj instanceof EditorObject)\r\n        .map(x => x as EditorObject)\r\n        .filter(x => x.id === id)[0];\r\n      if (!ee) return;\r\n      const rootNodeId = this.document.getContext().getRootNode().id;\r\n      if (id === rootNodeId) return;\r\n      const node = this.document.getContext().getObject(id);\r\n      switch (node.typeName) {\r\n        case TypeNames.LevelNode:\r\n          const levelNode = node as LevelNode;\r\n          const block = ee as SimpleBlock;\r\n          block.blockCode = levelNode.code;\r\n          block.blockName = levelNode.name;\r\n          block.blockHours = levelNode.laborCosts ? levelNode.laborCosts : 0;\r\n          //todo обновить софт и линки\r\n          block.update();\r\n          break;\r\n        case TypeNames.Condition:\r\n          let iCondition = node as ICondition;\r\n          const condition = ee as Condition;\r\n          condition.title = iCondition.name;\r\n          condition.code = iCondition.code;\r\n          iCondition.getVariants().forEach(v => {\r\n            if (condition.cases.some(x => x.id === v.id)) {\r\n              condition.cases.filter(x => x.id === v.id).forEach(x => x.update(v.text));\r\n              return;\r\n            }\r\n            condition.addCase(new Case(v.id, v.text, condition));\r\n          });\r\n          condition.cases.forEach(c => {\r\n            if (c.id && e.data.deleted.indexOf(c.id) !== -1) condition.cases.splice(condition.cases.indexOf(c), 1);\r\n          });\r\n          condition.update();\r\n          break;\r\n      }\r\n    });\r\n\r\n    e.data.deleted.forEach(id => {\r\n      if (this.connectionContainer.children.some((x: Connection) => x.id === id)) {\r\n        const connection = _.find<Connection>(this.connectionContainer.children as Connection[], {id: id});\r\n        connection.dispose();\r\n        this.connectionContainer.removeChild(connection);\r\n      }\r\n    });\r\n\r\n    this.game.children.forEach((x: any) => {\r\n      if (x.id && e.data.deleted.indexOf(x.id) !== -1) this.game.removeChild(x);\r\n\r\n    });\r\n  }\r\n\r\n  private createUnrealBlock(levelNodeId: string, point: PIXI.Point, connectToId: string = null) {\r\n    const node = _.find<EditorObject>(this.game.children as EditorObject[], {id: levelNodeId});\r\n    if (!node) {\r\n      this.toastService.error('Созданный узел не найден в редакторе');\r\n      return;\r\n    }\r\n    const pt = this.game.toLocal(point);\r\n    pt.y -= node.height / 2;\r\n    node.setPosition(pt);\r\n    if (connectToId) this.dataService.createConnection(this.document, connectToId, node.id);\r\n  }\r\n\r\n  private createConditionFromICondition(iCondition: ICondition) {\r\n    const condition = new Condition(iCondition.name);\r\n    condition.code = iCondition.code;\r\n    condition.id = iCondition.id;\r\n    iCondition.getVariants().forEach(v => {\r\n      condition.addCase(new Case(v.id, v.text, condition));\r\n    });\r\n    this.game.addChild(condition);\r\n    return condition;\r\n  }\r\n\r\n  public showNested(levelName: string): void {\r\n    if (this.selectedObjects.length < 1) return;\r\n    else if (this.selectedObjects.some(x => x instanceof Condition)) return;\r\n    else if (this.selectedObjects[0]) {\r\n      const depth = this.levels.indexOf(levelName) + 1;\r\n\r\n      const rootBlock = this.selectedObjects[0] as SimpleBlock;\r\n      this.addNestedBlocks(rootBlock, depth, 0.75);\r\n      rootBlock.update();\r\n    }\r\n  }\r\n\r\n  hideNested() {\r\n    this.game.children.filter(x => x instanceof SimpleBlock && x.embeddedContainer.children.length > 0).forEach(x => {\r\n      (<SimpleBlock>x).embeddedContainer = undefined;\r\n      (<SimpleBlock>x).update();\r\n    });\r\n  }\r\n\r\n  private addNestedBlocks(rootBlock: SimpleBlock, depth: number, scale: number) {\r\n    if (depth === 0) return;\r\n    const nestedNodes = this.document.getContext().getLevelNode(rootBlock.id).getChildrenNodes();\r\n    const nestedConditions = this.document.getContext().getLevelNode(rootBlock.id).getChildrenConditions();\r\n    const childNodes: ILevelEntity[] = (<ILevelEntity[]>nestedNodes).concat((<ILevelEntity[]>nestedConditions));\r\n    let embeddedContainer: Container = new Container();\r\n    let blocksContainer: Container = new Container();\r\n    const nodes: Map<string, any> = new Map();\r\n    const connections: Map<string, IConnection> = new Map();\r\n    childNodes.forEach((nodeValue: ILevelEntity) => {\r\n      switch (nodeValue.typeName) {\r\n        case TypeNames.LevelNode:\r\n          const levelNode = nodeValue as ILevelNode;\r\n          const block = this.createBlockFromLevelNode(levelNode);\r\n          block.canDrag = false;\r\n          this.addNestedBlocks(block, depth - 1, scale - 0.25);\r\n          nodes.set(levelNode.id, block);\r\n          blocksContainer.addChild(block);\r\n          levelNode.getInputConnections().concat(levelNode.getOutputConnections()).forEach(x => {\r\n            if (!connections.has(x.id)) connections.set(x.id, x);\r\n          });\r\n          break;\r\n        case TypeNames.Condition:\r\n          const iCondition = nodeValue as ICondition;\r\n          const condition = new Condition(iCondition.name);\r\n          condition.id = iCondition.id;\r\n          condition.setTicker(this.ticker);\r\n          condition.setLoader(this.loader);\r\n          condition.canDrag = false;\r\n          iCondition.getVariants().forEach(variant => {\r\n            const _case = new Case(variant.id, variant.text, condition);\r\n            condition.addCase(_case);\r\n            nodes.set(variant.id, _case);\r\n          });\r\n          nodes.set(iCondition.id, condition);\r\n          blocksContainer.addChild(condition);\r\n          iCondition.getInputConnections().concat(_.flatMap(iCondition.getVariants().map(v => v.getOutputConnections()))).forEach(x => {\r\n            if (!connections.has(x.id)) connections.set(x.id, x);\r\n          });\r\n          break;\r\n        default:\r\n          throw new Error(`Непонятный тип ${nodeValue.typeName}`);\r\n      }\r\n    });\r\n\r\n    let connectionsContatiner = new Container();\r\n    connections.forEach((iconnection, id) => {\r\n      const source: EditorObject | Case = nodes.get(iconnection.sourceId);\r\n      const target: EditorObject = nodes.get(iconnection.targetId);\r\n      const connection = this.factoryConnection({\r\n        sourcePort: source.getOutputPorts()[0],\r\n        targetPort: target.getInputPort(),\r\n        connectionId: id\r\n      });\r\n      connectionsContatiner.addChild(connection);\r\n    });\r\n\r\n    this.aligner.autoAlign(blocksContainer.children as EditorObject[]);\r\n\r\n    embeddedContainer.addChild(connectionsContatiner, blocksContainer);\r\n    embeddedContainer.scale.set(scale, scale);\r\n    rootBlock.embeddedContainer = embeddedContainer;\r\n\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/app/components/editor/editor.component.ts","export class PositionChangedArgs {\r\n  constructor(position: PIXI.Point) {\r\n    this.position = position;\r\n  }\r\n\r\n  public position: PIXI.Point;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/app/components/editor/events/position-changed-args.ts","import WebGLRenderer = PIXI.WebGLRenderer;\r\nimport {MyExtract} from \"./my-extract\";\r\nimport Container = PIXI.Container;\r\n\r\nexport function extractImage(renderer: WebGLRenderer, container: Container): Promise<any> {\r\n  const extract = new MyExtract(renderer);\r\n  return new Promise((resolve, reject) => {\r\n    extract.canvas(container, new PIXI.Rectangle(0, 0, Math.round(container.width), Math.round(container.height))).toBlob((blob) => {\r\n      window.open(URL.createObjectURL(blob));\r\n      resolve();\r\n    }, 'image/png');\r\n  });\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/app/components/editor/extract-image.ts","import Loader = PIXI.loaders.Loader;\r\n\r\n\r\nconst loader = new PIXI.loaders.Loader();\r\nconst assets = [\r\n  ['book', 'assets/book.png'],\r\n  ['del', 'assets/del.png'],\r\n  ['edu', 'assets/edu.png'],\r\n  ['excel', 'assets/excel.png'],\r\n  ['navisworks', 'assets/navisworks.png'],\r\n  ['pdf', 'assets/pdf.png'],\r\n  ['picture', 'assets/picture.png'],\r\n  ['revit', 'assets/revit.png'],\r\n  ['table', 'assets/table.png'],\r\n  ['word', 'assets/word.png'],\r\n  ['youtube', 'assets/youtube.png'],\r\n];\r\n\r\nexport function getLoader(fn: () => any): { loader: Loader, willOnComplete } {\r\n  let willLoadNewAssets = false;\r\n  assets.forEach(asset => {\r\n    if (!loader.resources[asset[0]]) {\r\n      loader.add(asset[0], asset[1]);\r\n      willLoadNewAssets = true;\r\n    }\r\n  });\r\n  if (willLoadNewAssets) {\r\n    loader.onComplete.add(fn);\r\n  }\r\n  loader.load();\r\n  return {loader: loader, willOnComplete: willLoadNewAssets};\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/app/components/editor/get-loader.ts","const vertex = \"attribute vec2 aVertexPosition;\\nattribute vec2 aTextureCoord;\\n\\nuniform mat3 projectionMatrix;\\nvarying vec2 vTextureCoord;\\n\\nvoid main(void){\\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\\n    vTextureCoord = aTextureCoord;\\n}\\n\";\r\n\r\nconst fragment = \"varying vec2 vTextureCoord;\\nvarying vec4 vColor;\\n\\nuniform sampler2D uSampler;\\n\\nuniform float distance;\\nuniform float outerStrength;\\nuniform float innerStrength;\\nuniform vec4 glowColor;\\nuniform vec4 filterArea;\\nuniform vec4 filterClamp;\\nvec2 px = vec2(1.0 / filterArea.x, 1.0 / filterArea.y);\\n\\nvoid main(void) {\\n    const float PI = 3.14159265358979323846264;\\n    vec4 ownColor = texture2D(uSampler, vTextureCoord);\\n    vec4 curColor;\\n    float totalAlpha = 0.0;\\n    float maxTotalAlpha = 0.0;\\n    float cosAngle;\\n    float sinAngle;\\n    vec2 displaced;\\n    for (float angle = 0.0; angle <= PI * 2.0; angle += %QUALITY_DIST%) {\\n       cosAngle = cos(angle);\\n       sinAngle = sin(angle);\\n       for (float curDistance = 1.0; curDistance <= %DIST%; curDistance++) {\\n           displaced.x = vTextureCoord.x + cosAngle * curDistance * px.x;\\n           displaced.y = vTextureCoord.y + sinAngle * curDistance * px.y;\\n           curColor = texture2D(uSampler, clamp(displaced, filterClamp.xy, filterClamp.zw));\\n           totalAlpha += (distance - curDistance) * curColor.a;\\n           maxTotalAlpha += (distance - curDistance);\\n       }\\n    }\\n    maxTotalAlpha = max(maxTotalAlpha, 0.0001);\\n\\n    ownColor.a = max(ownColor.a, 0.0001);\\n    ownColor.rgb = ownColor.rgb / ownColor.a;\\n    float outerGlowAlpha = (totalAlpha / maxTotalAlpha)  * outerStrength * (1. - ownColor.a);\\n    float innerGlowAlpha = ((maxTotalAlpha - totalAlpha) / maxTotalAlpha) * innerStrength * ownColor.a;\\n    float resultAlpha = (ownColor.a + outerGlowAlpha);\\n    gl_FragColor = vec4(mix(mix(ownColor.rgb, glowColor.rgb, innerGlowAlpha / ownColor.a), glowColor.rgb, outerGlowAlpha / resultAlpha) * resultAlpha, resultAlpha);\\n}\\n\";\r\n\r\n/**\r\n * GlowFilter, originally by mishaa\r\n * http://www.html5gamedevs.com/topic/12756-glow-filter/?hl=mishaa#entry73578\r\n * http://codepen.io/mishaa/pen/raKzrm\r\n * ![original](../tools/screenshots/dist/original.png)![filter](../tools/screenshots/dist/glow.png)\r\n *\r\n * @class\r\n *\r\n * @extends PIXI.Filter\r\n * @memberof PIXI.filters\r\n * @param {number} [distance=10] The distance of the glow. Make it 2 times more for resolution=2. It cant be changed after filter creation\r\n * @param {number} [outerStrength=4] The strength of the glow outward from the edge of the sprite.\r\n * @param {number} [innerStrength=0] The strength of the glow inward from the edge of the sprite.\r\n * @param {number} [color=0xffffff] The color of the glow.\r\n * @param {number} [quality=0.1] A number between 0 and 1 that describes the quality of the glow.\r\n *\r\n * @example\r\n *  someSprite.filters = [\r\n *      new GlowFilter(15, 2, 1, 0xFF0000, 0.5)\r\n *  ];\r\n */\r\n\r\nexport class GlowFilter extends PIXI.Filter<any> {\r\n\r\n\r\n  constructor(distance, outerStrength, innerStrength, color, quality) {\r\n    if (distance === void 0) distance = 10;\r\n    if (outerStrength === void 0) outerStrength = 4;\r\n    if (innerStrength === void 0) innerStrength = 0;\r\n    if (color === void 0) color = 0xffffff;\r\n    if (quality === void 0) quality = 0.1;\r\n\r\n    super(vertex, fragment\r\n      .replace(/%QUALITY_DIST%/gi, '' + (1 / quality / distance).toFixed(7))\r\n      .replace(/%DIST%/gi, '' + distance.toFixed(7)));\r\n\r\n    this.uniforms.glowColor = new Float32Array([0, 0, 0, 1]);\r\n    this.distance = distance;\r\n    this.color = color;\r\n    this.outerStrength = outerStrength;\r\n    this.innerStrength = innerStrength;\r\n  }\r\n\r\n  public get color() {\r\n    return PIXI.utils.rgb2hex(this.uniforms.glowColor);\r\n  }\r\n\r\n  public set color(value) {\r\n    PIXI.utils.hex2rgb(value, this.uniforms.glowColor);\r\n  }\r\n\r\n  public get distance() {\r\n    return this.uniforms.distance;\r\n  }\r\n\r\n  public set distance(value) {\r\n    this.uniforms.distance = value;\r\n  }\r\n\r\n  public get innerStrength() {\r\n    return this.uniforms.innerStrength;\r\n  }\r\n\r\n  public set innerStrength(value) {\r\n    this.uniforms.innerStrength = value;\r\n  }\r\n\r\n  public get outerStrength() {\r\n    return this.uniforms.outerStrength;\r\n  }\r\n\r\n  public set outerStrength(value) {\r\n    this.uniforms.outerStrength = value;\r\n  }\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/app/components/editor/glow.ts","import InteractionManager = PIXI.interaction.InteractionManager;\r\nimport {ElementRef} from \"@angular/core\";\r\nimport InteractionEvent = PIXI.interaction.InteractionEvent;\r\nimport {Subject} from \"rxjs/Subject\";\r\nimport {Observable} from \"rxjs/Observable\";\r\nimport 'rxjs/add/operator/buffer';\r\nimport 'rxjs/add/operator/debounce';\r\nimport 'rxjs/add/operator/map';\r\nimport 'rxjs/add/operator/filter';\r\nimport 'rxjs/add/observable/timer';\r\nimport {IDisposable} from \"./objects/idisposable\";\r\n\r\nexport class MyInput implements IDisposable {\r\n  private keymap = new Map();\r\n  private _leftMouseDown: boolean;\r\n  private _rightMouseDown: boolean;\r\n  private _mousePoint: PIXI.Point = new PIXI.Point(0, 0);\r\n  private _lastDragMousePos: PIXI.Point;\r\n  private _zoomSubject = new Subject();\r\n  private _rightDragSubject = new Subject();\r\n  private _mouseDownSubject = new Subject();\r\n  private _mouseUpSubject = new Subject();\r\n  private _mouseUpOutsideSubject = new Subject();\r\n  private _mouseMoveSubject = new Subject();\r\n  private _mouseOutSubject = new Subject();\r\n  private _keyDownSubject = new Subject();\r\n\r\n  public onZoom: Observable<number> = this._zoomSubject.asObservable();\r\n  public onRightDrag: Observable<any> = this._rightDragSubject.asObservable();\r\n  public onMouseDown: Observable<InteractionEvent> = this._mouseDownSubject.asObservable();\r\n  public onMouseUp: Observable<InteractionEvent> = this._mouseUpSubject.asObservable();\r\n  public onMouseUpOutside: Observable<InteractionEvent> = this._mouseUpOutsideSubject.asObservable();\r\n  public onMouseMove: Observable<InteractionEvent> = this._mouseMoveSubject.asObservable();\r\n  public onMouseOut: Observable<InteractionEvent> = this._mouseOutSubject.asObservable();\r\n  public onKeyDown: Observable<KeyboardEvent> = this._keyDownSubject.asObservable();\r\n\r\n  public mousePosition: PIXI.Point = new PIXI.Point();\r\n  public onMouseDoubleClick: Observable<any> = this._mouseDownSubject\r\n    .buffer(this._mouseDownSubject.debounce(x => Observable.timer(250)))\r\n    .filter((list: InteractionEvent[]) => list.length === 2 && MyInput.mousePosThreshold(list, 1))\r\n    .map((list: InteractionEvent[]) => list[0]);\r\n\r\n  private interactionListeners = {\r\n    mousemove: (e: InteractionEvent) => this.handleMousemove(e),\r\n    mousedown: (e: InteractionEvent) => this.handleMousedown(e),\r\n    mouseup: (e: InteractionEvent) => this.handleMouseup(e),\r\n    mouseout: (e: InteractionEvent) => this.handleMouseout(e),\r\n    mouseupoutside: (e: InteractionEvent) => this.handleMouseupOutside(e),\r\n    rightdown: (e: InteractionEvent) => this.handleRightMousedown(e),\r\n    rightup: (e: InteractionEvent) => this.handleRightMouseup(e),\r\n  };\r\n\r\n  private containerEventListeners = {\r\n    keydown: (e: KeyboardEvent) => this.handleKeydown(e),\r\n    keyup: (e: KeyboardEvent) => this.handleKeyup(e),\r\n    wheel: (e: WheelEvent) => this.handleMouseWheel(e),\r\n    contextmenu: (e) => e.preventDefault(),\r\n  };\r\n\r\n  private documentEventListeners = {\r\n    keydown: (e: KeyboardEvent) => this.keymap[e.keyCode] = true,\r\n    keyup: (e: KeyboardEvent) => this.keymap[e.keyCode] = false,\r\n  };\r\n\r\n  dispose(): void {\r\n    for (let event in this.interactionListeners) this.interactionManager.off(event, this.interactionListeners[event]);\r\n    for (let event in this.containerEventListeners) this.pixiContainer.nativeElement.removeEventListener(event, this.containerEventListeners[event], false);\r\n    for (let event in this.documentEventListeners) document.removeEventListener(event, this.documentEventListeners[event], false);\r\n  }\r\n\r\n  constructor(private interactionManager: InteractionManager, private pixiContainer: ElementRef) {\r\n    for (let event in this.interactionListeners) interactionManager.on(event, this.interactionListeners[event]);\r\n    for (let event in this.containerEventListeners) pixiContainer.nativeElement.parentNode.addEventListener(event, this.containerEventListeners[event], false);\r\n    for (let event in this.documentEventListeners) document.addEventListener(event, this.documentEventListeners[event], false);\r\n  }\r\n\r\n  private handleMousemove(e: InteractionEvent) {\r\n    this._mousePoint = e.data.global;\r\n    if (this._lastDragMousePos && this._rightMouseDown) {\r\n      this._rightDragSubject.next({\r\n        dx: e.data.global.x - this._lastDragMousePos.x,\r\n        dy: e.data.global.y - this._lastDragMousePos.y\r\n      });\r\n      this._lastDragMousePos = e.data.global.clone();\r\n    }\r\n    this.mousePosition.set(e.data.global.x, e.data.global.y);\r\n    this._mouseMoveSubject.next(e);\r\n  }\r\n\r\n  private handleMousedown(e: InteractionEvent) {\r\n    this._leftMouseDown = true;\r\n    this._mouseDownSubject.next(e);\r\n  }\r\n\r\n  private handleMouseup(e: InteractionEvent) {\r\n    this._leftMouseDown = false;\r\n    this._mouseUpSubject.next(e);\r\n  }\r\n\r\n  private handleKeydown(e: KeyboardEvent) {\r\n    this.keymap[e.keyCode] = true;\r\n    this._keyDownSubject.next(e);\r\n  }\r\n\r\n  private handleKeyup(e: KeyboardEvent) {\r\n    this.keymap[e.keyCode] = false;\r\n  }\r\n\r\n  private handleMouseWheel(e: WheelEvent) {\r\n    if (e.deltaY < 0) {\r\n      this._zoomSubject.next(0.1);\r\n    } else if (e.deltaY > 0) {\r\n      this._zoomSubject.next(-0.1);\r\n    }\r\n    e.preventDefault();\r\n  }\r\n\r\n  private handleRightMousedown(e: InteractionEvent) {\r\n    this._rightMouseDown = true;\r\n    this._lastDragMousePos = e.data.global.clone();\r\n  }\r\n\r\n  private handleRightMouseup(e: InteractionEvent) {\r\n    this._rightMouseDown = false;\r\n    this._lastDragMousePos = undefined;\r\n  }\r\n\r\n  public isCtrlKeyDown(): boolean {\r\n    return this.keymap[17] === true;\r\n  }\r\n\r\n  public isLeftMouseDown(): boolean {\r\n    return this._leftMouseDown === true;\r\n  }\r\n\r\n  public isRightMouseDown(): boolean {\r\n    return this._rightMouseDown === true;\r\n  }\r\n\r\n  public getMousePoint(): PIXI.Point {\r\n    return this._mousePoint;\r\n  }\r\n\r\n  private handleMouseupOutside(e: InteractionEvent) {\r\n    this._mouseUpOutsideSubject.next(e);\r\n  }\r\n\r\n  private handleMouseout(e: InteractionEvent) {\r\n    this._mouseOutSubject.next(e);\r\n  }\r\n\r\n  public isShiftKeyDown() {\r\n    return this.keymap[16] === true;\r\n  }\r\n\r\n  private static mousePosThreshold(list: InteractionEvent[], threshold: number) {\r\n    const dx = Math.abs(list[0].data.global.x - list[1].data.global.x);\r\n    const dy = Math.abs(list[0].data.global.y - list[1].data.global.y);\r\n    const result = dx < threshold && dy < threshold;\r\n    if (!result) console.log('Double click mouse pos diff', dx, dy);\r\n    return result;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/app/components/editor/input.ts","import RenderTexture = PIXI.RenderTexture;\r\nimport Matrix = PIXI.Matrix;\r\n\r\nconst TEMP_RECT = new PIXI.Rectangle();\r\nconst BYTES_PER_PIXEL = 4;\r\n\r\n/**\r\n * The extract manager provides functionality to export content from the renderers.\r\n *\r\n * An instance of this class is automatically created by default, and can be found at renderer.plugins.extract\r\n *\r\n * @class\r\n * @memberof PIXI.extract\r\n */\r\nexport class MyExtract {\r\n  private renderer: any;\r\n\r\n  /**\r\n   * @param {PIXI.WebGLRenderer} renderer - A reference to the current renderer\r\n   */\r\n  constructor(renderer) {\r\n    this.renderer = renderer;\r\n    /**\r\n     * Collection of methods for extracting data (image, pixels, etc.) from a display object or render texture\r\n     *\r\n     * @member {PIXI.extract.WebGLExtract} extract\r\n     * @memberof PIXI.WebGLRenderer#\r\n     * @see PIXI.extract.WebGLExtract\r\n     */\r\n    renderer.extract = this;\r\n  }\r\n\r\n  /**\r\n   * Will return a HTML Image of the target\r\n   *\r\n   * @param {PIXI.DisplayObject|PIXI.RenderTexture} target - A displayObject or renderTexture\r\n   *  to convert. If left empty will use use the main renderer\r\n   * @return {HTMLImageElement} HTML Image of the target\r\n   */\r\n  image(target) {\r\n    const image = new Image();\r\n\r\n    image.src = this.base64(target);\r\n\r\n    return image;\r\n  }\r\n\r\n  /**\r\n   * Will return a a base64 encoded string of this target. It works by calling\r\n   *  `WebGLExtract.getCanvas` and then running toDataURL on that.\r\n   *\r\n   * @param {PIXI.DisplayObject|PIXI.RenderTexture} target - A displayObject or renderTexture\r\n   *  to convert. If left empty will use use the main renderer\r\n   * @return {string} A base64 encoded string of the texture.\r\n   */\r\n  base64(target) {\r\n    return this.canvas(target).toDataURL();\r\n  }\r\n\r\n  /**\r\n   * Creates a Canvas element, renders this target to it and then returns it.\r\n   *\r\n   * @param {PIXI.DisplayObject|PIXI.RenderTexture} target - A displayObject or renderTexture\r\n   *  to convert. If left empty will use use the main renderer\r\n   * @return {HTMLCanvasElement} A Canvas element with the texture rendered on.\r\n   */\r\n  canvas(target, _frame: PIXI.Rectangle = null) {\r\n    const renderer = this.renderer;\r\n    let textureBuffer;\r\n    let resolution;\r\n    let frame;\r\n    let flipY = false;\r\n    let renderTexture;\r\n    frame = _frame;\r\n    if (target) {\r\n      if (target instanceof PIXI.RenderTexture) {\r\n        renderTexture = target;\r\n      }\r\n      else {\r\n        renderTexture = this.generateTexture(target, 0, 1);\r\n      }\r\n    }\r\n\r\n    if (renderTexture) {\r\n      textureBuffer = renderTexture.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID];\r\n      resolution = textureBuffer.resolution;\r\n      //frame = _frame || renderTexture.frame;\r\n      flipY = false;\r\n    }\r\n    else {\r\n      textureBuffer = this.renderer.rootRenderTarget;\r\n      resolution = textureBuffer.resolution;\r\n      flipY = true;\r\n\r\n      //frame = TEMP_RECT;\r\n      // frame.width = textureBuffer.size.width;\r\n      //frame.height = textureBuffer.size.height;\r\n    }\r\n\r\n    const width = frame.width * resolution;\r\n    const height = frame.height * resolution;\r\n\r\n    const canvasBuffer = new PIXI.CanvasRenderTarget(width, height, 1);\r\n\r\n    if (textureBuffer) {\r\n      // bind the buffer\r\n      renderer.bindRenderTarget(textureBuffer);\r\n\r\n      // set up an array of pixels\r\n      const webglPixels = new Uint8Array(BYTES_PER_PIXEL * width * height);\r\n\r\n      // read pixels to the array\r\n      const gl = renderer.gl;\r\n\r\n      gl.readPixels(\r\n        frame.x * resolution,\r\n        frame.y * resolution,\r\n        width,\r\n        height,\r\n        gl.RGBA,\r\n        gl.UNSIGNED_BYTE,\r\n        webglPixels\r\n      );\r\n\r\n      // add the pixels to the canvas\r\n      const canvasData = canvasBuffer.context.getImageData(0, 0, width, height);\r\n\r\n      canvasData.data.set(webglPixels);\r\n\r\n      canvasBuffer.context.putImageData(canvasData, 0, 0);\r\n\r\n      // pulling pixels\r\n      if (flipY) {\r\n        canvasBuffer.context.scale(1, -1);\r\n        canvasBuffer.context.drawImage(canvasBuffer.canvas, 0, -height);\r\n      }\r\n    }\r\n\r\n    // send the canvas back..\r\n    return canvasBuffer.canvas;\r\n  }\r\n\r\n  generateTexture(displayObject, scaleMode, resolution) {\r\n    const bounds = displayObject.getLocalBounds();\r\n\r\n    const renderTexture = RenderTexture.create(bounds.width | 0, bounds.height | 0, scaleMode, resolution);\r\n\r\n    const tempMatrix = new Matrix();\r\n    tempMatrix.tx = -bounds.x;\r\n    tempMatrix.ty = -bounds.y;\r\n\r\n    this.renderer.render(displayObject, renderTexture, false, tempMatrix, true);\r\n\r\n    return renderTexture;\r\n  }\r\n\r\n  /**\r\n   * Will return a one-dimensional array containing the pixel data of the entire texture in RGBA\r\n   * order, with integer values between 0 and 255 (included).\r\n   *\r\n   * @param {PIXI.DisplayObject|PIXI.RenderTexture} target - A displayObject or renderTexture\r\n   *  to convert. If left empty will use use the main renderer\r\n   * @return {Uint8ClampedArray} One-dimensional array containing the pixel data of the entire texture\r\n   */\r\n  pixels(target) {\r\n    const renderer = this.renderer;\r\n    let textureBuffer;\r\n    let resolution;\r\n    let frame;\r\n    let renderTexture;\r\n\r\n    if (target) {\r\n      if (target instanceof PIXI.RenderTexture) {\r\n        renderTexture = target;\r\n      }\r\n      else {\r\n        renderTexture = this.renderer.generateTexture(target);\r\n      }\r\n    }\r\n\r\n    if (renderTexture) {\r\n      textureBuffer = renderTexture.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID];\r\n      resolution = textureBuffer.resolution;\r\n      frame = renderTexture.frame;\r\n    }\r\n    else {\r\n      textureBuffer = this.renderer.rootRenderTarget;\r\n      resolution = textureBuffer.resolution;\r\n\r\n      frame = TEMP_RECT;\r\n      frame.width = textureBuffer.size.width;\r\n      frame.height = textureBuffer.size.height;\r\n    }\r\n\r\n    const width = frame.width * resolution;\r\n    const height = frame.height * resolution;\r\n\r\n    const webglPixels = new Uint8Array(BYTES_PER_PIXEL * width * height);\r\n\r\n    if (textureBuffer) {\r\n      // bind the buffer\r\n      renderer.bindRenderTarget(textureBuffer);\r\n      // read pixels to the array\r\n      const gl = renderer.gl;\r\n\r\n      gl.readPixels(\r\n        frame.x * resolution,\r\n        frame.y * resolution,\r\n        width,\r\n        height,\r\n        gl.RGBA,\r\n        gl.UNSIGNED_BYTE,\r\n        webglPixels\r\n      );\r\n    }\r\n\r\n    return webglPixels;\r\n  }\r\n\r\n  /**\r\n   * Destroys the extract\r\n   *\r\n   */\r\n  destroy() {\r\n    this.renderer.extract = null;\r\n    this.renderer = null;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/app/components/editor/my-extract.ts","export enum Alignment {\r\n  TopLeft, Top, TopRight,\r\n  CenterLeft, Center, CenterRight,\r\n  BottomLeft, Bottom, BottomRight\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/app/components/editor/objects/Layouts/alignment.enum.ts","import Container = PIXI.Container;\r\nimport {Table} from \"./table\";\r\nimport {Alignment} from \"./alignment.enum\";\r\nimport Graphics = PIXI.Graphics;\r\n\r\nexport class Cell extends Container {\r\n  private table: Table;\r\n  private curObj: Container;\r\n  private curAlignment: Alignment = Alignment.TopLeft;\r\n  private lines: Graphics = new Graphics();\r\n\r\n  columnIndex: number = 0;\r\n  rowIndex: number = 0;\r\n\r\n  private paddingLeft: number = 0;\r\n  private paddingRight: number = 0;\r\n  private paddingTop: number = 0;\r\n  private paddingBottom: number = 0;\r\n\r\n  span: number = 1;\r\n  private size: PIXI.Sprite;\r\n\r\n  private isDebug: boolean = false;\r\n  private debugRect = new PIXI.Graphics();\r\n\r\n  constructor(table: Table, col: number, row: number, debug: boolean = false) {\r\n    super();\r\n\r\n    this.isDebug = debug;\r\n    this.table = table;\r\n    this.columnIndex = col;\r\n    this.rowIndex = row;\r\n    if (this.isDebug) this.drawDebug();\r\n  }\r\n\r\n\r\n  add(obj: Container): Cell {\r\n    this.removeChild(this.curObj);\r\n    this.curObj = obj;\r\n    this.addChild(obj);\r\n    return this;\r\n  }\r\n\r\n  //region Align\r\n  align(align: Alignment): Cell {\r\n    switch (align) {\r\n      case Alignment.TopLeft:\r\n        this.alignTopLeft();\r\n        break;\r\n      case Alignment.Top:\r\n        this.alignTop();\r\n        break;\r\n      case Alignment.TopRight:\r\n        this.alignTopRight();\r\n        break;\r\n      case Alignment.BottomLeft:\r\n        this.alignBottomLeft();\r\n        break;\r\n      case Alignment.Bottom:\r\n        this.alignBottom();\r\n        break;\r\n      case Alignment.BottomRight:\r\n        this.alignBottomRight();\r\n        break;\r\n      case Alignment.CenterLeft:\r\n        this.alignCenterLeft();\r\n        break;\r\n      case Alignment.Center:\r\n        this.alignCenter();\r\n        break;\r\n      case Alignment.CenterRight:\r\n        this.alignCenterRight();\r\n        break;\r\n    }\r\n    return this;\r\n  }\r\n\r\n  alignTopLeft(): Cell {\r\n    this.curAlignment = Alignment.TopLeft;\r\n    this.curObj.x = this.paddingLeft;\r\n    this.curObj.y = this.paddingTop;\r\n    return this;\r\n  }\r\n\r\n  alignTop(): Cell {\r\n    this.curAlignment = Alignment.Top;\r\n    this.curObj.x = (this.width - this.curObj.width) / 2;\r\n    this.curObj.y = this.paddingTop;\r\n    return this;\r\n  }\r\n\r\n  alignTopRight(): Cell {\r\n    this.curAlignment = Alignment.TopRight;\r\n    this.curObj.x = this.width - this.curObj.width - this.paddingRight;\r\n    this.curObj.y = this.paddingTop;\r\n    return this;\r\n  }\r\n\r\n  alignBottomLeft(): Cell {\r\n    this.curAlignment = Alignment.BottomLeft;\r\n    this.curObj.x = this.paddingLeft;\r\n    this.curObj.y = this.height - this.curObj.height - this.paddingBottom;\r\n    return this;\r\n  }\r\n\r\n  alignBottom(): Cell {\r\n    this.curAlignment = Alignment.Bottom;\r\n    this.curObj.x = (this.width - this.curObj.width) / 2;\r\n    this.curObj.y = this.height - this.curObj.height - this.paddingBottom;\r\n    return this;\r\n  }\r\n\r\n  alignBottomRight(): Cell {\r\n    this.curAlignment = Alignment.BottomRight;\r\n    this.curObj.x = this.width - this.curObj.width - this.paddingRight;\r\n    this.curObj.y = this.height - this.curObj.height - this.paddingBottom;\r\n    return this;\r\n  }\r\n\r\n  alignCenterLeft(): Cell {\r\n    this.curAlignment = Alignment.CenterLeft;\r\n    this.curObj.x = this.paddingLeft;\r\n    this.curObj.y = (this.height - this.curObj.height) / 2;\r\n    return this;\r\n  }\r\n\r\n  alignCenter(): Cell {\r\n    this.curAlignment = Alignment.Center;\r\n    this.curObj.x = (this.width - this.curObj.width) / 2;\r\n    this.curObj.y = (this.height - this.curObj.height) / 2;\r\n    return this;\r\n  }\r\n\r\n  alignCenterRight(): Cell {\r\n    this.curAlignment = Alignment.CenterRight;\r\n    this.curObj.x = this.width - this.curObj.width - this.paddingRight;\r\n    this.curObj.y = (this.height - this.curObj.height) / 2;\r\n    return this;\r\n  }\r\n\r\n\r\n  //endregion\r\n\r\n  //region Padding\r\n\r\n  padLeft(pad: number): Cell {\r\n    this.paddingLeft = pad;\r\n    this.pad();\r\n    return this;\r\n  }\r\n\r\n  padRight(pad: number): Cell {\r\n    this.paddingRight = pad;\r\n    this.pad();\r\n    return this;\r\n  }\r\n\r\n  padTop(pad: number): Cell {\r\n    this.paddingTop = pad;\r\n    this.pad();\r\n    return this;\r\n  }\r\n\r\n  padBottom(pad: number): Cell {\r\n    this.paddingBottom = pad;\r\n    this.pad();\r\n    return this;\r\n  }\r\n\r\n  padAll(pad: number): Cell {\r\n    this.padLeft(pad);\r\n    this.padRight(pad);\r\n    this.padTop(pad);\r\n    this.padBottom(pad);\r\n    return this;\r\n  }\r\n\r\n  private pad() {\r\n    let width = this.curObj.width + this.paddingLeft + this.paddingRight;\r\n    let height = this.curObj.height + this.paddingTop + this.paddingBottom;\r\n    this.setSize(width, height);\r\n  }\r\n\r\n  //endregion\r\n\r\n  colspan(i: number): Cell {\r\n    this.span = i;\r\n    this.table.colspan(i);\r\n    return this;\r\n  }\r\n\r\n  setSize(width: number, height: number) {\r\n    // width += this.paddingLeft + this.paddingRight;\r\n    // height += this.paddingTop + this.paddingBottom;\r\n    const smallTexture = PIXI.RenderTexture.create(width, height);\r\n    this.size = new PIXI.Sprite(smallTexture);\r\n\r\n    this.children.forEach(x => this.removeChild(x));\r\n    this.addChild(this.size);\r\n    if (this.isDebug) this.drawDebug();\r\n    this.add(this.curObj);\r\n    this.update();\r\n  }\r\n\r\n  update() {\r\n    // this.pad();\r\n    this.align(this.curAlignment);\r\n  }\r\n\r\n  private drawDebug() {\r\n    this.debugRect.lineStyle(1, 0xFF0000);\r\n    this.debugRect.drawRect(0, 0, this.width, this.height);\r\n    this.addChild(this.debugRect);\r\n  }\r\n\r\n  debug(debug: boolean) {\r\n    this.isDebug = debug;\r\n    this.children.forEach(x => this.removeChild(x));\r\n    this.addChild(this.size);\r\n    if (debug) this.drawDebug();\r\n    this.add(this.curObj);\r\n    if (this.curObj instanceof Table) this.curObj.debug(debug);\r\n  }\r\n\r\n  drawLines() {\r\n    this.lines.clear();\r\n    this.lines.lineStyle(1);\r\n    if (this.rowIndex === 0) {\r\n      this.lines.moveTo(0, 0);\r\n      this.lines.lineTo(this.width, 0);\r\n    }\r\n    if (this.rowIndex !== this.table.rowsCount - 1) {\r\n      this.lines.moveTo(0, this.height);\r\n      this.lines.lineTo(this.width, this.height);\r\n    } else this.lines.moveTo(this.width, this.height);\r\n    if (this.span !== this.table.columnsCount) this.lines.lineTo(this.width, 0);\r\n    this.addChild(this.lines);\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/app/components/editor/objects/Layouts/cell.ts","import Container = PIXI.Container;\r\nimport {Cell} from \"./cell\";\r\n\r\nexport class Table extends Container {\r\n  private curCol: number = 0;\r\n  private curRow: number = 0;\r\n\r\n  cells: Cell[][] = [[]];\r\n\r\n  get cellsCount(): number {\r\n    return this.cells.reduce((a, b) => a.concat(b)).length;\r\n  }\r\n\r\n  get columnsCount(): number {\r\n    return this.cells.map(x => x.length)\r\n      .reduce((a, b) => Math.max(a, b));\r\n  }\r\n\r\n  get rowsCount(): number {\r\n    return this.cells.length;\r\n  }\r\n\r\n\r\n  add(obj: Container): Cell {\r\n    let cell = new Cell(this, this.curCol, this.curRow);\r\n    cell.add(obj);\r\n    this.cells[this.curRow].push(cell);\r\n    this.curCol++;\r\n    this.addChild(cell);\r\n    return cell;\r\n  }\r\n\r\n  addText(str: string): Cell {\r\n    let cell = new Cell(this, this.curCol, this.curRow);\r\n    cell.add(new PIXI.Text(str));\r\n    this.cells[this.curRow].push(cell);\r\n    this.curCol++;\r\n    this.addChild(cell);\r\n    return cell;\r\n  }\r\n\r\n  row(): Table {\r\n    if (this.cells.length > 1 && !this.checkRows()) {\r\n      throw new Error('Не одинаковое количество колонок');\r\n    }\r\n    this.curRow++;\r\n    this.curCol = 0;\r\n    this.cells.push([]);\r\n    return this;\r\n  }\r\n\r\n  private checkRows(): boolean {\r\n    return this.cells.map(cr => cr.map(c => c.span).reduce((a, b) => a + b))\r\n      .every((x, i, a) => x === a[0]);\r\n  }\r\n\r\n  colspan(i: number) {\r\n    this.curCol += i - 1;\r\n  }\r\n\r\n  build() {\r\n    let curX: number = 0;\r\n    let curY: number = 0;\r\n\r\n    for (let row: number = 0; row < this.cells.length; row++) {\r\n      for (let col: number = 0; col < this.cells[row].length; col++) {\r\n        var cell = this.cells[row][col];\r\n\r\n        let maxHeight = this.getRowHeight(row);\r\n        // let maxWidth = this.getColumnWidth(col);\r\n        let maxWidth = this.getColumnWidthWithSpan(cell.columnIndex, cell.span);\r\n\r\n        cell.setSize(maxWidth, maxHeight);\r\n        cell.position.set(curX, curY);\r\n        curX += cell.width;\r\n      }\r\n      curX = 0;\r\n      curY += cell.height;\r\n    }\r\n  }\r\n\r\n  build2(drawLines: boolean = false) {\r\n    let curX: number = 0;\r\n    let curY: number = 0;\r\n\r\n    let allCells = this.cells.reduce((a, b) => a.concat(b));\r\n\r\n    let numberOfCols = this.columnsCount;\r\n    let colWidths = [];\r\n    for (let i = 0; i < numberOfCols; i++) {\r\n      colWidths.push(this.getColumnWidth(i));\r\n    }\r\n    let rowHeights = [];\r\n    for (let i = 0; i < this.cells.length; i++) {\r\n      rowHeights.push(this.getRowHeight(i));\r\n    }\r\n\r\n    allCells.forEach(cell => {\r\n      let width = 0;\r\n      for (let i = cell.columnIndex; i < cell.columnIndex + cell.span; i++) {\r\n        width += colWidths[i];\r\n      }\r\n      cell.setSize(width, rowHeights[cell.rowIndex]);\r\n    });\r\n\r\n    for (let row: number = 0; row < this.cells.length; row++) {\r\n      for (let col: number = 0; col < this.cells[row].length; col++) {\r\n        var cell = this.cells[row][col];\r\n        cell.position.set(curX, curY);\r\n        curX += cell.width;\r\n      }\r\n      curX = 0;\r\n      curY += cell.height;\r\n    }\r\n\r\n    if (drawLines) {\r\n      this.cells.reduce((a, b) => a.concat(b)).forEach((x, i, a) => {\r\n        if (i !== a.length - 1) x.drawLines();\r\n      });\r\n\r\n    }\r\n\r\n  }\r\n\r\n  private getRowHeight(row: number): number {\r\n    return this.cells[row].map(x => x.height)\r\n      .reduce((a, b) => Math.max(a, b));\r\n  }\r\n\r\n  private getColumnWidthWithSpan(col: number, span: number): number {\r\n    let result = 0;\r\n    for (let i = 0; i < span; i++) {\r\n      result += this.getColumnWidth(col + i);\r\n    }\r\n    return result;\r\n  }\r\n\r\n  private getColumnWidth(col: number): number {\r\n    let widths = [];\r\n\r\n    this.cells.reduce((a, b) => a.concat(b))\r\n      .filter(x => x.columnIndex === col)\r\n      .forEach(c => {\r\n        // if (c.span === 1) {\r\n        let result = c.width;\r\n        widths.push(result);\r\n        // }\r\n      });\r\n\r\n    return widths.reduce((a, b) => Math.max(a, b));\r\n  }\r\n\r\n  debug(debug: boolean) {\r\n    if (debug) this.cells.forEach(r => r.forEach(c => c.debug(debug)));\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/app/components/editor/objects/Layouts/table.ts","import {EditorObject} from \"./editor-object\";\r\nimport Point = PIXI.Point;\r\nimport {SimpleBlock} from \"./simple-block\";\r\n\r\nexport class Aligner {\r\n  private distance: number = 50;\r\n  private stack: EditorObject[] = [];\r\n\r\n  alignHorizontal(objects: EditorObject[]) {\r\n    let y = objects[0].getGlobalPosition().y;\r\n    objects.forEach(x => {\r\n      let p = x.getGlobalPosition();\r\n      p.y = y;\r\n      let newP = x.parent.toLocal(p);\r\n      x.setPosition(newP);\r\n    });\r\n  }\r\n\r\n  alignHorizontalCenter(objects: EditorObject[]) {\r\n    let y = objects[0].getGlobalPosition().y + objects[0].height / 2;\r\n    objects.forEach(x => {\r\n      let p = x.getGlobalPosition();\r\n      p.y = y - x.height / 2;\r\n      let newP = x.parent.toLocal(p);\r\n      x.setPosition(newP);\r\n    });\r\n  }\r\n\r\n  alignVertical(objects: EditorObject[]) {\r\n    let x = objects[0].getGlobalPosition().x;\r\n    objects.forEach(o => {\r\n      let p = o.getGlobalPosition();\r\n      p.x = x;\r\n      let newP = o.parent.toLocal(p);\r\n      o.setPosition(newP);\r\n    });\r\n  }\r\n\r\n  alignVerticalCenter(objects: EditorObject[]) {\r\n    let x = objects[0].getGlobalPosition().x + objects[0].width / 2;\r\n    objects.forEach(o => {\r\n      let p = o.getGlobalPosition();\r\n      p.x = x - o.width / 2;\r\n      let newP = o.parent.toLocal(p);\r\n      o.setPosition(newP);\r\n    });\r\n  }\r\n\r\n  distributeHorizontal(objects: EditorObject[], sortByX: boolean = true) {\r\n    if (sortByX) objects = objects.sort(this.sortX);\r\n    for (let i = 1; i < objects.length; i++) {\r\n      let newP = new Point(objects[i - 1].x + objects[i - 1].width + this.distance, objects[i].y);\r\n      objects[i].setPosition(newP);\r\n    }\r\n  }\r\n\r\n  distributeVertical(objects: EditorObject[], sortByY: boolean = true) {\r\n    if (sortByY) objects = objects.sort(this.sortY);\r\n    for (let i = 1; i < objects.length; i++) {\r\n      let newP = new Point(objects[i].x, objects[i - 1].y + objects[i - 1].height + this.distance);\r\n      objects[i].setPosition(newP);\r\n    }\r\n  }\r\n\r\n  autoAlign(objects: EditorObject[]) {\r\n    let rootObjs = this.getRootObjects(objects);\r\n    let y = 0;\r\n    rootObjs.forEach((x, i) => {\r\n      let newP = new Point(0, y);\r\n      x.setPosition(newP);\r\n      let branchHeight = this.setNext(x, objects);\r\n      y += branchHeight + this.distance;\r\n    });\r\n    this.stack = [];\r\n  }\r\n\r\n  private getRootObjects(objects: EditorObject[]): EditorObject[] {\r\n    return objects.filter(x => x instanceof SimpleBlock && !x.getInputPort().hasConnections());\r\n  }\r\n\r\n  private setNext(x: EditorObject, objects: EditorObject[]): number {\r\n    let delta = 0;\r\n    let ports = x.getOutputPorts().filter(p => p.hasConnections());\r\n    ports.forEach(p => {\r\n      p.getConnections().forEach(c => {\r\n        let node = c.targetPort.parentBlock;\r\n        if (this.stack.indexOf(node) === -1) {\r\n          let X = x.x + x.width + this.distance;\r\n          let Y = x.y + delta;\r\n          let point = new Point(X, Y);\r\n          delta += node.height + this.distance;\r\n          node.setPosition(point);\r\n          this.stack.push(node);\r\n          if (node.getOutputPorts().filter(p => p.hasConnections()).length > 0) this.setNext(node, objects);\r\n        }\r\n      });\r\n    });\r\n\r\n    return delta === 0 ? x.height : delta;\r\n  }\r\n\r\n  private sortX(a: EditorObject, b: EditorObject): number {\r\n    if (a.x > b.x) return 1;\r\n    else if (a.x < b.x) return -1;\r\n    else return 0;\r\n  }\r\n\r\n  private sortY(a: EditorObject, b: EditorObject): number {\r\n    if (a.y > b.y) return 1;\r\n    else if (a.y < b.y) return -1;\r\n    else return 0;\r\n  }\r\n\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/app/components/editor/objects/aligner.ts","import Sprite = PIXI.Sprite;\r\nimport {IWantsLoader} from \"./iwantsloader\";\r\nimport {IWantsTicker} from \"./iwantsticker\";\r\n\r\nexport class Button extends PIXI.Container implements IWantsLoader, IWantsTicker {\r\n  private sprite: Sprite;\r\n  private s: number = 1;\r\n\r\n  private down = delta => this.scaleDown(delta);\r\n  private up = delta => this.scaleUp(delta);\r\n  private loader: PIXI.loaders.Loader;\r\n  private ticker: PIXI.ticker.Ticker;\r\n  private _name: string;\r\n  private _click: Function;\r\n\r\n  constructor(name: string, click: Function) {\r\n    super();\r\n    this._name = name;\r\n    this._click = click;\r\n  }\r\n\r\n  public start() {\r\n    if (!this.loader) throw new Error('Loader not set');\r\n    if (!this.ticker) throw new Error('Ticker not set');\r\n    this.sprite = new Sprite(this.loader.resources[this._name].texture);\r\n    this.sprite.width = 32;\r\n    this.sprite.height = 32;\r\n    this.sprite.interactive = true;\r\n\r\n    this.sprite.on('pointerout', e => {\r\n      this.ticker.remove(this.up);\r\n      this.ticker.add(this.down);\r\n    });\r\n    this.sprite.on('pointerover', e => {\r\n      this.ticker.remove(this.down);\r\n      this.ticker.add(this.up);\r\n    });\r\n\r\n    this.addChild(this.sprite);\r\n    this.sprite.on('click', (e) => this._click());\r\n  }\r\n\r\n  setTicker(ticker: PIXI.ticker.Ticker): void {\r\n    this.ticker = ticker;\r\n  }\r\n\r\n  setLoader(loader: PIXI.loaders.Loader): void {\r\n    this.loader = loader;\r\n  }\r\n\r\n  scaleUp(delta: number) {\r\n    this.s += 0.1 * delta;\r\n    this.sprite.scale.set(this.s, this.s);\r\n    if (this.s >= 1.5) {\r\n      this.ticker.remove(this.up);\r\n    }\r\n  }\r\n\r\n  scaleDown(delta: number) {\r\n    this.s -= 0.2 * delta;\r\n    this.sprite.scale.set(this.s, this.s);\r\n    if (this.s <= 1) {\r\n      this.sprite.scale.set(1, 1);\r\n      this.ticker.remove(this.down);\r\n    }\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/app/components/editor/objects/button.ts","import {Port, PortOrientation} from \"./port\";\r\nimport {EditorObject} from \"./editor-object\";\r\nimport {Table} from \"./Layouts/table\";\r\nimport Container = PIXI.Container;\r\n\r\nexport class Case extends Container {\r\n  port: Port;\r\n  title: string;\r\n  id: string;\r\n\r\n  constructor(id: string, title: string, parent: EditorObject) {\r\n    super();\r\n    this.id = id;\r\n    this.title = title;\r\n    this.port = new Port(parent, PortOrientation.Right);\r\n    this.port.isInput = false;\r\n    let t = new Table();\r\n    t.addText(this.title).alignCenterRight().padRight(5);\r\n    t.add(this.port).padTop(20);\r\n    t.build2();\r\n\r\n    this.addChild(t);\r\n  }\r\n\r\n  update(title: string) {\r\n    this.removeChildren();\r\n    this.title = title;\r\n    let t = new Table();\r\n    t.addText(this.title).alignCenterRight().padRight(5);\r\n    t.add(this.port).padTop(20);\r\n    t.build2();\r\n    this.addChild(t);\r\n  }\r\n\r\n  getOutputPorts(): Port[] {\r\n    return [this.port];\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/app/components/editor/objects/case.ts","import {EditorObject} from \"./editor-object\";\r\nimport {Port, PortOrientation} from \"./port\";\r\nimport {Table} from \"./Layouts/table\";\r\nimport Graphics = PIXI.Graphics;\r\nimport {Case} from \"./case\";\r\nimport {IDisposable} from \"./idisposable\";\r\n\r\nexport class Condition extends EditorObject implements IDisposable {\r\n  public inPort: Port;\r\n  public outPorts: Port[] = [];\r\n  public code: string;\r\n  private box: PIXI.Graphics;\r\n  public cases: Case[] = [];\r\n\r\n  constructor(public title: string) {\r\n    super();\r\n    this.interactive = true;\r\n    this.addListener('added', e => {\r\n      this.update();\r\n    });\r\n  }\r\n\r\n  public addCase(_case: Case) {\r\n    this.cases.push(_case);\r\n    this.update();\r\n  }\r\n\r\n  public getName(): string {\r\n    return this.title;\r\n  }\r\n\r\n  public dispose() {\r\n    // TODO: удалить подписки и тикеры\r\n  }\r\n\r\n  public update() {\r\n    this.removeChildren();\r\n    let condition = this.createCondition();\r\n    let cases = this.createCases();\r\n    let box = this.createBox(condition, cases);\r\n    cases.position.set(box.width - cases.width + 10, condition.height);\r\n    this.addChild(box, condition, cases);\r\n  }\r\n\r\n  private createCondition(): Table {\r\n    let t = new Table();\r\n    if (!this.inPort) {\r\n      this.inPort = new Port(this, PortOrientation.Left);\r\n    }\r\n    this.inPort.isInput = true;\r\n    t.add(this.inPort).padTop(20);\r\n    t.addText(this.title).alignCenterLeft();\r\n    t.build2();\r\n    return t;\r\n  }\r\n\r\n  private createCases(): Table {\r\n    let table = new Table();\r\n    this.outPorts = [];\r\n    this.cases.forEach((x, i, a) => {\r\n      table.add(x).alignCenterRight();\r\n      if (i < a.length - 1) table.row();\r\n    });\r\n    table.build2();\r\n    return table;\r\n  }\r\n\r\n  private createBox(condition: Table, cases: Table): Graphics {\r\n    let box = this.box = new PIXI.Graphics();\r\n    let height = condition.height + cases.height;\r\n    let width = condition.width >= cases.width ? condition.width : cases.width;\r\n    box.beginFill(0xffe311);\r\n    box.lineStyle(1);\r\n    box.drawRoundedRect(0, 0, width, height, 10);\r\n    box.endFill();\r\n    return box;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/app/components/editor/objects/condition.ts","import {Port} from \"./port\";\r\nimport Graphics = PIXI.Graphics;\r\nimport \"rxjs/add/operator/startWith\";\r\nimport \"rxjs/add/operator/merge\";\r\nimport {IDisposable} from \"./idisposable\";\r\nimport {IWantsTicker} from \"./iwantsticker\";\r\nimport {IWantsLoader} from \"./iwantsloader\";\r\nimport {DeleteButton} from \"./delete-button\";\r\nimport {Subscription} from \"rxjs/Subscription\";\r\n\r\nexport class Connection extends PIXI.Container implements IDisposable, IWantsTicker, IWantsLoader {\r\n  private deleteButton: DeleteButton;\r\n  private curve: Graphics;\r\n  public targetPort: Port;\r\n  public sourcePort: Port;\r\n  public id: string;\r\n\r\n  private btnScale: number = 1;\r\n  private tickerCounter = 0;\r\n  private ticker: PIXI.ticker.Ticker;\r\n  private isSelected = false;\r\n  private fun = (delta) => this.tick(delta);\r\n  private loader: PIXI.loaders.Loader;\r\n  private _started: boolean = false;\r\n  private updateSubscription: Subscription;\r\n\r\n  constructor(_p1: Port, _p2: Port) {\r\n    super();\r\n    if (_p1.isInput === _p2.isInput) throw new Error('Оба порта одинаковые, нельзя так подключать');\r\n    this.interactive = true;\r\n    let [targetPort, sourcePort] = _p1.isInput ? [_p1, _p2] : [_p2, _p1];\r\n    this.targetPort = targetPort;\r\n    this.sourcePort = sourcePort;\r\n\r\n    if (sourcePort.isInput) throw new Error();\r\n    if (!targetPort.isInput) throw new Error();\r\n    if (this.sourcePort.isInput) throw new Error();\r\n    if (!this.targetPort.isInput) throw new Error();\r\n\r\n    targetPort.addConnection(this);\r\n    sourcePort.addConnection(this);\r\n\r\n    this.curve = new Graphics();\r\n    this.addChild(this.curve);\r\n  }\r\n\r\n  start() {\r\n    if (!this.loader) throw new Error('Loader not set');\r\n    if (!this.ticker) throw new Error('Ticker not set');\r\n    this._started = true;\r\n    this.createDeleteButton();\r\n    this.updateSubscription = this.targetPort.parentBlock.onPositionChanged.merge(this.sourcePort.parentBlock.onPositionChanged).startWith(null).subscribe(e => this.update());\r\n    this.addListener('added', e => this.update());\r\n  }\r\n\r\n  public setLoader(loader: PIXI.loaders.Loader): void {\r\n    this.loader = loader;\r\n  }\r\n\r\n  public setTicker(ticker: PIXI.ticker.Ticker) {\r\n    this.ticker = ticker;\r\n  }\r\n\r\n  public dispose() {\r\n    this.filters = [];\r\n    this.clearPorts();\r\n    this.updateSubscription.unsubscribe();\r\n    this.removeDeleteButton();\r\n  }\r\n\r\n  public setSelected(value: boolean): void {\r\n    this.isSelected = value;\r\n    if (value) {\r\n      this.showDelBtn();\r\n    } else {\r\n      this.removeDeleteButton();\r\n    }\r\n    this.update();\r\n  }\r\n\r\n  public clearPorts() {\r\n    this.targetPort.removeConnection(this);\r\n    this.sourcePort.removeConnection(this);\r\n  }\r\n\r\n  private update(): void {\r\n    if (this.targetPort.getConnections().indexOf(this) < 0) throw new Error();\r\n    if (this.sourcePort.getConnections().indexOf(this) < 0) throw new Error();\r\n\r\n    const targetPortGlobalPos = this.targetPort.getGlobalPosition();\r\n    const sourcePortGlobalPos = this.sourcePort.getGlobalPosition();\r\n\r\n    let num1 = 0.75 * Math.abs(sourcePortGlobalPos.y - targetPortGlobalPos.y);\r\n    let num2 = Math.abs(0.5 * ( sourcePortGlobalPos.x - targetPortGlobalPos.x));\r\n    if (num2 < num1) num2 = num1;\r\n    const cp1Global = new PIXI.Point(targetPortGlobalPos.x - num2, targetPortGlobalPos.y);\r\n    const cp2Global = new PIXI.Point(sourcePortGlobalPos.x + num2, sourcePortGlobalPos.y);\r\n\r\n    const port1LocalPos = this.toLocal(targetPortGlobalPos);\r\n    const cp1Local = this.toLocal(cp1Global);\r\n\r\n    const cp2Local = this.toLocal(cp2Global);\r\n    const port2LocalPos = this.toLocal(sourcePortGlobalPos);\r\n\r\n\r\n    this.curve.clear();\r\n    this.curve.lineStyle(this.isSelected ? 5 : 3, this.isSelected ? 0xff4500 : 0x3355ee);\r\n    this.curve.moveTo(port1LocalPos.x + 10, port1LocalPos.y);\r\n    this.curve.bezierCurveTo(cp1Local.x, cp1Local.y, cp2Local.x, cp2Local.y, port2LocalPos.x - 10, port2LocalPos.y);\r\n    if (this.deleteButton) this.calcBtnPosition();\r\n  }\r\n\r\n  private getMiddlePoint(): PIXI.Point {\r\n    let point = new PIXI.Point();\r\n    let a = this.targetPort.getGlobalPosition();\r\n    let b = this.sourcePort.getGlobalPosition();\r\n    point.x = (a.x + b.x) / 2;\r\n    point.y = (a.y + b.y) / 2;\r\n    return this.toLocal(point);\r\n  }\r\n\r\n  private showDelBtn() {\r\n    if (!this.deleteButton) this.createDeleteButton();\r\n    this.calcBtnPosition();\r\n    this.addChild(this.deleteButton);\r\n    if (this.ticker) {\r\n      this.ticker.remove((this.fun));\r\n      this.ticker.add(this.fun);\r\n    }\r\n  }\r\n\r\n  private removeDeleteButton() {\r\n    this.removeChild(this.deleteButton);\r\n    if (this.ticker) this.ticker.remove(this.fun);\r\n    this.tickerCounter = Math.random() * 100;\r\n  }\r\n\r\n  private calcBtnPosition() {\r\n    let p = this.getMiddlePoint();\r\n    this.deleteButton.position.set(p.x, p.y);\r\n  }\r\n\r\n  private tick(delta: number) {\r\n    this.btnScale = (Math.sin(this.tickerCounter += delta / 20) + 1) * 0.15 + 0.6;\r\n    this.deleteButton.scale.set(this.btnScale, this.btnScale);\r\n  }\r\n\r\n  private createDeleteButton() {\r\n    if (!this.loader) throw new Error('Loader is not set');\r\n    this.deleteButton = new DeleteButton(this.loader.resources.del.texture, this.id);\r\n    this.deleteButton.width = 32;\r\n    this.deleteButton.height = 32;\r\n    this.deleteButton.pivot = new PIXI.Point(16, 16);\r\n    this.deleteButton.interactive = true;\r\n    this.deleteButton.buttonMode = true;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/app/components/editor/objects/connection.ts","export class DeleteButton extends PIXI.Sprite {\r\n  constructor(texture: PIXI.Texture, public connectionId: string) {\r\n    super(texture);\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/app/components/editor/objects/delete-button.ts","import {Subject} from \"rxjs/Subject\";\r\nimport {Observable} from \"rxjs/Observable\";\r\nimport {PositionChangedArgs} from \"../events/position-changed-args\";\r\nimport {Port} from \"./port\";\r\nimport {GlowFilter} from \"../glow\";\r\nimport Container = PIXI.Container;\r\nimport {IDisposable} from \"./idisposable\";\r\nimport {IWantsTicker} from \"./iwantsticker\";\r\nimport {IWantsLoader} from \"./iwantsloader\";\r\n\r\nexport abstract class EditorObject extends PIXI.Container implements IDisposable, IWantsTicker, IWantsLoader {\r\n  protected isSelected = false;\r\n  protected _positionChangedSubject: Subject<PositionChangedArgs> = new Subject();\r\n\r\n  public onPositionChanged: Observable<PositionChangedArgs> = this._positionChangedSubject.asObservable();\r\n  public id: string;\r\n\r\n  public canDrag: boolean = true;\r\n\r\n  protected ticker: PIXI.ticker.Ticker;\r\n  protected loader: PIXI.loaders.Loader;\r\n\r\n\r\n  protected _color: number = 0xFFFFFF;\r\n\r\n  public get color(): string {\r\n    var bbggrr = (\"000000\" + this._color.toString(16)).slice(-6);\r\n    var rrggbb = bbggrr.substr(4, 2) + bbggrr.substr(2, 2) + bbggrr.substr(0, 2);\r\n    return \"#\" + rrggbb;\r\n  }\r\n\r\n  public set color(hex: string) {\r\n    hex = hex.substring(1);\r\n    this._color = parseInt(hex, 16);\r\n  }\r\n\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  public abstract getName(): string;\r\n\r\n  public setTicker(ticker: PIXI.ticker.Ticker) {\r\n    this.ticker = ticker;\r\n  }\r\n\r\n  public setLoader(loader: PIXI.loaders.Loader) {\r\n    if (!loader) throw new Error('Loader is null');\r\n    this.loader = loader;\r\n  }\r\n\r\n  public dispose() {\r\n    this.filters = [];\r\n  }\r\n\r\n  public setPosition(point: PIXI.Point) {\r\n    this.x = point.x;\r\n    this.y = point.y;\r\n    this._positionChangedSubject.next(new PositionChangedArgs(point.clone()));\r\n  }\r\n\r\n  public setSelected(isSelected: boolean) {\r\n    if (isSelected && !this.isSelected) {\r\n      this.selectConnections();\r\n      this.filters = [new GlowFilter(10, 2, 0, 0x0099ff, 0.5)];\r\n    } else if (!isSelected && this.isSelected) {\r\n      this.deselectConnections();\r\n      this.filters = [];\r\n    }\r\n    this.isSelected = isSelected;\r\n  }\r\n\r\n  public get selected() {\r\n    return this.isSelected;\r\n  }\r\n\r\n  public selectConnections() {\r\n    this.getAllPorts().filter(x => x.hasConnections())\r\n      .forEach(x => x.getConnections().forEach(c => c.setSelected(true)));\r\n  }\r\n\r\n  public deselectConnections() {\r\n    this.getAllPorts().filter(x => x.hasConnections())\r\n      .forEach(x => x.getConnections().forEach(c => c.setSelected(false)));\r\n  }\r\n\r\n  public hasConnenctions(): boolean {\r\n    return this.getAllPorts().filter(x => x.hasConnections()).length > 0;\r\n  }\r\n\r\n  public getInputPort(): Port {\r\n    return this.getPorts(this).filter(x => x.isInput)[0];\r\n  }\r\n\r\n  public getOutputPorts(): Port[] {\r\n    return this.getPorts(this).filter(x => !x.isInput);\r\n  }\r\n\r\n  public getAllPorts(): Port[] {\r\n    return this.getPorts(this);\r\n  }\r\n\r\n  private getPorts(obj: PIXI.Container): Port[] {\r\n    let result: Port[] = [];\r\n    obj.children.forEach(x => {\r\n      if (x instanceof Port) {\r\n        result.push(x);\r\n      }\r\n      else if (x instanceof Container) {\r\n        result = result.concat(this.getPorts(x));\r\n      }\r\n    });\r\n    return result;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/app/components/editor/objects/editor-object.ts","import {Port} from \"./port\";\r\nimport Graphics = PIXI.Graphics;\r\nimport Container = PIXI.Container;\r\nimport Point = PIXI.Point;\r\n\r\nexport class PhantomConnection extends Container {\r\n  private curve: Graphics;\r\n  private p1: Port;\r\n\r\n  constructor() {\r\n    super();\r\n    this.curve = new Graphics();\r\n    this.addChild(this.curve);\r\n  }\r\n\r\n  public hide(): void {\r\n    this.curve.clear();\r\n    this.p1 = null;\r\n  }\r\n\r\n  public setPort(p1: Port): void {\r\n    this.p1 = p1;\r\n  }\r\n\r\n  public isActive(): boolean {\r\n    return !!this.p1;\r\n  }\r\n\r\n  public update(b: PIXI.Point): void {\r\n    if (!this.p1) return;\r\n    let c2: PIXI.Point;\r\n    let c1: PIXI.Point;\r\n    let a = this.p1.getGlobalPosition();\r\n\r\n    c1 = new PIXI.Point(b.x - (b.x - a.x) / 2, a.y);\r\n    c2 = new PIXI.Point(a.x + (b.x - a.x) / 2, b.y);\r\n\r\n    a = this.toLocal(a);\r\n    c1 = this.toLocal(c1);\r\n    c2 = this.toLocal(c2);\r\n    b = this.toLocal(b);\r\n\r\n    this.curve.clear();\r\n    let vvv = Math.sqrt(Math.pow(a.x - b.x, 2) + Math.pow(a.y - b.y, 2));\r\n    let step = 1 / (vvv / 10);\r\n    let delta = step * 0.3;\r\n    step -= delta;\r\n    for (let i = 0; i <= 1; i += step + delta) {\r\n      let lp1 = PhantomConnection.bezier4(a, c1, c2, b, i);\r\n      let lp2 = PhantomConnection.bezier4(a, c1, c2, b, i + step);\r\n\r\n      this.curve.lineStyle(2, 0x111133);\r\n      this.curve.moveTo(lp1.x, lp1.y);\r\n      this.curve.lineTo(lp2.x, lp2.y);\r\n    }\r\n  }\r\n\r\n  private static bezier4(p1: PIXI.Point, p2: PIXI.Point, p3: PIXI.Point, p4: PIXI.Point, mu: number): PIXI.Point {\r\n    let mum1: number, mum13: number, mu3: number;\r\n    let p = new PIXI.Point();\r\n\r\n    mum1 = 1 - mu;\r\n    mum13 = mum1 * mum1 * mum1;\r\n    mu3 = mu * mu * mu;\r\n\r\n    p.x = mum13 * p1.x + 3 * mu * mum1 * mum1 * p2.x + 3 * mu * mu * mum1 * p3.x + mu3 * p4.x;\r\n    p.y = mum13 * p1.y + 3 * mu * mum1 * mum1 * p2.y + 3 * mu * mu * mum1 * p3.y + mu3 * p4.y;\r\n\r\n    return p;\r\n  }\r\n\r\n  private getLength(p0, p1, p2) {\r\n    const a = new Point(\r\n      p0.x - 2 * p1.x + p2.x,\r\n      p0.y - 2 * p1.y + p2.y\r\n    );\r\n    const b = new Point(\r\n      2 * p1.x - 2 * p0.x,\r\n      2 * p1.y - 2 * p0.y\r\n    );\r\n    const A = 4 * (a.x * a.x + a.y * a.y);\r\n    const B = 4 * (a.x * b.x + a.y * b.y);\r\n    const C = b.x * b.x + b.y * b.y;\r\n\r\n    const Sabc = 2 * Math.sqrt(A + B + C);\r\n    const A_2 = Math.sqrt(A);\r\n    const A_32 = 2 * A * A_2;\r\n    const C_2 = 2 * Math.sqrt(C);\r\n    const BA = B / A_2;\r\n\r\n    return (A_32 * Sabc + A_2 * B * (Sabc - C_2) + (4 * C * A - B * B) * Math.log((2 * A_2 + BA + Sabc) / (BA + C_2))) / (4 * A_32);\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/app/components/editor/objects/phantom-connection.ts","import {EditorObject} from \"./editor-object\";\r\nimport {Connection} from \"./connection\";\r\nimport {GlowFilter} from \"../glow\";\r\nimport {IDisposable} from \"./idisposable\";\r\n\r\nexport class Port extends PIXI.Graphics implements IDisposable {\r\n  isInput: boolean = false;\r\n  parentBlock: EditorObject;\r\n  private connections: Connection[] = [];\r\n  private orientation;\r\n  private _color = 0x00aa33;\r\n  get color(): number {\r\n    return this._color;\r\n  }\r\n\r\n  set color(c: number) {\r\n    this._color = c;\r\n    this.update();\r\n  }\r\n\r\n  constructor(public parent: EditorObject, orientation = PortOrientation.Left) {\r\n    super();\r\n    this.parentBlock = parent;\r\n    this.orientation = orientation;\r\n    this.update();\r\n    this.interactive = true;\r\n    this.buttonMode = true;\r\n\r\n    this.addListener('mouseover', e => {\r\n      this.filters = [new GlowFilter(10, 5, 0, 0xdd11ff, 0.6)];\r\n    });\r\n    this.addListener('mouseout', e => {\r\n      this.filters = [];\r\n    });\r\n  }\r\n\r\n  dispose(): void {\r\n    this.filters = [];\r\n  }\r\n\r\n  public addConnection(connection: Connection) {\r\n    if (this.connections.indexOf(connection) !== -1) throw new Error('Соединение уже есть в порте');\r\n    this.connections.push(connection);\r\n  }\r\n\r\n  public removeConnection(connection: Connection) {\r\n    if (this.connections.indexOf(connection) === -1) throw new Error('Такого соединения нет в порте');\r\n    this.connections.splice(this.connections.indexOf(connection), 1);\r\n  }\r\n\r\n  public getConnections() {\r\n    return this.connections;\r\n  }\r\n\r\n  public hasConnection(connection: Connection) {\r\n    return this.connections.indexOf(connection) !== -1;\r\n  }\r\n\r\n  public hasConnections() {\r\n    return this.connections.length > 0;\r\n  }\r\n\r\n  private update() {\r\n    this.beginFill(this.color);\r\n    this.lineStyle(2);\r\n    const angle = this.getAngle(this.orientation);\r\n    this.arc(0, 0, 10, angle, Math.PI + angle);\r\n    this.endFill();\r\n  }\r\n\r\n  private getAngle(orientation: PortOrientation) {\r\n    switch (orientation) {\r\n      case PortOrientation.Left:\r\n        return Math.PI / 2;\r\n      case PortOrientation.Right:\r\n        return Math.PI / 2 + Math.PI;\r\n      default:\r\n        return Math.PI / 2;\r\n    }\r\n  }\r\n}\r\n\r\nexport enum PortOrientation {\r\n  Left,\r\n  Right\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/app/components/editor/objects/port.ts","export class SelectionFrame extends PIXI.Graphics {\r\n  private endPoint: PIXI.Point;\r\n  public direction: { down: boolean, right: boolean };\r\n  private frameWidth: number;\r\n  private frameHeight: number;\r\n\r\n  constructor(private startPoint: PIXI.Point) {\r\n    super();\r\n  }\r\n\r\n  public update(currentPoint: PIXI.Point) {\r\n    this.clear();\r\n    let width = currentPoint.x - this.startPoint.x;\r\n    let height = currentPoint.y - this.startPoint.y;\r\n    this.frameWidth = Math.abs(width);\r\n    this.frameHeight = Math.abs(height);\r\n    this.lineStyle(1, 0x002277);\r\n    this.beginFill(0x0000ff, 0.05);\r\n    this.drawRect(this.startPoint.x, this.startPoint.y, width, height);\r\n    this.endFill();\r\n    this.endPoint = currentPoint.clone();\r\n    this.direction = {down: height > 0, right: width > 0};\r\n  }\r\n\r\n  public getRect(): PIXI.Rectangle {\r\n    if (!this.endPoint) return null;\r\n    return new PIXI.Rectangle(\r\n      Math.min(this.startPoint.x, this.endPoint.x),\r\n      Math.min(this.startPoint.y, this.endPoint.y),\r\n      this.frameWidth, this.frameHeight);\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/app/components/editor/objects/selection-frame.ts","import {Port, PortOrientation} from \"./port\";\r\nimport {EditorObject} from \"./editor-object\";\r\nimport {Table} from \"./Layouts/table\";\r\nimport {Button} from \"./button\";\r\nimport {Requirement} from \"./requirement\";\r\nimport Container = PIXI.Container;\r\nimport Graphics = PIXI.Graphics;\r\n\r\nexport class SimpleBlock extends EditorObject {\r\n  private _box: PIXI.Graphics;\r\n  public inPort: Port;\r\n  public outPort: Port;\r\n\r\n  public inputReqs: Requirement[] = [];\r\n  public outputReqs: Requirement[] = [];\r\n\r\n  public embeddedContainer: Container;\r\n\r\n  blockName: string = 'pupsik\\r\\nshmupsik\\r\\nepta';\r\n  blockCode: string = 'ПД.ОДИ.Б1.Э1';\r\n  blockRole: string = 'АР_ВС';\r\n  blockHours: number = 10000;\r\n\r\n  constructor() {\r\n    super();\r\n    this.interactive = true;\r\n  }\r\n\r\n  public getName(): string {\r\n    return this.blockName;\r\n  }\r\n\r\n  public start() {\r\n    if (!this.loader) throw new Error('Loader not set');\r\n    if (!this.ticker) throw new Error('Ticker not set');\r\n    this.addListener('added', e => {\r\n      this.update();\r\n    });\r\n  }\r\n\r\n  public dispose() {\r\n    // TODO: удалить подписки и тикеры\r\n  }\r\n\r\n  addInputReq(req: Requirement): SimpleBlock {\r\n    this.inputReqs.push(req);\r\n    return this;\r\n  }\r\n\r\n  addOutputReq(req: Requirement): SimpleBlock {\r\n    this.outputReqs.push(req);\r\n    return this;\r\n  }\r\n\r\n  public update() {\r\n    if (this.embeddedContainer) {\r\n      this.embeddedContainer.children.filter(x => x instanceof SimpleBlock).forEach(x => (<SimpleBlock>x).update());\r\n    }\r\n    this.removeChildren();\r\n    this.createEmbeddedContainer();\r\n    let root = this.createMainContent();\r\n    let reqs = this.createReqs(root);\r\n    root.position.set(0, Math.max(reqs[0].height, reqs[1].height));\r\n    let box = this.createBox(root, reqs[0], reqs[1]);\r\n    this.createPorts(root, reqs[0], reqs[1]);\r\n    this.addChild(this.inPort, this.outPort, box, ...reqs, root);\r\n  }\r\n\r\n  private createReqs(rootTable: Table): Table[] {\r\n    let inputReqs = new Table();\r\n    for (let req of this.inputReqs) {\r\n      inputReqs.add(req);\r\n      inputReqs.row();\r\n    }\r\n    if (inputReqs.cellsCount > 0) {\r\n      inputReqs.build2();\r\n      inputReqs.position.set(0, 0);\r\n    }\r\n\r\n    let outputReqs = new Table();\r\n    for (let req of this.outputReqs) {\r\n      outputReqs.add(req);\r\n      outputReqs.row();\r\n    }\r\n    if (outputReqs.cellsCount > 0) {\r\n      outputReqs.build2();\r\n      outputReqs.position.set(rootTable.width, 0);\r\n    }\r\n\r\n    return [inputReqs, outputReqs];\r\n  }\r\n\r\n  private createMainContent(): Table {\r\n    let table = new Table();\r\n    table.addText(this.blockName).alignCenter().colspan(3);\r\n    table.row();\r\n    if (this.embeddedContainer.children.length > 0) {\r\n      table.add(this.embeddedContainer).colspan(3).alignCenter().padAll(20);\r\n      table.row();\r\n    }\r\n    table.addText(this.blockCode).alignCenter();//.separtor();\r\n    table.addText(this.blockRole).alignCenter();//.separtor();\r\n    table.addText(this.blockHours.toString()).alignCenter();\r\n    table.row();\r\n    this.loadImg(table);\r\n    table.build2(true);\r\n    return table;\r\n  }\r\n\r\n  private createEmbeddedContainer() {\r\n    if (!this.embeddedContainer) {\r\n      this.embeddedContainer = new Container();\r\n    }\r\n    //ToDo сделать заполнение вложенными данными\r\n    // let co = new Container();\r\n    // let c1 = new Condition(3, 'fgsfg');\r\n    // c1.position.set(30, 0);\r\n    // let c2 = new Condition(3, 'fgsfg');\r\n    // c2.position.set(300, 30);\r\n    // let cccc = new Connection(c1.outPorts[0], c2.sourcePort);\r\n    // co.addChild(c1, c2, cccc);\r\n  }\r\n\r\n  private createBox(rootTable: Table, inputReqs: Table, outputReqs: Table): Graphics {\r\n    let box = this._box = new PIXI.Graphics();\r\n    let h = rootTable.height + Math.max(inputReqs.height, outputReqs.height);\r\n    let w = rootTable.width;\r\n    // box.beginFill(0xCBC6BE);\r\n    box.beginFill(this._color);\r\n    box.lineStyle(2);\r\n    box.drawRoundedRect(0, 0, w, h, 10);\r\n    box.endFill();\r\n    return box;\r\n  }\r\n\r\n  private createPorts(rootTable: Table, inputReqs: Table, outputReqs: Table): Port[] {\r\n    let h = rootTable.height + Math.max(inputReqs.height, outputReqs.height);\r\n    let w = rootTable.width;\r\n    if (!this.inPort) this.inPort = new Port(this, PortOrientation.Left);\r\n    this.inPort.x = 0;\r\n    this.inPort.y = h - rootTable.height / 2;\r\n    this.inPort.isInput = true;\r\n    if (!this.outPort) this.outPort = new Port(this, PortOrientation.Right);\r\n    this.outPort.x = w;\r\n    this.outPort.y = h - rootTable.height / 2;\r\n    return [this.inPort, this.outPort];\r\n  }\r\n\r\n  private loadImg(rootTable: Table) {\r\n\r\n    let table = new Table();\r\n    table.add(this.loadSprite('word')).alignCenter();\r\n    table.add(this.loadSprite('pdf')).alignCenter();\r\n    table.add(this.loadSprite('revit')).alignCenter();\r\n    table.add(this.loadSprite('navisworks')).alignCenter();\r\n    table.add(this.loadSprite('excel')).alignCenter();\r\n    table.build2();\r\n\r\n    let table1 = new Table();\r\n    table1.add(this.createButton('picture', () => {\r\n      alert('Picture!');\r\n    }));\r\n    table1.add(this.createButton('youtube', () => {\r\n      window.open('https://youtu.be/nKFDp9Y52-o');\r\n    })).alignCenter().padRight(2);\r\n    table1.add(this.createButton('table', () => {\r\n    })).alignCenter().padRight(2);\r\n    table1.add(this.createButton('edu', () => {\r\n    })).alignCenter().padRight(2);\r\n    table1.add(this.createButton('book', () => {\r\n    })).alignCenter().padRight(2);\r\n    table1.build2();\r\n\r\n    rootTable.add(table).alignCenterLeft();\r\n    rootTable.add(table1).alignCenterRight().colspan(2);\r\n\r\n  }\r\n\r\n  private createButton(name: string, fn: () => any) {\r\n    const button = new Button(name, fn);\r\n    button.setTicker(this.ticker);\r\n    button.setLoader(this.loader);\r\n    button.start();\r\n    return button;\r\n  }\r\n\r\n  private loadSprite(name: string): PIXI.Sprite {\r\n    if (!this.loader) throw new Error('Loader is not set');\r\n    let sprite = new PIXI.Sprite(this.loader.resources[name].texture);\r\n    sprite.scale = new PIXI.Point(0.5, 0.5);\r\n    sprite.width = 32;\r\n    sprite.height = 32;\r\n    return sprite;\r\n  }\r\n\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/app/components/editor/objects/simple-block.ts","import {EditorObject} from \"./objects/editor-object\";\r\nimport {Bump} from \"../../ext/bump\";\r\nimport DisplayObject = PIXI.DisplayObject;\r\n\r\nexport class SelectorFn {\r\n  public static containsSelectorFn(bump: Bump, rect: PIXI.Rectangle): (EditorObject) => boolean {\r\n    return function (object: EditorObject | DisplayObject) {\r\n      if (!(object instanceof EditorObject)) return false;\r\n      let bounds = object.getBounds();\r\n      return rect.x < bounds.x && rect.y < bounds.y && (rect.x + rect.width > bounds.x + bounds.width) &&\r\n        (rect.y + rect.height > bounds.y + bounds.height);\r\n    }\r\n  };\r\n\r\n  public static intersectSelectorFn(bump: Bump, rect: PIXI.Rectangle): (EditorObject) => boolean {\r\n    return function (object: EditorObject | DisplayObject) {\r\n      if (!(object instanceof EditorObject)) return false;\r\n      return bump.hitTestRectangle(rect, object.getBounds());\r\n    }\r\n  };\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/app/components/editor/selector-fn.ts","import * as PIXI from 'pixi.js';\r\n\r\nexport class Zoom {\r\n  private _zoomDirty = true;\r\n\r\n  private _positionX = 0;\r\n  private _positionY = 0;\r\n\r\n  private _scaleX = 1;\r\n  private _scaleY = 1;\r\n\r\n  private _scaleCenterX = 0;\r\n  private _scaleCenterY = 0;\r\n\r\n  private _atSCTransform = new PIXI.Matrix();\r\n  private _zoomCenter = new PIXI.Matrix();\r\n  private _scaleTransform = new PIXI.Matrix();\r\n  private _negScaleCenter = new PIXI.Matrix();\r\n\r\n  private _transform = new PIXI.Matrix();\r\n\r\n  private _updateMatrix() {\r\n    this._zoomCenter.set(1, 0, 0, 1, this._scaleCenterX, this._scaleCenterY); // Sets to translate\r\n    this._scaleTransform.set(this._scaleX, 0, 0, this._scaleY, 0, 0); // Sets to scale\r\n    this._negScaleCenter.set(1, 0, 0, 1, -this._scaleCenterX, -this._scaleCenterY); // Sets to translate\r\n\r\n    // Accumulate zoom transformations.\r\n    // atSCTransform is an intermediate accumulative matrix used for tracking the current zoom target.\r\n    this._atSCTransform.append(this._zoomCenter);\r\n    this._atSCTransform.append(this._scaleTransform);\r\n    this._atSCTransform.append(this._negScaleCenter);\r\n\r\n    // We reset Scale because atSCTransform is accumulative and has \"captured\" the information.\r\n    this._scaleX = 1;\r\n    this._scaleY = 1;\r\n\r\n    // Tack on translation. Note: we don't append it, but concat it into a separate matrix.\r\n    // We want to leave atSCTransform solely responsible for zooming.\r\n    // \"transform\" is the final matrix.\r\n    this._transform.set(\r\n      this._atSCTransform.a, this._atSCTransform.b, this._atSCTransform.c, this._atSCTransform.d,\r\n      this._atSCTransform.tx, this._atSCTransform.ty);\r\n    // this._transform.prepend(this._atTransform);\r\n    this._transform.translate(this._positionX, this._positionY);\r\n  }\r\n\r\n  public get Transform(): PIXI.Matrix {\r\n    if (this._zoomDirty) {\r\n      this._updateMatrix();\r\n\r\n      // Now that we have rebuilt the transform matrix is it no longer dirty.\r\n      this._zoomDirty = false;\r\n    }\r\n    return this._transform;\r\n  }\r\n\r\n  public set Transform(t: PIXI.Matrix) {\r\n    this._transform = t;\r\n  }\r\n\r\n  /**\r\n   * Use this if you want to manually set the positional value.\r\n   * You would typically use translateBy() instead.\r\n   */\r\n  public setPosition(posX: number, posY: number) {\r\n    this._positionX = posX;\r\n    this._positionY = posY;\r\n    this._zoomDirty = true;\r\n  }\r\n\r\n  public get positionX(): number {\r\n    return this._positionX;\r\n  }\r\n\r\n  public get positionY(): number {\r\n    return this._positionY;\r\n  }\r\n\r\n  /**\r\n   * A relative zoom.\r\n   * [delta] is a delta relative to the current scale/zoom.\r\n   */\r\n  public zoomBy(deltaX: number, deltaY: number) {\r\n    this._scaleX += deltaX;\r\n    this._scaleY += deltaY;\r\n    this._zoomDirty = true;\r\n  }\r\n\r\n  public translateBy(deltaX: number, deltaY: number) {\r\n    this._positionX += deltaX;\r\n    this._positionY += deltaY;\r\n    this._zoomDirty = true;\r\n  }\r\n\r\n  /**\r\n   * Set the zoom value absolutely. If you want to zoom relative use\r\n   * [zoomBy]\r\n   */\r\n  public set currentScale(newScale: number) {\r\n    if (this._zoomDirty) {\r\n      this._updateMatrix();\r\n    }\r\n\r\n    // We use dimensional analysis to set the scale. Remember we can't\r\n    // just set the scale absolutely because atSCTransform is an accumulating matrix.\r\n    // We have to take its current value and compute a new value based\r\n    // on the passed in value.\r\n\r\n    // Also, I can use atSCTransform.a because I don't allow rotations within in the game,\r\n    // so the diagonal components correctly represent the matrix's current scale.\r\n    // And because I only perform uniform scaling I can safely use just the \"a\" element.\r\n    const scaleFactor: number = newScale / this._atSCTransform.a;\r\n\r\n    this._scaleX = scaleFactor;\r\n    this._scaleY = scaleFactor;\r\n\r\n    this._zoomDirty = true;\r\n  }\r\n\r\n  public get currentScale(): number {\r\n    return this._atSCTransform.a;\r\n  }\r\n\r\n  public setScaleCenter(posX: number, posY: number) {\r\n    this._scaleCenterX = posX;\r\n    this._scaleCenterY = posY;\r\n    this._zoomDirty = true;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/app/components/editor/zoom.ts","module.exports = \"<h1>Создать документ</h1>\\r\\n<mat-card style=\\\"width: 980px; margin-left: 36px;\\\">\\r\\n  <mat-card-title>Документ</mat-card-title>\\r\\n  <mat-card-content>\\r\\n    <form novalidate [formGroup]=\\\"form\\\" (ngSubmit)=\\\"onSubmit(form)\\\" style=\\\"font-size: medium;\\\">\\r\\n      <mat-form-field [floatPlaceholder]=\\\"true\\\">\\r\\n        <input matInput placeholder=\\\"Название документа\\\" formControlName=\\\"name\\\" required>\\r\\n      </mat-form-field>\\r\\n      <mat-form-field [floatPlaceholder]=\\\"true\\\">\\r\\n        <input matInput placeholder=\\\"Шифр документа\\\" formControlName=\\\"code\\\" required>\\r\\n      </mat-form-field>\\r\\n      <div formArrayName=\\\"levels\\\">\\r\\n        <h4>Уровни</h4>\\r\\n        <div *ngFor=\\\"let level of levelsControls(); let i=index\\\">\\r\\n          <div [formGroupName]=\\\"i\\\">\\r\\n            <span><b>{{i}}</b></span>\\r\\n            <mat-form-field [floatPlaceholder]=\\\"true\\\">\\r\\n              <input matInput placeholder=\\\"Шифр\\\" formControlName=\\\"code\\\" required>\\r\\n            </mat-form-field>\\r\\n            <mat-form-field [floatPlaceholder]=\\\"true\\\">\\r\\n              <input matInput placeholder=\\\"Название\\\" formControlName=\\\"name\\\" required>\\r\\n            </mat-form-field>\\r\\n            <mat-checkbox formControlName=\\\"autoNumbering\\\">Автонумерация</mat-checkbox>\\r\\n            <color-picker formControlName=\\\"color\\\"\\r\\n                          style=\\\"width: 100px; display: inline-block;    margin-left: 36px;\\\"></color-picker>\\r\\n            <button *ngIf=\\\"i > 0\\\" mat-button type=\\\"button\\\" (click)=\\\"removeLevel(level, i)\\\" title=\\\"Удалить уровень\\\">\\r\\n              <mat-icon>delete_forever</mat-icon>\\r\\n            </button>\\r\\n          </div>\\r\\n        </div>\\r\\n        <button mat-mini-fab (click)=\\\"addLevel()\\\" type=\\\"button\\\" title=\\\"Добавить уровень\\\">\\r\\n          <mat-icon>add</mat-icon>\\r\\n        </button>\\r\\n        <br><br><br><br><br><br>\\r\\n        <button mat-button mat-raised-button class=\\\"primary\\\" type=\\\"submit\\\">Создать документ</button>\\r\\n      </div>\\r\\n    </form>\\r\\n  </mat-card-content>\\r\\n</mat-card>\\r\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// G:/Projects/ТхПр/thpr2/src/app/components/level-editor/level-editor.component.html\n// module id = ../../../../../src/app/components/level-editor/level-editor.component.html\n// module chunks = main","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// G:/Projects/ТхПр/thpr2/src/app/components/level-editor/level-editor.component.scss\n// module id = ../../../../../src/app/components/level-editor/level-editor.component.scss\n// module chunks = main","import {Component, OnInit} from '@angular/core';\r\nimport {AbstractControl, FormArray, FormBuilder, FormControl, FormGroup} from \"@angular/forms\";\r\nimport {ToastService} from \"../../services/toast.service\";\r\nimport {DataService} from \"../../services/data.service\";\r\nimport {LevelDto} from \"./level-dto\";\r\nimport {Router} from \"@angular/router\";\r\nimport \"rxjs/add/operator/catch\";\r\nimport {Observable} from \"rxjs/Observable\";\r\n\r\n@Component({\r\n  selector: 'app-level-editor',\r\n  templateUrl: './level-editor.component.html',\r\n  styleUrls: ['./level-editor.component.scss']\r\n})\r\nexport class LevelEditorComponent implements OnInit {\r\n  form: FormGroup;\r\n\r\n  constructor(private formBuilder: FormBuilder,\r\n              private toastService: ToastService,\r\n              private router: Router,\r\n              private dataService: DataService) {\r\n    this.form = formBuilder.group({\r\n      name: formBuilder.control(''),\r\n      code: formBuilder.control(''),\r\n      levels: formBuilder.array([\r\n        formBuilder.group(this.makeLevel())\r\n      ])\r\n    });\r\n  }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  public onSubmit({value, valid}) {\r\n    if (!valid) {\r\n      this.toastService.error('Форма невалидна');\r\n      return;\r\n    }\r\n    this.dataService.createDocument(value.name, value.code, value.levels)\r\n      .catch(e => {\r\n        this.toastService.error(e);\r\n        return Observable.of(null);\r\n\r\n      })\r\n      .subscribe(document => {\r\n          if (document) {\r\n            this.router.navigate(['editor', document.id]);\r\n          }\r\n        }\r\n      )\r\n  }\r\n\r\n  private makeLevel(): LevelDto {\r\n    return {\r\n      name: '',\r\n      code: '',\r\n      autoNumbering: true,\r\n      color: 'ff0000'\r\n    };\r\n  }\r\n\r\n  public addLevel() {\r\n    const control = <FormArray>this.form.controls.levels;\r\n    const level = this.formBuilder.group(this.makeLevel());\r\n    control.push(level);\r\n  }\r\n\r\n  public removeLevel(level, i) {\r\n    const control = <FormArray>this.form.controls.levels;\r\n    control.removeAt(i);\r\n  }\r\n\r\n  public levelsControls(): AbstractControl[] {\r\n    return (<FormArray>this.form.controls.levels).controls;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/app/components/level-editor/level-editor.component.ts","import {IEventEmitter} from \"../../api/src/ts/interfaces/IEventEmitter\";\r\nimport {IEventArgs} from \"../../api/src/ts/interfaces/IEventArgs\";\r\nimport {IDisposable} from \"./editor/objects/idisposable\";\r\n\r\n/**\r\n * @deprecated\r\n */\r\nexport class ListenerSubscription<T> {\r\n  constructor(private object: IEventEmitter<T>, private event: T, private fn: (e: IEventArgs) => void) {\r\n  }\r\n\r\n  public subscribe(): ListenerSubscription<T> {\r\n    this.object.addListener(this.event, this.fn);\r\n    return this;\r\n  }\r\n\r\n  public unsubscribe(): void {\r\n    this.object.deleteListener(this.event, this.fn);\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/app/components/listener-subscription.ts","module.exports = \"<div class=\\\"main-menu\\\">\\n  <mat-menu #appMenu=\\\"matMenu\\\">\\n    <button mat-menu-item routerLink=\\\"\\\"> Документы</button>\\n  </mat-menu>\\n  <button mat-icon-button [matMenuTriggerFor]=\\\"appMenu\\\">\\n    <mat-icon>more_vert</mat-icon>\\n  </button>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// G:/Projects/ТхПр/thpr2/src/app/components/main-menu/main-menu.component.html\n// module id = ../../../../../src/app/components/main-menu/main-menu.component.html\n// module chunks = main","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".main-menu {\\n  height: 50px; }\\n\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// G:/Projects/ТхПр/thpr2/src/app/components/main-menu/main-menu.component.scss\n// module id = ../../../../../src/app/components/main-menu/main-menu.component.scss\n// module chunks = main","import {Component, OnInit} from '@angular/core';\n\n@Component({\n  selector: 'app-main-menu',\n  templateUrl: './main-menu.component.html',\n  styleUrls: ['./main-menu.component.scss']\n})\nexport class MainMenuComponent implements OnInit {\n\n  constructor() {\n  }\n\n  ngOnInit() {\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/app/components/main-menu/main-menu.component.ts","import * as d3 from 'd3';\r\nimport {TreeLayout} from \"d3-hierarchy\";\r\nimport {Subject} from \"rxjs/Subject\";\r\nimport {NavigationRecord} from \"../../models/navigation-record\";\r\n\r\nexport class CollapsibleTree {\r\n  public duration = 300;\r\n  public margin = {top: 20, right: 120, bottom: 20, left: 120};\r\n  private treemap: TreeLayout<any>;\r\n  private svg;\r\n  private xOffset = 100;\r\n  private i = 1;\r\n  private root;\r\n  private circleRadius = 10;\r\n  private _navigate: Subject<any> = new Subject();\r\n  private currentViewRootId: string;\r\n\r\n  private svgElement: SVGElement;\r\n  public onNavigate = this._navigate.asObservable();\r\n\r\n  constructor(svgElement: SVGElement) {\r\n    this.svgElement = svgElement;\r\n  }\r\n\r\n  public init(treeData: NavigationRecord, currentViewRootId: string) {\r\n    this.currentViewRootId = currentViewRootId;\r\n    const svgElement = this.svgElement;\r\n    let margin = this.margin;\r\n    let width = svgElement.clientWidth - margin.right - margin.left;\r\n    let height = svgElement.clientHeight - margin.top - margin.bottom;\r\n    d3.select(svgElement).selectAll('*').remove();\r\n    const svg = this.svg = d3.select(svgElement)\r\n      .attr(\"width\", width + margin.right + margin.left)\r\n      .attr(\"height\", height + margin.top + margin.bottom)\r\n      .append(\"g\")\r\n      .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\r\n    this.treemap = d3.tree().size([height, width]);\r\n    let root = d3.hierarchy(treeData, (d: any) => d.children);\r\n    (<any>root).x0 = height / 2;\r\n    (<any>root).y0 = 0;\r\n    if (root.children) root.children.forEach(x => this.collapse(x, x.data.expanded));\r\n    this.root = root;\r\n    this.update(root);\r\n  }\r\n\r\n  private collapse(d, selfExpanded: boolean = false) {\r\n    if (d.children) {\r\n      if (selfExpanded) {\r\n        // схлопнуть только детей\r\n        d.children.forEach(x => this.collapse(x));\r\n      } else if (!d.data.expanded) {\r\n        d._children = d.children;\r\n        d._children.forEach(x => this.collapse(x));\r\n        d.children = null;\r\n      }\r\n    }\r\n  }\r\n\r\n  private click(d) {\r\n    if (d.parent) d.parent.children.filter(c => c !== d).forEach(c => this.collapse(c));\r\n    if (d.children) {\r\n      d._children = d.children;\r\n      d.children = null;\r\n    } else {\r\n      d.children = d._children;\r\n      d._children = null;\r\n    }\r\n    this.update(d);\r\n  }\r\n\r\n  private static diagonal(s, d) {\r\n    return `M ${s.y} ${s.x} C ${(s.y + d.y) / 2} ${s.x},${(s.y + d.y) / 2} ${d.x},${d.y} ${d.x}`\r\n  }\r\n\r\n  public update(source) {\r\n    let treeData = this.treemap(this.root);\r\n    let nodes = treeData.descendants(),\r\n      links = treeData.descendants().slice(1);\r\n    nodes.forEach(d => {\r\n      d.y = d.depth * this.xOffset\r\n    });\r\n    let node = this.svg.selectAll('g.node').data(nodes, d => d.id || (d.id = this.getId()));\r\n\r\n    let nodeEnter = node.enter().append('g')\r\n      .attr('class', 'node')\r\n      .attr(\"transform\", d => \"translate(\" + source.y0 + \",\" + source.x0 + \")\")\r\n      .on('contextmenu', d => {\r\n        d3.event.preventDefault();\r\n        this._navigate.next(d.data);\r\n      })\r\n      .on('click', d => this.click(d));\r\n    nodeEnter.append('circle')\r\n      .attr('class', 'node')\r\n      .attr('r', 1e-6)\r\n      .style(\"fill\", (d: any) => this.getNodeColor(d));\r\n    nodeEnter.append('text')\r\n      .attr(\"dy\", \".35em\")\r\n      .attr(\"x\", (d: any) => d.children || d._children ? -13 : 13)\r\n      .attr(\"text-anchor\", (d: any) => d.children || d._children ? \"end\" : \"start\")\r\n      .attr('id', d => d.data.id)\r\n      .text(d => d.data.name);\r\n    let nodeUpdate = nodeEnter.merge(node);\r\n    nodeUpdate.transition()\r\n      .duration(this.duration)\r\n      .attr(\"transform\", (d) => {\r\n        return \"translate(\" + d.y + \",\" + d.x + \")\";\r\n      });\r\n    nodeUpdate.select('circle.node')\r\n      .attr('r', this.circleRadius)\r\n      .style(\"fill\", (d: any) => this.getNodeColor(d))\r\n      .attr('cursor', 'pointer');\r\n    let nodeExit = node.exit().transition()\r\n      .duration(this.duration)\r\n      .attr(\"transform\", (d) => {\r\n        return \"translate(\" + source.y + \",\" + source.x + \")\";\r\n      })\r\n      .remove();\r\n    nodeExit.select('circle')\r\n      .attr('r', 1e-6);\r\n    nodeExit.select('text')\r\n      .style('fill-opacity', 1e-6);\r\n\r\n    let link = this.svg.selectAll('path.link')\r\n      .data(links, d => d.id);\r\n    let linkEnter = link.enter().insert('path', \"g\")\r\n      .attr(\"class\", \"link\")\r\n      .attr('d', d => {\r\n        let o = {x: source.x0, y: source.y0};\r\n        return CollapsibleTree.diagonal(o, o);\r\n      });\r\n    let linkUpdate = linkEnter.merge(link);\r\n    linkUpdate.transition()\r\n      .duration(this.duration)\r\n      .attr('d', d => {\r\n        return CollapsibleTree.diagonal(d, d.parent);\r\n      });\r\n    let linkExit = link.exit().transition()\r\n      .duration(this.duration)\r\n      .attr('d', d => {\r\n        let o = {x: source.x, y: source.y};\r\n        return CollapsibleTree.diagonal(o, o);\r\n      })\r\n      .remove();\r\n    nodes.forEach((d: any) => {\r\n      d.x0 = d.x;\r\n      d.y0 = d.y;\r\n    });\r\n  }\r\n\r\n  private getNodeColor(node): string {\r\n    return node.data.id === this.currentViewRootId ? '#FFA500' : node._children ? \"lightsteelblue\" : \"#fff\"\r\n  }\r\n\r\n  private getId() {\r\n    this.i += 1;\r\n    return this.i;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/app/components/navigation/collapsible-tree.ts","module.exports = \"<mat-expansion-panel>\\r\\n  <mat-expansion-panel-header>\\r\\n    <mat-panel-title>\\r\\n      Навигация\\r\\n    </mat-panel-title>\\r\\n    <mat-panel-description>\\r\\n      <mat-chip-list>\\r\\n        <mat-chip *ngFor=\\\"let b of breadcrumbs\\\" [style.background-color]=\\\"b.color\\\" (click)=\\\"chipsNavigate(b.id)\\\">\\r\\n          {{b.name}}\\r\\n        </mat-chip>\\r\\n      </mat-chip-list>\\r\\n    </mat-panel-description>\\r\\n  </mat-expansion-panel-header>\\r\\n  <svg #svg width=\\\"960\\\" height=\\\"700\\\" class=\\\"no-select\\\"></svg>\\r\\n</mat-expansion-panel>\\r\\n\\r\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// G:/Projects/ТхПр/thpr2/src/app/components/navigation/navigation.component.html\n// module id = ../../../../../src/app/components/navigation/navigation.component.html\n// module chunks = main","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".mat-expansion-panel-header {\\n  box-shadow: 1px -3px 7px 3px; }\\n\\n.mat-expansion-panel-header-title {\\n  -webkit-box-flex: 0;\\n      -ms-flex-positive: 0;\\n          flex-grow: 0; }\\n\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// G:/Projects/ТхПр/thpr2/src/app/components/navigation/navigation.component.scss\n// module id = ../../../../../src/app/components/navigation/navigation.component.scss\n// module chunks = main","import {Component, EventEmitter, Input, NgZone, OnDestroy, OnInit, Output, ViewChild} from '@angular/core';\r\nimport {CollapsibleTree} from \"./collapsible-tree\";\r\nimport {AccordionItem} from \"@angular/material\";\r\nimport {AppApiService} from \"../../services/app-api.service\";\r\nimport {NavigationRecord} from \"../../models/navigation-record\";\r\nimport {IDocument} from \"../../../api/src/ts/interfaces/IDocument\";\r\nimport {DocumentEventNames} from \"../../../api/src/ts/enums/event_names/DocumentEventNames\";\r\nimport {IEventArgs} from \"../../../api/src/ts/interfaces/IEventArgs\";\r\nimport {ILevelEntity} from \"../../../api/src/ts/interfaces/ILevelEntity\";\r\nimport {ILevelNode} from \"../../../api/src/ts/interfaces/ILevelNode\";\r\nimport {Observable} from \"rxjs/Observable\";\r\nimport {Subscription} from \"rxjs/Subscription\";\r\nimport {ListenerSubscription} from \"../listener-subscription\";\r\n\r\n@Component({\r\n  selector: 'app-navigation',\r\n  templateUrl: './navigation.component.html',\r\n  styleUrls: ['./navigation.component.scss']\r\n})\r\nexport class NavigationComponent implements OnInit, OnDestroy {\r\n  @ViewChild('svg') svg;\r\n  @ViewChild(AccordionItem) accordion;\r\n  @Output() navigate: EventEmitter<string> = new EventEmitter(true);\r\n  @Input() viewRootSource: Observable<string>;\r\n  @Input() documentSource: Observable<IDocument>;\r\n\r\n  private documentChangedListener: ListenerSubscription<DocumentEventNames>;\r\n  private subscriptions: Subscription[] = [];\r\n  private collapsibleTree: CollapsibleTree;\r\n  private viewRootNodeId: string;\r\n  private document: IDocument;\r\n\r\n  public breadcrumbs: any[] = [];\r\n\r\n  constructor(private appApiService: AppApiService, private ngZone: NgZone) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    const collapsibleTree = this.collapsibleTree = new CollapsibleTree(this.svg.nativeElement);\r\n    this.subscriptions.push(this.documentSource.subscribe(document => {\r\n      this.document = document;\r\n      if (this.documentChangedListener) this.documentChangedListener.unsubscribe();\r\n      this.documentChangedListener = new ListenerSubscription<DocumentEventNames>(document, DocumentEventNames.DocumentChanged, (e: IEventArgs) => {\r\n        this.makeNavigation(document, collapsibleTree, this.viewRootNodeId);\r\n      }).subscribe();\r\n      this.makeNavigation(document, collapsibleTree, document.getContext().getRootNode().id);\r\n    }));\r\n\r\n    this.subscriptions.push(collapsibleTree.onNavigate.subscribe(r => {\r\n      if (!r.navigatable) return;\r\n      this.ngZone.run(() => {\r\n        this.accordion.close();\r\n        this.navigate.emit(r.id);\r\n      });\r\n    }));\r\n\r\n    this.subscriptions.push(this.viewRootSource.subscribe(id => {\r\n      if (!this.document) return;\r\n      const breadcrumbs = [];\r\n      let node = this.document.getContext().getObject(id) as ILevelNode;\r\n      if (!node) return;\r\n      while (true) {\r\n        breadcrumbs.push({\r\n          id: node.id,\r\n          name: node.name,\r\n          code: node.code,\r\n          color: node.getLevel().color\r\n        });\r\n        if (!node.getParent()) break;\r\n        node = node.getParent();\r\n      }\r\n      this.breadcrumbs = breadcrumbs.reverse();\r\n      this.viewRootNodeId = id;\r\n      this.makeNavigation(this.document, this.collapsibleTree, id);\r\n    }));\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.subscriptions.forEach(s => s.unsubscribe());\r\n  }\r\n\r\n  private makeNavigation(document: IDocument, collapsibleTree: CollapsibleTree, viewRootId: string) {\r\n    const makeNavRecs = (levelNode: ILevelNode, parent: NavigationRecord) => {\r\n      const navRecord = new NavigationRecord(levelNode.id, levelNode.name, levelNode.code);\r\n      navRecord.parent = parent;\r\n      navRecord.children = levelNode.getChildrenNodes()\r\n        .filter(childLevelNode => {\r\n          return childLevelNode.canHaveChildren();\r\n        })\r\n        .map(x => makeNavRecs(x as ILevelNode, navRecord));\r\n      if (navRecord.id === viewRootId) {\r\n        navRecord.expanded = true;\r\n        let parent = navRecord;\r\n        while (true) {\r\n          parent = parent.parent;\r\n          if (!parent) break;\r\n          parent.expanded = true;\r\n        }\r\n      }\r\n      return navRecord;\r\n    };\r\n    const rootNode = document.getContext().getRootNode();\r\n    const root = new NavigationRecord(rootNode.id, rootNode.name, rootNode.code);\r\n    root.children = (rootNode.getChildrenNodes() as ILevelEntity[]).map(x => makeNavRecs(x as ILevelNode, root));\r\n    collapsibleTree.init(root, viewRootId);\r\n  }\r\n\r\n  public chipsNavigate(id: string) {\r\n    this.navigate.emit(id);\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/app/components/navigation/navigation.component.ts","module.exports = \"<div style=\\\"width: 250px;\\\">\\r\\n  <mat-card>\\r\\n    <mat-card-header>\\r\\n\\r\\n    </mat-card-header>\\r\\n\\r\\n    <mat-card-content>\\r\\n      <div [ngSwitch]=\\\"formType\\\">\\r\\n        <div *ngSwitchCase=\\\"'entity'\\\">\\r\\n          <form [formGroup]=\\\"form\\\" novalidate>\\r\\n            <div class=\\\"form-group\\\">\\r\\n              <mat-form-field>\\r\\n                <input matInput formControlName=\\\"code\\\" placeholder=\\\"Шифр\\\">\\r\\n              </mat-form-field>\\r\\n\\r\\n              <mat-form-field>\\r\\n                <input matInput formControlName=\\\"name\\\" placeholder=\\\"Имя\\\">\\r\\n              </mat-form-field>\\r\\n\\r\\n              <mat-form-field>\\r\\n                <input matInput type=\\\"number\\\" formControlName=\\\"laborCosts\\\" placeholder=\\\"Трудозатраты\\\">\\r\\n              </mat-form-field>\\r\\n\\r\\n              <!--<mat-form-field>-->\\r\\n              <!--<mat-select placeholder=\\\"Роль\\\" formControlName=\\\"role\\\">-->\\r\\n              <!--<mat-option *ngFor=\\\"let role of roles\\\" [value]=\\\"role\\\">{{role}}</mat-option>-->\\r\\n              <!--</mat-select>-->\\r\\n              <!--</mat-form-field>-->\\r\\n\\r\\n              <mat-form-field>\\r\\n                <input matInput formControlName=\\\"soft\\\" placeholder=\\\"link\\\">\\r\\n              </mat-form-field>\\r\\n\\r\\n              <mat-form-field>\\r\\n                <input matInput formControlName=\\\"author\\\" placeholder=\\\"Автор\\\">\\r\\n              </mat-form-field>\\r\\n\\r\\n              <div formArrayName=\\\"links\\\">\\r\\n                <div *ngFor=\\\"let link of links.controls; let i=index\\\" [formGroupName]=\\\"i\\\">\\r\\n\\r\\n                  <mat-form-field>\\r\\n                    <input matInput formControlName=\\\"text\\\" placeholder=\\\"\\\">\\r\\n                  </mat-form-field>\\r\\n                </div>\\r\\n              </div>\\r\\n\\r\\n\\r\\n              <mat-form-field>\\r\\n                <textarea matInput formControlName=\\\"description\\\" placeholder=\\\"Примечание\\\"></textarea>\\r\\n              </mat-form-field>\\r\\n\\r\\n            </div>\\r\\n          </form>\\r\\n        </div>\\r\\n\\r\\n        <div *ngSwitchCase=\\\"'condition'\\\">\\r\\n          <form [formGroup]=\\\"form\\\" novalidate>\\r\\n            <div class=\\\"form-group\\\">\\r\\n              <mat-form-field>\\r\\n                <input matInput formControlName=\\\"code\\\" placeholder=\\\"Шифр\\\">\\r\\n              </mat-form-field>\\r\\n\\r\\n              <mat-form-field>\\r\\n                <input matInput formControlName=\\\"name\\\" placeholder=\\\"Имя\\\">\\r\\n              </mat-form-field>\\r\\n\\r\\n              <mat-card>\\r\\n                <mat-card-header><b>Варианты</b></mat-card-header>\\r\\n                <mat-card-content>\\r\\n                  <div formArrayName=\\\"variants\\\">\\r\\n                    <div *ngFor=\\\"let variant of variants.controls; let i=index\\\">\\r\\n                      <div [formGroupName]=\\\"i\\\" class=\\\"slon\\\">\\r\\n                        <mat-form-field>\\r\\n                          <input matInput formControlName=\\\"text\\\">\\r\\n                        </mat-form-field>\\r\\n                        <button *ngIf=\\\"i > 1\\\" mat-button (click)=\\\"deleteVariant(i)\\\" type=\\\"button\\\" style=\\\"width: 50px\\\">\\r\\n                          <mat-icon>delete_forever</mat-icon>\\r\\n                        </button>\\r\\n                      </div>\\r\\n                    </div>\\r\\n                  </div>\\r\\n\\r\\n                  <div class=\\\"slon\\\">\\r\\n                    <button mat-button type=\\\"button\\\" (click)=\\\"addVariant()\\\">\\r\\n                      <mat-icon>add</mat-icon>\\r\\n                    </button>\\r\\n                  </div>\\r\\n                </mat-card-content>\\r\\n              </mat-card>\\r\\n\\r\\n\\r\\n            </div>\\r\\n          </form>\\r\\n        </div>\\r\\n\\r\\n        <div *ngSwitchCase=\\\"'all'\\\">\\r\\n          <mat-card>Выбраны разные типы объектов!</mat-card>\\r\\n        </div>\\r\\n\\r\\n        <div *ngSwitchCase=\\\"''\\\">\\r\\n          <mat-card>Корневой документ</mat-card>\\r\\n        </div>\\r\\n      </div>\\r\\n    </mat-card-content>\\r\\n  </mat-card>\\r\\n</div>\\r\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// G:/Projects/ТхПр/thpr2/src/app/components/sidebar/sidebar.component.html\n// module id = ../../../../../src/app/components/sidebar/sidebar.component.html\n// module chunks = main","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// G:/Projects/ТхПр/thpr2/src/app/components/sidebar/sidebar.component.scss\n// module id = ../../../../../src/app/components/sidebar/sidebar.component.scss\n// module chunks = main","import {Component, Input, OnDestroy, OnInit} from '@angular/core';\r\nimport {Observable} from \"rxjs/Observable\";\r\nimport {AppApiService} from \"../../services/app-api.service\";\r\nimport {FormArray, FormBuilder, FormGroup} from \"@angular/forms\";\r\nimport {ICondition} from \"../../../api/src/ts/interfaces/ICondition\";\r\nimport {ILevelNode} from \"../../../api/src/ts/interfaces/ILevelNode\";\r\nimport {ILevelEntity} from \"../../../api/src/ts/interfaces/ILevelEntity\";\r\nimport {TypeNames} from \"../../../api/src/ts/enums/TypeNames\";\r\nimport {DataService} from \"../../services/data.service\";\r\nimport {Subscription} from \"rxjs/Subscription\";\r\nimport \"rxjs/add/operator/switchMap\";\r\nimport \"rxjs/add/operator/withLatestFrom\";\r\nimport {IDocument} from \"../../../api/src/ts/interfaces/IDocument\";\r\nimport {DocumentEventNames} from \"../../../api/src/ts/enums/event_names/DocumentEventNames\";\r\nimport {ObservableListener} from \"../../observable-listener\";\r\nimport \"rxjs/add/operator/do\";\r\nimport {IEventArgs} from \"../../../api/src/ts/interfaces/IEventArgs\";\r\n\r\n@Component({\r\n  selector: 'app-sidebar',\r\n  templateUrl: './sidebar.component.html',\r\n  styleUrls: ['./sidebar.component.scss']\r\n})\r\nexport class SidebarComponent implements OnInit, OnDestroy {\r\n  @Input() selectionSource: Observable<string[]>;\r\n  @Input() documentSource: Observable<IDocument>;\r\n\r\n  private formSubscriptions: Subscription[] = [];\r\n  public roles: string[] = ['1', '2'];\r\n  public formType: 'entity' | 'condition' | 'all' | '' = '';\r\n  private subscriptions: Subscription[] = [];\r\n  private document: IDocument;\r\n\r\n  public form: FormGroup;\r\n\r\n  constructor(private _appApi: AppApiService, private fB: FormBuilder, private dataService: DataService) {\r\n\r\n\r\n  }\r\n\r\n  get variants(): FormArray {\r\n    return this.form.get('variants') as FormArray;\r\n  }\r\n\r\n  get links(): FormArray {\r\n    return this.form.get('links') as FormArray;\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.subscriptions.forEach(x => x.unsubscribe());\r\n    this.formSubscriptions.forEach(x => x.unsubscribe());\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.subscriptions.push(this.documentSource.do(document => this.document = document).flatMap(document => ObservableListener.create(document, DocumentEventNames.DocumentChanged))\r\n      .subscribe((e: IEventArgs) => {\r\n        const doc = e.source as IDocument;\r\n        if (e.data) {\r\n          switch (this.formType) {\r\n            case 'entity':\r\n              const entityFormItems = this.form.get('items').value as string[];\r\n              if (entityFormItems.length > 0) {\r\n                const nodes = entityFormItems.map(x => doc.getContext().getLevelNode(x) as ILevelNode);\r\n                this.form = this.createEntityForm(nodes);\r\n                this.subscribeForm();\r\n              }\r\n              break;\r\n            case 'condition':\r\n              const conditionFormItems = this.form.get('items').value as string[];\r\n              if (conditionFormItems.length > 0) {\r\n                const nodes = conditionFormItems.map(x => doc.getContext().getCondition(x) as ICondition);\r\n                this.form = this.createConditionForm(nodes);\r\n                this.subscribeForm();\r\n              }\r\n              break;\r\n          }\r\n        }\r\n      }));\r\n\r\n    this.subscriptions.push(this.selectionSource.withLatestFrom(this.documentSource)\r\n      .subscribe(([items, document]) => {\r\n        this.unsubscribeAll();\r\n        if (items.length > 0) {\r\n          const nodeValues: ILevelEntity[] = items.map(itemId => document.getContext().getLevelNode(itemId) || document.getContext().getCondition(itemId));\r\n          if (nodeValues.every(x => x.typeName === TypeNames.LevelNode)) {\r\n            this.formType = 'entity';\r\n            this.form = this.createEntityForm(nodeValues as ILevelNode[]);\r\n            this.subscribeForm();\r\n          }\r\n          else if (nodeValues.every(x => x.typeName === TypeNames.Condition)) {\r\n            this.formType = 'condition';\r\n            this.form = this.createConditionForm(nodeValues as ICondition[]);\r\n            this.subscribeForm();\r\n          } else if (nodeValues.some(x => x.typeName === TypeNames.LevelNode) &&\r\n            nodeValues.some(x => x.typeName === TypeNames.Condition)) {\r\n            this.formType = 'all';\r\n          }\r\n          else {\r\n            this.formType = '';\r\n          }\r\n        } else {\r\n          this.formType = '';\r\n        }\r\n      }));\r\n  }\r\n\r\n  private subscribeForm() {\r\n    this.formSubscriptions.push(this.form.valueChanges\r\n      //.debounce(() => Observable.timer(500))\r\n      .subscribe(value => this.dataService.updateEntitiesFromForm(this.document, value)));\r\n  }\r\n\r\n  private unsubscribeAll() {\r\n    this.formSubscriptions.forEach(x => x.unsubscribe());\r\n    this.formSubscriptions = [];\r\n  }\r\n\r\n  createEntityForm(nodeValues: ILevelNode[]): FormGroup {\r\n    let result: any = {};\r\n    result.formType = 'entity';\r\n    result.items = [];\r\n    result.items.push(nodeValues.map(x => x.id));\r\n    result.links = this.fB.array([]);\r\n    result.role = '';\r\n    result.code = '';\r\n    result.name = '';\r\n    result.laborCosts = 0;\r\n    result.description = '';\r\n    result.soft = '';\r\n    result.author = '';\r\n\r\n    let form = this.fB.group(result);\r\n\r\n    if (nodeValues.every((x, i, a) => x.code === a[0].code)) {\r\n      form.get('code').patchValue(nodeValues[0].code);\r\n    } else {\r\n      form.get('code').patchValue('*РАЗЛИЧНЫЕ*');\r\n      form.get('code').disable();\r\n    }\r\n    if (nodeValues.every((x, i, a) => x.name === a[0].name)) {\r\n      form.get('name').patchValue(nodeValues[0].name);\r\n    } else {\r\n      form.get('name').patchValue('*РАЗЛИЧНЫЕ*');\r\n      form.get('name').disable();\r\n    }\r\n    if (nodeValues.every((x, i, a) => x.laborCosts === a[0].laborCosts)) {\r\n      form.get('laborCosts').patchValue(nodeValues[0].laborCosts);\r\n    } else {\r\n      form.get('laborCosts').patchValue('*РАЗЛИЧНЫЕ*');\r\n    }\r\n    if (nodeValues.every((x, i, a) => x.description === a[0].description)) {\r\n      form.get('description').patchValue(nodeValues[0].description);\r\n    } else {\r\n      form.get('description').patchValue('*РАЗЛИЧНЫЕ*');\r\n      form.get('description').disable();\r\n    }\r\n\r\n\r\n    //todo обновить софт и линки\r\n\r\n    return form;\r\n  }\r\n\r\n  createConditionForm(conditions: ICondition[]): FormGroup {\r\n    let result: any = {};\r\n    result.formType = 'condition';\r\n    result.items = [];\r\n    result.items.push(conditions.map(x => x.id));\r\n    result.code = '';\r\n    result.name = '';\r\n    result.variants = this.fB.array([]);\r\n\r\n    let form = this.fB.group(result);\r\n\r\n    if (conditions.every((x, i, a) => x.code === a[0].code)) {\r\n      form.get('code').patchValue(conditions[0].code);\r\n    } else {\r\n      form.get('code').patchValue('*РАЗЛИЧНЫЕ*');\r\n    }\r\n    if (conditions.every((x, i, a) => x.name === a[0].name)) {\r\n      form.get('name').patchValue(conditions[0].name);\r\n    } else {\r\n      form.get('name').patchValue('*РАЗЛИЧНЫЕ*');\r\n    }\r\n    if (conditions.map(x => x.getVariants().map(v => v.text).reduce((a, b) => a + b) ===\r\n        conditions[0].getVariants().map(v => v.text).reduce((a, b) => a + b))) {\r\n      const objects = conditions[0].getVariants().map(x => this.fB.group({id: x.id, text: x.text}));\r\n      let array = form.get('variants') as FormArray;\r\n      array.reset();\r\n      objects.forEach(o => array.push(o));\r\n    }\r\n\r\n    return form;\r\n  }\r\n\r\n  // private getRole(entity: IEntity): string {\r\n  //   return this.roles.filter(role => role.id === entity.roleId)[0];\r\n  // }\r\n\r\n  addVariant() {\r\n    this.dataService.createVarian(this.document, this.form.get('items').value as string[], 'новый вариант');\r\n  }\r\n\r\n  deleteVariant(index: number) {\r\n    const array = this.form.get('variants') as FormArray;\r\n    const id = array.controls[index].get('id').value as string;\r\n    this.dataService.deleteObjects(this.document, [id]);\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/app/components/sidebar/sidebar.component.ts","export class Bump {\n  private renderer: string;\n\n  constructor(renderingEngine = PIXI) {\n    if (renderingEngine === undefined) throw new Error(\"Please assign a rendering engine in the constructor before using bump.js\");\n\n    this.renderer = \"pixi\";\n\n  }\n\n  //`addCollisionProperties` adds extra properties to sprites to help\n  //simplify the collision code. It won't add these properties if they\n  //already exist on the sprite. After these properties have been\n  //added, this methods adds a Boolean property to the sprite called `_bumpPropertiesAdded`\n  //and sets it to `true` to flag that the sprite has these\n  //new properties\n  addCollisionProperties(sprite) {\n\n    //Add properties to Pixi sprites\n    if (this.renderer === \"pixi\") {\n\n      //gx\n      if (sprite.gx === undefined) {\n        Object.defineProperty(sprite, \"gx\", {\n          get() {\n            return sprite.getGlobalPosition().x\n          },\n          enumerable: true, configurable: true\n        });\n      }\n\n      //gy\n      if (sprite.gy === undefined) {\n        Object.defineProperty(sprite, \"gy\", {\n          get() {\n            return sprite.getGlobalPosition().y\n          },\n          enumerable: true, configurable: true\n        });\n      }\n\n      //centerX\n      if (sprite.centerX === undefined) {\n        Object.defineProperty(sprite, \"centerX\", {\n          get() {\n            return sprite.x + sprite.width / 2\n          },\n          enumerable: true, configurable: true\n        });\n      }\n\n      //centerY\n      if (sprite.centerY === undefined) {\n        Object.defineProperty(sprite, \"centerY\", {\n          get() {\n            return sprite.y + sprite.height / 2\n          },\n          enumerable: true, configurable: true\n        });\n      }\n\n      //halfWidth\n      if (sprite.halfWidth === undefined) {\n        Object.defineProperty(sprite, \"halfWidth\", {\n          get() {\n            return sprite.width / 2\n          },\n          enumerable: true, configurable: true\n        });\n      }\n\n      //halfHeight\n      if (sprite.halfHeight === undefined) {\n        Object.defineProperty(sprite, \"halfHeight\", {\n          get() {\n            return sprite.height / 2\n          },\n          enumerable: true, configurable: true\n        });\n      }\n\n      //xAnchorOffset\n      if (sprite.xAnchorOffset === undefined) {\n        Object.defineProperty(sprite, \"xAnchorOffset\", {\n          get() {\n            if (sprite.anchor !== undefined) {\n              return sprite.width * sprite.anchor.x;\n            } else {\n              return 0;\n            }\n          },\n          enumerable: true, configurable: true\n        });\n      }\n\n      //yAnchorOffset\n      if (sprite.yAnchorOffset === undefined) {\n        Object.defineProperty(sprite, \"yAnchorOffset\", {\n          get() {\n            if (sprite.anchor !== undefined) {\n              return sprite.height * sprite.anchor.y;\n            } else {\n              return 0;\n            }\n          },\n          enumerable: true, configurable: true\n        });\n      }\n\n      if (sprite.circular && sprite.radius === undefined) {\n        Object.defineProperty(sprite, \"radius\", {\n          get() {\n            return sprite.width / 2\n          },\n          enumerable: true, configurable: true\n        });\n      }\n\n      //Earlier code - not needed now.\n      /*\n      Object.defineProperties(sprite, {\n        \"gx\": {\n          get(){return sprite.getGlobalPosition().x},\n          enumerable: true, configurable: true\n        },\n        \"gy\": {\n          get(){return sprite.getGlobalPosition().y},\n          enumerable: true, configurable: true\n        },\n        \"centerX\": {\n          get(){return sprite.x + sprite.width / 2},\n          enumerable: true, configurable: true\n        },\n        \"centerY\": {\n          get(){return sprite.y + sprite.height / 2},\n          enumerable: true, configurable: true\n        },\n        \"halfWidth\": {\n          get(){return sprite.width / 2},\n          enumerable: true, configurable: true\n        },\n        \"halfHeight\": {\n          get(){return sprite.height / 2},\n          enumerable: true, configurable: true\n        },\n        \"xAnchorOffset\": {\n          get(){\n            if (sprite.anchor !== undefined) {\n              return sprite.height * sprite.anchor.x;\n            } else {\n              return 0;\n            }\n          },\n          enumerable: true, configurable: true\n        },\n        \"yAnchorOffset\": {\n          get(){\n            if (sprite.anchor !== undefined) {\n              return sprite.width * sprite.anchor.y;\n            } else {\n              return 0;\n            }\n          },\n          enumerable: true, configurable: true\n        }\n      });\n      */\n    }\n\n    //Add a Boolean `_bumpPropertiesAdded` property to the sprite to flag it\n    //as having these new properties\n    sprite._bumpPropertiesAdded = true;\n  }\n\n  /*\n  hitTestPoint\n  ------------\n\n  Use it to find out if a point is touching a circlular or rectangular sprite.\n  Parameters:\n  a. An object with `x` and `y` properties.\n  b. A sprite object with `x`, `y`, `centerX` and `centerY` properties.\n  If the sprite has a `radius` property, the function will interpret\n  the shape as a circle.\n  */\n\n  hitTestPoint(point, sprite) {\n\n    //Add collision properties\n    if (!sprite._bumpPropertiesAdded) this.addCollisionProperties(sprite);\n\n    let shape, left, right, top, bottom, vx, vy, magnitude, hit;\n\n    //Find out if the sprite is rectangular or circular depending\n    //on whether it has a `radius` property\n    if (sprite.radius) {\n      shape = \"circle\";\n    } else {\n      shape = \"rectangle\";\n    }\n\n    //Rectangle\n    if (shape === \"rectangle\") {\n\n      //Get the position of the sprite's edges\n      left = sprite.x - sprite.xAnchorOffset;\n      right = sprite.x + sprite.width - sprite.xAnchorOffset;\n      top = sprite.y - sprite.yAnchorOffset;\n      bottom = sprite.y + sprite.height - sprite.yAnchorOffset;\n\n      //Find out if the point is intersecting the rectangle\n      hit = point.x > left && point.x < right && point.y > top && point.y < bottom;\n    }\n\n    //Circle\n    if (shape === \"circle\") {\n\n      //Find the distance between the point and the\n      //center of the circle\n      let vx = point.x - sprite.x - (sprite.width / 2) + sprite.xAnchorOffset,\n        vy = point.y - sprite.y - (sprite.height / 2) + sprite.yAnchorOffset,\n        magnitude = Math.sqrt(vx * vx + vy * vy);\n\n      //The point is intersecting the circle if the magnitude\n      //(distance) is less than the circle's radius\n      hit = magnitude < sprite.radius;\n    }\n\n    //`hit` will be either `true` or `false`\n    return hit;\n  }\n\n  /*\n  hitTestCircle\n  -------------\n\n  Use it to find out if two circular sprites are touching.\n  Parameters:\n  a. A sprite object with `centerX`, `centerY` and `radius` properties.\n  b. A sprite object with `centerX`, `centerY` and `radius`.\n  */\n\n  hitTestCircle(c1, c2, global = false) {\n\n    //Add collision properties\n    if (!c1._bumpPropertiesAdded) this.addCollisionProperties(c1);\n    if (!c2._bumpPropertiesAdded) this.addCollisionProperties(c2);\n\n    let vx, vy, magnitude, combinedRadii, hit;\n\n    //Calculate the vector between the circles’ center points\n    if (global) {\n      //Use global coordinates\n      vx = (c2.gx + (c2.width / 2) - c2.xAnchorOffset) - (c1.gx + (c1.width / 2) - c1.xAnchorOffset);\n      vy = (c2.gy + (c2.width / 2) - c2.yAnchorOffset) - (c1.gy + (c1.width / 2) - c1.yAnchorOffset);\n    } else {\n      //Use local coordinates\n      vx = (c2.x + (c2.width / 2) - c2.xAnchorOffset) - (c1.x + (c1.width / 2) - c1.xAnchorOffset);\n      vy = (c2.y + (c2.width / 2) - c2.yAnchorOffset) - (c1.y + (c1.width / 2) - c1.yAnchorOffset);\n    }\n\n    //Find the distance between the circles by calculating\n    //the vector's magnitude (how long the vector is)\n    magnitude = Math.sqrt(vx * vx + vy * vy);\n\n    //Add together the circles' total radii\n    combinedRadii = c1.radius + c2.radius;\n\n    //Set `hit` to `true` if the distance between the circles is\n    //less than their `combinedRadii`\n    hit = magnitude < combinedRadii;\n\n    //`hit` will be either `true` or `false`\n    return hit;\n  }\n\n  /*\n  circleCollision\n  ---------------\n\n  Use it to prevent a moving circular sprite from overlapping and optionally\n  bouncing off a non-moving circular sprite.\n  Parameters:\n  a. A sprite object with `x`, `y` `centerX`, `centerY` and `radius` properties.\n  b. A sprite object with `x`, `y` `centerX`, `centerY` and `radius` properties.\n  c. Optional: true or false to indicate whether or not the first sprite\n  should bounce off the second sprite.\n  The sprites can contain an optional mass property that should be greater than 1.\n\n  */\n\n  circleCollision(c1, c2, bounce = false, global = false) {\n\n    //Add collision properties\n    if (!c1._bumpPropertiesAdded) this.addCollisionProperties(c1);\n    if (!c2._bumpPropertiesAdded) this.addCollisionProperties(c2);\n\n    let magnitude, combinedRadii, overlap,\n      vx, vy, dx, dy, s = {x: undefined, y: undefined},\n      hit = false;\n\n    //Calculate the vector between the circles’ center points\n\n    if (global) {\n      //Use global coordinates\n      vx = (c2.gx + (c2.width / 2) - c2.xAnchorOffset) - (c1.gx + (c1.width / 2) - c1.xAnchorOffset);\n      vy = (c2.gy + (c2.width / 2) - c2.yAnchorOffset) - (c1.gy + (c1.width / 2) - c1.yAnchorOffset);\n    } else {\n      //Use local coordinates\n      vx = (c2.x + (c2.width / 2) - c2.xAnchorOffset) - (c1.x + (c1.width / 2) - c1.xAnchorOffset);\n      vy = (c2.y + (c2.width / 2) - c2.yAnchorOffset) - (c1.y + (c1.width / 2) - c1.yAnchorOffset);\n    }\n\n    //Find the distance between the circles by calculating\n    //the vector's magnitude (how long the vector is)\n    magnitude = Math.sqrt(vx * vx + vy * vy);\n\n    //Add together the circles' combined half-widths\n    combinedRadii = c1.radius + c2.radius;\n\n    //Figure out if there's a collision\n    if (magnitude < combinedRadii) {\n\n      //Yes, a collision is happening\n      hit = true;\n\n      //Find the amount of overlap between the circles\n      overlap = combinedRadii - magnitude;\n\n      //Add some \"quantum padding\". This adds a tiny amount of space\n      //between the circles to reduce their surface tension and make\n      //them more slippery. \"0.3\" is a good place to start but you might\n      //need to modify this slightly depending on the exact behaviour\n      //you want. Too little and the balls will feel sticky, too much\n      //and they could start to jitter if they're jammed together\n      let quantumPadding = 0.3;\n      overlap += quantumPadding;\n\n      //Normalize the vector\n      //These numbers tell us the direction of the collision\n      dx = vx / magnitude;\n      dy = vy / magnitude;\n\n      //Move circle 1 out of the collision by multiplying\n      //the overlap with the normalized vector and subtract it from\n      //circle 1's position\n      c1.x -= overlap * dx;\n      c1.y -= overlap * dy;\n\n      //Bounce\n      if (bounce) {\n        //Create a collision vector object, `s` to represent the bounce \"surface\".\n        //Find the bounce surface's x and y properties\n        //(This represents the normal of the distance vector between the circles)\n        s.x = vy;\n        s.y = -vx;\n\n        //Bounce c1 off the surface\n        this.bounceOffSurface(c1, s);\n      }\n    }\n    return hit;\n  }\n\n  /*\n  movingCircleCollision\n  ---------------------\n\n  Use it to make two moving circles bounce off each other.\n  Parameters:\n  a. A sprite object with `x`, `y` `centerX`, `centerY` and `radius` properties.\n  b. A sprite object with `x`, `y` `centerX`, `centerY` and `radius` properties.\n  The sprites can contain an optional mass property that should be greater than 1.\n\n  */\n\n  movingCircleCollision(c1, c2, global = false) {\n\n    //Add collision properties\n    if (!c1._bumpPropertiesAdded) this.addCollisionProperties(c1);\n    if (!c2._bumpPropertiesAdded) this.addCollisionProperties(c2);\n\n    let combinedRadii, overlap, xSide, ySide,\n      //`s` refers to the distance vector between the circles\n      s = {\n        vx: undefined,\n        vy: undefined,\n        lx: undefined,\n        ly: undefined,\n        magnitude: undefined,\n        dx: undefined,\n        dy: undefined,\n        vxHalf: undefined,\n        vyHalf: undefined\n      },\n      p1A = {x: undefined, y: undefined},\n      p1B = {x: undefined, y: undefined},\n      p2A = {x: undefined, y: undefined},\n      p2B = {x: undefined, y: undefined},\n      hit = false;\n\n    //Apply mass, if the circles have mass properties\n    c1.mass = c1.mass || 1;\n    c2.mass = c2.mass || 1;\n\n    //Calculate the vector between the circles’ center points\n    if (global) {\n\n      //Use global coordinates\n      s.vx = (c2.gx + c2.radius - c2.xAnchorOffset) - (c1.gx + c1.radius - c1.xAnchorOffset);\n      s.vy = (c2.gy + c2.radius - c2.yAnchorOffset) - (c1.gy + c1.radius - c1.yAnchorOffset);\n    } else {\n\n      //Use local coordinates\n      s.vx = (c2.x + c2.radius - c2.xAnchorOffset) - (c1.x + c1.radius - c1.xAnchorOffset);\n      s.vy = (c2.y + c2.radius - c2.yAnchorOffset) - (c1.y + c1.radius - c1.yAnchorOffset);\n    }\n\n    //Find the distance between the circles by calculating\n    //the vector's magnitude (how long the vector is)\n    s.magnitude = Math.sqrt(s.vx * s.vx + s.vy * s.vy);\n\n    //Add together the circles' combined half-widths\n    combinedRadii = c1.radius + c2.radius;\n\n    //Figure out if there's a collision\n    if (s.magnitude < combinedRadii) {\n\n      //Yes, a collision is happening\n      hit = true;\n\n      //Find the amount of overlap between the circles\n      overlap = combinedRadii - s.magnitude;\n\n      //Add some \"quantum padding\" to the overlap\n      overlap += 0.3;\n\n      //Normalize the vector.\n      //These numbers tell us the direction of the collision\n      s.dx = s.vx / s.magnitude;\n      s.dy = s.vy / s.magnitude;\n\n      //Find the collision vector.\n      //Divide it in half to share between the circles, and make it absolute\n      s.vxHalf = Math.abs(s.dx * overlap / 2);\n      s.vyHalf = Math.abs(s.dy * overlap / 2);\n\n      //Find the side that the collision is occurring on\n      (c1.x > c2.x) ? xSide = 1 : xSide = -1;\n      (c1.y > c2.y) ? ySide = 1 : ySide = -1;\n\n      //Move c1 out of the collision by multiplying\n      //the overlap with the normalized vector and adding it to\n      //the circles' positions\n      c1.x = c1.x + (s.vxHalf * xSide);\n      c1.y = c1.y + (s.vyHalf * ySide);\n\n      //Move c2 out of the collision\n      c2.x = c2.x + (s.vxHalf * -xSide);\n      c2.y = c2.y + (s.vyHalf * -ySide);\n\n      //1. Calculate the collision surface's properties\n\n      //Find the surface vector's left normal\n      s.lx = s.vy;\n      s.ly = -s.vx;\n\n      //2. Bounce c1 off the surface (s)\n\n      //Find the dot product between c1 and the surface\n      let dp1 = c1.vx * s.dx + c1.vy * s.dy;\n\n      //Project c1's velocity onto the collision surface\n      p1A.x = dp1 * s.dx;\n      p1A.y = dp1 * s.dy;\n\n      //Find the dot product of c1 and the surface's left normal (s.lx and s.ly)\n      let dp2 = c1.vx * (s.lx / s.magnitude) + c1.vy * (s.ly / s.magnitude);\n\n      //Project the c1's velocity onto the surface's left normal\n      p1B.x = dp2 * (s.lx / s.magnitude);\n      p1B.y = dp2 * (s.ly / s.magnitude);\n\n      //3. Bounce c2 off the surface (s)\n\n      //Find the dot product between c2 and the surface\n      let dp3 = c2.vx * s.dx + c2.vy * s.dy;\n\n      //Project c2's velocity onto the collision surface\n      p2A.x = dp3 * s.dx;\n      p2A.y = dp3 * s.dy;\n\n      //Find the dot product of c2 and the surface's left normal (s.lx and s.ly)\n      let dp4 = c2.vx * (s.lx / s.magnitude) + c2.vy * (s.ly / s.magnitude);\n\n      //Project c2's velocity onto the surface's left normal\n      p2B.x = dp4 * (s.lx / s.magnitude);\n      p2B.y = dp4 * (s.ly / s.magnitude);\n\n      //4. Calculate the bounce vectors\n\n      //Bounce c1\n      //using p1B and p2A\n      c1.bounce = {};\n      c1.bounce.x = p1B.x + p2A.x;\n      c1.bounce.y = p1B.y + p2A.y;\n\n      //Bounce c2\n      //using p1A and p2B\n      c2.bounce = {};\n      c2.bounce.x = p1A.x + p2B.x;\n      c2.bounce.y = p1A.y + p2B.y;\n\n      //Add the bounce vector to the circles' velocity\n      //and add mass if the circle has a mass property\n      c1.vx = c1.bounce.x / c1.mass;\n      c1.vy = c1.bounce.y / c1.mass;\n      c2.vx = c2.bounce.x / c2.mass;\n      c2.vy = c2.bounce.y / c2.mass;\n    }\n    return hit;\n  }\n\n  /*\n  multipleCircleCollision\n  -----------------------\n\n  Checks all the circles in an array for a collision against\n  all the other circles in an array, using `movingCircleCollision` (above)\n  */\n\n  multipleCircleCollision(arrayOfCircles, global = false) {\n    for (let i = 0; i < arrayOfCircles.length; i++) {\n\n      //The first circle to use in the collision check\n      var c1 = arrayOfCircles[i];\n      for (let j = i + 1; j < arrayOfCircles.length; j++) {\n\n        //The second circle to use in the collision check\n        let c2 = arrayOfCircles[j];\n\n        //Check for a collision and bounce the circles apart if\n        //they collide. Use an optional `mass` property on the sprite\n        //to affect the bounciness of each marble\n        this.movingCircleCollision(c1, c2, global);\n      }\n    }\n  }\n\n  /*\n  rectangleCollision\n  ------------------\n\n  Use it to prevent two rectangular sprites from overlapping.\n  Optionally, make the first rectangle bounce off the second rectangle.\n  Parameters:\n  a. A sprite object with `x`, `y` `centerX`, `centerY`, `halfWidth` and `halfHeight` properties.\n  b. A sprite object with `x`, `y` `centerX`, `centerY`, `halfWidth` and `halfHeight` properties.\n  c. Optional: true or false to indicate whether or not the first sprite\n  should bounce off the second sprite.\n  */\n\n  rectangleCollision(r1, r2, bounce = false, global = true) {\n\n    //Add collision properties\n    if (!r1._bumpPropertiesAdded) this.addCollisionProperties(r1);\n    if (!r2._bumpPropertiesAdded) this.addCollisionProperties(r2);\n\n    let collision, combinedHalfWidths, combinedHalfHeights,\n      overlapX, overlapY, vx, vy;\n\n    //Calculate the distance vector\n    if (global) {\n      vx = (r1.gx + Math.abs(r1.halfWidth) - r1.xAnchorOffset) - (r2.gx + Math.abs(r2.halfWidth) - r2.xAnchorOffset);\n      vy = (r1.gy + Math.abs(r1.halfHeight) - r1.yAnchorOffset) - (r2.gy + Math.abs(r2.halfHeight) - r2.yAnchorOffset);\n    } else {\n      //vx = r1.centerX - r2.centerX;\n      //vy = r1.centerY - r2.centerY;\n      vx = (r1.x + Math.abs(r1.halfWidth) - r1.xAnchorOffset) - (r2.x + Math.abs(r2.halfWidth) - r2.xAnchorOffset);\n      vy = (r1.y + Math.abs(r1.halfHeight) - r1.yAnchorOffset) - (r2.y + Math.abs(r2.halfHeight) - r2.yAnchorOffset);\n    }\n\n    //Figure out the combined half-widths and half-heights\n    combinedHalfWidths = Math.abs(r1.halfWidth) + Math.abs(r2.halfWidth);\n    combinedHalfHeights = Math.abs(r1.halfHeight) + Math.abs(r2.halfHeight);\n\n    //Check whether vx is less than the combined half widths\n    if (Math.abs(vx) < combinedHalfWidths) {\n\n      //A collision might be occurring!\n      //Check whether vy is less than the combined half heights\n      if (Math.abs(vy) < combinedHalfHeights) {\n\n        //A collision has occurred! This is good!\n        //Find out the size of the overlap on both the X and Y axes\n        overlapX = combinedHalfWidths - Math.abs(vx);\n        overlapY = combinedHalfHeights - Math.abs(vy);\n\n        //The collision has occurred on the axis with the\n        //*smallest* amount of overlap. Let's figure out which\n        //axis that is\n\n        if (overlapX >= overlapY) {\n          //The collision is happening on the X axis\n          //But on which side? vy can tell us\n\n          if (vy > 0) {\n            collision = \"top\";\n            //Move the rectangle out of the collision\n            r1.y = r1.y + overlapY;\n          } else {\n            collision = \"bottom\";\n            //Move the rectangle out of the collision\n            r1.y = r1.y - overlapY;\n          }\n\n          //Bounce\n          if (bounce) {\n            r1.vy *= -1;\n\n            /*Alternative\n            //Find the bounce surface's vx and vy properties\n            var s = {};\n            s.vx = r2.x - r2.x + r2.width;\n            s.vy = 0;\n\n            //Bounce r1 off the surface\n            //this.bounceOffSurface(r1, s);\n            */\n\n          }\n        } else {\n          //The collision is happening on the Y axis\n          //But on which side? vx can tell us\n\n          if (vx > 0) {\n            collision = \"left\";\n            //Move the rectangle out of the collision\n            r1.x = r1.x + overlapX;\n          } else {\n            collision = \"right\";\n            //Move the rectangle out of the collision\n            r1.x = r1.x - overlapX;\n          }\n\n          //Bounce\n          if (bounce) {\n            r1.vx *= -1;\n\n            /*Alternative\n            //Find the bounce surface's vx and vy properties\n            var s = {};\n            s.vx = 0;\n            s.vy = r2.y - r2.y + r2.height;\n\n            //Bounce r1 off the surface\n            this.bounceOffSurface(r1, s);\n            */\n\n          }\n        }\n      } else {\n        //No collision\n      }\n    } else {\n      //No collision\n    }\n\n    //Return the collision string. it will be either \"top\", \"right\",\n    //\"bottom\", or \"left\" depending on which side of r1 is touching r2.\n    return collision;\n  }\n\n  /*\n  hitTestRectangle\n  ----------------\n\n  Use it to find out if two rectangular sprites are touching.\n  Parameters:\n  a. A sprite object with `centerX`, `centerY`, `halfWidth` and `halfHeight` properties.\n  b. A sprite object with `centerX`, `centerY`, `halfWidth` and `halfHeight` properties.\n\n  */\n\n  hitTestRectangle(r1, r2, global = false) {\n\n    //Add collision properties\n    if (!r1._bumpPropertiesAdded) this.addCollisionProperties(r1);\n    if (!r2._bumpPropertiesAdded) this.addCollisionProperties(r2);\n\n    let hit, combinedHalfWidths, combinedHalfHeights, vx, vy;\n\n    //A variable to determine whether there's a collision\n    hit = false;\n\n    //Calculate the distance vector\n    if (global) {\n      vx = (r1.gx + Math.abs(r1.halfWidth) - r1.xAnchorOffset) - (r2.gx + Math.abs(r2.halfWidth) - r2.xAnchorOffset);\n      vy = (r1.gy + Math.abs(r1.halfHeight) - r1.yAnchorOffset) - (r2.gy + Math.abs(r2.halfHeight) - r2.yAnchorOffset);\n    } else {\n      vx = (r1.x + Math.abs(r1.halfWidth) - r1.xAnchorOffset) - (r2.x + Math.abs(r2.halfWidth) - r2.xAnchorOffset);\n      vy = (r1.y + Math.abs(r1.halfHeight) - r1.yAnchorOffset) - (r2.y + Math.abs(r2.halfHeight) - r2.yAnchorOffset);\n    }\n\n    //Figure out the combined half-widths and half-heights\n    combinedHalfWidths = Math.abs(r1.halfWidth) + Math.abs(r2.halfWidth);\n    combinedHalfHeights = Math.abs(r1.halfHeight) + Math.abs(r2.halfHeight);\n\n    //Check for a collision on the x axis\n    if (Math.abs(vx) < combinedHalfWidths) {\n\n      //A collision might be occuring. Check for a collision on the y axis\n      if (Math.abs(vy) < combinedHalfHeights) {\n\n        //There's definitely a collision happening\n        hit = true;\n      } else {\n\n        //There's no collision on the y axis\n        hit = false;\n      }\n    } else {\n\n      //There's no collision on the x axis\n      hit = false;\n    }\n\n    //`hit` will be either `true` or `false`\n    return hit;\n  }\n\n  /*\n  hitTestCircleRectangle\n  ----------------\n\n  Use it to find out if a circular shape is touching a rectangular shape\n  Parameters:\n  a. A sprite object with `centerX`, `centerY`, `halfWidth` and `halfHeight` properties.\n  b. A sprite object with `centerX`, `centerY`, `halfWidth` and `halfHeight` properties.\n\n  */\n\n  hitTestCircleRectangle(c1, r1, global = false) {\n\n    //Add collision properties\n    if (!r1._bumpPropertiesAdded) this.addCollisionProperties(r1);\n    if (!c1._bumpPropertiesAdded) this.addCollisionProperties(c1);\n\n    let region, collision, c1x, c1y, r1x, r1y;\n\n    //Use either global or local coordinates\n    if (global) {\n      c1x = c1.gx;\n      c1y = c1.gy\n      r1x = r1.gx;\n      r1y = r1.gy;\n    } else {\n      c1x = c1.x;\n      c1y = c1.y;\n      r1x = r1.x;\n      r1y = r1.y;\n    }\n\n    //Is the circle above the rectangle's top edge?\n    if (c1y - c1.yAnchorOffset < r1y - Math.abs(r1.halfHeight) - r1.yAnchorOffset) {\n\n      //If it is, we need to check whether it's in the\n      //top left, top center or top right\n      if (c1x - c1.xAnchorOffset < r1x - 1 - Math.abs(r1.halfWidth) - r1.xAnchorOffset) {\n        region = \"topLeft\";\n      } else if (c1x - c1.xAnchorOffset > r1x + 1 + Math.abs(r1.halfWidth) - r1.xAnchorOffset) {\n        region = \"topRight\";\n      } else {\n        region = \"topMiddle\";\n      }\n    }\n\n    //The circle isn't above the top edge, so it might be\n    //below the bottom edge\n    else if (c1y - c1.yAnchorOffset > r1y + Math.abs(r1.halfHeight) - r1.yAnchorOffset) {\n\n      //If it is, we need to check whether it's in the bottom left,\n      //bottom center, or bottom right\n      if (c1x - c1.xAnchorOffset < r1x - 1 - Math.abs(r1.halfWidth) - r1.xAnchorOffset) {\n        region = \"bottomLeft\";\n      } else if (c1x - c1.xAnchorOffset > r1x + 1 + Math.abs(r1.halfWidth) - r1.xAnchorOffset) {\n        region = \"bottomRight\";\n      } else {\n        region = \"bottomMiddle\";\n      }\n    }\n\n    //The circle isn't above the top edge or below the bottom edge,\n    //so it must be on the left or right side\n    else {\n      if (c1x - c1.xAnchorOffset < r1x - Math.abs(r1.halfWidth) - r1.xAnchorOffset) {\n        region = \"leftMiddle\";\n      } else {\n        region = \"rightMiddle\";\n      }\n    }\n\n    //Is this the circle touching the flat sides\n    //of the rectangle?\n    if (region === \"topMiddle\" || region === \"bottomMiddle\" || region === \"leftMiddle\" || region === \"rightMiddle\") {\n\n      //Yes, it is, so do a standard rectangle vs. rectangle collision test\n      collision = this.hitTestRectangle(c1, r1, global);\n    }\n\n    //The circle is touching one of the corners, so do a\n    //circle vs. point collision test\n    else {\n      let point = {x: undefined, y: undefined};\n\n      switch (region) {\n        case \"topLeft\":\n          point.x = r1x - r1.xAnchorOffset;\n          point.y = r1y - r1.yAnchorOffset;\n          break;\n\n        case \"topRight\":\n          point.x = r1x + r1.width - r1.xAnchorOffset;\n          point.y = r1y - r1.yAnchorOffset;\n          break;\n\n        case \"bottomLeft\":\n          point.x = r1x - r1.xAnchorOffset;\n          point.y = r1y + r1.height - r1.yAnchorOffset;\n          break;\n\n        case \"bottomRight\":\n          point.x = r1x + r1.width - r1.xAnchorOffset;\n          point.y = r1y + r1.height - r1.yAnchorOffset;\n      }\n\n      //Check for a collision between the circle and the point\n      collision = this.hitTestCirclePoint(c1, point, global);\n    }\n\n    //Return the result of the collision.\n    //The return value will be `undefined` if there's no collision\n    if (collision) {\n      return region;\n    } else {\n      return collision;\n    }\n  }\n\n  /*\n  hitTestCirclePoint\n  ------------------\n\n  Use it to find out if a circular shape is touching a point\n  Parameters:\n  a. A sprite object with `centerX`, `centerY`, and `radius` properties.\n  b. A point object with `x` and `y` properties.\n\n  */\n\n  hitTestCirclePoint(c1, point, global = false) {\n\n    //Add collision properties\n    if (!c1._bumpPropertiesAdded) this.addCollisionProperties(c1);\n\n    //A point is just a circle with a diameter of\n    //1 pixel, so we can cheat. All we need to do is an ordinary circle vs. circle\n    //Collision test. Just supply the point with the properties\n    //it needs\n    point.diameter = 1;\n    point.width = point.diameter;\n    point.radius = 0.5;\n    point.centerX = point.x;\n    point.centerY = point.y;\n    point.gx = point.x;\n    point.gy = point.y;\n    point.xAnchorOffset = 0;\n    point.yAnchorOffset = 0;\n    point._bumpPropertiesAdded = true;\n    return this.hitTestCircle(c1, point, global);\n  }\n\n  /*\n  circleRectangleCollision\n  ------------------------\n\n  Use it to bounce a circular shape off a rectangular shape\n  Parameters:\n  a. A sprite object with `centerX`, `centerY`, `halfWidth` and `halfHeight` properties.\n  b. A sprite object with `centerX`, `centerY`, `halfWidth` and `halfHeight` properties.\n\n  */\n\n  circleRectangleCollision(c1, r1, bounce = false, global = false) {\n\n    //Add collision properties\n    if (!r1._bumpPropertiesAdded) this.addCollisionProperties(r1);\n    if (!c1._bumpPropertiesAdded) this.addCollisionProperties(c1);\n\n    let region, collision, c1x, c1y, r1x, r1y;\n\n    //Use either the global or local coordinates\n    if (global) {\n      c1x = c1.gx;\n      c1y = c1.gy;\n      r1x = r1.gx;\n      r1y = r1.gy;\n    } else {\n      c1x = c1.x;\n      c1y = c1.y;\n      r1x = r1.x;\n      r1y = r1.y;\n    }\n\n    //Is the circle above the rectangle's top edge?\n    if (c1y - c1.yAnchorOffset < r1y - Math.abs(r1.halfHeight) - r1.yAnchorOffset) {\n\n      //If it is, we need to check whether it's in the\n      //top left, top center or top right\n      if (c1x - c1.xAnchorOffset < r1x - 1 - Math.abs(r1.halfWidth) - r1.xAnchorOffset) {\n        region = \"topLeft\";\n      } else if (c1x - c1.xAnchorOffset > r1x + 1 + Math.abs(r1.halfWidth) - r1.xAnchorOffset) {\n        region = \"topRight\";\n      } else {\n        region = \"topMiddle\";\n      }\n    }\n\n    //The circle isn't above the top edge, so it might be\n    //below the bottom edge\n    else if (c1y - c1.yAnchorOffset > r1y + Math.abs(r1.halfHeight) - r1.yAnchorOffset) {\n\n      //If it is, we need to check whether it's in the bottom left,\n      //bottom center, or bottom right\n      if (c1x - c1.xAnchorOffset < r1x - 1 - Math.abs(r1.halfWidth) - r1.xAnchorOffset) {\n        region = \"bottomLeft\";\n      } else if (c1x - c1.xAnchorOffset > r1x + 1 + Math.abs(r1.halfWidth) - r1.xAnchorOffset) {\n        region = \"bottomRight\";\n      } else {\n        region = \"bottomMiddle\";\n      }\n    }\n\n    //The circle isn't above the top edge or below the bottom edge,\n    //so it must be on the left or right side\n    else {\n      if (c1x - c1.xAnchorOffset < r1x - Math.abs(r1.halfWidth) - r1.xAnchorOffset) {\n        region = \"leftMiddle\";\n      } else {\n        region = \"rightMiddle\";\n      }\n    }\n\n    //Is this the circle touching the flat sides\n    //of the rectangle?\n    if (region === \"topMiddle\" || region === \"bottomMiddle\" || region === \"leftMiddle\" || region === \"rightMiddle\") {\n\n      //Yes, it is, so do a standard rectangle vs. rectangle collision test\n      collision = this.rectangleCollision(c1, r1, bounce, global);\n    }\n\n    //The circle is touching one of the corners, so do a\n    //circle vs. point collision test\n    else {\n      let point = {x: undefined, y: undefined};\n\n      switch (region) {\n        case \"topLeft\":\n          point.x = r1x - r1.xAnchorOffset;\n          point.y = r1y - r1.yAnchorOffset;\n          break;\n\n        case \"topRight\":\n          point.x = r1x + r1.width - r1.xAnchorOffset;\n          point.y = r1y - r1.yAnchorOffset;\n          break;\n\n        case \"bottomLeft\":\n          point.x = r1x - r1.xAnchorOffset;\n          point.y = r1y + r1.height - r1.yAnchorOffset;\n          break;\n\n        case \"bottomRight\":\n          point.x = r1x + r1.width - r1.xAnchorOffset;\n          point.y = r1y + r1.height - r1.yAnchorOffset;\n      }\n\n      //Check for a collision between the circle and the point\n      collision = this.circlePointCollision(c1, point, bounce, global);\n    }\n\n    if (collision) {\n      return region;\n    } else {\n      return collision;\n    }\n  }\n\n  /*\n  circlePointCollision\n  --------------------\n\n  Use it to boucnce a circle off a point.\n  Parameters:\n  a. A sprite object with `centerX`, `centerY`, and `radius` properties.\n  b. A point object with `x` and `y` properties.\n\n  */\n\n  circlePointCollision(c1, point, bounce = false, global = false) {\n\n    //Add collision properties\n    if (!c1._bumpPropertiesAdded) this.addCollisionProperties(c1);\n\n    //A point is just a circle with a diameter of\n    //1 pixel, so we can cheat. All we need to do is an ordinary circle vs. circle\n    //Collision test. Just supply the point with the properties\n    //it needs\n    point.diameter = 1;\n    point.width = point.diameter;\n    point.radius = 0.5;\n    point.centerX = point.x;\n    point.centerY = point.y;\n    point.gx = point.x;\n    point.gy = point.y;\n    point.xAnchorOffset = 0;\n    point.yAnchorOffset = 0;\n    point._bumpPropertiesAdded = true;\n    return this.circleCollision(c1, point, bounce, global);\n  }\n\n  /*\n  bounceOffSurface\n  ----------------\n\n  Use this to bounce an object off another object.\n  Parameters:\n  a. An object with `v.x` and `v.y` properties. This represents the object that is colliding\n  with a surface.\n  b. An object with `x` and `y` properties. This represents the surface that the object\n  is colliding into.\n  The first object can optionally have a mass property that's greater than 1. The mass will\n  be used to dampen the bounce effect.\n  */\n\n  bounceOffSurface(o, s) {\n\n    //Add collision properties\n    if (!o._bumpPropertiesAdded) this.addCollisionProperties(o);\n\n    let dp1, dp2,\n      p1 = {vx: undefined, vy: undefined},\n      p2 = {vx: undefined, vy: undefined},\n      bounce = {x: undefined, y: undefined},\n      mass = o.mass || 1;\n\n    //1. Calculate the collision surface's properties\n    //Find the surface vector's left normal\n    s.lx = s.y;\n    s.ly = -s.x;\n\n    //Find its magnitude\n    s.magnitude = Math.sqrt(s.x * s.x + s.y * s.y);\n\n    //Find its normalized values\n    s.dx = s.x / s.magnitude;\n    s.dy = s.y / s.magnitude;\n\n    //2. Bounce the object (o) off the surface (s)\n\n    //Find the dot product between the object and the surface\n    dp1 = o.vx * s.dx + o.vy * s.dy;\n\n    //Project the object's velocity onto the collision surface\n    p1.vx = dp1 * s.dx;\n    p1.vy = dp1 * s.dy;\n\n    //Find the dot product of the object and the surface's left normal (s.lx and s.ly)\n    dp2 = o.vx * (s.lx / s.magnitude) + o.vy * (s.ly / s.magnitude);\n\n    //Project the object's velocity onto the surface's left normal\n    p2.vx = dp2 * (s.lx / s.magnitude);\n    p2.vy = dp2 * (s.ly / s.magnitude);\n\n    //Reverse the projection on the surface's left normal\n    p2.vx *= -1;\n    p2.vy *= -1;\n\n    //Add up the projections to create a new bounce vector\n    bounce.x = p1.vx + p2.vx;\n    bounce.y = p1.vy + p2.vy;\n\n    //Assign the bounce vector to the object's velocity\n    //with optional mass to dampen the effect\n    o.vx = bounce.x / mass;\n    o.vy = bounce.y / mass;\n  }\n\n  /*\n  contain\n  -------\n  `contain` can be used to contain a sprite with `x` and\n  `y` properties inside a rectangular area.\n\n  The `contain` function takes four arguments: a sprite with `x` and `y`\n  properties, an object literal with `x`, `y`, `width` and `height` properties. The\n  third argument is a Boolean (true/false) value that determines if the sprite\n  should bounce when it hits the edge of the container. The fourth argument\n  is an extra user-defined callback function that you can call when the\n  sprite hits the container\n  ```js\n  contain(anySprite, {x: 0, y: 0, width: 512, height: 512}, true, callbackFunction);\n  ```\n  The code above will contain the sprite's position inside the 512 by\n  512 pixel area defined by the object. If the sprite hits the edges of\n  the container, it will bounce. The `callBackFunction` will run if\n  there's a collision.\n\n  An additional feature of the `contain` method is that if the sprite\n  has a `mass` property, it will be used to dampen the sprite's bounce\n  in a natural looking way.\n\n  If the sprite bumps into any of the containing object's boundaries,\n  the `contain` function will return a value that tells you which side\n  the sprite bumped into: “left”, “top”, “right” or “bottom”. Here's how\n  you could keep the sprite contained and also find out which boundary\n  it hit:\n  ```js\n  //Contain the sprite and find the collision value\n  let collision = contain(anySprite, {x: 0, y: 0, width: 512, height: 512});\n\n  //If there's a collision, display the boundary that the collision happened on\n  if(collision) {\n    if collision.has(\"left\") console.log(\"The sprite hit the left\");\n    if collision.has(\"top\") console.log(\"The sprite hit the top\");\n    if collision.has(\"right\") console.log(\"The sprite hit the right\");\n    if collision.has(\"bottom\") console.log(\"The sprite hit the bottom\");\n  }\n  ```\n  If the sprite doesn't hit a boundary, the value of\n  `collision` will be `undefined`.\n  */\n\n  /*\n   contain(sprite, container, bounce = false, extra = undefined) {\n\n     //Helper methods that compensate for any possible shift the the\n     //sprites' anchor points\n     let nudgeAnchor = (o, value, axis) => {\n       if (o.anchor !== undefined) {\n         if (o.anchor[axis] !== 0) {\n           return value * ((1 - o.anchor[axis]) - o.anchor[axis]);\n         } else {\n           return value;\n         }\n       } else {\n         return value;\n       }\n     };\n\n     let compensateForAnchor = (o, value, axis) => {\n       if (o.anchor !== undefined) {\n         if (o.anchor[axis] !== 0) {\n           return value * o.anchor[axis];\n         } else {\n           return 0;\n         }\n       } else {\n         return 0;\n       }\n     };\n\n     let compensateForAnchors = (a, b, property1, property2) => {\n        return compensateForAnchor(a, a[property1], property2) + compensateForAnchor(b, b[property1], property2)\n     };\n     //Create a set called `collision` to keep track of the\n     //boundaries with which the sprite is colliding\n     let collision = new Set();\n\n     //Left\n     if (sprite.x - compensateForAnchor(sprite, sprite.width, \"x\") < container.x - sprite.parent.gx - compensateForAnchor(container, container.width, \"x\")) {\n       //Bounce the sprite if `bounce` is true\n       if (bounce) sprite.vx *= -1;\n\n       //If the sprite has `mass`, let the mass\n       //affect the sprite's velocity\n       if(sprite.mass) sprite.vx /= sprite.mass;\n\n       //Keep the sprite inside the container\n       sprite.x = container.x - sprite.parent.gx + compensateForAnchor(sprite, sprite.width, \"x\") - compensateForAnchor(container, container.width, \"x\");\n\n       //Add \"left\" to the collision set\n       collision.add(\"left\");\n     }\n\n     //Top\n     if (sprite.y - compensateForAnchor(sprite, sprite.height, \"y\") < container.y - sprite.parent.gy - compensateForAnchor(container, container.height, \"y\")) {\n       if (bounce) sprite.vy *= -1;\n       if(sprite.mass) sprite.vy /= sprite.mass;\n       sprite.y = container.x - sprite.parent.gy + compensateForAnchor(sprite, sprite.height, \"y\") - compensateForAnchor(container, container.height, \"y\");\n       collision.add(\"top\");\n     }\n\n     //Right\n     if (sprite.x - compensateForAnchor(sprite, sprite.width, \"x\") + sprite.width > container.width - compensateForAnchor(container, container.width, \"x\")) {\n       if (bounce) sprite.vx *= -1;\n       if(sprite.mass) sprite.vx /= sprite.mass;\n       sprite.x = container.width - sprite.width + compensateForAnchor(sprite, sprite.width, \"x\") - compensateForAnchor(container, container.width, \"x\");\n       collision.add(\"right\");\n     }\n\n     //Bottom\n     if (sprite.y - compensateForAnchor(sprite, sprite.height, \"y\") + sprite.height > container.height - compensateForAnchor(container, container.height, \"y\")) {\n       if (bounce) sprite.vy *= -1;\n       if(sprite.mass) sprite.vy /= sprite.mass;\n       sprite.y = container.height - sprite.height + compensateForAnchor(sprite, sprite.height, \"y\") - compensateForAnchor(container, container.height, \"y\");\n       collision.add(\"bottom\");\n     }\n\n     //If there were no collisions, set `collision` to `undefined`\n     if (collision.size === 0) collision = undefined;\n\n     //The `extra` function runs if there was a collision\n     //and `extra` has been defined\n     if (collision && extra) extra(collision);\n\n     //Return the `collision` value\n     return collision;\n   }\n   */\n  contain(sprite, container, bounce = false, extra = undefined) {\n\n    //Add collision properties\n    if (!sprite._bumpPropertiesAdded) this.addCollisionProperties(sprite);\n\n    //Give the container x and y anchor offset values, if it doesn't\n    //have any\n    if (container.xAnchorOffset === undefined) container.xAnchorOffset = 0;\n    if (container.yAnchorOffset === undefined) container.yAnchorOffset = 0;\n    if (sprite.parent.gx === undefined) sprite.parent.gx = 0;\n    if (sprite.parent.gy === undefined) sprite.parent.gy = 0;\n\n    //Create a Set called `collision` to keep track of the\n    //boundaries with which the sprite is colliding\n    let collision = new Set();\n\n    //Left\n    if (sprite.x - sprite.xAnchorOffset < container.x - sprite.parent.gx - container.xAnchorOffset) {\n\n      //Bounce the sprite if `bounce` is true\n      if (bounce) sprite.vx *= -1;\n\n      //If the sprite has `mass`, let the mass\n      //affect the sprite's velocity\n      if (sprite.mass) sprite.vx /= sprite.mass;\n\n      //Reposition the sprite inside the container\n      sprite.x = container.x - sprite.parent.gx - container.xAnchorOffset + sprite.xAnchorOffset;\n\n      //Make a record of the side which the container hit\n      collision.add(\"left\");\n    }\n\n    //Top\n    if (sprite.y - sprite.yAnchorOffset < container.y - sprite.parent.gy - container.yAnchorOffset) {\n      if (bounce) sprite.vy *= -1;\n      if (sprite.mass) sprite.vy /= sprite.mass;\n      sprite.y = container.y - sprite.parent.gy - container.yAnchorOffset + sprite.yAnchorOffset;\n      ;\n      collision.add(\"top\");\n    }\n\n    //Right\n    if (sprite.x - sprite.xAnchorOffset + sprite.width > container.width - container.xAnchorOffset) {\n      if (bounce) sprite.vx *= -1;\n      if (sprite.mass) sprite.vx /= sprite.mass;\n      sprite.x = container.width - sprite.width - container.xAnchorOffset + sprite.xAnchorOffset;\n      collision.add(\"right\");\n    }\n\n    //Bottom\n    if (sprite.y - sprite.yAnchorOffset + sprite.height > container.height - container.yAnchorOffset) {\n      if (bounce) sprite.vy *= -1;\n      if (sprite.mass) sprite.vy /= sprite.mass;\n      sprite.y = container.height - sprite.height - container.yAnchorOffset + sprite.yAnchorOffset;\n      collision.add(\"bottom\");\n    }\n\n    //If there were no collisions, set `collision` to `undefined`\n    if (collision.size === 0) collision = undefined;\n\n    //The `extra` function runs if there was a collision\n    //and `extra` has been defined\n    if (collision && extra) extra(collision);\n\n    //Return the `collision` value\n    return collision;\n  }\n\n  //`outsideBounds` checks whether a sprite is outide the boundary of\n  //another object. It returns an object called `collision`. `collision` will be `undefined` if there's no\n  //collision. But if there is a collision, `collision` will be\n  //returned as a Set containg strings that tell you which boundary\n  //side was crossed: \"left\", \"right\", \"top\" or \"bottom\"\n  outsideBounds(s, bounds, extra) {\n\n    let x = bounds.x,\n      y = bounds.y,\n      width = bounds.width,\n      height = bounds.height;\n\n    //The `collision` object is used to store which\n    //side of the containing rectangle the sprite hits\n    let collision = new Set();\n\n    //Left\n    if (s.x < x - s.width) {\n      collision.add(\"left\");\n    }\n    //Top\n    if (s.y < y - s.height) {\n      collision.add(\"top\");\n    }\n    //Right\n    if (s.x > width + s.width) {\n      collision.add(\"right\");\n    }\n    //Bottom\n    if (s.y > height + s.height) {\n      collision.add(\"bottom\");\n    }\n\n    //If there were no collisions, set `collision` to `undefined`\n    if (collision.size === 0) collision = undefined;\n\n    //The `extra` function runs if there was a collision\n    //and `extra` has been defined\n    if (collision && extra) extra(collision);\n\n    //Return the `collision` object\n    return collision;\n  }\n\n  /*\n  _getCenter\n  ----------\n\n  A utility that finds the center point of the sprite. If it's anchor point is the\n  sprite's top left corner, then the center is calculated from that point.\n  If the anchor point has been shifted, then the anchor x/y point is used as the sprite's center\n  */\n\n  _getCenter(o, dimension, axis) {\n    if (o.anchor !== undefined) {\n      if (o.anchor[axis] !== 0) {\n        return 0;\n      } else {\n        //console.log(o.anchor[axis])\n        return dimension / 2;\n      }\n    } else {\n      return dimension;\n    }\n  }\n\n\n  /*\n  hit\n  ---\n  A convenient universal collision function to test for collisions\n  between rectangles, circles, and points.\n  */\n\n  hit(a, b, react = false, bounce = false, global, extra = undefined) {\n\n    //Local references to bump's collision methods\n    let hitTestPoint = this.hitTestPoint.bind(this),\n      hitTestRectangle = this.hitTestRectangle.bind(this),\n      hitTestCircle = this.hitTestCircle.bind(this),\n      movingCircleCollision = this.movingCircleCollision.bind(this),\n      circleCollision = this.circleCollision.bind(this),\n      hitTestCircleRectangle = this.hitTestCircleRectangle.bind(this),\n      rectangleCollision = this.rectangleCollision.bind(this),\n      circleRectangleCollision = this.circleRectangleCollision.bind(this);\n\n    let collision,\n      aIsASprite = a.parent !== undefined,\n      bIsASprite = b.parent !== undefined;\n\n    //Check to make sure one of the arguments isn't an array\n    if (aIsASprite && b instanceof Array || bIsASprite && a instanceof Array) {\n      //If it is, check for a collision between a sprite and an array\n      spriteVsArray();\n    } else {\n      //If one of the arguments isn't an array, find out what type of\n      //collision check to run\n      collision = findCollisionType(a, b);\n      if (collision && extra) extra(collision);\n    }\n\n    //Return the result of the collision.\n    //It will be `undefined` if there's no collision and `true` if\n    //there is a collision. `rectangleCollision` sets `collsision` to\n    //\"top\", \"bottom\", \"left\" or \"right\" depeneding on which side the\n    //collision is occuring on\n    return collision;\n\n    function findCollisionType(a, b) {\n      //Are `a` and `b` both sprites?\n      //(We have to check again if this function was called from\n      //`spriteVsArray`)\n      let aIsASprite = a.parent !== undefined;\n      let bIsASprite = b.parent !== undefined;\n\n      if (aIsASprite && bIsASprite) {\n        //Yes, but what kind of sprites?\n        if (a.diameter && b.diameter) {\n          //They're circles\n          return circleVsCircle(a, b);\n        } else if (a.diameter && !b.diameter) {\n          //The first one is a circle and the second is a rectangle\n          return circleVsRectangle(a, b);\n        } else {\n          //They're rectangles\n          return rectangleVsRectangle(a, b);\n        }\n      }\n      //They're not both sprites, so what are they?\n      //Is `a` not a sprite and does it have x and y properties?\n      else if (bIsASprite && !(a.x === undefined) && !(a.y === undefined)) {\n        //Yes, so this is a point vs. sprite collision test\n        return hitTestPoint(a, b);\n      } else {\n        //The user is trying to test some incompatible objects\n        throw new Error(`I'm sorry, ${a} and ${b} cannot be use together in a collision test.'`);\n      }\n    }\n\n    function spriteVsArray() {\n      //If `a` happens to be the array, flip it around so that it becomes `b`\n      let b;\n      if (a instanceof Array) {\n        [a, b] = [b, a];\n      }\n      //Loop through the array in reverse\n      for (let i = b.length - 1; i >= 0; i--) {\n        let sprite = b[i];\n        collision = findCollisionType(a, sprite);\n        if (collision && extra) extra(collision, sprite);\n      }\n    }\n\n    function circleVsCircle(a, b) {\n      //If the circles shouldn't react to the collision,\n      //just test to see if they're touching\n      if (!react) {\n        return hitTestCircle(a, b);\n      }\n      //Yes, the circles should react to the collision\n      else {\n        //Are they both moving?\n        if (a.vx + a.vy !== 0 && b.vx + b.vy !== 0) {\n          //Yes, they are both moving\n          //(moving circle collisions always bounce apart so there's\n          //no need for the third, `bounce`, argument)\n          return movingCircleCollision(a, b, global);\n        } else {\n          //No, they're not both moving\n          return circleCollision(a, b, bounce, global);\n        }\n      }\n    }\n\n    function rectangleVsRectangle(a, b) {\n      //If the rectangles shouldn't react to the collision, just\n      //test to see if they're touching\n      if (!react) {\n        return hitTestRectangle(a, b, global);\n      } else {\n        return rectangleCollision(a, b, bounce, global);\n      }\n    }\n\n    function circleVsRectangle(a, b) {\n      //If the rectangles shouldn't react to the collision, just\n      //test to see if they're touching\n      if (!react) {\n        return hitTestCircleRectangle(a, b, global);\n      } else {\n        return circleRectangleCollision(a, b, bounce, global);\n      }\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/app/ext/bump.ts","export class NavigationRecord {\r\n  navigatable: boolean = true;\r\n  children?: NavigationRecord[] = [];\r\n  public expanded: boolean;\r\n  parent: NavigationRecord;\r\n\r\n  constructor(public id: string,\r\n              public name: string,\r\n              public code: string) {\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/app/models/navigation-record.ts","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport {DocumentListComponent} from \"../components/document-list/document-list.component\";\nimport {DocumentEditorComponent} from \"../components/document-editor/document-editor.component\";\nimport {LevelEditorComponent} from \"../components/level-editor/level-editor.component\";\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: DocumentListComponent,\n    children: []\n  },\n  {\n    path: 'editor/:id',\n    component: DocumentEditorComponent,\n    children: []\n  },\n  {\n    path: 'level-editor',\n    component: LevelEditorComponent,\n    children: []\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forRoot(routes)],\n  exports: [RouterModule]\n})\nexport class AppRoutingModule { }\n\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/app/modules/app-routing.module.ts","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport {\r\n  MatButtonModule, MatCardModule, MatCheckboxModule, MatChipsModule, MatDialogModule, MatExpansionModule,\r\n  MatFormFieldModule, MatIconModule,\r\n  MatInputModule, MatListModule, MatMenuModule, MatOption, MatSelect, MatSelectModule,\r\n  MatSidenavModule\r\n} from \"@angular/material\";\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    MatButtonModule,\r\n    MatCardModule,\r\n    MatDialogModule,\r\n    MatIconModule,\r\n    MatFormFieldModule,\r\n    MatCardModule,\r\n    MatInputModule,\r\n    MatCheckboxModule,\r\n    MatSelectModule,\r\n    MatListModule,\r\n    MatChipsModule,\r\n    MatMenuModule\r\n  ],\r\n  exports: [\r\n    MatButtonModule,\r\n    MatCardModule,\r\n    MatDialogModule,\r\n    MatExpansionModule,\r\n    MatSidenavModule,\r\n    MatIconModule,\r\n    MatFormFieldModule,\r\n    MatCardModule,\r\n    MatInputModule,\r\n    MatCheckboxModule,\r\n    MatSelectModule,\r\n    MatListModule,\r\n    MatChipsModule,\r\n    MatMenuModule\r\n  ],\r\n  declarations: []\r\n})\r\nexport class MaterialModule { }\r\n\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/app/modules/material.module.ts","import {IEventEmitter} from \"../api/src/ts/interfaces/IEventEmitter\";\r\nimport {Observable} from \"rxjs/Observable\";\r\nimport {IEventArgs} from \"../api/src/ts/interfaces/IEventArgs\";\r\nimport {Observer} from \"rxjs/Observer\";\r\n\r\nexport class ObservableListener {\r\n  public static create<T>(eventEmitter: IEventEmitter<T>, event: T): Observable<IEventArgs> {\r\n    return Observable.create((observer: Observer<IEventArgs>) => {\r\n      const listener = (e: IEventArgs) => observer.next(e);\r\n      eventEmitter.addListener(event, listener);\r\n      return () => eventEmitter.deleteListener(event, listener);\r\n    });\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/app/observable-listener.ts","import {Injectable} from '@angular/core';\r\nimport {getApplication} from \"../../api/src/ts/entryPoint\";\r\nimport {IApplication} from \"../../api/src/ts/interfaces/IApplication\";\r\n\r\n@Injectable()\r\nexport class AppApiService {\r\n  public app: IApplication;\r\n\r\n  constructor() {\r\n    this.app = getApplication();\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/app/services/app-api.service.ts","import {Injectable} from '@angular/core';\r\nimport {AppApiService} from \"./app-api.service\";\r\nimport {IDocument} from \"../../api/src/ts/interfaces/IDocument\";\r\nimport {ToastService} from \"./toast.service\";\r\nimport {ILevelNode} from \"../../api/src/ts/interfaces/ILevelNode\";\r\nimport {EditorObject} from \"../components/editor/objects/editor-object\";\r\nimport {TypeNames} from \"../../api/src/ts/enums/TypeNames\";\r\nimport {LevelDto} from \"../components/level-editor/level-dto\";\r\nimport {Observable} from \"rxjs/Observable\";\r\nimport \"rxjs/add/observable/never\";\r\nimport \"rxjs/add/observable/of\";\r\nimport 'rxjs/add/observable/throw';\r\nimport {IResult} from \"../../api/src/ts/interfaces/IResult\";\r\nimport {ICondition} from \"../../api/src/ts/interfaces/ICondition\";\r\nimport {IVariant} from \"../../api/src/ts/interfaces/IVariant\";\r\nimport {forEach} from \"@angular/router/src/utils/collection\";\r\nimport {TransactionStatus} from \"../../api/src/ts/enums/TransactionStatus\";\r\nimport {Subject} from \"rxjs/Subject\";\r\n\r\n@Injectable()\r\nexport class DataService {\r\n  private updateSubject = new Subject();\r\n\r\n  constructor(private apiService: AppApiService, private toastService: ToastService) {\r\n    this.updateSubject.debounce(() => Observable.timer(500)).subscribe(({document, value}) => this.updateEntities(document, value));\r\n  }\r\n\r\n  public createNode(doc: IDocument, parentId: string): Observable<ILevelNode> {\r\n    const transaction = doc.createTransaction();\r\n    transaction.start();\r\n    const curNode = doc.getContext().getLevelNode(parentId);\r\n    const lockRes = curNode.lock();\r\n    if (lockRes.success) {\r\n      let entity = doc.application.factory.createILevelNode(doc, 'блок', 'new');\r\n      const result = doc.getContext().addLevelEntity(parentId, entity);\r\n      if (result.success) {\r\n        transaction.commit();\r\n        return Observable.of(entity);\r\n      }\r\n      else {\r\n        this.toastService.error(result.errorMessage, 'Ошибка создания узла');\r\n        transaction.rollback();\r\n        return Observable.throw(result);\r\n      }\r\n    } else {\r\n      this.toastService.error(lockRes.errorMessage, 'Ошибка блокировки');\r\n      transaction.rollback();\r\n      return Observable.throw(lockRes);\r\n    }\r\n  }\r\n\r\n  public createCondition(doc: IDocument, parentId: string): Observable<ICondition> {\r\n    const t = doc.createTransaction();\r\n    t.start();\r\n    const curNode = doc.getContext().getLevelNode(parentId);\r\n    const lockRes = curNode.lock();\r\n    if (lockRes.success) {\r\n      let condition = doc.application.factory.createICondition(doc, 'блок', 'new');\r\n      const result = doc.getContext().addLevelEntity(parentId, condition);\r\n      if (result.success) {\r\n        const variant1 = doc.getContext().addVariant(condition.id, 'вариант 1');\r\n        const variant2 = doc.getContext().addVariant(condition.id, 'вариант 1');\r\n        if (variant1 !== null && variant2 !== null) {\r\n          t.commit();\r\n        } else {\r\n          this.toastService.error('Не удалось содать условие', 'Ошибка создания условия');\r\n          t.rollback();\r\n          return Observable.throw('Не удалось содать условие');\r\n        }\r\n        return Observable.of(condition);\r\n      }\r\n      else {\r\n        this.toastService.error(lockRes.errorMessage, 'Ошибка создания условия');\r\n        t.rollback();\r\n        return Observable.throw(result);\r\n      }\r\n    } else {\r\n      this.toastService.error(lockRes.errorMessage, 'Ошибка блокировки');\r\n      t.rollback();\r\n      return Observable.throw(lockRes);\r\n    }\r\n  }\r\n\r\n  public createVarian(doc: IDocument, conditionIds: string[], text: string): Observable<IVariant[]> {\r\n    let result: IVariant[] = [];\r\n    const t = doc.createTransaction();\r\n    t.start();\r\n    conditionIds.forEach(conditionId => {\r\n      const condition = doc.getContext().getCondition(conditionId);\r\n      const lockRes = condition.lock();\r\n      if (lockRes.success) {\r\n        let variant = doc.getContext().addVariant(condition.id, 'новый вариант');\r\n        if (variant === null) {\r\n          this.toastService.error('Не удалось создать вариант', 'Ошибка создания варианта');\r\n          t.rollback();\r\n          return Observable.throw('Не удалось создать вариант');\r\n        }\r\n      } else {\r\n        this.toastService.error(lockRes.errorMessage, 'Ошибка блокировки');\r\n        t.rollback();\r\n        return Observable.throw(lockRes);\r\n      }\r\n    });\r\n    t.commit();\r\n    return Observable.of(result);\r\n  }\r\n\r\n  public createConnection(doc: IDocument, sourceBlockId: string, targetBlockId: string): void {\r\n    const t = doc.createTransaction();\r\n    t.start();\r\n\r\n    const startNode = doc.getContext().getLevelNode(sourceBlockId);\r\n    const distNode = doc.getContext().getLevelNode(targetBlockId);\r\n    const startRes = startNode.lock();\r\n    const disrRes = distNode.lock();\r\n    if (startRes.success && disrRes.success) {\r\n      let connection = doc.getContext().addConnection(sourceBlockId, targetBlockId, 'new');\r\n      if (connection != null) {\r\n        t.commit();\r\n      }\r\n      else {\r\n        this.toastService.error('Не удалось создать соединение', 'Ошибка создания соединения');\r\n        t.rollback();\r\n      }\r\n    } else {\r\n      const title = 'Ошибка создания соединения';\r\n      if (!startRes.success) this.toastService.error(startRes.errorMessage, title);\r\n      else this.toastService.error(disrRes.errorMessage, title);\r\n      t.rollback();\r\n    }\r\n  }\r\n\r\n  public updateEntities(document: IDocument, data: any): void {\r\n    if (data !== null && data.items.length > 0) {\r\n\r\n      const t = document.createTransaction();\r\n      t.start();\r\n\r\n      const blocks = data.items.map(id => document.getContext().getObject(id));\r\n      let lockResult: IResult;\r\n      for (let block of blocks) {\r\n        switch (block.typeName) {\r\n          case TypeNames.LevelNode:\r\n            let levelNode = block as ILevelNode;\r\n            lockResult = levelNode.lock();\r\n            if (lockResult.success) {\r\n              levelNode.code = data.code;\r\n              levelNode.name = data.name;\r\n              levelNode.laborCosts = data.laborCosts;\r\n              levelNode.description = data.description;\r\n              //todo сделать назначение роли. софта и автора\r\n            }\r\n            else {\r\n              this.toastService.error(lockResult.errorMessage, 'Ошибка блокировки');\r\n              t.rollback();\r\n              break;\r\n            }\r\n            break;\r\n          case TypeNames.Condition:\r\n            let iCondition = block as ICondition;\r\n            lockResult = iCondition.lock();\r\n            if (lockResult.success) {\r\n              iCondition.code = data.code;\r\n              iCondition.name = data.name;\r\n              iCondition.getVariants().forEach((v, i) => {\r\n                v.text = data.variants[i].text;\r\n              });\r\n            }\r\n            else {\r\n              this.toastService.error(lockResult.errorMessage, 'Ошибка блокировки');\r\n              t.rollback();\r\n              break;\r\n            }\r\n            break;\r\n        }\r\n      }\r\n      if (t.status === TransactionStatus.Started) t.commit();\r\n    }\r\n  }\r\n\r\n  public deleteObjects(document: IDocument, objects: EditorObject[] | string[]) {\r\n    const transaction = document.createTransaction();\r\n    const apiObjects = (<any>objects).map((x: EditorObject | string) => {\r\n      const id: string = typeof x === 'string' ? x : (<EditorObject>x).id;\r\n      return document.getContext().getObject(id);\r\n    });\r\n    transaction.start();\r\n    try {\r\n      apiObjects.forEach((apiObject: any) => {\r\n        if (apiObject.lock) {\r\n          const lockResult = apiObject.lock();\r\n          if (!lockResult.success) throw {message: lockResult.errorMessage, object: apiObject};\r\n        }\r\n      });\r\n    } catch (e) {\r\n      this.toastService.error(e.message, 'Ошибка блокировки');\r\n    }\r\n    apiObjects.forEach(apiObject => {\r\n      switch (apiObject.typeName) {\r\n        case TypeNames.LevelNode:\r\n          document.getContext().deleteLevelEntity(apiObject.id);\r\n          (<ILevelNode>apiObject).getOutputConnections().concat((<ILevelNode>apiObject).getInputConnections()).forEach(connection => {\r\n            document.getContext().deleteConnection(connection.id);\r\n          });\r\n          break;\r\n        case TypeNames.Condition:\r\n          throw 'vasya';\r\n        case TypeNames.Connection:\r\n          document.getContext().deleteConnection(apiObject.id);\r\n          break;\r\n        case TypeNames.Variant:\r\n          (<IVariant>apiObject).getOutputConnections().forEach(connection => {\r\n            document.getContext().deleteConnection(connection.id);\r\n          });\r\n          document.getContext().deleteVariant(apiObject.id);\r\n      }\r\n    });\r\n    transaction.commit();\r\n  }\r\n\r\n  public createDocument(name: string, code: string, levels: LevelDto[]): Observable<IDocument> {\r\n    const document = this.apiService.app.documentManager.create(name, code);\r\n    if (!document) return Observable.throw('Не удалось создать документ');\r\n    const transaction = document.createTransaction();\r\n    transaction.start();\r\n    levels.forEach((x, i) => {\r\n      const level = document.getContext().pushLevel(x.name, x.code, x.color, x.autoNumbering);\r\n      if (!level) {\r\n        transaction.rollback();\r\n        return Observable.throw(`Не удалось создать уровень ${x.code}-${x.name}`);\r\n      }\r\n    });\r\n    const levelEntity = document.application.factory.createILevelNode(document, 'Корневой узел', 'ROOT');\r\n    const rootAddResult = document.getContext().addLevelEntity(null, levelEntity);\r\n    if (!rootAddResult.success) {\r\n      transaction.rollback();\r\n      return Observable.throw(rootAddResult.errorMessage);\r\n    }\r\n    transaction.commit();\r\n    return Observable.of(document);\r\n  }\r\n\r\n  public sync(document: IDocument): Observable<boolean> {\r\n    let syncResult: IResult;\r\n    try {\r\n      syncResult = document.sync();\r\n    } catch (e) {\r\n      return Observable.throw(e.message);\r\n    }\r\n    if (!syncResult.success) {\r\n      return Observable.throw(syncResult.errorMessage);\r\n    }\r\n    return Observable.of(true);\r\n  }\r\n\r\n  public updateEntitiesFromForm(document: IDocument, value: any) {\r\n      for (let p in value) {\r\n        if (value.hasOwnProperty(p) && (value[p] === '*РАЗЛИЧНЫЕ*' || value.p === null)) delete value.p;\r\n      }\r\n      this.updateSubject.next({document: document, value: value});\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/app/services/data.service.ts","import {Injectable, NgZone} from '@angular/core';\nimport {HubConnection} from \"@aspnet/signalr-client\";\n\n@Injectable()\nexport class SignalRService {\n  private connection: HubConnection;\n\n  constructor(private ngZone: NgZone) {\n    const token = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1bmlxdWVfbmFtZSI6InRlbXBAand0LnJ1IiwidXNlcl9pZCI6IjU3ZGM1MWEzMzg5YjMwZmVkMWIxM2Y5MSIsIm5iZiI6MTUxMDI0NzE5MSwiZXhwIjoxNTEwMzMzNTkxLCJpYXQiOjE1MTAyNDcxOTEsImlzcyI6IkV4YW1wbGVJc3N1ZXIiLCJhdWQiOiJFeGFtcGxlQXVkaWVuY2UifQ.noOolXI8Nrg-d1NGhHeqV0pxUvAZ5AmBmp-gt4lGoPA';\n    const connection  = this.connection = new HubConnection('api/test?token='+token);\n    connection.on('DocumentCreated', data => {\n      console.log('document created', data);\n    });\n    connection.on('DocumentUpdated', data => {\n      console.log('document updated', data);\n    });\n\n    this.ngZone.runOutsideAngular(() => connection.start().then(() => this.test()));\n  }\n\n  public test() {\n    this.connection.invoke('send', 'Hello');\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/app/services/signal-r.service.ts","import {Injectable} from '@angular/core';\r\nimport {Subject} from \"rxjs/Subject\";\r\nimport {Observable} from \"rxjs/Observable\";\r\n\r\n@Injectable()\r\nexport class ToastService {\r\n  private subject: Subject<ToastData> = new Subject<ToastData>();\r\n\r\n  public toastObservable: Observable<ToastData> = this.subject.asObservable();\r\n\r\n  constructor() {\r\n  }\r\n\r\n  public info(message: string, title?: string) {\r\n    this.makeToast('info', message, title);\r\n  }\r\n\r\n  public error(message: string, title?: string) {\r\n    this.makeToast('error', message, title);\r\n  }\r\n\r\n  public success(message: string, title?: string) {\r\n    this.makeToast('success', message, title);\r\n  }\r\n\r\n  public warning(message: string, title?: string) {\r\n    this.makeToast('warning', message, title);\r\n  }\r\n\r\n  private makeToast(type, message, title) {\r\n    this.subject.next({type: type, message: message, title: title} as ToastData);\r\n  }\r\n}\r\n\r\nexport interface ToastData {\r\n  type: 'info' | 'success' | 'error' | 'warning';\r\n  message: string;\r\n  title: string;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/app/services/toast.service.ts","import {ToastOptions} from \"ng2-toastr\";\r\n\r\nexport class ToastCustomOptions extends ToastOptions {\r\n  toastLife = 3000;\r\n  animate = 'flyRight';\r\n  showCloseButton = false;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/app/toast-custom-options.ts","// The file contents for the current environment will overwrite these during build.\n// The build system defaults to the dev environment which uses `environment.ts`, but if you do\n// `ng build --env=prod` then `environment.prod.ts` will be used instead.\n// The list of which env maps to which file can be found in `.angular-cli.json`.\n\nexport const environment = {\n  production: false\n};\n\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/environments/environment.ts","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule);\n\n\n\n// WEBPACK FOOTER //\n// G:/Projects/ТхПр/thpr2/src/main.ts","/* (ignored) */\n\n\n//////////////////\n// WEBPACK FOOTER\n// util (ignored)\n// module id = 1\n// module chunks = main","/* (ignored) */\n\n\n//////////////////\n// WEBPACK FOOTER\n// util (ignored)\n// module id = 2\n// module chunks = main"],"sourceRoot":"webpack:///"}